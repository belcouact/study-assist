<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŒ–å­¦èƒ½åŠ›æµ‹è¯• - åŒ–å­¦å­¦ä¹ åŠ©æ‰‹</title>
    <link rel="icon" href="../../assets/icons/logo_btrfly.ico" type="image/x-icon">
    <link rel="stylesheet" href="../../css/common.css">
    <link rel="stylesheet" href="../../css/components.css">
    <link rel="stylesheet" href="../../css/utilities.css">
    <link rel="stylesheet" href="../../css/responsive.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        .testing-hero {
            background: linear-gradient(135deg, #4CAF50 0%, #8BC34A 100%);
            color: white;
            padding: 4rem 0;
            text-align: center;
        }

        .testing-hero h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            font-weight: 700;
        }

        .testing-hero p {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto 2rem auto;
        }

        .test-guide {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }

        .guide-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 2rem;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }

        .guide-card:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.15);
        }

        .guide-icon {
            font-size: 2.5rem;
            color: #FFC107;
            margin-bottom: 1rem;
        }

        .guide-card h3 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: white;
        }

        .guide-card p {
            font-size: 1rem;
            opacity: 0.9;
            margin-bottom: 1rem;
        }

        .guide-topics {
            font-size: 0.9rem;
            opacity: 0.8;
            line-height: 1.4;
        }

        .testing-tabs {
            display: flex;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin: 2rem 0;
            overflow: hidden;
            flex-wrap: wrap;
        }

        .testing-tab {
            flex: 1;
            min-width: 150px;
            padding: 1rem 2rem;
            background: #f8f9fa;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .testing-tab.active {
            background: linear-gradient(135deg, #4CAF50, #8BC34A);
            color: white;
        }

        .testing-tab:hover:not(.active) {
            background: #e9ecef;
        }

        .testing-content {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .testing-panel {
            display: none;
        }

        .testing-panel.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .test-type-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .test-type-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            text-align: center;
        }

        .test-type-card:hover {
            background: #e9ecef;
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .test-type-card.selected {
            border-color: #4CAF50;
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.1), rgba(139, 195, 74, 0.1));
        }

        .test-type-card h3 {
            color: #4CAF50;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .learning-objectives {
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.05), rgba(139, 195, 74, 0.05));
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            border: 1px solid rgba(76, 175, 80, 0.1);
        }

        .learning-objectives h4 {
            color: #4CAF50;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.1rem;
        }

        .objectives-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }

        .objective-item {
            background: white;
            padding: 1rem;
            border-radius: 8px;
            border-left: 4px solid #4CAF50;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .test-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .control-group label {
            font-weight: 500;
            color: #333;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .control-group select {
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            background: white;
            transition: border-color 0.3s ease;
        }

        .control-group select:focus {
            outline: none;
            border-color: #4CAF50;
            box-shadow: 0 0 0 2px rgba(76, 175, 80, 0.2);
        }

        .start-test-btn {
            background: linear-gradient(135deg, #4CAF50, #8BC34A);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .start-test-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(76, 175, 80, 0.3);
        }

        .start-test-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .test-container {
            display: none;
            margin-top: 2rem;
            padding: 2rem;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .test-question {
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #4CAF50;
        }

        .question-text {
            font-size: 1.1rem;
            font-weight: 500;
            margin-bottom: 1rem;
            color: #333;
            line-height: 1.6;
        }

        .options-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .option-item {
            padding: 1rem;
            margin: 0.5rem 0;
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .option-item:hover {
            background: #f8f9fa;
            border-color: #4CAF50;
        }

        .option-item.selected {
            background: rgba(76, 175, 80, 0.1);
            border-color: #4CAF50;
            color: #2E7D32;
        }

        .result-summary {
            text-align: center;
            padding: 2rem;
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.1), rgba(139, 195, 74, 0.1));
            border-radius: 15px;
            margin-bottom: 2rem;
        }

        .score-display {
            font-size: 4rem;
            font-weight: 700;
            color: #4CAF50;
            margin-bottom: 1rem;
        }

        .level-badge {
            display: inline-block;
            padding: 0.5rem 1.5rem;
            background: #4CAF50;
            color: white;
            border-radius: 25px;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .learning-suggestion {
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            margin-top: 1.5rem;
            text-align: left;
        }

        .question-result {
            margin-bottom: 2rem;
            padding: 1.5rem;
            border-radius: 10px;
            border: 1px solid #e9ecef;
        }

        .question-result.correct {
            background: rgba(76, 175, 80, 0.05);
            border-color: #4CAF50;
        }

        .question-result.incorrect {
            background: rgba(244, 67, 54, 0.05);
            border-color: #f44336;
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .question-number {
            font-weight: 600;
            color: #333;
        }

        .question-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 500;
        }

        .question-status.correct {
            color: #4CAF50;
        }

        .question-status.incorrect {
            color: #f44336;
        }

        .original-question {
            font-weight: 500;
            margin-bottom: 1rem;
            color: #333;
        }

        .answer-analysis {
            margin: 1rem 0;
        }

        .user-answer, .correct-answer {
            margin: 0.5rem 0;
            padding: 0.75rem;
            border-radius: 8px;
        }

        .user-answer.correct {
            background: rgba(76, 175, 80, 0.1);
            border-left: 4px solid #4CAF50;
        }

        .user-answer.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-left: 4px solid #f44336;
        }

        .correct-answer {
            background: rgba(76, 175, 80, 0.1);
            border-left: 4px solid #4CAF50;
        }

        .explanation-content {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 8px;
            margin-top: 1rem;
        }

        .explanation-text {
            line-height: 1.6;
            color: #555;
            margin-top: 0.5rem;
        }

        .result-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 2rem;
            flex-wrap: wrap;
        }

        .btn {
            padding: 0.75rem 2rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            text-decoration: none;
        }

        .btn-primary {
            background: linear-gradient(135deg, #4CAF50, #8BC34A);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(76, 175, 80, 0.3);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .testing-hero h1 {
                font-size: 2rem;
            }
            
            .testing-hero p {
                font-size: 1rem;
            }
            
            .test-guide {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .guide-card {
                padding: 1.5rem;
            }
            
            .testing-tabs {
                flex-direction: column;
            }

            .testing-tab {
                min-width: auto;
            }

            .test-controls {
                grid-template-columns: 1fr;
            }
            
            .score-display {
                font-size: 3rem;
            }
            
            .result-actions {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 100%;
                max-width: 300px;
                justify-content: center;
            }
        }

        @media (max-width: 480px) {
            .testing-hero {
                padding: 2rem 0;
            }
            
            .testing-content {
                padding: 1rem;
            }
            
            .test-container {
                padding: 1rem;
            }
            
            .question-text {
                font-size: 1rem;
            }
            
            .option-item {
                padding: 0.75rem;
            }
        }
    </style>
</head>
<body>
    <header class="main-header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <a href="../../index.html">
                        <i class="fas fa-graduation-cap" style="background: linear-gradient(90deg, #4361ee, #7209b7); -webkit-background-clip: text; background-clip: text; color: transparent;"></i>
                        <span>Alexçš„å­¦ä¹ åŠ©æ‰‹</span>
                    </a>
                </div>
                <nav class="main-nav">
                    <ul>
                        <li><a href="../../index.html">é¦–é¡µ</a></li>
                        <li><a href="../../index.html#subjects">ç§‘ç›®</a></li>
                        <li><a href="../../textbook.html">ç”µå­è¯¾æœ¬</a></li>
                        <li><a href="../../tts.html">è¯­éŸ³</a></li>
                        <li><a href="../../draw.html">ç»˜å›¾</a></li>
                    </ul>
                </nav>
                <button class="mobile-menu-toggle" aria-label="åˆ‡æ¢èœå•">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
        </div>
    </header>

    <main class="container">
        <!-- è‹±é›„åŒºåŸŸ -->
        <section class="testing-hero">
            <h1><i class="fas fa-flask"></i> åŒ–å­¦èƒ½åŠ›æµ‹è¯•</h1>
            <p>æ™ºèƒ½ç”Ÿæˆä¸ªæ€§åŒ–åŒ–å­¦æµ‹è¯•é¢˜ç›®ï¼Œå…¨é¢è¯„ä¼°æ‚¨çš„åŒ–å­¦çŸ¥è¯†æŒæ¡æƒ…å†µ</p>
                
                <div class="test-guide">
                    <div class="guide-card">
                    <div class="guide-icon">ğŸ§ª</div>
                        <h3>åˆä¸­åŒ–å­¦</h3>
                    <p>åŸºç¡€åŒ–å­¦æ¦‚å¿µä¸å®éªŒ</p>
                    <div class="guide-topics">
                        åŒ–å­¦ååº”ã€å…ƒç´ åŒ–åˆç‰©ã€é…¸ç¢±ç›ã€é‡‘å±éé‡‘å±
                    </div>
                </div>
                
                    <div class="guide-card">
                    <div class="guide-icon">âš›ï¸</div>
                        <h3>é«˜ä¸­åŒ–å­¦</h3>
                    <p>æ·±å…¥åŒ–å­¦åŸç†ä¸åº”ç”¨</p>
                    <div class="guide-topics">
                        åŸå­ç»“æ„ã€åŒ–å­¦é”®ã€çƒ­åŒ–å­¦ã€ç”µåŒ–å­¦ã€æœ‰æœºåŒ–å­¦
                    </div>
                </div>
            </div>
        </section>

        <!-- æµ‹è¯•æ ‡ç­¾é¡µ -->
                <div class="testing-tabs">
            <button class="testing-tab active" data-tab="inorganic">
                <i class="fas fa-atom"></i> æ— æœºåŒ–å­¦
                    </button>
            <button class="testing-tab" data-tab="organic">
                <i class="fas fa-dna"></i> æœ‰æœºåŒ–å­¦
                    </button>
            <button class="testing-tab" data-tab="analytical">
                <i class="fas fa-search"></i> åˆ†æåŒ–å­¦
                    </button>
            <button class="testing-tab" data-tab="physical">
                <i class="fas fa-thermometer-half"></i> ç‰©ç†åŒ–å­¦
                    </button>
            <button class="testing-tab" data-tab="comprehensive">
                <i class="fas fa-graduation-cap"></i> ç»¼åˆæµ‹è¯•
                    </button>
                </div>
                
        <!-- æµ‹è¯•å†…å®¹ -->
                <div class="testing-content">
            <!-- æ— æœºåŒ–å­¦æµ‹è¯• -->
            <div class="testing-panel active" id="inorganic">
                        <div class="learning-objectives">
                    <h4><i class="fas fa-target"></i> æ— æœºåŒ–å­¦å­¦ä¹ ç›®æ ‡</h4>
                            <div class="objectives-grid">
                                <div class="objective-item">
                            <strong>å…ƒç´ åŒ–åˆç‰©ï¼š</strong>æŒæ¡å¸¸è§å…ƒç´ åŠå…¶åŒ–åˆç‰©çš„æ€§è´¨å’Œååº”
                                </div>
                                <div class="objective-item">
                            <strong>åŒ–å­¦ååº”ï¼š</strong>ç†è§£åŒ–å­¦ååº”åŸç†å’Œååº”ç±»å‹
                                </div>
                        <div class="objective-item">
                            <strong>é…¸ç¢±ç›ï¼š</strong>æŒæ¡é…¸ç¢±ç›çš„æ€§è´¨å’Œç›¸äº’è½¬åŒ–
                        </div>
                        <div class="objective-item">
                            <strong>æ°§åŒ–è¿˜åŸï¼š</strong>ç†è§£æ°§åŒ–è¿˜åŸååº”çš„æœ¬è´¨å’Œåº”ç”¨
                        </div>
                            </div>
                        </div>
                        
                        <div class="test-type-grid">
                    <div class="test-type-card" data-type="basic-concepts">
                        <h3><i class="fas fa-book"></i> åŸºç¡€æ¦‚å¿µ</h3>
                        <p>åŒ–å­¦åŸºæœ¬æ¦‚å¿µã€åŸå­åˆ†å­ç†è®ºã€åŒ–å­¦è®¡é‡</p>
                                </div>
                    <div class="test-type-card" data-type="elements">
                        <h3><i class="fas fa-table"></i> å…ƒç´ åŒ–åˆç‰©</h3>
                        <p>é‡‘å±éé‡‘å±ã€é…¸ç¢±ç›ã€å¸¸è§åŒ–åˆç‰©æ€§è´¨</p>
                                </div>
                    <div class="test-type-card" data-type="reactions">
                        <h3><i class="fas fa-flask"></i> åŒ–å­¦ååº”</h3>
                        <p>ååº”ç±»å‹ã€åŒ–å­¦æ–¹ç¨‹å¼ã€ååº”æ¡ä»¶</p>
                                </div>
                    <div class="test-type-card" data-type="redox">
                        <h3><i class="fas fa-exchange-alt"></i> æ°§åŒ–è¿˜åŸ</h3>
                        <p>æ°§åŒ–è¿˜åŸååº”ã€ç”µå­è½¬ç§»ã€ç”µåŒ–å­¦</p>
                                </div>
                                </div>

                <div class="test-controls">
                    <div class="control-group">
                        <label for="inorganic-level">
                            <i class="fas fa-graduation-cap"></i> å­¦æ ¡ç±»å‹
                        </label>
                        <select id="inorganic-level">
                            <option value="middle">åˆä¸­</option>
                            <option value="high">é«˜ä¸­</option>
                        </select>
                                </div>
                    <div class="control-group">
                        <label for="inorganic-grade">
                            <i class="fas fa-layer-group"></i> å¹´çº§å­¦æœŸ
                        </label>
                        <select id="inorganic-grade">
                            <option value="grade9-1">ä¹å¹´çº§ä¸Šå­¦æœŸ</option>
                            <option value="grade9-2">ä¹å¹´çº§ä¸‹å­¦æœŸ</option>
                            <option value="grade10-1">é«˜ä¸€ä¸Šå­¦æœŸ</option>
                            <option value="grade10-2">é«˜ä¸€ä¸‹å­¦æœŸ</option>
                            <option value="grade11-1">é«˜äºŒä¸Šå­¦æœŸ</option>
                            <option value="grade11-2">é«˜äºŒä¸‹å­¦æœŸ</option>
                            <option value="grade12-1">é«˜ä¸‰ä¸Šå­¦æœŸ</option>
                            <option value="grade12-2">é«˜ä¸‰ä¸‹å­¦æœŸ</option>
                        </select>
                                </div>
                    <div class="control-group">
                        <label for="inorganic-difficulty">
                            <i class="fas fa-chart-line"></i> éš¾åº¦ç­‰çº§
                        </label>
                        <select id="inorganic-difficulty">
                            <option value="basic">åŸºç¡€</option>
                            <option value="medium">ä¸­ç­‰</option>
                            <option value="hard">å›°éš¾</option>
                            <option value="competition">ç«èµ›</option>
                        </select>
                            </div>
                    <div class="control-group">
                        <label for="inorganic-count">
                            <i class="fas fa-list-ol"></i> é¢˜ç›®æ•°é‡
                        </label>
                        <select id="inorganic-count">
                            <option value="5">5é¢˜</option>
                            <option value="10">10é¢˜</option>
                            <option value="15">15é¢˜</option>
                            <option value="20">20é¢˜</option>
                        </select>
                                </div>
                            </div>

                <button class="start-test-btn" id="start-inorganic-test">
                    <i class="fas fa-play"></i> å¼€å§‹æ— æœºåŒ–å­¦æµ‹è¯•
                </button>

                <div class="test-container" id="inorganic-test-container"></div>
                                </div>

            <!-- æœ‰æœºåŒ–å­¦æµ‹è¯• -->
            <div class="testing-panel" id="organic">
                <div class="learning-objectives">
                    <h4><i class="fas fa-target"></i> æœ‰æœºåŒ–å­¦å­¦ä¹ ç›®æ ‡</h4>
                    <div class="objectives-grid">
                        <div class="objective-item">
                            <strong>æœ‰æœºç‰©ç»“æ„ï¼š</strong>æŒæ¡æœ‰æœºåŒ–åˆç‰©çš„ç»“æ„ç‰¹ç‚¹å’Œå‘½å
                        </div>
                        <div class="objective-item">
                            <strong>å®˜èƒ½å›¢æ€§è´¨ï¼š</strong>ç†è§£å„ç±»å®˜èƒ½å›¢çš„æ€§è´¨å’Œååº”
                        </div>
                        <div class="objective-item">
                            <strong>æœ‰æœºååº”ï¼š</strong>æŒæ¡æœ‰æœºååº”æœºç†å’Œååº”ç±»å‹
                        </div>
                        <div class="objective-item">
                            <strong>åˆæˆè·¯çº¿ï¼š</strong>è®¾è®¡ç®€å•çš„æœ‰æœºåˆæˆè·¯çº¿
                        </div>
                            </div>
                        </div>
                        
                <div class="test-type-grid">
                    <div class="test-type-card" data-type="hydrocarbons">
                        <h3><i class="fas fa-oil-can"></i> çƒƒç±»åŒ–åˆç‰©</h3>
                        <p>çƒ·çƒƒã€çƒ¯çƒƒã€ç‚”çƒƒã€èŠ³é¦™çƒƒçš„æ€§è´¨å’Œååº”</p>
                    </div>
                    <div class="test-type-card" data-type="functional-groups">
                        <h3><i class="fas fa-puzzle-piece"></i> å®˜èƒ½å›¢</h3>
                        <p>é†‡ã€é…šã€é†›ã€é…®ã€ç¾§é…¸ã€é…¯çš„æ€§è´¨</p>
                    </div>
                    <div class="test-type-card" data-type="organic-reactions">
                        <h3><i class="fas fa-random"></i> æœ‰æœºååº”</h3>
                        <p>å–ä»£ã€åŠ æˆã€æ¶ˆå»ã€æ°§åŒ–è¿˜åŸååº”</p>
                    </div>
                    <div class="test-type-card" data-type="synthesis">
                        <h3><i class="fas fa-route"></i> åˆæˆè·¯çº¿</h3>
                        <p>æœ‰æœºåˆæˆè®¾è®¡ã€é€†åˆæˆåˆ†æ</p>
                    </div>
                </div>

                <div class="test-controls">
                    <div class="control-group">
                        <label for="organic-level">
                            <i class="fas fa-graduation-cap"></i> å­¦æ ¡ç±»å‹
                        </label>
                        <select id="organic-level">
                                <option value="middle">åˆä¸­</option>
                            <option value="high">é«˜ä¸­</option>
                            </select>
                            </div>
                    <div class="control-group">
                        <label for="organic-grade">
                            <i class="fas fa-layer-group"></i> å¹´çº§å­¦æœŸ
                        </label>
                        <select id="organic-grade">
                            <option value="grade9-1">ä¹å¹´çº§ä¸Šå­¦æœŸ</option>
                            <option value="grade9-2">ä¹å¹´çº§ä¸‹å­¦æœŸ</option>
                            <option value="grade10-1">é«˜ä¸€ä¸Šå­¦æœŸ</option>
                            <option value="grade10-2">é«˜ä¸€ä¸‹å­¦æœŸ</option>
                            <option value="grade11-1">é«˜äºŒä¸Šå­¦æœŸ</option>
                            <option value="grade11-2">é«˜äºŒä¸‹å­¦æœŸ</option>
                            <option value="grade12-1">é«˜ä¸‰ä¸Šå­¦æœŸ</option>
                            <option value="grade12-2">é«˜ä¸‰ä¸‹å­¦æœŸ</option>
                            </select>
                        </div>
                    <div class="control-group">
                        <label for="organic-difficulty">
                            <i class="fas fa-chart-line"></i> éš¾åº¦ç­‰çº§
                        </label>
                        <select id="organic-difficulty">
                            <option value="basic">åŸºç¡€</option>
                            <option value="medium">ä¸­ç­‰</option>
                            <option value="hard">å›°éš¾</option>
                            <option value="competition">ç«èµ›</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label for="organic-count">
                            <i class="fas fa-list-ol"></i> é¢˜ç›®æ•°é‡
                        </label>
                        <select id="organic-count">
                                <option value="5">5é¢˜</option>
                            <option value="10">10é¢˜</option>
                                <option value="15">15é¢˜</option>
                                <option value="20">20é¢˜</option>
                            </select>
                    </div>
                        </div>
                        
                <button class="start-test-btn" id="start-organic-test">
                    <i class="fas fa-play"></i> å¼€å§‹æœ‰æœºåŒ–å­¦æµ‹è¯•
                            </button>
                        
                <div class="test-container" id="organic-test-container"></div>
                    </div>

            <!-- åˆ†æåŒ–å­¦æµ‹è¯• -->
            <div class="testing-panel" id="analytical">
                        <div class="learning-objectives">
                    <h4><i class="fas fa-target"></i> åˆ†æåŒ–å­¦å­¦ä¹ ç›®æ ‡</h4>
                            <div class="objectives-grid">
                                <div class="objective-item">
                            <strong>å®šæ€§åˆ†æï¼š</strong>æŒæ¡ç¦»å­æ£€éªŒå’Œç‰©è´¨é‰´å®šæ–¹æ³•
                                </div>
                                <div class="objective-item">
                            <strong>å®šé‡åˆ†æï¼š</strong>ç†è§£æ»´å®šåˆ†æå’Œé‡é‡åˆ†æ
                                </div>
                        <div class="objective-item">
                            <strong>ä»ªå™¨åˆ†æï¼š</strong>äº†è§£ç°ä»£åˆ†æä»ªå™¨çš„åŸç†
                        </div>
                        <div class="objective-item">
                            <strong>è¯¯å·®åˆ†æï¼š</strong>æŒæ¡åˆ†æç»“æœçš„å¤„ç†å’Œè¯„ä»·
                        </div>
                        </div>
                    </div>
                    
                        <div class="test-type-grid">
                    <div class="test-type-card" data-type="qualitative">
                        <h3><i class="fas fa-search"></i> å®šæ€§åˆ†æ</h3>
                        <p>ç¦»å­æ£€éªŒã€ç‰©è´¨é‰´å®šã€åˆ†ç¦»æçº¯</p>
                                </div>
                    <div class="test-type-card" data-type="quantitative">
                        <h3><i class="fas fa-balance-scale"></i> å®šé‡åˆ†æ</h3>
                        <p>é…¸ç¢±æ»´å®šã€æ°§åŒ–è¿˜åŸæ»´å®šã€æ²‰æ·€æ»´å®š</p>
                            </div>
                    <div class="test-type-card" data-type="instrumental">
                        <h3><i class="fas fa-microscope"></i> ä»ªå™¨åˆ†æ</h3>
                        <p>å…‰è°±åˆ†æã€è‰²è°±åˆ†æã€ç”µåŒ–å­¦åˆ†æ</p>
                                </div>
                    <div class="test-type-card" data-type="calculation">
                        <h3><i class="fas fa-calculator"></i> åˆ†æè®¡ç®—</h3>
                        <p>æµ“åº¦è®¡ç®—ã€è¯¯å·®åˆ†æã€æ•°æ®å¤„ç†</p>
                            </div>
                                </div>

                <div class="test-controls">
                    <div class="control-group">
                        <label for="analytical-level">
                            <i class="fas fa-graduation-cap"></i> å­¦æ ¡ç±»å‹
                        </label>
                        <select id="analytical-level">
                            <option value="middle">åˆä¸­</option>
                            <option value="high">é«˜ä¸­</option>
                        </select>
                            </div>
                    <div class="control-group">
                        <label for="analytical-grade">
                            <i class="fas fa-layer-group"></i> å¹´çº§å­¦æœŸ
                        </label>
                        <select id="analytical-grade">
                            <option value="grade9-1">ä¹å¹´çº§ä¸Šå­¦æœŸ</option>
                            <option value="grade9-2">ä¹å¹´çº§ä¸‹å­¦æœŸ</option>
                            <option value="grade10-1">é«˜ä¸€ä¸Šå­¦æœŸ</option>
                            <option value="grade10-2">é«˜ä¸€ä¸‹å­¦æœŸ</option>
                            <option value="grade11-1">é«˜äºŒä¸Šå­¦æœŸ</option>
                            <option value="grade11-2">é«˜äºŒä¸‹å­¦æœŸ</option>
                            <option value="grade12-1">é«˜ä¸‰ä¸Šå­¦æœŸ</option>
                            <option value="grade12-2">é«˜ä¸‰ä¸‹å­¦æœŸ</option>
                        </select>
                                </div>
                    <div class="control-group">
                        <label for="analytical-difficulty">
                            <i class="fas fa-chart-line"></i> éš¾åº¦ç­‰çº§
                        </label>
                        <select id="analytical-difficulty">
                            <option value="basic">åŸºç¡€</option>
                            <option value="medium">ä¸­ç­‰</option>
                            <option value="hard">å›°éš¾</option>
                            <option value="competition">ç«èµ›</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label for="analytical-count">
                            <i class="fas fa-list-ol"></i> é¢˜ç›®æ•°é‡
                        </label>
                        <select id="analytical-count">
                            <option value="5">5é¢˜</option>
                            <option value="10">10é¢˜</option>
                            <option value="15">15é¢˜</option>
                            <option value="20">20é¢˜</option>
                        </select>
                    </div>
                </div>

                <button class="start-test-btn" id="start-analytical-test">
                    <i class="fas fa-play"></i> å¼€å§‹åˆ†æåŒ–å­¦æµ‹è¯•
                </button>

                <div class="test-container" id="analytical-test-container"></div>
            </div>

            <!-- ç‰©ç†åŒ–å­¦æµ‹è¯• -->
            <div class="testing-panel" id="physical">
                <div class="learning-objectives">
                    <h4><i class="fas fa-target"></i> ç‰©ç†åŒ–å­¦å­¦ä¹ ç›®æ ‡</h4>
                    <div class="objectives-grid">
                        <div class="objective-item">
                            <strong>çƒ­åŠ›å­¦ï¼š</strong>æŒæ¡åŒ–å­¦çƒ­åŠ›å­¦åŸºæœ¬å®šå¾‹å’Œåº”ç”¨
                        </div>
                        <div class="objective-item">
                            <strong>åŠ¨åŠ›å­¦ï¼š</strong>ç†è§£åŒ–å­¦ååº”é€Ÿç‡å’Œååº”æœºç†
                        </div>
                        <div class="objective-item">
                            <strong>å¹³è¡¡ï¼š</strong>æŒæ¡åŒ–å­¦å¹³è¡¡å’Œç›¸å¹³è¡¡ç†è®º
                        </div>
                        <div class="objective-item">
                            <strong>ç”µåŒ–å­¦ï¼š</strong>ç†è§£ç”µåŒ–å­¦ååº”å’Œç”µæ± åŸç†
                        </div>
                    </div>
                </div>

                <div class="test-type-grid">
                    <div class="test-type-card" data-type="thermodynamics">
                        <h3><i class="fas fa-fire"></i> åŒ–å­¦çƒ­åŠ›å­¦</h3>
                        <p>çƒ­åŠ›å­¦å®šå¾‹ã€ç„“å˜ã€ç†µå˜ã€è‡ªç”±èƒ½</p>
                    </div>
                    <div class="test-type-card" data-type="kinetics">
                        <h3><i class="fas fa-tachometer-alt"></i> ååº”åŠ¨åŠ›å­¦</h3>
                        <p>ååº”é€Ÿç‡ã€é€Ÿç‡æ–¹ç¨‹ã€ååº”æœºç†</p>
                    </div>
                    <div class="test-type-card" data-type="equilibrium">
                        <h3><i class="fas fa-balance-scale-right"></i> åŒ–å­¦å¹³è¡¡</h3>
                        <p>å¹³è¡¡å¸¸æ•°ã€å‹’å¤ç‰¹åˆ—åŸç†ã€ç›¸å¹³è¡¡</p>
                    </div>
                    <div class="test-type-card" data-type="electrochemistry">
                        <h3><i class="fas fa-battery-full"></i> ç”µåŒ–å­¦</h3>
                        <p>ç”µæååº”ã€ç”µæ± ç”µåŠ¨åŠ¿ã€ç”µè§£</p>
                    </div>
                </div>

                <div class="test-controls">
                    <div class="control-group">
                        <label for="physical-level">
                            <i class="fas fa-graduation-cap"></i> å­¦æ ¡ç±»å‹
                        </label>
                        <select id="physical-level">
                                <option value="middle">åˆä¸­</option>
                            <option value="high">é«˜ä¸­</option>
                            </select>
                        </div>
                    <div class="control-group">
                        <label for="physical-grade">
                            <i class="fas fa-layer-group"></i> å¹´çº§å­¦æœŸ
                        </label>
                        <select id="physical-grade">
                            <option value="grade9-1">ä¹å¹´çº§ä¸Šå­¦æœŸ</option>
                            <option value="grade9-2">ä¹å¹´çº§ä¸‹å­¦æœŸ</option>
                            <option value="grade10-1">é«˜ä¸€ä¸Šå­¦æœŸ</option>
                            <option value="grade10-2">é«˜ä¸€ä¸‹å­¦æœŸ</option>
                            <option value="grade11-1">é«˜äºŒä¸Šå­¦æœŸ</option>
                            <option value="grade11-2">é«˜äºŒä¸‹å­¦æœŸ</option>
                            <option value="grade12-1">é«˜ä¸‰ä¸Šå­¦æœŸ</option>
                            <option value="grade12-2">é«˜ä¸‰ä¸‹å­¦æœŸ</option>
                            </select>
                        </div>
                    <div class="control-group">
                        <label for="physical-difficulty">
                            <i class="fas fa-chart-line"></i> éš¾åº¦ç­‰çº§
                        </label>
                        <select id="physical-difficulty">
                            <option value="basic">åŸºç¡€</option>
                            <option value="medium">ä¸­ç­‰</option>
                            <option value="hard">å›°éš¾</option>
                            <option value="competition">ç«èµ›</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label for="physical-count">
                            <i class="fas fa-list-ol"></i> é¢˜ç›®æ•°é‡
                        </label>
                        <select id="physical-count">
                                <option value="5">5é¢˜</option>
                            <option value="10">10é¢˜</option>
                                <option value="15">15é¢˜</option>
                                <option value="20">20é¢˜</option>
                            </select>
                    </div>
                        </div>
                        
                <button class="start-test-btn" id="start-physical-test">
                    <i class="fas fa-play"></i> å¼€å§‹ç‰©ç†åŒ–å­¦æµ‹è¯•
                        </button>
                        
                <div class="test-container" id="physical-test-container"></div>
                </div>

            <!-- ç»¼åˆæµ‹è¯• -->
            <div class="testing-panel" id="comprehensive">
                <div class="learning-objectives">
                    <h4><i class="fas fa-target"></i> ç»¼åˆæµ‹è¯•å­¦ä¹ ç›®æ ‡</h4>
                    <div class="objectives-grid">
                        <div class="objective-item">
                            <strong>çŸ¥è¯†æ•´åˆï¼š</strong>ç»¼åˆè¿ç”¨å„åˆ†æ”¯åŒ–å­¦çŸ¥è¯†
                        </div>
                        <div class="objective-item">
                            <strong>é—®é¢˜è§£å†³ï¼š</strong>è§£å†³å¤æ‚çš„åŒ–å­¦ç»¼åˆé—®é¢˜
                        </div>
                        <div class="objective-item">
                            <strong>å®é™…åº”ç”¨ï¼š</strong>å°†åŒ–å­¦çŸ¥è¯†åº”ç”¨äºå®é™…æƒ…å¢ƒ
                        </div>
                        <div class="objective-item">
                            <strong>åˆ›æ–°æ€ç»´ï¼š</strong>åŸ¹å…»åŒ–å­¦åˆ›æ–°æ€ç»´èƒ½åŠ›
                        </div>
                    </div>
                </div>

                <div class="test-type-grid">
                    <div class="test-type-card" data-type="mixed-topics">
                        <h3><i class="fas fa-puzzle-piece"></i> è·¨é¢†åŸŸç»¼åˆ</h3>
                        <p>æ— æœºã€æœ‰æœºã€åˆ†æã€ç‰©åŒ–çŸ¥è¯†ç»¼åˆ</p>
                    </div>
                    <div class="test-type-card" data-type="practical-application">
                        <h3><i class="fas fa-industry"></i> å®é™…åº”ç”¨</h3>
                        <p>å·¥ä¸šç”Ÿäº§ã€ç¯å¢ƒä¿æŠ¤ã€ç”Ÿæ´»åŒ–å­¦</p>
                    </div>
                    <div class="test-type-card" data-type="experimental">
                        <h3><i class="fas fa-flask"></i> å®éªŒç»¼åˆ</h3>
                        <p>å®éªŒè®¾è®¡ã€æ•°æ®åˆ†æã€ç»“æœè¯„ä»·</p>
                    </div>
                    <div class="test-type-card" data-type="competition">
                        <h3><i class="fas fa-trophy"></i> ç«èµ›æ°´å¹³</h3>
                        <p>åŒ–å­¦ç«èµ›ã€é«˜è€ƒå‹è½´ã€åˆ›æ–°é¢˜å‹</p>
                    </div>
                </div>

                <div class="test-controls">
                    <div class="control-group">
                        <label for="comprehensive-level">
                            <i class="fas fa-graduation-cap"></i> å­¦æ ¡ç±»å‹
                        </label>
                        <select id="comprehensive-level">
                            <option value="middle">åˆä¸­</option>
                            <option value="high">é«˜ä¸­</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label for="comprehensive-grade">
                            <i class="fas fa-layer-group"></i> å¹´çº§å­¦æœŸ
                        </label>
                        <select id="comprehensive-grade">
                            <option value="grade9-1">ä¹å¹´çº§ä¸Šå­¦æœŸ</option>
                            <option value="grade9-2">ä¹å¹´çº§ä¸‹å­¦æœŸ</option>
                            <option value="grade10-1">é«˜ä¸€ä¸Šå­¦æœŸ</option>
                            <option value="grade10-2">é«˜ä¸€ä¸‹å­¦æœŸ</option>
                            <option value="grade11-1">é«˜äºŒä¸Šå­¦æœŸ</option>
                            <option value="grade11-2">é«˜äºŒä¸‹å­¦æœŸ</option>
                            <option value="grade12-1">é«˜ä¸‰ä¸Šå­¦æœŸ</option>
                            <option value="grade12-2">é«˜ä¸‰ä¸‹å­¦æœŸ</option>
                        </select>
                </div>
                    <div class="control-group">
                        <label for="comprehensive-difficulty">
                            <i class="fas fa-chart-line"></i> éš¾åº¦ç­‰çº§
                        </label>
                        <select id="comprehensive-difficulty">
                            <option value="basic">åŸºç¡€</option>
                            <option value="medium">ä¸­ç­‰</option>
                            <option value="hard">å›°éš¾</option>
                            <option value="competition">ç«èµ›</option>
                        </select>
                </div>
                    <div class="control-group">
                        <label for="comprehensive-count">
                            <i class="fas fa-list-ol"></i> é¢˜ç›®æ•°é‡
                        </label>
                        <select id="comprehensive-count">
                            <option value="5">5é¢˜</option>
                            <option value="10">10é¢˜</option>
                            <option value="15">15é¢˜</option>
                            <option value="20">20é¢˜</option>
                        </select>
            </div>
                </div>

                <button class="start-test-btn" id="start-comprehensive-test">
                    <i class="fas fa-play"></i> å¼€å§‹ç»¼åˆæµ‹è¯•
                </button>

                <div class="test-container" id="comprehensive-test-container"></div>
            </div>
        </div>
         </main>

    <script src="../../js/navigation.js"></script>
    <script>
        // å…¨å±€å˜é‡
        let currentTestType = null;
        let currentQuestions = [];

        // MathJaxé…ç½®
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                processEscapes: true,
                processEnvironments: true
            },
            options: {
                skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
            }
        };

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            initializeTabs();
            initializeTestTypes();
            initializeTestButtons();
            initializeMobileMenu();
        });

        // åˆå§‹åŒ–æ ‡ç­¾é¡µ
        function initializeTabs() {
            const tabs = document.querySelectorAll('.testing-tab');
            const panels = document.querySelectorAll('.testing-panel');
            
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const targetTab = this.getAttribute('data-tab');
                    
                    // æ›´æ–°æ ‡ç­¾é¡µçŠ¶æ€
                    tabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // æ›´æ–°é¢æ¿çŠ¶æ€
                    panels.forEach(panel => {
                        panel.classList.remove('active');
                        if (panel.id === targetTab) {
                        panel.classList.add('active');
                    }
                    });
                    
                    // é‡ç½®æµ‹è¯•ç±»å‹é€‰æ‹©
                    currentTestType = null;
                    document.querySelectorAll('.test-type-card').forEach(card => {
                        card.classList.remove('selected');
                    });
                });
            });
        }

        // åˆå§‹åŒ–æµ‹è¯•ç±»å‹é€‰æ‹©
        function initializeTestTypes() {
            const typeCards = document.querySelectorAll('.test-type-card');
            
            typeCards.forEach(card => {
                card.addEventListener('click', function() {
                    // ç§»é™¤åŒä¸€é¢æ¿å†…å…¶ä»–å¡ç‰‡çš„é€‰ä¸­çŠ¶æ€
                    const parentPanel = this.closest('.testing-panel');
                    parentPanel.querySelectorAll('.test-type-card').forEach(c => {
                        c.classList.remove('selected');
                    });
                    
                    // é€‰ä¸­å½“å‰å¡ç‰‡
                    this.classList.add('selected');
                    currentTestType = this.getAttribute('data-type');
                });
            });
        }

        // åˆå§‹åŒ–æµ‹è¯•æŒ‰é’®
        function initializeTestButtons() {
            // æ— æœºåŒ–å­¦æµ‹è¯•
            document.getElementById('start-inorganic-test').addEventListener('click', function() {
                const level = document.getElementById('inorganic-level').value;
                const grade = document.getElementById('inorganic-grade').value;
                const difficulty = document.getElementById('inorganic-difficulty').value;
                const count = document.getElementById('inorganic-count').value;
                const container = document.getElementById('inorganic-test-container');
                
                if (!currentTestType) {
                    alert('è¯·å…ˆé€‰æ‹©ä¸€ä¸ªæµ‹è¯•ç±»å‹');
                    return;
                }
                
                startChemistryTest('inorganic', currentTestType, level, grade, difficulty, count, container);
            });

            // æœ‰æœºåŒ–å­¦æµ‹è¯•
            document.getElementById('start-organic-test').addEventListener('click', function() {
                const level = document.getElementById('organic-level').value;
                const grade = document.getElementById('organic-grade').value;
                const difficulty = document.getElementById('organic-difficulty').value;
                const count = document.getElementById('organic-count').value;
                const container = document.getElementById('organic-test-container');
                
                if (!currentTestType) {
                    alert('è¯·å…ˆé€‰æ‹©ä¸€ä¸ªæµ‹è¯•ç±»å‹');
                    return;
                }
                
                startChemistryTest('organic', currentTestType, level, grade, difficulty, count, container);
            });

            // åˆ†æåŒ–å­¦æµ‹è¯•
            document.getElementById('start-analytical-test').addEventListener('click', function() {
                const level = document.getElementById('analytical-level').value;
                const grade = document.getElementById('analytical-grade').value;
                const difficulty = document.getElementById('analytical-difficulty').value;
                const count = document.getElementById('analytical-count').value;
                const container = document.getElementById('analytical-test-container');
                
                if (!currentTestType) {
                    alert('è¯·å…ˆé€‰æ‹©ä¸€ä¸ªæµ‹è¯•ç±»å‹');
                return;
            }

                startChemistryTest('analytical', currentTestType, level, grade, difficulty, count, container);
            });

            // ç‰©ç†åŒ–å­¦æµ‹è¯•
            document.getElementById('start-physical-test').addEventListener('click', function() {
                const level = document.getElementById('physical-level').value;
                const grade = document.getElementById('physical-grade').value;
                const difficulty = document.getElementById('physical-difficulty').value;
                const count = document.getElementById('physical-count').value;
                const container = document.getElementById('physical-test-container');
                
                if (!currentTestType) {
                    alert('è¯·å…ˆé€‰æ‹©ä¸€ä¸ªæµ‹è¯•ç±»å‹');
                    return;
                }
                
                startChemistryTest('physical', currentTestType, level, grade, difficulty, count, container);
            });

            // ç»¼åˆæµ‹è¯•
            document.getElementById('start-comprehensive-test').addEventListener('click', function() {
                const level = document.getElementById('comprehensive-level').value;
                const grade = document.getElementById('comprehensive-grade').value;
                const difficulty = document.getElementById('comprehensive-difficulty').value;
                const count = document.getElementById('comprehensive-count').value;
                const container = document.getElementById('comprehensive-test-container');
                
                if (!currentTestType) {
                    alert('è¯·å…ˆé€‰æ‹©ä¸€ä¸ªæµ‹è¯•ç±»å‹');
                    return;
                }
                
                startChemistryTest('comprehensive', currentTestType, level, grade, difficulty, count, container);
            });
        }

        // åˆå§‹åŒ–ç§»åŠ¨ç«¯èœå•
        function initializeMobileMenu() {
            const mobileMenuToggle = document.querySelector('.mobile-menu-toggle');
            const mainNav = document.querySelector('.main-nav');
            
            if (mobileMenuToggle && mainNav) {
                mobileMenuToggle.addEventListener('click', function() {
                    mainNav.classList.toggle('active');
                    mobileMenuToggle.classList.toggle('active');
                });
            }
        }

        // å¼€å§‹åŒ–å­¦æµ‹è¯•
        async function startChemistryTest(subject, type, level, grade, difficulty, count, container) {
            container.style.display = 'block';
            container.innerHTML = '<div style="text-align: center; padding: 2rem;"><i class="fas fa-spinner fa-spin" style="font-size: 2rem; color: #4CAF50;"></i><br><br>æ­£åœ¨ç”ŸæˆåŒ–å­¦æµ‹è¯•ï¼Œè¯·ç¨å€™...</div>';
            
            const subjectNames = {
                'inorganic': 'æ— æœºåŒ–å­¦',
                'organic': 'æœ‰æœºåŒ–å­¦',
                'analytical': 'åˆ†æåŒ–å­¦',
                'physical': 'ç‰©ç†åŒ–å­¦',
                'comprehensive': 'ç»¼åˆåŒ–å­¦'
            };

            const typeNames = {
                // æ— æœºåŒ–å­¦
                'basic-concepts': 'åŸºç¡€æ¦‚å¿µ',
                'elements': 'å…ƒç´ åŒ–åˆç‰©',
                'reactions': 'åŒ–å­¦ååº”',
                'redox': 'æ°§åŒ–è¿˜åŸ',
                // æœ‰æœºåŒ–å­¦
                'hydrocarbons': 'çƒƒç±»åŒ–åˆç‰©',
                'functional-groups': 'å®˜èƒ½å›¢',
                'organic-reactions': 'æœ‰æœºååº”',
                'synthesis': 'åˆæˆè·¯çº¿',
                // åˆ†æåŒ–å­¦
                'qualitative': 'å®šæ€§åˆ†æ',
                'quantitative': 'å®šé‡åˆ†æ',
                'instrumental': 'ä»ªå™¨åˆ†æ',
                'calculation': 'åˆ†æè®¡ç®—',
                // ç‰©ç†åŒ–å­¦
                'thermodynamics': 'åŒ–å­¦çƒ­åŠ›å­¦',
                'kinetics': 'ååº”åŠ¨åŠ›å­¦',
                'equilibrium': 'åŒ–å­¦å¹³è¡¡',
                'electrochemistry': 'ç”µåŒ–å­¦',
                // ç»¼åˆæµ‹è¯•
                'mixed-topics': 'è·¨é¢†åŸŸç»¼åˆ',
                'practical-application': 'å®é™…åº”ç”¨',
                'experimental': 'å®éªŒç»¼åˆ',
                'competition': 'ç«èµ›æ°´å¹³'
            };

            const difficultyNames = {
                'basic': 'åŸºç¡€',
                'medium': 'ä¸­ç­‰',
                'hard': 'å›°éš¾',
                'competition': 'ç«èµ›'
            };

            const levelNames = {
                'middle': 'åˆä¸­',
                'high': 'é«˜ä¸­'
            };

            const gradeNames = {
                'grade9-1': 'ä¹å¹´çº§ä¸Šå­¦æœŸ',
                'grade9-2': 'ä¹å¹´çº§ä¸‹å­¦æœŸ',
                'grade10-1': 'é«˜ä¸€ä¸Šå­¦æœŸ',
                'grade10-2': 'é«˜ä¸€ä¸‹å­¦æœŸ',
                'grade11-1': 'é«˜äºŒä¸Šå­¦æœŸ',
                'grade11-2': 'é«˜äºŒä¸‹å­¦æœŸ',
                'grade12-1': 'é«˜ä¸‰ä¸Šå­¦æœŸ',
                'grade12-2': 'é«˜ä¸‰ä¸‹å­¦æœŸ'
            };

            try {
                // æ„å»ºè¯¦ç»†çš„è¯¾ç¨‹èŒƒå›´
                const curriculumScope = getChemistryCurriculumScope(level, grade, subject, type);
                
                const prompt = `è¯·ä¸¥æ ¼æŒ‰ç…§ä¸­å›½${levelNames[level]}åŒ–å­¦æ•™å­¦å¤§çº²ï¼Œä¸º${gradeNames[grade]}å­¦ç”Ÿç”Ÿæˆ${count}é“${subjectNames[subject]}ä¸­${typeNames[type]}çš„${difficultyNames[difficulty]}æµ‹è¯•é¢˜ç›®ã€‚

## æ•™å­¦å¤§çº²èŒƒå›´ï¼š
${curriculumScope}

## é¢˜ç›®è¦æ±‚ï¼š
1. **æ•™è‚²æ°´å¹³**ï¼š${levelNames[level]} ${gradeNames[grade]} - ä¸¥æ ¼éµå¾ªäººæ•™ç‰ˆåŒ–å­¦æ•™æå†…å®¹
2. **éš¾åº¦ç­‰çº§**ï¼š${difficultyNames[difficulty]} - ç¬¦åˆå®é™…è€ƒè¯•æ ‡å‡†
3. **çŸ¥è¯†èŒƒå›´**ï¼šä»…é™äºä¸Šè¿°æ•™å­¦å¤§çº²èŒƒå›´å†…çš„å†…å®¹ï¼Œä¸å¾—è¶…çº²
4. **è®¡ç®—è¦æ±‚**ï¼šåŒ…å«é€‚é‡çš„åŒ–å­¦è®¡ç®—å’Œæ¦‚å¿µç†è§£

## é¢˜ç›®è§„èŒƒï¼š
1. æ¯é“é¢˜å¿…é¡»æ˜¯å•é€‰é¢˜ï¼Œæœ‰4ä¸ªé€‰é¡¹(Aã€Bã€Cã€D)
2. é¢˜ç›®æƒ…å¢ƒè¦è´´è¿‘ä¸­å›½å­¦ç”Ÿç”Ÿæ´»å®é™…
3. åŒ–å­¦å…¬å¼å’Œæ–¹ç¨‹å¼ä½¿ç”¨LaTeXæ ¼å¼ï¼Œç”¨$ç¬¦å·åŒ…å›´
4. æ­£ç¡®ç­”æ¡ˆéšæœºåˆ†å¸ƒåœ¨Aã€Bã€Cã€Dé€‰é¡¹ä¸­
5. è®¾ç½®æœ‰è¿·æƒ‘æ€§çš„å¹²æ‰°é¡¹ï¼Œä½“ç°å¸¸è§é”™è¯¯ç†è§£
6. æ•°å€¼è®¡ç®—è¦åˆç†ï¼Œé¿å…å¤æ‚è¿ç®—

## è§£ç­”è¦æ±‚ï¼š
æ¯é“é¢˜çš„explanationå¿…é¡»åŒ…å«ï¼š
- åŒ–å­¦æ¦‚å¿µæˆ–åŸç†çš„é˜è¿°
- å…¬å¼çš„é€‰æ‹©å’Œåº”ç”¨
- è®¡ç®—è¿‡ç¨‹ï¼ˆå¦‚æœ‰ï¼‰
- ç»“æœçš„åŒ–å­¦æ„ä¹‰

è¯·æŒ‰ä»¥ä¸‹JSONæ ¼å¼è¿”å›ï¼š

{
  "questions": [
    {
      "question": "é¢˜ç›®å†…å®¹",
      "options": ["é€‰é¡¹A", "é€‰é¡¹B", "é€‰é¡¹C", "é€‰é¡¹D"],
      "correct": æ­£ç¡®ç­”æ¡ˆçš„ç´¢å¼•(0-3),
      "explanation": "è¯¦ç»†è§£é¢˜æ­¥éª¤ï¼š1. åŒ–å­¦åŸç†... 2. å…¬å¼åº”ç”¨... 3. è®¡ç®—è¿‡ç¨‹... 4. ç­”æ¡ˆåˆ†æ..."
    }
  ]
}`;

                const response = await fetch('/api/chat', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ prompt: prompt })
                });

                if (!response.ok) {
                    throw new Error(`HTTPé”™è¯¯: ${response.status}`);
                }

                const result = await response.json();
                
                if (result.error) {
                    throw new Error(result.message || 'AIç”Ÿæˆå¤±è´¥');
                }

                const test = parseAIQuizResponse(result.output);
                currentQuestions = test.questions;
                displayChemistryTest(test, container, subjectNames[subject], typeNames[type]);
                
            } catch (error) {
                console.error('ç”ŸæˆåŒ–å­¦æµ‹è¯•å¤±è´¥:', error);
                // å¤‡ç”¨é¢˜ç›®
                const fallbackTest = {
                    questions: [
                        {
                            question: "ä¸‹åˆ—ç‰©è´¨ä¸­ï¼Œå±äºåŒ–åˆç‰©çš„æ˜¯ï¼š",
                            options: ["æ°§æ°”", "æ°´", "é“", "æ°®æ°”"],
                        correct: 1,
                            explanation: "åŒ–åˆç‰©æ˜¯ç”±ä¸¤ç§æˆ–ä¸¤ç§ä»¥ä¸Šä¸åŒå…ƒç´ ç»„æˆçš„çº¯å‡€ç‰©ã€‚æ°´($H_2O$)ç”±æ°¢å…ƒç´ å’Œæ°§å…ƒç´ ç»„æˆï¼Œå±äºåŒ–åˆç‰©ã€‚"
                        }
                    ]
                };
                currentQuestions = fallbackTest.questions;
                displayChemistryTest(fallbackTest, container, subjectNames[subject], typeNames[type]);
            }
        }

        // è·å–åŒ–å­¦è¯¾ç¨‹èŒƒå›´
        function getChemistryCurriculumScope(level, grade, subject, type) {
            const curriculum = {
                'middle': {
                    'grade9-1': {
                        'inorganic': {
                            'basic-concepts': `
**ä¹å¹´çº§ä¸Šå­¦æœŸæ— æœºåŒ–å­¦åŸºç¡€æ¦‚å¿µï¼š**
- èµ°è¿›åŒ–å­¦ä¸–ç•Œï¼šåŒ–å­¦çš„ç‰¹å¾ã€åŒ–å­¦å˜åŒ–å’Œç‰©ç†å˜åŒ–
- ç‰©è´¨çš„æ€§è´¨å’Œå˜åŒ–ï¼šç‰©ç†æ€§è´¨ã€åŒ–å­¦æ€§è´¨ã€ç‰©ç†å˜åŒ–ã€åŒ–å­¦å˜åŒ–
- åŒ–å­¦æ˜¯ä¸€é—¨ä»¥å®éªŒä¸ºåŸºç¡€çš„ç§‘å­¦ï¼šåŒ–å­¦å®éªŒçš„åŸºæœ¬æ“ä½œ
- ç‰©è´¨æ„æˆçš„å¥¥ç§˜ï¼šåˆ†å­ã€åŸå­ã€ç¦»å­ã€å…ƒç´ 
- åŒ–å­¦å¼çš„ä¹¦å†™å’Œæ„ä¹‰ï¼šåŒ–å­¦å¼ã€åŒ–åˆä»·
- åŒ–å­¦æ–¹ç¨‹å¼ï¼šè´¨é‡å®ˆæ’å®šå¾‹ã€åŒ–å­¦æ–¹ç¨‹å¼çš„é…å¹³`,
                            
                            'elements': `
**ä¹å¹´çº§ä¸Šå­¦æœŸå…ƒç´ åŒ–åˆç‰©ï¼š**
- æˆ‘ä»¬å‘¨å›´çš„ç©ºæ°”ï¼šç©ºæ°”çš„ç»„æˆã€æ°§æ°”çš„æ€§è´¨å’Œåˆ¶å–
- æ°§æ°”çš„åŒ–å­¦æ€§è´¨ï¼šæ°§æ°”ä¸ç¢³ã€ç¡«ã€ç£·ã€é“ã€èœ¡çƒ›çš„ååº”
- è‡ªç„¶ç•Œçš„æ°´ï¼šæ°´çš„ç»„æˆã€æ°¢æ°”çš„æ€§è´¨ã€æ°´çš„å‡€åŒ–
- çˆ±æŠ¤æ°´èµ„æºï¼šæ°´æ±¡æŸ“åŠé˜²æ²»ã€æ°´èµ„æºä¿æŠ¤
- ç¢³å’Œç¢³çš„æ°§åŒ–ç‰©ï¼šé‡‘åˆšçŸ³ã€çŸ³å¢¨ã€C60ã€ä¸€æ°§åŒ–ç¢³ã€äºŒæ°§åŒ–ç¢³`,
                            
                            'reactions': `
**ä¹å¹´çº§ä¸Šå­¦æœŸåŒ–å­¦ååº”ï¼š**
- åŒ–åˆååº”ï¼šä¸¤ç§æˆ–å¤šç§ç‰©è´¨ç”Ÿæˆä¸€ç§ç‰©è´¨
- åˆ†è§£ååº”ï¼šä¸€ç§ç‰©è´¨ç”Ÿæˆä¸¤ç§æˆ–å¤šç§ç‰©è´¨
- ç‡ƒçƒ§å’Œç¼“æ…¢æ°§åŒ–ï¼šç‡ƒçƒ§çš„æ¡ä»¶ã€ç­ç«çš„åŸç†
- åŒ–å­¦æ–¹ç¨‹å¼çš„ä¹¦å†™ï¼šååº”ç‰©ã€ç”Ÿæˆç‰©ã€ååº”æ¡ä»¶
- æ ¹æ®åŒ–å­¦æ–¹ç¨‹å¼çš„è®¡ç®—ï¼šè´¨é‡æ¯”è®¡ç®—`,
                            
                            'redox': `
**ä¹å¹´çº§ä¸Šå­¦æœŸæ°§åŒ–è¿˜åŸï¼ˆåˆæ­¥ï¼‰ï¼š**
- æ°§åŒ–ååº”ï¼šç‰©è´¨ä¸æ°§ç»“åˆçš„ååº”
- è¿˜åŸååº”ï¼šå«æ°§åŒ–åˆç‰©å¤±å»æ°§çš„ååº”
- æ°§åŒ–æ€§å’Œè¿˜åŸæ€§ï¼šæ°§æ°”çš„æ°§åŒ–æ€§ã€æ°¢æ°”çš„è¿˜åŸæ€§
- ç‡ƒæ–™åŠå…¶åˆ©ç”¨ï¼šåŒ–çŸ³ç‡ƒæ–™ã€ç‡ƒæ–™çš„å……åˆ†ç‡ƒçƒ§`
                        }
                    },
                    'grade9-2': {
                        'inorganic': {
                            'elements': `
**ä¹å¹´çº§ä¸‹å­¦æœŸå…ƒç´ åŒ–åˆç‰©ï¼š**
- é‡‘å±å’Œé‡‘å±ææ–™ï¼šé‡‘å±çš„ç‰©ç†æ€§è´¨ã€é‡‘å±çš„åŒ–å­¦æ€§è´¨
- é‡‘å±æ´»åŠ¨æ€§é¡ºåºï¼šç½®æ¢ååº”ã€é‡‘å±çš„å†¶ç‚¼
- é‡‘å±èµ„æºçš„åˆ©ç”¨å’Œä¿æŠ¤ï¼šé“çš„é”ˆèš€ã€é‡‘å±çš„å›æ”¶åˆ©ç”¨
- æº¶æ¶²ï¼šæº¶æ¶²çš„å½¢æˆã€é¥±å’Œæº¶æ¶²ä¸ä¸é¥±å’Œæº¶æ¶²
- æº¶è§£åº¦ï¼šæº¶è§£åº¦æ›²çº¿ã€æº¶æ¶²çš„é…åˆ¶`,
                            
                            'reactions': `
**ä¹å¹´çº§ä¸‹å­¦æœŸåŒ–å­¦ååº”ï¼š**
- é…¸å’Œç¢±ï¼šå¸¸è§çš„é…¸ã€å¸¸è§çš„ç¢±ã€é…¸ç¢±æŒ‡ç¤ºå‰‚
- é…¸å’Œç¢±çš„ä¸­å’Œååº”ï¼šä¸­å’Œååº”ã€pHçš„åº”ç”¨
- ç›ï¼šç›çš„æ€§è´¨ã€å¤åˆ†è§£ååº”å‘ç”Ÿçš„æ¡ä»¶
- åŒ–è‚¥ï¼šæ°®è‚¥ã€ç£·è‚¥ã€é’¾è‚¥ã€å¤åˆè‚¥æ–™`
                        }
                    }
                },
                'high': {
                    'grade10-1': {
                        'inorganic': {
                            'basic-concepts': `
**é«˜ä¸€ä¸Šå­¦æœŸæ— æœºåŒ–å­¦åŸºç¡€æ¦‚å¿µï¼š**
- ç‰©è´¨çš„åˆ†ç±»ï¼šçº¯å‡€ç‰©å’Œæ··åˆç‰©ã€å•è´¨å’ŒåŒ–åˆç‰©ã€é…¸ç¢±ç›æ°§åŒ–ç‰©
- åŒ–å­¦è®¡é‡åœ¨å®éªŒä¸­çš„åº”ç”¨ï¼šç‰©è´¨çš„é‡ã€æ‘©å°”è´¨é‡ã€æ°”ä½“æ‘©å°”ä½“ç§¯
- ç‰©è´¨çš„é‡æµ“åº¦ï¼šæº¶æ¶²çš„é…åˆ¶ã€ç‰©è´¨çš„é‡æµ“åº¦çš„è®¡ç®—
- åŒ–å­¦å®éªŒåŸºæœ¬æ–¹æ³•ï¼šæ··åˆç‰©çš„åˆ†ç¦»å’Œæçº¯ã€ç¦»å­æ£€éªŒ`,
                            
                            'elements': `
**é«˜ä¸€ä¸Šå­¦æœŸå…ƒç´ åŒ–åˆç‰©ï¼š**
- æµ·æ°´ä¸­çš„é‡è¦å…ƒç´ ï¼šæ°¯æ°”çš„æ€§è´¨ã€æ°¯ç¦»å­çš„æ£€éªŒ
- å¤æ—å…ƒç´ ï¼šå¤ç´ å•è´¨çš„æ€§è´¨ã€å¤åŒ–ç‰©çš„æ€§è´¨
- é“ã€é‡‘å±ææ–™ï¼šé“çš„æ°§åŒ–ç‰©ã€é“çš„æ°¢æ°§åŒ–ç‰©
- ç”¨é€”å¹¿æ³›çš„é‡‘å±ææ–™ï¼šåˆé‡‘çš„æ¦‚å¿µå’Œæ€§è´¨`,
                            
                            'reactions': `
**é«˜ä¸€ä¸Šå­¦æœŸåŒ–å­¦ååº”ï¼š**
- æ°§åŒ–è¿˜åŸååº”ï¼šæ°§åŒ–è¿˜åŸååº”çš„æœ¬è´¨ã€æ°§åŒ–å‰‚å’Œè¿˜åŸå‰‚
- ç¦»å­ååº”ï¼šç”µè§£è´¨å’Œéç”µè§£è´¨ã€ç¦»å­æ–¹ç¨‹å¼çš„ä¹¦å†™
- ç‰©è´¨çš„é‡åœ¨åŒ–å­¦æ–¹ç¨‹å¼è®¡ç®—ä¸­çš„åº”ç”¨ï¼šåŒ–å­¦ååº”ä¸­ç‰©è´¨çš„é‡çš„å…³ç³»`
                        }
                    }
                }
            };
            
            return curriculum[level]?.[grade]?.[subject]?.[type] || `è¯·ç”Ÿæˆç¬¦åˆ${level}${grade}åŒ–å­¦${subject}ä¸­${type}å†…å®¹çš„é¢˜ç›®`;
        }

        // è§£æAIå“åº”
        function parseAIQuizResponse(response) {
            try {
                if (response.startsWith('{')) {
                    return JSON.parse(response);
                }
                
                const jsonMatch = response.match(/```(?:json)?\s*(\{[\s\S]*?\})\s*```/);
                if (jsonMatch) {
                    return JSON.parse(jsonMatch[1]);
                }
                
                const jsonStart = response.indexOf('{');
                const jsonEnd = response.lastIndexOf('}') + 1;
                if (jsonStart !== -1 && jsonEnd > jsonStart) {
                    const jsonString = response.substring(jsonStart, jsonEnd);
                    return JSON.parse(jsonString);
                }
                
                throw new Error('æ— æ³•è§£æAIå“åº”');
            } catch (error) {
                console.error('è§£æAIå“åº”å¤±è´¥:', error);
                return {
                    questions: [
                        {
                            question: "ç¤ºä¾‹åŒ–å­¦é¢˜ç›®",
                            options: ["é€‰é¡¹A", "é€‰é¡¹B", "é€‰é¡¹C", "é€‰é¡¹D"],
                            correct: 0,
                            explanation: "è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹è§£é‡Š"
                        }
                    ]
                };
            }
        }

        // æ˜¾ç¤ºåŒ–å­¦æµ‹è¯•
        function displayChemistryTest(test, container, subjectName, typeName) {
            let html = `<h3>${subjectName} - ${typeName}æµ‹è¯•</h3>`;
            
            if (test.questions && Array.isArray(test.questions)) {
                test.questions.forEach((question, index) => {
                    html += `
                <div class="test-question">
                            <div class="question-text">${index + 1}. ${question.question}</div>
                    <ul class="options-list">
                    `;
                    
                    question.options.forEach((option, optionIndex) => {
                        html += `
                            <li class="option-item" data-question="${index}" data-option="${optionIndex}" data-correct="${question.correct}">
                                ${String.fromCharCode(65 + optionIndex)}. ${option}
                    </li>
                        `;
                    });
                    
                    html += '</ul></div>';
                });
            }
            
            html += `
                <div style="text-align: center; margin-top: 2rem;">
                    <button class="btn btn-primary" id="submit-chemistry-test">
                        <i class="fas fa-check"></i> æäº¤ç­”æ¡ˆ
                    </button>
                </div>
            `;
            
            container.innerHTML = html;
            
            // æ¸²æŸ“MathJax
            renderMathJaxSafely(container);
            
            // æ·»åŠ é€‰é¡¹ç‚¹å‡»äº‹ä»¶
            const options = container.querySelectorAll('.option-item');
            options.forEach(option => {
                option.addEventListener('click', function() {
                    const questionId = this.getAttribute('data-question');
                    const questionOptions = document.querySelectorAll(`.option-item[data-question="${questionId}"]`);
                    questionOptions.forEach(o => o.classList.remove('selected'));
                    this.classList.add('selected');
                });
            });
            
            // æ·»åŠ æäº¤æŒ‰é’®äº‹ä»¶
            const submitBtn = container.querySelector('#submit-chemistry-test');
            submitBtn.addEventListener('click', function() {
                const selectedOptions = container.querySelectorAll('.option-item.selected');
                if (selectedOptions.length < (test.questions?.length || 1)) {
                    alert('è¯·å›ç­”æ‰€æœ‰é—®é¢˜');
                    return;
                }
                
                showChemistryTestResults(test, selectedOptions, container);
            });
        }

        // æ˜¾ç¤ºæµ‹è¯•ç»“æœ
        function showChemistryTestResults(test, selectedOptions, container) {
            let score = 0;
            let userAnswers = [];
            
            selectedOptions.forEach(selectedOption => {
                const questionIndex = parseInt(selectedOption.getAttribute('data-question'));
                const selectedIndex = parseInt(selectedOption.getAttribute('data-option'));
                const correctIndex = parseInt(selectedOption.getAttribute('data-correct'));
                
                userAnswers[questionIndex] = {
                    selected: selectedIndex,
                    correct: correctIndex,
                    isCorrect: selectedIndex === correctIndex
                };
                
                if (selectedIndex === correctIndex) {
                    score++;
                }
            });

            const percentage = Math.round((score / test.questions.length) * 100);
            
            let resultsHtml = `
                <div class="result-summary">
                    <div class="score-display">${percentage}%</div>
                    <div class="level-badge">${getChemistryLevel(percentage)}</div>
                    <p>æ‚¨ç­”å¯¹äº† ${score} é“é¢˜ï¼Œå…± ${test.questions.length} é“é¢˜</p>
                    
                    <div class="learning-suggestion">
                        <h4><i class="fas fa-lightbulb"></i> å­¦ä¹ å»ºè®®</h4>
                        <p>${getChemistryLearningAdvice(percentage)}</p>
                    </div>
                </div>
                
                <h4><i class="fas fa-clipboard-list"></i> è¯¦ç»†ç»“æœåˆ†æ</h4>
            `;
            
            test.questions.forEach((question, index) => {
                            const userAnswer = userAnswers[index];
                const isCorrect = userAnswer.isCorrect;
                
                resultsHtml += `
                    <div class="question-result ${isCorrect ? 'correct' : 'incorrect'}">
                        <div class="question-header">
                            <div class="question-number">é¢˜ç›® ${index + 1}</div>
                            <div class="question-status ${isCorrect ? 'correct' : 'incorrect'}">
                                <i class="fas ${isCorrect ? 'fa-check-circle' : 'fa-times-circle'}"></i>
                                ${isCorrect ? 'æ­£ç¡®' : 'é”™è¯¯'}
                                        </div>
                                            </div>
                        
                        <div class="original-question">${question.question}</div>
                        
                        <div class="answer-analysis">
                            <div class="user-answer ${isCorrect ? 'correct' : 'incorrect'}">
                                <strong>æ‚¨çš„ç­”æ¡ˆï¼š</strong>
                                <span class="answer-option">${String.fromCharCode(65 + userAnswer.selected)}. ${question.options[userAnswer.selected]}</span>
                                        </div>
                            <div class="correct-answer">
                                <strong>æ­£ç¡®ç­”æ¡ˆï¼š</strong>
                                <span class="answer-option">${String.fromCharCode(65 + question.correct)}. ${question.options[question.correct]}</span>
                                    </div>
                    </div>
                        
                        <div class="explanation-content">
                            <strong><i class="fas fa-lightbulb"></i> è§£é¢˜æ€è·¯ï¼š</strong>
                            <div class="explanation-text">${question.explanation}</div>
                </div>
                    </div>
                `;
            });
                
            resultsHtml += `
                <div class="result-actions">
                    <button class="btn btn-primary" onclick="location.reload()">
                        <i class="fas fa-redo"></i> é‡æ–°æµ‹è¯•
                    </button>
                    <button class="btn btn-secondary" onclick="window.location.href='main.html'">
                        <i class="fas fa-home"></i> è¿”å›é¦–é¡µ
                    </button>
                </div>
            `;
            
            container.innerHTML = resultsHtml;
            renderMathJaxSafely(container);
        }

        // è·å–åŒ–å­¦æ°´å¹³
        function getChemistryLevel(percentage) {
            if (percentage >= 90) return 'åŒ–å­¦å­¦éœ¸';
            if (percentage >= 80) return 'åŒ–å­¦é«˜æ‰‹';
            if (percentage >= 70) return 'åŒ–å­¦èƒ½æ‰‹';
            if (percentage >= 60) return 'åŒ–å­¦å­¦å¾’';
            return 'éœ€è¦åŠ å¼º';
        }

        // è·å–å­¦ä¹ å»ºè®®
        function getChemistryLearningAdvice(percentage) {
            if (percentage >= 90) {
                return 'ä¼˜ç§€ï¼æ‚¨çš„åŒ–å­¦åŸºç¡€éå¸¸æ‰å®ï¼Œå»ºè®®ç»§ç»­æŒ‘æˆ˜æ›´é«˜éš¾åº¦çš„é¢˜ç›®ï¼Œå¹¶å°è¯•åŒ–å­¦ç«èµ›ç›¸å…³å†…å®¹ã€‚';
            } else if (percentage >= 80) {
                return 'å¾ˆå¥½ï¼æ‚¨æŒæ¡äº†å¤§éƒ¨åˆ†åŒ–å­¦çŸ¥è¯†ï¼Œå»ºè®®åŠ å¼ºè–„å¼±ç¯èŠ‚çš„ç»ƒä¹ ï¼Œå¤šåšç»¼åˆæ€§é¢˜ç›®ã€‚';
            } else if (percentage >= 70) {
                return 'ä¸é”™ï¼æ‚¨çš„åŒ–å­¦åŸºç¡€è¾ƒå¥½ï¼Œå»ºè®®ç³»ç»Ÿå¤ä¹ é”™é¢˜æ¶‰åŠçš„çŸ¥è¯†ç‚¹ï¼ŒåŠ å¼ºå®éªŒå’Œè®¡ç®—èƒ½åŠ›ã€‚';
            } else if (percentage >= 60) {
                return 'è¿˜éœ€åŠªåŠ›ï¼å»ºè®®å›é¡¾åŸºç¡€æ¦‚å¿µï¼Œå¤šåšåŸºç¡€é¢˜ç›®ï¼Œé‡ç‚¹æŒæ¡åŒ–å­¦æ–¹ç¨‹å¼å’ŒåŸºæœ¬è®¡ç®—ã€‚';
                } else {
                return 'éœ€è¦åŠ å¼ºåŸºç¡€ï¼å»ºè®®ä»åŒ–å­¦åŸºæœ¬æ¦‚å¿µå¼€å§‹ï¼Œç³»ç»Ÿå­¦ä¹ æ•™æå†…å®¹ï¼Œå¤šåšç»ƒä¹ å·©å›ºçŸ¥è¯†ã€‚';
            }
        }

        // å®‰å…¨æ¸²æŸ“MathJax
        function renderMathJaxSafely(element) {
            if (window.MathJax && window.MathJax.typesetPromise) {
                window.MathJax.typesetPromise([element]).catch(function(err) {
                    console.error('MathJaxæ¸²æŸ“é”™è¯¯:', err);
                });
            }
        }
    </script>
</body>
</html> 