<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>化学计算工具 - 化学学习助手</title>
    <link rel="icon" href="../../assets/icons/logo_btrfly.ico" type="image/x-icon">
    <link rel="stylesheet" href="../../css/common.css">
    <link rel="stylesheet" href="../../css/components.css">
    <link rel="stylesheet" href="../../css/utilities.css">
    <link rel="stylesheet" href="../../css/responsive.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Mobile First Design */
        .calculator-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem;
        }

        .calculator-header {
            text-align: center;
            margin-bottom: 2rem;
            padding: 2rem 1rem;
            background: linear-gradient(135deg, #dc3545 0%, #fd7e14 100%);
            border-radius: 15px;
            color: white;
        }

        .calculator-header h1 {
            font-size: 1.8rem;
            margin-bottom: 0.5rem;
        }

        .calculator-header p {
            font-size: 1rem;
            opacity: 0.9;
        }

        .calculator-tabs {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 0.5rem;
            margin-bottom: 2rem;
            background: white;
            padding: 0.5rem;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        .calculator-tab {
            padding: 1rem 0.5rem;
            border: none;
            border-radius: 10px;
            background: transparent;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .calculator-tab:hover {
            background: rgba(220, 53, 69, 0.1);
        }

        .calculator-tab.active {
            background: linear-gradient(135deg, #dc3545, #fd7e14);
            color: white;
            box-shadow: 0 4px 15px rgba(220, 53, 69, 0.3);
        }

        .calculator-section {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            margin-bottom: 2rem;
            display: none;
        }

        .calculator-section.active {
            display: block;
        }

        .calculation-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 2rem;
        }

        .input-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 1.5rem;
        }

        .result-section {
            background: linear-gradient(135deg, rgba(220, 53, 69, 0.05), rgba(253, 126, 20, 0.05));
            border-radius: 10px;
            padding: 1.5rem;
            border-left: 4px solid #dc3545;
        }

        .input-group {
            margin-bottom: 1.5rem;
        }

        .input-label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #2d3748;
        }

        .calc-input {
            width: 100%;
            padding: 1rem;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .calc-input:focus {
            outline: none;
            border-color: #dc3545;
            box-shadow: 0 0 0 3px rgba(220, 53, 69, 0.1);
        }

        .calc-select {
            width: 100%;
            padding: 1rem;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            background: white;
            font-size: 1rem;
            cursor: pointer;
        }

        .calculate-btn {
            width: 100%;
            padding: 1rem 2rem;
            background: linear-gradient(135deg, #dc3545, #fd7e14);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 1rem;
        }

        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(220, 53, 69, 0.3);
        }

        .result-display {
            background: white;
            border-radius: 8px;
            padding: 1.5rem;
            margin-top: 1rem;
        }

        .result-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: #dc3545;
            margin-bottom: 0.5rem;
        }

        .result-label {
            color: #718096;
            font-size: 0.9rem;
        }

        .formula-display {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            font-family: 'Courier New', monospace;
            font-weight: 600;
            color: #856404;
        }

        .step-by-step {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
        }

        .step {
            margin-bottom: 1rem;
            padding: 0.5rem;
            background: white;
            border-radius: 5px;
            border-left: 3px solid #fd7e14;
        }

        .step-title {
            font-weight: 600;
            color: #dc3545;
            margin-bottom: 0.25rem;
        }

        .common-compounds {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .compound-btn {
            padding: 0.8rem;
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-size: 0.9rem;
        }

        .compound-btn:hover {
            border-color: #dc3545;
            background: rgba(220, 53, 69, 0.05);
        }

        /* Desktop Responsive */
        @media (min-width: 768px) {
            .calculator-container {
                padding: 2rem;
            }

            .calculator-header h1 {
                font-size: 2.5rem;
            }

            .calculator-header p {
                font-size: 1.1rem;
            }

            .calculator-tabs {
                grid-template-columns: repeat(8, 1fr);
            }

            .calculation-grid {
                grid-template-columns: 1fr 1fr;
            }
        }

        @media (min-width: 1024px) {
            .calculation-grid {
                grid-template-columns: 2fr 1fr;
            }
        }

        /* 新增样式 */
        .ph-indicator {
            background: linear-gradient(90deg, 
                #ff0000 0%, #ff4500 14%, #ffa500 28%, 
                #ffff00 42%, #9acd32 57%, #00ff00 71%, 
                #00ced1 85%, #0000ff 100%);
            height: 30px;
            border-radius: 15px;
            position: relative;
            margin: 1rem 0;
        }

        .ph-marker {
            position: absolute;
            top: -10px;
            width: 4px;
            height: 50px;
            background: #333;
            border-radius: 2px;
            transition: left 0.3s ease;
        }

        .ph-scale {
            display: flex;
            justify-content: space-between;
            margin-top: 0.5rem;
            font-size: 0.8rem;
            color: #666;
        }

        .interactive-demo {
            background: #f0f8ff;
            border: 2px dashed #4169e1;
            border-radius: 10px;
            padding: 1rem;
            margin: 1rem 0;
            text-align: center;
        }

        .demo-button {
            background: linear-gradient(135deg, #4169e1, #6495ed);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            margin: 0.5rem;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .demo-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(65, 105, 225, 0.3);
        }

        .calculation-tip {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0 8px 8px 0;
        }

        .tip-icon {
            color: #ffc107;
            margin-right: 0.5rem;
        }

        .error-message {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            display: none;
        }

        .success-message {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            display: none;
        }

        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #dc3545;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
            display: none;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* 增强的响应式设计 */
        @media (max-width: 480px) {
            .calculator-tabs {
                grid-template-columns: repeat(2, 1fr);
                gap: 0.25rem;
            }
            
            .calculator-tab {
                padding: 0.8rem 0.25rem;
                font-size: 0.8rem;
            }
            
            .common-compounds {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .compound-btn {
                font-size: 0.8rem;
                padding: 0.6rem;
            }
        }
    </style>
</head>
<body>
    <header class="main-header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <a href="../../index.html">
                        <i class="fas fa-graduation-cap" style="background: linear-gradient(90deg, #4361ee, #7209b7); -webkit-background-clip: text; background-clip: text; color: transparent;"></i>
                        <span>Alex的学习助手</span>
                    </a>
                </div>
                <nav class="main-nav">
                    <ul>
                        <li><a href="../../index.html">首页</a></li>
                        <li><a href="main.html">化学</a></li>
                        <li><a href="../../tts.html">语音</a></li>
                        <li><a href="../../draw.html">绘图</a></li>
                    </ul>
                </nav>
                <button class="mobile-menu-toggle" aria-label="切换菜单">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
        </div>
    </header>

    <main class="calculator-container">
        <div class="calculator-header">
            <h1><i class="fas fa-calculator"></i> 化学计算工具</h1>
            <p>进行摩尔计算、浓度换算、化学计量学等常用化学计算</p>
        </div>

        <!-- 计算器标签 -->
        <div class="calculator-tabs">
            <button class="calculator-tab active" data-tab="molarity">摩尔浓度</button>
            <button class="calculator-tab" data-tab="stoichiometry">化学计量学</button>
            <button class="calculator-tab" data-tab="composition">组成计算</button>
            <button class="calculator-tab" data-tab="gas">气体定律</button>
            <button class="calculator-tab" data-tab="dilution">稀释计算</button>
            <button class="calculator-tab" data-tab="ph">pH计算</button>
            <button class="calculator-tab" data-tab="solubility">溶解度</button>
            <button class="calculator-tab" data-tab="rate">反应速率</button>
        </div>

        <!-- 摩尔浓度计算器 -->
        <div class="calculator-section active" id="molarity">
            <h3><i class="fas fa-flask"></i> 摩尔浓度计算</h3>
            <div class="formula-display">
                M = n / V  或  M = m / (MW × V)
            </div>
            
            <!-- 理论知识解释 -->
            <div class="calculation-tip" style="margin: 2rem 0;">
                <h4><i class="fas fa-graduation-cap"></i> 摩尔浓度基础理论</h4>
                <div style="margin-top: 1rem;">
                    <div class="step" style="background: #f8f9fa; border: 1px solid #e9ecef; margin-bottom: 1rem;">
                        <div class="step-title" style="color: #007bff; font-size: 1.1rem;">📚 概念理解</div>
                        <p><strong>摩尔浓度(Molarity, M)：</strong>表示溶液中溶质的物质的量与溶液体积的比值。</p>
                        <p><strong>数学表达式：</strong>M = n / V = m / (MW × V)</p>
                        <p>其中：M - 摩尔浓度(mol/L)，n - 溶质摩尔数(mol)，V - 溶液体积(L)，m - 溶质质量(g)，MW - 分子量(g/mol)</p>
                    </div>
                    
                    <div class="step" style="background: #f8f9fa; border: 1px solid #e9ecef; margin-bottom: 1rem;">
                        <div class="step-title" style="color: #28a745; font-size: 1.1rem;">🔬 实际意义</div>
                        <p><strong>1 mol/L的含义：</strong>1升溶液中含有1摩尔溶质</p>
                        <p><strong>常见浓度范围：</strong></p>
                        <ul style="margin-left: 1.5rem;">
                            <li>生理盐水：约0.15 mol/L NaCl</li>
                            <li>胃酸：约0.1-0.16 mol/L HCl</li>
                            <li>浓硫酸：约18.4 mol/L H₂SO₄</li>
                            <li>浓盐酸：约12.1 mol/L HCl</li>
                        </ul>
                    </div>
                    
                    <div class="step" style="background: #f8f9fa; border: 1px solid #e9ecef; margin-bottom: 1rem;">
                        <div class="step-title" style="color: #dc3545; font-size: 1.1rem;">⚗️ 配制方法</div>
                        <p><strong>固体溶质配制步骤：</strong></p>
                        <ol style="margin-left: 1.5rem;">
                            <li>计算所需溶质质量：m = M × V × MW</li>
                            <li>用天平精确称取溶质</li>
                            <li>在烧杯中用少量蒸馏水溶解</li>
                            <li>转移至容量瓶，洗涤烧杯</li>
                            <li>加水至刻度线下方，逐滴定容</li>
                            <li>盖塞摇匀，配制完成</li>
                        </ol>
                    </div>

                    <div class="step" style="background: #f8f9fa; border: 1px solid #e9ecef;">
                        <div class="step-title" style="color: #6f42c1; font-size: 1.1rem;">📏 注意事项</div>
                        <ul style="margin-left: 1.5rem;">
                            <li><strong>体积概念：</strong>V指的是溶液总体积，不是溶剂体积</li>
                            <li><strong>温度影响：</strong>溶液体积随温度变化，通常在20°C测定</li>
                            <li><strong>精度要求：</strong>使用容量瓶而非量筒进行精确配制</li>
                            <li><strong>单位换算：</strong>注意mL与L的换算关系(1L = 1000mL)</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- 详细考试真题练习 -->
            <div class="calculation-tip" style="margin-top: 1.5rem;">
                <h5><i class="fas fa-book-open"></i> 中高考真题详解</h5>
                <div style="margin-top: 1rem;">
                    <div class="step" style="background: #fff; border: 1px solid #ddd; margin-bottom: 1rem;">
                        <div class="step-title" style="color: #dc3545; font-size: 1rem;">【真题1】配制溶液计算</div>
                        <p><strong>题目：</strong>现要配制250mL 0.2mol/L的NaCl溶液，需要NaCl固体多少克？需要水多少毫升？</p>
                        <p><strong>解题步骤：</strong></p>
                        <p>①确定所需溶质的物质的量：n = c×V = 0.2mol/L × 0.25L = 0.05mol</p>
                        <p>②计算NaCl的质量：m = n×M = 0.05mol × 58.5g/mol = 2.925g</p>
                        <p>③配制步骤：称取2.925g NaCl，溶解后定容至250mL</p>
                        <p><strong>答案：</strong>需要NaCl 2.925g，水约230mL</p>
                    </div>
                    
                    <div class="step" style="background: #fff; border: 1px solid #ddd; margin-bottom: 1rem;">
                        <div class="step-title" style="color: #dc3545; font-size: 1rem;">【真题2】溶液稀释计算</div>
                        <p><strong>题目：</strong>将100mL 3mol/L的H₂SO₄溶液稀释成0.5mol/L，需要加入多少毫升水？</p>
                        <p><strong>解题步骤：</strong></p>
                        <p>①应用稀释定律：c₁V₁ = c₂V₂</p>
                        <p>②计算稀释后总体积：V₂ = c₁V₁/c₂ = 3×100/0.5 = 600mL</p>
                        <p>③计算需加水体积：V(水) = V₂ - V₁ = 600 - 100 = 500mL</p>
                        <p><strong>答案：</strong>需要加入500mL水</p>
                    </div>
                    
                    <div class="step" style="background: #fff; border: 1px solid #ddd;">
                        <div class="step-title" style="color: #dc3545; font-size: 1rem;">【真题3】反应中浓度计算</div>
                        <p><strong>题目：</strong>在反应CaCO₃ + 2HCl → CaCl₂ + H₂O + CO₂↑中，用2mol/L的HCl溶液50mL，最多能与多少克CaCO₃反应？</p>
                        <p><strong>解题步骤：</strong></p>
                        <p>①计算HCl的物质的量：n(HCl) = 2mol/L × 0.05L = 0.1mol</p>
                        <p>②根据方程式确定物质的量关系：n(CaCO₃) = ½n(HCl) = 0.05mol</p>
                        <p>③计算CaCO₃质量：m = n×M = 0.05mol × 100g/mol = 5g</p>
                        <p><strong>答案：</strong>最多能与5g CaCO₃反应</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 化学计量学计算器 -->
        <div class="calculator-section" id="stoichiometry">
            <h3><i class="fas fa-balance-scale"></i> 化学计量学计算</h3>
            <div class="formula-display">
                mol₁ / coeff₁ = mol₂ / coeff₂
            </div>
            
            <!-- 理论知识解释 -->
            <div class="calculation-tip" style="margin: 2rem 0;">
                <h4><i class="fas fa-graduation-cap"></i> 化学计量学基础理论</h4>
                <div style="margin-top: 1rem;">
                    <div class="step" style="background: #f8f9fa; border: 1px solid #e9ecef; margin-bottom: 1rem;">
                        <div class="step-title" style="color: #007bff; font-size: 1.1rem;">📚 概念理解</div>
                        <p><strong>化学计量学：</strong>研究化学反应中各物质之间数量关系的科学。</p>
                        <p><strong>核心原理：</strong>化学反应遵循质量守恒定律，反应物按一定摩尔比例反应。</p>
                        <p><strong>基本关系式：</strong>n₁/a = n₂/b = n₃/c （对反应 aA + bB → cC）</p>
                    </div>
                    
                    <div class="step" style="background: #f8f9fa; border: 1px solid #e9ecef; margin-bottom: 1rem;">
                        <div class="step-title" style="color: #28a745; font-size: 1.1rem;">🔬 反应类型</div>
                        <p><strong>1. 化合反应：</strong>A + B → C</p>
                        <p>例：2H₂ + O₂ → 2H₂O （氢气与氧气反应生成水）</p>
                        <p><strong>2. 分解反应：</strong>A → B + C</p>
                        <p>例：2H₂O₂ → 2H₂O + O₂ （过氧化氢分解）</p>
                        <p><strong>3. 置换反应：</strong>A + BC → AC + B</p>
                        <p>例：Zn + H₂SO₄ → ZnSO₄ + H₂ （锌与硫酸反应）</p>
                        <p><strong>4. 复分解反应：</strong>AB + CD → AD + CB</p>
                        <p>例：AgNO₃ + NaCl → AgCl↓ + NaNO₃ （沉淀反应）</p>
                    </div>
                    
                    <div class="step" style="background: #f8f9fa; border: 1px solid #e9ecef; margin-bottom: 1rem;">
                        <div class="step-title" style="color: #dc3545; font-size: 1.1rem;">⚗️ 计算步骤</div>
                        <p><strong>标准解题流程：</strong></p>
                        <ol style="margin-left: 1.5rem;">
                            <li><strong>写出平衡方程式：</strong>确保配平正确</li>
                            <li><strong>列出已知条件：</strong>质量、体积、浓度等</li>
                            <li><strong>转换为摩尔数：</strong>n = m/M 或 n = c×V</li>
                            <li><strong>利用计量关系：</strong>根据化学方程式确定比例</li>
                            <li><strong>计算目标量：</strong>转换为所需单位</li>
                        </ol>
                    </div>

                    <div class="step" style="background: #f8f9fa; border: 1px solid #e9ecef;">
                        <div class="step-title" style="color: #6f42c1; font-size: 1.1rem;">📏 实际应用</div>
                        <ul style="margin-left: 1.5rem;">
                            <li><strong>工业生产：</strong>确定原料用量，控制生产成本</li>
                            <li><strong>环境监测：</strong>计算污染物处理所需试剂量</li>
                            <li><strong>医药合成：</strong>精确控制药物合成反应</li>
                            <li><strong>食品工业：</strong>营养成分的定量分析</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- 考试真题练习 -->
            <div class="calculation-tip" style="margin-top: 1.5rem;">
                <h5><i class="fas fa-book-open"></i> 中高考真题详解</h5>
                <div style="margin-top: 1rem;">
                    <div class="step" style="background: #fff; border: 1px solid #ddd; margin-bottom: 1rem;">
                        <div class="step-title" style="color: #dc3545; font-size: 1rem;">【真题1】燃烧反应计算</div>
                        <p><strong>题目：</strong>完全燃烧2.3g乙醇(C₂H₅OH)，需要消耗多少升O₂(标准状况)？生成多少克CO₂？</p>
                        <p><strong>化学方程式：</strong>C₂H₅OH + 3O₂ → 2CO₂ + 3H₂O</p>
                        <p><strong>解题步骤：</strong></p>
                        <p>①计算乙醇摩尔数：n(C₂H₅OH) = 2.3g ÷ 46g/mol = 0.05mol</p>
                        <p>②根据化学计量比：n(O₂) = 3n(C₂H₅OH) = 3 × 0.05 = 0.15mol</p>
                        <p>③计算O₂体积：V(O₂) = 0.15mol × 22.4L/mol = 3.36L</p>
                        <p>④计算CO₂质量：n(CO₂) = 2n(C₂H₅OH) = 0.1mol，m(CO₂) = 0.1 × 44 = 4.4g</p>
                        <p><strong>答案：</strong>需要O₂ 3.36L，生成CO₂ 4.4g</p>
                    </div>
                    
                    <div class="step" style="background: #fff; border: 1px solid #ddd; margin-bottom: 1rem;">
                        <div class="step-title" style="color: #dc3545; font-size: 1rem;">【真题2】金属与酸反应</div>
                        <p><strong>题目：</strong>将6.5g锌投入足量稀硫酸中，计算生成氢气的体积(标准状况)和消耗H₂SO₄的质量。</p>
                        <p><strong>化学方程式：</strong>Zn + H₂SO₄ → ZnSO₄ + H₂↑</p>
                        <p><strong>解题步骤：</strong></p>
                        <p>①计算锌的摩尔数：n(Zn) = 6.5g ÷ 65g/mol = 0.1mol</p>
                        <p>②根据1:1:1计量关系：n(H₂) = n(H₂SO₄) = n(Zn) = 0.1mol</p>
                        <p>③计算H₂体积：V(H₂) = 0.1mol × 22.4L/mol = 2.24L</p>
                        <p>④计算H₂SO₄质量：m(H₂SO₄) = 0.1mol × 98g/mol = 9.8g</p>
                        <p><strong>答案：</strong>生成H₂ 2.24L，消耗H₂SO₄ 9.8g</p>
                    </div>
                    
                    <div class="step" style="background: #fff; border: 1px solid #ddd;">
                        <div class="step-title" style="color: #dc3545; font-size: 1rem;">【真题3】沉淀反应计算</div>
                        <p><strong>题目：</strong>向AgNO₃溶液中加入1.17g NaCl，完全反应后生成多少克AgCl沉淀？</p>
                        <p><strong>化学方程式：</strong>AgNO₃ + NaCl → AgCl↓ + NaNO₃</p>
                        <p><strong>解题步骤：</strong></p>
                        <p>①计算NaCl摩尔数：n(NaCl) = 1.17g ÷ 58.5g/mol = 0.02mol</p>
                        <p>②根据1:1计量关系：n(AgCl) = n(NaCl) = 0.02mol</p>
                        <p>③计算AgCl质量：m(AgCl) = 0.02mol × 143.5g/mol = 2.87g</p>
                        <p><strong>答案：</strong>生成AgCl沉淀2.87g</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 组成计算器 -->
        <div class="calculator-section" id="composition">
            <h3><i class="fas fa-pie-chart"></i> 百分组成计算</h3>
            <div class="formula-display">
                %成分 = (原子质量 × 原子数) / 分子量 × 100%
            </div>
            
            <!-- 理论知识解释 -->
            <div class="calculation-tip" style="margin: 2rem 0;">
                <h4><i class="fas fa-graduation-cap"></i> 百分组成基础理论</h4>
                <div style="margin-top: 1rem;">
                    <div class="step" style="background: #f8f9fa; border: 1px solid #e9ecef; margin-bottom: 1rem;">
                        <div class="step-title" style="color: #007bff; font-size: 1.1rem;">📚 概念理解</div>
                        <p><strong>质量分数：</strong>化合物中某元素的质量占化合物总质量的百分比。</p>
                        <p><strong>计算公式：</strong>w(X) = (n × Ar(X)) / Mr × 100%</p>
                        <p>其中：w(X) - 元素X的质量分数，n - 原子个数，Ar - 相对原子质量，Mr - 相对分子质量</p>
                    </div>
                    
                    <div class="step" style="background: #f8f9fa; border: 1px solid #e9ecef; margin-bottom: 1rem;">
                        <div class="step-title" style="color: #28a745; font-size: 1.1rem;">🔬 分子式推断</div>
                        <p><strong>由质量分数求分子式：</strong></p>
                        <ol style="margin-left: 1.5rem;">
                            <li>设化合物质量为100g，各元素质量 = 质量分数 × 100g</li>
                            <li>计算各元素原子数目比：n(X) = m(X) / Ar(X)</li>
                            <li>找出最简整数比，得到最简式</li>
                            <li>由分子量确定分子式：分子式 = 最简式 × n</li>
                        </ol>
                    </div>
                    
                    <div class="step" style="background: #f8f9fa; border: 1px solid #e9ecef; margin-bottom: 1rem;">
                        <div class="step-title" style="color: #dc3545; font-size: 1.1rem;">⚗️ 常见化合物组成</div>
                        <p><strong>重要化合物示例：</strong></p>
                        <ul style="margin-left: 1.5rem;">
                            <li><strong>H₂SO₄：</strong>H(2.04%), S(32.65%), O(65.31%)</li>
                            <li><strong>CaCO₃：</strong>Ca(40.04%), C(12.00%), O(47.96%)</li>
                            <li><strong>NH₃：</strong>N(82.35%), H(17.65%)</li>
                            <li><strong>NaCl：</strong>Na(39.32%), Cl(60.68%)</li>
                        </ul>
                    </div>

                    <div class="step" style="background: #f8f9fa; border: 1px solid #e9ecef;">
                        <div class="step-title" style="color: #6f42c1; font-size: 1.1rem;">📏 实际应用</div>
                        <ul style="margin-left: 1.5rem;">
                            <li><strong>矿物分析：</strong>确定矿石中有价元素含量</li>
                            <li><strong>食品检测：</strong>营养成分标签制定</li>
                            <li><strong>药物分析：</strong>有效成分含量测定</li>
                            <li><strong>环境监测：</strong>污染物成分分析</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- 考试真题练习 -->
            <div class="calculation-tip" style="margin-top: 1.5rem;">
                <h5><i class="fas fa-book-open"></i> 中高考真题详解</h5>
                <div style="margin-top: 1rem;">
                    <div class="step" style="background: #fff; border: 1px solid #ddd; margin-bottom: 1rem;">
                        <div class="step-title" style="color: #dc3545; font-size: 1rem;">【真题1】硫酸分子组成</div>
                        <p><strong>题目：</strong>计算硫酸(H₂SO₄)中各元素的质量分数。</p>
                        <p><strong>解题步骤：</strong></p>
                        <p>①计算分子量：Mr(H₂SO₄) = 2×1 + 1×32 + 4×16 = 98 g/mol</p>
                        <p>②计算各元素质量分数：</p>
                        <p>　　w(H) = (2×1)/98 × 100% = 2.04%</p>
                        <p>　　w(S) = (1×32)/98 × 100% = 32.65%</p>
                        <p>　　w(O) = (4×16)/98 × 100% = 65.31%</p>
                        <p><strong>答案：</strong>H: 2.04%, S: 32.65%, O: 65.31%</p>
                    </div>
                    
                    <div class="step" style="background: #fff; border: 1px solid #ddd; margin-bottom: 1rem;">
                        <div class="step-title" style="color: #dc3545; font-size: 1rem;">【真题2】确定化学式</div>
                        <p><strong>题目：</strong>某化合物含C 40%，H 6.67%，O 53.33%，求其最简式。(相对原子质量：C-12，H-1，O-16)</p>
                        <p><strong>解题步骤：</strong></p>
                        <p>①设化合物质量为100g，则：m(C)=40g，m(H)=6.67g，m(O)=53.33g</p>
                        <p>②计算各元素原子数目比：</p>
                        <p>　　n(C) : n(H) : n(O) = 40/12 : 6.67/1 : 53.33/16</p>
                        <p>　　= 3.33 : 6.67 : 3.33 = 1 : 2 : 1</p>
                        <p><strong>答案：</strong>最简式为CH₂O</p>
                    </div>
                    
                    <div class="step" style="background: #fff; border: 1px solid #ddd;">
                        <div class="step-title" style="color: #dc3545; font-size: 1rem;">【真题3】含量计算</div>
                        <p><strong>题目：</strong>要制取32g CuSO₄·5H₂O，需要多少克CuSO₄？</p>
                        <p><strong>解题步骤：</strong></p>
                        <p>①计算CuSO₄·5H₂O的分子量：</p>
                        <p>　　Mr = 64 + 32 + 64 + 90 = 250 g/mol</p>
                        <p>②计算CuSO₄在其中的质量分数：</p>
                        <p>　　w(CuSO₄) = 160/250 × 100% = 64%</p>
                        <p>③计算所需CuSO₄质量：m = 32g × 64% = 20.48g</p>
                        <p><strong>答案：</strong>需要CuSO₄ 20.48g</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 气体定律计算器 -->
        <div class="calculator-section" id="gas">
            <h3><i class="fas fa-wind"></i> 理想气体定律</h3>
            <div class="formula-display">
                PV = nRT  (R = 0.08206 L·atm/mol·K)
            </div>
            
            <!-- 理论知识解释 -->
            <div class="calculation-tip" style="margin: 2rem 0;">
                <h4><i class="fas fa-graduation-cap"></i> 理想气体定律基础理论</h4>
                <div style="margin-top: 1rem;">
                    <div class="step" style="background: #f8f9fa; border: 1px solid #e9ecef; margin-bottom: 1rem;">
                        <div class="step-title" style="color: #007bff; font-size: 1.1rem;">📚 概念理解</div>
                        <p><strong>理想气体定律：</strong>PV = nRT，描述理想气体状态的方程。</p>
                        <p><strong>参数含义：</strong></p>
                        <ul style="margin-left: 1.5rem;">
                            <li>P - 压强(atm或Pa)</li>
                            <li>V - 体积(L或m³)</li>
                            <li>n - 摩尔数(mol)</li>
                            <li>R - 气体常数(0.08206 L·atm/mol·K)</li>
                            <li>T - 绝对温度(K，T = t°C + 273)</li>
                        </ul>
                    </div>
                    
                    <div class="step" style="background: #f8f9fa; border: 1px solid #e9ecef; margin-bottom: 1rem;">
                        <div class="step-title" style="color: #28a745; font-size: 1.1rem;">🔬 标准状况</div>
                        <p><strong>STP条件：</strong>0°C (273K)，101.325kPa (1atm)</p>
                        <p><strong>摩尔体积：</strong>Vm = 22.4 L/mol (STP条件下)</p>
                        <p><strong>常用关系：</strong></p>
                        <ul style="margin-left: 1.5rem;">
                            <li>V = n × 22.4 L/mol (STP条件)</li>
                            <li>ρ = M/22.4 g/L (STP条件下气体密度)</li>
                            <li>相同条件下：V₁/n₁ = V₂/n₂</li>
                        </ul>
                    </div>
                    
                    <div class="step" style="background: #f8f9fa; border: 1px solid #e9ecef; margin-bottom: 1rem;">
                        <div class="step-title" style="color: #dc3545; font-size: 1.1rem;">⚗️ 气体定律组合</div>
                        <p><strong>玻意耳定律：</strong>PV = 常数 (恒温)</p>
                        <p><strong>查理定律：</strong>V/T = 常数 (恒压)</p>
                        <p><strong>盖·吕萨克定律：</strong>P/T = 常数 (恒容)</p>
                        <p><strong>综合气体定律：</strong>P₁V₁/T₁ = P₂V₂/T₂</p>
                    </div>

                    <div class="step" style="background: #f8f9fa; border: 1px solid #e9ecef;">
                        <div class="step-title" style="color: #6f42c1; font-size: 1.1rem;">📏 实际应用</div>
                        <ul style="margin-left: 1.5rem;">
                            <li><strong>气象学：</strong>大气压强与温度关系</li>
                            <li><strong>工程技术：</strong>压缩机、气罐设计</li>
                            <li><strong>化学反应：</strong>气体产物体积计算</li>
                            <li><strong>潜水医学：</strong>深度与气压关系</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- 考试真题练习 -->
            <div class="calculation-tip" style="margin-top: 1.5rem;">
                <h5><i class="fas fa-book-open"></i> 中高考真题详解</h5>
                <div style="margin-top: 1rem;">
                    <div class="step" style="background: #fff; border: 1px solid #ddd; margin-bottom: 1rem;">
                        <div class="step-title" style="color: #dc3545; font-size: 1rem;">【真题1】标准状况气体体积</div>
                        <p><strong>题目：</strong>在标准状况下，1.7g NH₃占有的体积是多少？</p>
                        <p><strong>解题步骤：</strong></p>
                        <p>①计算NH₃的摩尔数：n = m/M = 1.7g ÷ 17g/mol = 0.1mol</p>
                        <p>②应用标准状况摩尔体积：V = n × 22.4L/mol = 0.1 × 22.4 = 2.24L</p>
                        <p><strong>公式：</strong>标准状况下，V = n × 22.4L/mol</p>
                        <p><strong>答案：</strong>体积为2.24L</p>
                    </div>
                    
                    <div class="step" style="background: #fff; border: 1px solid #ddd; margin-bottom: 1rem;">
                        <div class="step-title" style="color: #dc3545; font-size: 1rem;">【真题2】气体状态方程</div>
                        <p><strong>题目：</strong>某气体在27°C、2atm下体积为11.2L，求该气体在标准状况下的体积。</p>
                        <p><strong>解题步骤：</strong></p>
                        <p>①初始条件：T₁ = 27+273 = 300K，P₁ = 2atm，V₁ = 11.2L</p>
                        <p>②标准状况：T₂ = 273K，P₂ = 1atm，V₂ = ?</p>
                        <p>③应用理想气体定律：P₁V₁/T₁ = P₂V₂/T₂</p>
                        <p>④求解：V₂ = P₁V₁T₂/(P₂T₁) = 2×11.2×273/(1×300) = 20.38L</p>
                        <p><strong>答案：</strong>标准状况下体积为20.38L</p>
                    </div>
                    
                    <div class="step" style="background: #fff; border: 1px solid #ddd;">
                        <div class="step-title" style="color: #dc3545; font-size: 1rem;">【真题3】混合气体计算</div>
                        <p><strong>题目：</strong>在相同条件下，H₂和O₂的体积比为2:1，求混合后气体的平均分子量。</p>
                        <p><strong>解题步骤：</strong></p>
                        <p>①设H₂体积为2V，O₂体积为V，总体积为3V</p>
                        <p>②相同条件下，体积比等于摩尔数比：n(H₂):n(O₂) = 2:1</p>
                        <p>③设n(H₂) = 2mol，n(O₂) = 1mol，总摩尔数 = 3mol</p>
                        <p>④总质量 = 2×2 + 1×32 = 36g</p>
                        <p>⑤平均分子量 = 36g ÷ 3mol = 12g/mol</p>
                        <p><strong>答案：</strong>平均分子量为12g/mol</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 稀释计算器 -->
        <div class="calculator-section" id="dilution">
            <h3><i class="fas fa-tint"></i> 稀释计算</h3>
            <div class="formula-display">
                M₁V₁ = M₂V₂
            </div>
            
            <!-- 理论知识解释 -->
            <div class="calculation-tip" style="margin: 2rem 0;">
                <h4><i class="fas fa-graduation-cap"></i> 稀释原理基础理论</h4>
                <div style="margin-top: 1rem;">
                    <div class="step" style="background: #f8f9fa; border: 1px solid #e9ecef; margin-bottom: 1rem;">
                        <div class="step-title" style="color: #007bff; font-size: 1.1rem;">📚 稀释定律</div>
                        <p><strong>稀释原理：</strong>稀释前后溶质的摩尔数不变，即 n₁ = n₂</p>
                        <p><strong>稀释公式：</strong>c₁V₁ = c₂V₂</p>
                        <p><strong>参数说明：</strong>c₁、V₁ - 稀释前浓度和体积；c₂、V₂ - 稀释后浓度和体积</p>
                    </div>
                    
                    <div class="step" style="background: #f8f9fa; border: 1px solid #e9ecef; margin-bottom: 1rem;">
                        <div class="step-title" style="color: #28a745; font-size: 1.1rem;">🔬 稀释操作</div>
                        <p><strong>一般稀释步骤：</strong></p>
                        <ol style="margin-left: 1.5rem;">
                            <li>计算所需浓溶液体积：V₁ = c₂V₂/c₁</li>
                            <li>用量筒或移液管量取浓溶液</li>
                            <li>在烧杯中用少量水稀释</li>
                            <li>转移至容量瓶，洗涤</li>
                            <li>加水定容至刻度线</li>
                        </ol>
                    </div>
                    
                    <div class="step" style="background: #f8f9fa; border: 1px solid #e9ecef; margin-bottom: 1rem;">
                        <div class="step-title" style="color: #dc3545; font-size: 1.1rem;">⚗️ 安全注意</div>
                        <p><strong>浓硫酸稀释：</strong>一定要将浓硫酸缓慢倒入水中，边倒边搅拌！</p>
                        <p><strong>原因：</strong>浓硫酸与水混合会放出大量热，如果将水倒入浓硫酸中，会导致水迅速沸腾，酸液飞溅。</p>
                        <p><strong>口诀：</strong>"酸入水，沿杯壁，慢慢倒，不断搅"</p>
                    </div>

                    <div class="step" style="background: #f8f9fa; border: 1px solid #e9ecef;">
                        <div class="step-title" style="color: #6f42c1; font-size: 1.1rem;">📏 实际应用</div>
                        <ul style="margin-left: 1.5rem;">
                            <li><strong>实验室：</strong>配制不同浓度的标准溶液</li>
                            <li><strong>医疗：</strong>药物浓度调节</li>
                            <li><strong>工业：</strong>化工产品浓度控制</li>
                            <li><strong>农业：</strong>农药、肥料稀释</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- 考试真题练习 -->
            <div class="calculation-tip" style="margin-top: 1.5rem;">
                <h5><i class="fas fa-book-open"></i> 中高考真题详解</h5>
                <div style="margin-top: 1rem;">
                    <div class="step" style="background: #fff; border: 1px solid #ddd; margin-bottom: 1rem;">
                        <div class="step-title" style="color: #dc3545; font-size: 1rem;">【真题1】配制稀溶液</div>
                        <p><strong>题目：</strong>用18mol/L的浓硫酸配制500mL 2mol/L的稀硫酸，需要浓硫酸多少毫升？加水多少毫升？</p>
                        <p><strong>解题步骤：</strong></p>
                        <p>①应用稀释公式：c₁V₁ = c₂V₂</p>
                        <p>②求浓硫酸体积：V₁ = c₂V₂/c₁ = 2×500/18 = 55.6mL</p>
                        <p>③求加水体积：V(水) = V₂ - V₁ = 500 - 55.6 = 444.4mL</p>
                        <p><strong>操作提醒：</strong>稀释浓硫酸时，一定要将浓硫酸缓慢倒入水中，边倒边搅拌！</p>
                        <p><strong>答案：</strong>需要浓硫酸55.6mL，加水444.4mL</p>
                    </div>
                    
                    <div class="step" style="background: #fff; border: 1px solid #ddd; margin-bottom: 1rem;">
                        <div class="step-title" style="color: #dc3545; font-size: 1rem;">【真题2】混合溶液计算</div>
                        <p><strong>题目：</strong>将100mL 3mol/L的NaCl溶液与200mL 1mol/L的NaCl溶液混合，求混合后溶液的浓度。</p>
                                <p><strong>解题步骤：</strong></p>
                                <p>①计算各溶液的溶质摩尔数：</p>
                                <p>　　n₁ = c₁V₁ = 3 × 0.1 = 0.3mol</p>
                                <p>　　n₂ = c₂V₂ = 1 × 0.2 = 0.2mol</p>
                                <p>②计算混合后总摩尔数：n总 = 0.3 + 0.2 = 0.5mol</p>
                                <p>③计算混合后总体积：V总 = 100 + 200 = 300mL = 0.3L</p>
                                <p>④计算混合后浓度：c混 = n总/V总 = 0.5/0.3 = 1.67mol/L</p>
                                <p><strong>答案：</strong>混合后浓度为1.67mol/L</p>
                            </div>
                            
                            <div class="step" style="background: #fff; border: 1px solid #ddd;">
                                <div class="step-title" style="color: #dc3545; font-size: 1rem;">【真题3】蒸发浓缩计算</div>
                                <p><strong>题目：</strong>200mL 0.5mol/L的NaOH溶液经加热蒸发掉50mL水后，求溶液的浓度。</p>
                                <p><strong>解题步骤：</strong></p>
                                <p>①计算溶质摩尔数（蒸发过程中溶质不变）：</p>
                                <p>　　n(NaOH) = 0.5mol/L × 0.2L = 0.1mol</p>
                                <p>②计算蒸发后溶液体积：V₂ = 200 - 50 = 150mL = 0.15L</p>
                                <p>③计算蒸发后浓度：c₂ = n/V₂ = 0.1mol/0.15L = 0.67mol/L</p>
                                <p><strong>答案：</strong>蒸发后浓度为0.67mol/L</p>
                            </div>
                        </div>
                    </div>

                    <button class="calculate-btn" onclick="calculateDilution()">
                        <i class="fas fa-calculator"></i> 计算
                    </button>
                </div>

                <div class="result-section">
                    <h4><i class="fas fa-chart-bar"></i> 稀释结果</h4>
                    <div class="result-display" id="dilutionResult">
                        <div class="result-value" id="dilutionValue">-</div>
                        <div class="result-label" id="dilutionLabel">-</div>
                    </div>
                    <div class="step-by-step" id="dilutionSteps" style="display: none;">
                        <!-- 计算步骤将动态添加 -->
                    </div>
                </div>
            </div>
        </div>

        <!-- pH计算器 -->
        <div class="calculator-section" id="ph">
            <h3><i class="fas fa-test-tube"></i> pH & pOH 计算</h3>
            <div class="formula-display">
                pH = -log[H⁺]  |  pOH = -log[OH⁻]  |  pH + pOH = 14
            </div>
            
            <!-- 理论知识解释 -->
            <div class="calculation-tip" style="margin: 2rem 0;">
                <h4><i class="fas fa-graduation-cap"></i> 酸碱性基础理论</h4>
                <div style="margin-top: 1rem;">
                    <div class="step" style="background: #f8f9fa; border: 1px solid #e9ecef; margin-bottom: 1rem;">
                        <div class="step-title" style="color: #007bff; font-size: 1.1rem;">📚 pH概念</div>
                        <p><strong>pH定义：</strong>溶液中氢离子浓度的负对数，pH = -lg[H⁺]</p>
                        <p><strong>pH范围：</strong>0-14，pH=7为中性，pH<7为酸性，pH>7为碱性</p>
                        <p><strong>Kw常数：</strong>[H⁺][OH⁻] = 1.0×10⁻¹⁴ (25°C)</p>
                    </div>
                    
                    <div class="step" style="background: #f8f9fa; border: 1px solid #e9ecef; margin-bottom: 1rem;">
                        <div class="step-title" style="color: #28a745; font-size: 1.1rem;">🔬 强酸强碱</div>
                        <p><strong>强酸：</strong>HCl, HNO₃, H₂SO₄等，完全电离</p>
                        <p><strong>强碱：</strong>NaOH, KOH, Ba(OH)₂等，完全电离</p>
                        <p><strong>计算特点：</strong>可认为完全电离，直接计算离子浓度</p>
                    </div>
                    
                    <div class="step" style="background: #f8f9fa; border: 1px solid #e9ecef;">
                        <div class="step-title" style="color: #dc3545; font-size: 1.1rem;">📏 实际意义</div>
                        <p><strong>生活应用：</strong>胃酸pH约1-2，血液pH约7.4，肥皂水pH约9-10</p>
                    </div>
                </div>
            </div>

            <!-- 考试真题练习 -->
            <div class="calculation-tip" style="margin-top: 1.5rem;">
                <h5><i class="fas fa-book-open"></i> 中高考真题详解</h5>
                <div style="margin-top: 1rem;">
                    <div class="step" style="background: #fff; border: 1px solid #ddd; margin-bottom: 1rem;">
                        <div class="step-title" style="color: #dc3545; font-size: 1rem;">【真题1】强酸pH计算</div>
                        <p><strong>题目：</strong>0.01mol/L的HCl溶液的pH值是多少？</p>
                        <p><strong>解题步骤：</strong></p>
                        <p>①HCl是强酸，完全电离：HCl → H⁺ + Cl⁻</p>
                        <p>②因此 [H⁺] = [HCl] = 0.01mol/L = 1×10⁻²mol/L</p>
                        <p>③pH = -lg[H⁺] = -lg(1×10⁻²) = 2</p>
                        <p><strong>答案：</strong>pH = 2，溶液呈强酸性</p>
                    </div>
                    
                    <div class="step" style="background: #fff; border: 1px solid #ddd; margin-bottom: 1rem;">
                        <div class="step-title" style="color: #dc3545; font-size: 1rem;">【真题2】强碱pH计算</div>
                        <p><strong>题目：</strong>0.05mol/L的Ba(OH)₂溶液的pH值是多少？</p>
                        <p><strong>解题步骤：</strong></p>
                        <p>①Ba(OH)₂是强碱，完全电离：Ba(OH)₂ → Ba²⁺ + 2OH⁻</p>
                        <p>②因此 [OH⁻] = 2×[Ba(OH)₂] = 2×0.05 = 0.1mol/L</p>
                        <p>③pOH = -lg[OH⁻] = -lg(0.1) = 1</p>
                        <p>④pH = 14 - pOH = 14 - 1 = 13</p>
                        <p><strong>答案：</strong>pH = 13，溶液呈强碱性</p>
                    </div>
                    
                    <div class="step" style="background: #fff; border: 1px solid #ddd;">
                        <div class="step-title" style="color: #dc3545; font-size: 1rem;">【真题3】酸碱中和pH计算</div>
                        <p><strong>题目：</strong>用0.1mol/L的NaOH溶液中和20mL 0.1mol/L的HCl溶液，需要NaOH溶液多少毫升？中和后溶液pH是多少？</p>
                        <p><strong>解题步骤：</strong></p>
                        <p>①反应方程式：HCl + NaOH → NaCl + H₂O</p>
                        <p>②计算HCl摩尔数：n(HCl) = 0.1 × 0.02 = 0.002mol</p>
                        <p>③根据1:1计量关系：n(NaOH) = n(HCl) = 0.002mol</p>
                        <p>④计算NaOH体积：V(NaOH) = 0.002 ÷ 0.1 = 0.02L = 20mL</p>
                        <p>⑤完全中和后生成NaCl，pH = 7（中性）</p>
                        <p><strong>答案：</strong>需要NaOH 20mL，中和后pH = 7</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 溶解度计算器 -->
        <div class="calculator-section" id="solubility">
            <h3><i class="fas fa-flask-vial"></i> 溶解度计算</h3>
            <div class="formula-display">
                溶解度 = 溶质质量 / 溶剂质量 × 100g
            </div>
            
            <!-- 理论知识解释 -->
            <div class="calculation-tip" style="margin: 2rem 0;">
                <h4><i class="fas fa-graduation-cap"></i> 溶解度基础理论</h4>
                <div style="margin-top: 1rem;">
                    <div class="step" style="background: #f8f9fa; border: 1px solid #e9ecef; margin-bottom: 1rem;">
                        <div class="step-title" style="color: #007bff; font-size: 1.1rem;">📚 溶解度定义</div>
                        <p><strong>溶解度：</strong>在一定温度下，某物质在100g溶剂中达到饱和状态时所溶解的质量</p>
                        <p><strong>影响因素：</strong>温度、压强、溶质溶剂性质</p>
                        <p><strong>溶解度分类：</strong>>10g/100g水为易溶，1-10g为可溶，<1g为微溶</p>
                    </div>
                    
                    <div class="step" style="background: #f8f9fa; border: 1px solid #e9ecef;">
                        <div class="step-title" style="color: #28a745; font-size: 1.1rem;">🔬 溶解度曲线</div>
                        <p><strong>升温溶解度增大：</strong>大多数固体物质（如NaCl、KNO₃）</p>
                        <p><strong>升温溶解度减小：</strong>少数物质（如Ca(OH)₂、气体）</p>
                        <p><strong>应用：</strong>重结晶法提纯物质</p>
                    </div>
                </div>
            </div>

            <!-- 考试真题练习 -->
            <div class="calculation-tip" style="margin-top: 1.5rem;">
                <h5><i class="fas fa-book-open"></i> 中高考真题详解</h5>
                <div style="margin-top: 1rem;">
                    <div class="step" style="background: #fff; border: 1px solid #ddd; margin-bottom: 1rem;">
                        <div class="step-title" style="color: #dc3545; font-size: 1rem;">【真题1】结晶析出计算</div>
                        <p><strong>题目：</strong>20°C时KNO₃的溶解度为31.6g，现有100g该温度下的饱和溶液，降温至10°C时（溶解度为20.9g），析出多少克晶体？</p>
                        <p><strong>解题步骤：</strong></p>
                        <p>①计算20°C饱和溶液中的溶质和溶剂：</p>
                        <p>　　设水的质量为x，则KNO₃质量为31.6x/100</p>
                        <p>　　总质量：x + 31.6x/100 = 100，解得x = 75.99g</p>
                        <p>　　KNO₃质量：31.6×75.99/100 = 24.01g</p>
                        <p>②10°C时最大溶解质量：20.9×75.99/100 = 15.88g</p>
                        <p>③析出晶体质量：24.01 - 15.88 = 8.13g</p>
                        <p><strong>答案：</strong>析出KNO₃晶体8.13g</p>
                    </div>
                    
                    <div class="step" style="background: #fff; border: 1px solid #ddd;">
                        <div class="step-title" style="color: #dc3545; font-size: 1rem;">【真题2】溶解度曲线应用</div>
                        <p><strong>题目：</strong>20°C时，将20g NaCl放入50g水中，能否全部溶解？(NaCl在20°C的溶解度为36g)</p>
                        <p><strong>解题步骤：</strong></p>
                        <p>①根据溶解度定义：20°C时，100g水最多溶解36g NaCl</p>
                        <p>②计算50g水最多溶解的NaCl质量：</p>
                        <p>　　最大溶解量 = 36g × 50g/100g = 18g</p>
                        <p>③比较：需要溶解20g > 最大溶解18g</p>
                        <p>④不能全部溶解，剩余固体：20 - 18 = 2g</p>
                        <p><strong>答案：</strong>不能全部溶解，剩余2g固体NaCl</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 反应速率计算器 -->
        <div class="calculator-section" id="rate">
            <h3><i class="fas fa-stopwatch"></i> 化学反应速率计算</h3>
            <div class="formula-display">
                v = Δc/Δt  |  Arrhenius方程: k = A·e^(-Ea/RT)
            </div>
            
            <!-- 理论知识解释 -->
            <div class="calculation-tip" style="margin: 2rem 0;">
                <h4><i class="fas fa-graduation-cap"></i> 反应速率基础理论</h4>
                <div style="margin-top: 1rem;">
                    <div class="step" style="background: #f8f9fa; border: 1px solid #e9ecef; margin-bottom: 1rem;">
                        <div class="step-title" style="color: #007bff; font-size: 1.1rem;">📚 速率定义</div>
                        <p><strong>反应速率：</strong>单位时间内反应物浓度的减少或生成物浓度的增加</p>
                        <p><strong>表达式：</strong>v = Δc/Δt (mol·L⁻¹·s⁻¹)</p>
                        <p><strong>影响因素：</strong>浓度、温度、催化剂、压强、固体表面积</p>
                    </div>
                    
                    <div class="step" style="background: #f8f9fa; border: 1px solid #e9ecef; margin-bottom: 1rem;">
                        <div class="step-title" style="color: #28a745; font-size: 1.1rem;">🔬 影响因素</div>
                        <p><strong>浓度：</strong>浓度增大，反应速率增大</p>
                        <p><strong>温度：</strong>温度升高10°C，反应速率约增大2-4倍</p>
                        <p><strong>催化剂：</strong>降低活化能，加快反应速率</p>
                    </div>
                    
                    <div class="step" style="background: #f8f9fa; border: 1px solid #e9ecef;">
                        <div class="step-title" style="color: #dc3545; font-size: 1.1rem;">📏 实际应用</div>
                        <p><strong>工业生产：</strong>提高生产效率，控制反应条件</p>
                        <p><strong>食品保存：</strong>低温保存降低腐败反应速率</p>
                        <p><strong>药物代谢：</strong>了解药物在体内的代谢速率</p>
                    </div>
                </div>
            </div>

            <!-- 考试真题练习 -->
            <div class="calculation-tip" style="margin-top: 1.5rem;">
                <h5><i class="fas fa-book-open"></i> 中高考真题详解</h5>
                <div style="margin-top: 1rem;">
                    <div class="step" style="background: #fff; border: 1px solid #ddd; margin-bottom: 1rem;">
                        <div class="step-title" style="color: #dc3545; font-size: 1rem;">【真题1】平均反应速率</div>
                        <p><strong>题目：</strong>反应A + B → C中，A的浓度在2分钟内从0.8mol/L降至0.6mol/L，求A的平均反应速率。</p>
                        <p><strong>解题步骤：</strong></p>
                        <p>①确定浓度变化：Δc(A) = 0.6 - 0.8 = -0.2mol/L</p>
                        <p>②确定时间间隔：Δt = 2min = 120s</p>
                        <p>③计算平均反应速率：v(A) = |Δc(A)|/Δt = 0.2/120 = 0.00167mol/(L·s)</p>
                        <p><strong>注意：</strong>反应速率取绝对值，表示浓度变化的快慢</p>
                        <p><strong>答案：</strong>A的平均反应速率为0.00167mol/(L·s)</p>
                    </div>
                    
                    <div class="step" style="background: #fff; border: 1px solid #ddd;">
                        <div class="step-title" style="color: #dc3545; font-size: 1rem;">【真题2】温度对反应速率的影响</div>
                        <p><strong>题目：</strong>某反应在20°C时的反应速率为v₁，温度升高到30°C时反应速率为v₂。若该反应每升高10°C，反应速率增加为原来的3倍，求v₂/v₁。</p>
                        <p><strong>解题步骤：</strong></p>
                        <p>①温度变化：ΔT = 30 - 20 = 10°C</p>
                        <p>②根据范特霍夫规则：温度每升高10°C，反应速率增加3倍</p>
                        <p>③因此：v₂ = 3v₁</p>
                        <p>④速率比：v₂/v₁ = 3</p>
                        <p><strong>答案：</strong>v₂/v₁ = 3</p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="main-footer">
        <div class="container">
            <div class="footer-content">
                <p class="copyright-text">study-llm.me域名为Alex所有。保留所有权利。</p>
                <div class="profile-section">
                    <button id="profile-button" class="profile-button">
                        <i class="fas fa-user-circle"></i>
                        学习阶段
                    </button>
                    <div id="profile-display" class="profile-display"></div>
                </div>
            </div>
        </div>
    </footer>

    <script src="../../js/common.js"></script>
    <script src="../../js/navigation.js"></script>
    <script src="../../js/profile.js"></script>
    <script>
        // 元素原子量数据
        const atomicWeights = {
            'H': 1.008, 'He': 4.003, 'Li': 6.941, 'Be': 9.012, 'B': 10.811, 'C': 12.011,
            'N': 14.007, 'O': 15.999, 'F': 18.998, 'Ne': 20.180, 'Na': 22.990, 'Mg': 24.305,
            'Al': 26.982, 'Si': 28.086, 'P': 30.974, 'S': 32.065, 'Cl': 35.453, 'Ar': 39.948,
            'K': 39.098, 'Ca': 40.078, 'Sc': 44.956, 'Ti': 47.867, 'V': 50.942, 'Cr': 51.996,
            'Mn': 54.938, 'Fe': 55.845, 'Co': 58.933, 'Ni': 58.693, 'Cu': 63.546, 'Zn': 65.38,
            'Ga': 69.723, 'Ge': 72.64, 'As': 74.922, 'Se': 78.96, 'Br': 79.904, 'Kr': 83.798,
            'Rb': 85.468, 'Sr': 87.62, 'Y': 88.906, 'Zr': 91.224, 'Nb': 92.906, 'Mo': 95.96,
            'Tc': 98, 'Ru': 101.07, 'Rh': 102.906, 'Pd': 106.42, 'Ag': 107.868, 'Cd': 112.411,
            'In': 114.818, 'Sn': 118.710, 'Sb': 121.760, 'Te': 127.60, 'I': 126.904, 'Xe': 131.293
        };

        // 标签切换
        document.querySelectorAll('.calculator-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                document.querySelectorAll('.calculator-tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.calculator-section').forEach(s => s.classList.remove('active'));
                
                this.classList.add('active');
                document.getElementById(this.dataset.tab).classList.add('active');
            });
        });

        // 设置化合物数据
        function setCompound(formula, mw) {
            document.getElementById('molecularWeight').value = mw;
            // 可以添加更多自动填充逻辑
        }

        // 摩尔浓度计算
        function calculateMolarity() {
            const type = document.getElementById('molarityType').value;
            const mass = parseFloat(document.getElementById('mass').value) || 0;
            const mw = parseFloat(document.getElementById('molecularWeight').value) || 0;
            const volume = parseFloat(document.getElementById('volume').value) || 0;

            let result, steps = [];

            switch(type) {
                case 'molarity':
                    if (mass && mw && volume) {
                        const moles = mass / mw;
                        result = moles / volume;
                        steps = [
                            `步骤1: 计算摩尔数 n = m / MW = ${mass} / ${mw} = ${moles.toFixed(4)} mol`,
                            `步骤2: 计算摩尔浓度 M = n / V = ${moles.toFixed(4)} / ${volume} = ${result.toFixed(4)} M`
                        ];
                    }
                    break;
                case 'moles':
                    const molarity = parseFloat(document.getElementById('molarity').value) || 0;
                    if (molarity && volume) {
                        result = molarity * volume;
                        steps = [`n = M × V = ${molarity} × ${volume} = ${result.toFixed(4)} mol`];
                    }
                    break;
                // 其他计算类型...
            }

            if (result !== undefined) {
                document.getElementById('molarityValue').textContent = result.toFixed(4);
                document.getElementById('molaritySteps').innerHTML = steps.map(step => 
                    `<div class="step"><div class="step-title">计算步骤</div>${step}</div>`
                ).join('');
                document.getElementById('molaritySteps').style.display = 'block';
            }
        }

        // 化学计量学计算
        function calculateStoichiometry() {
            const equation = document.getElementById('equation').value;
            const knownSubstance = document.getElementById('knownSubstance').value;
            const knownAmount = parseFloat(document.getElementById('knownAmount').value) || 0;
            const targetSubstance = document.getElementById('targetSubstance').value;

            // 简化的化学计量学计算逻辑
            // 在实际应用中需要解析化学方程式
            if (knownAmount && knownSubstance && targetSubstance) {
                // 假设1:1的化学计量关系作为示例
                const result = knownAmount; // 简化计算
                document.getElementById('stoichiometryValue').textContent = result.toFixed(4);
                
                const steps = [
                    `根据化学方程式: ${equation}`,
                    `已知 ${knownSubstance}: ${knownAmount} mol`,
                    `目标 ${targetSubstance}: ${result.toFixed(4)} mol`
                ];
                
                document.getElementById('stoichiometrySteps').innerHTML = steps.map(step => 
                    `<div class="step"><div class="step-title">计算步骤</div>${step}</div>`
                ).join('');
                document.getElementById('stoichiometrySteps').style.display = 'block';
            }
        }

        // 组成计算
        function calculateComposition() {
            const formula = document.getElementById('formula').value;
            
            if (formula) {
                const composition = parseFormula(formula);
                let totalMW = 0;
                let resultHTML = '';

                for (const [element, count] of Object.entries(composition)) {
                    const atomicWeight = atomicWeights[element] || 0;
                    const elementMass = atomicWeight * count;
                    totalMW += elementMass;
                }

                document.getElementById('molecularWeightValue').textContent = totalMW.toFixed(3);

                for (const [element, count] of Object.entries(composition)) {
                    const atomicWeight = atomicWeights[element] || 0;
                    const elementMass = atomicWeight * count;
                    const percentage = (elementMass / totalMW * 100).toFixed(2);
                    
                    resultHTML += `
                        <div class="step">
                            <div class="step-title">${element}</div>
                            ${count} 个原子 × ${atomicWeight} g/mol = ${elementMass.toFixed(3)} g/mol (${percentage}%)
                        </div>`;
                }

                document.getElementById('elementComposition').innerHTML = resultHTML;
            }
        }

        // 解析化学式
        function parseFormula(formula) {
            const composition = {};
            const regex = /([A-Z][a-z]?)(\d*)/g;
            let match;

            while ((match = regex.exec(formula)) !== null) {
                const element = match[1];
                const count = parseInt(match[2]) || 1;
                composition[element] = (composition[element] || 0) + count;
            }

            return composition;
        }

        // 气体定律计算
        function calculateGas() {
            const type = document.getElementById('gasType').value;
            const P = parseFloat(document.getElementById('pressure').value) || 0;
            const V = parseFloat(document.getElementById('gasVolume').value) || 0;
            const n = parseFloat(document.getElementById('gasMoles').value) || 0;
            const T = parseFloat(document.getElementById('temperature').value) || 0;
            const R = 0.08206; // L·atm/mol·K

            let result, label, steps = [];

            switch(type) {
                case 'pressure':
                    if (n && R && T && V) {
                        result = (n * R * T) / V;
                        label = '压强 (atm)';
                        steps = [`P = nRT/V = ${n} × ${R} × ${T} / ${V} = ${result.toFixed(4)} atm`];
                    }
                    break;
                case 'volume':
                    if (n && R && T && P) {
                        result = (n * R * T) / P;
                        label = '体积 (L)';
                        steps = [`V = nRT/P = ${n} × ${R} × ${T} / ${P} = ${result.toFixed(4)} L`];
                    }
                    break;
                case 'moles':
                    if (P && V && R && T) {
                        result = (P * V) / (R * T);
                        label = '摩尔数 (mol)';
                        steps = [`n = PV/RT = ${P} × ${V} / (${R} × ${T}) = ${result.toFixed(4)} mol`];
                    }
                    break;
                case 'temperature':
                    if (P && V && n && R) {
                        result = (P * V) / (n * R);
                        label = '温度 (K)';
                        steps = [`T = PV/nR = ${P} × ${V} / (${n} × ${R}) = ${result.toFixed(4)} K`];
                    }
                    break;
            }

            if (result !== undefined) {
                document.getElementById('gasValue').textContent = result.toFixed(4);
                document.getElementById('gasLabel').textContent = label;
                document.getElementById('gasSteps').innerHTML = steps.map(step => 
                    `<div class="step"><div class="step-title">计算步骤</div>${step}</div>`
                ).join('');
                document.getElementById('gasSteps').style.display = 'block';
            }
        }

        // 稀释计算
        function calculateDilution() {
            const type = document.getElementById('dilutionType').value;
            const M1 = parseFloat(document.getElementById('initialConcentration').value) || 0;
            const V1 = parseFloat(document.getElementById('initialVolume').value) || 0;
            const M2 = parseFloat(document.getElementById('finalConcentration').value) || 0;
            const V2 = parseFloat(document.getElementById('finalVolume').value) || 0;

            let result, label, steps = [];

            switch(type) {
                case 'finalVolume':
                    if (M1 && V1 && M2) {
                        result = (M1 * V1) / M2;
                        label = '最终体积 (mL)';
                        steps = [
                            `使用稀释公式: M₁V₁ = M₂V₂`,
                            `V₂ = M₁V₁/M₂ = ${M1} × ${V1} / ${M2} = ${result.toFixed(2)} mL`
                        ];
                    }
                    break;
                case 'finalConcentration':
                    if (M1 && V1 && V2) {
                        result = (M1 * V1) / V2;
                        label = '最终浓度 (M)';
                        steps = [
                            `使用稀释公式: M₁V₁ = M₂V₂`,
                            `M₂ = M₁V₁/V₂ = ${M1} × ${V1} / ${V2} = ${result.toFixed(4)} M`
                        ];
                    }
                    break;
                case 'initialVolume':
                    if (M1 && M2 && V2) {
                        result = (M2 * V2) / M1;
                        label = '所需初始体积 (mL)';
                        steps = [
                            `使用稀释公式: M₁V₁ = M₂V₂`,
                            `V₁ = M₂V₂/M₁ = ${M2} × ${V2} / ${M1} = ${result.toFixed(2)} mL`
                        ];
                    }
                    break;
                case 'waterVolume':
                    if (M1 && V1 && M2) {
                        const finalVolume = (M1 * V1) / M2;
                        result = finalVolume - V1;
                        label = '所需加水体积 (mL)';
                        steps = [
                            `最终体积: V₂ = M₁V₁/M₂ = ${M1} × ${V1} / ${M2} = ${finalVolume.toFixed(2)} mL`,
                            `加水体积 = V₂ - V₁ = ${finalVolume.toFixed(2)} - ${V1} = ${result.toFixed(2)} mL`
                        ];
                    }
                    break;
            }

            if (result !== undefined) {
                document.getElementById('dilutionValue').textContent = result.toFixed(2);
                document.getElementById('dilutionLabel').textContent = label;
                document.getElementById('dilutionSteps').innerHTML = steps.map(step => 
                    `<div class="step"><div class="step-title">计算步骤</div>${step}</div>`
                ).join('');
                document.getElementById('dilutionSteps').style.display = 'block';
            }
        }

        // 添加元素输入行
        function addElement() {
            const container = document.getElementById('elementsInput');
            const newRow = document.createElement('div');
            newRow.className = 'element-row';
            newRow.style.cssText = 'display: grid; grid-template-columns: 1fr 1fr auto; gap: 0.5rem; margin-bottom: 0.5rem;';
            newRow.innerHTML = `
                <input type="text" class="calc-input element-symbol" placeholder="元素符号">
                <input type="number" class="calc-input element-count" placeholder="原子数">
                <button class="calculate-btn" style="width: auto; padding: 0.5rem;" onclick="removeElement(this)">-</button>
            `;
            container.appendChild(newRow);
        }

        // 移除元素输入行
        function removeElement(button) {
            button.parentElement.remove();
        }

        // 响应式处理
        window.addEventListener('resize', function() {
            // 处理响应式布局变化
        });

        // pH计算
        function calculatePH() {
            const type = document.getElementById('phType').value;
            const hConc = parseFloat(document.getElementById('hConcentration').value) || 0;
            const ohConc = parseFloat(document.getElementById('ohConcentration').value) || 0;
            const ph = parseFloat(document.getElementById('phValue').value) || 0;
            const poh = parseFloat(document.getElementById('pohValue').value) || 0;

            let result, label, steps = [], solutionType = '';

            switch(type) {
                case 'fromH':
                    if (hConc > 0) {
                        result = -Math.log10(hConc);
                        label = 'pH值';
                        steps = [`pH = -log[H⁺] = -log(${hConc}) = ${result.toFixed(2)}`];
                        solutionType = result < 7 ? '酸性' : result > 7 ? '碱性' : '中性';
                    }
                    break;
                case 'fromOH':
                    if (ohConc > 0) {
                        result = -Math.log10(ohConc);
                        const phValue = 14 - result;
                        label = 'pOH值';
                        steps = [
                            `pOH = -log[OH⁻] = -log(${ohConc}) = ${result.toFixed(2)}`,
                            `pH = 14 - pOH = 14 - ${result.toFixed(2)} = ${phValue.toFixed(2)}`
                        ];
                        solutionType = phValue < 7 ? '酸性' : phValue > 7 ? '碱性' : '中性';
                    }
                    break;
                case 'toPH':
                    if (ph >= 0 && ph <= 14) {
                        result = Math.pow(10, -ph);
                        label = 'H⁺浓度 (mol/L)';
                        steps = [`[H⁺] = 10^(-pH) = 10^(${-ph}) = ${result.toExponential(2)} mol/L`];
                        solutionType = ph < 7 ? '酸性' : ph > 7 ? '碱性' : '中性';
                    }
                    break;
                case 'toPOH':
                    if (poh >= 0 && poh <= 14) {
                        result = Math.pow(10, -poh);
                        const phValue = 14 - poh;
                        label = 'OH⁻浓度 (mol/L)';
                        steps = [
                            `[OH⁻] = 10^(-pOH) = 10^(${-poh}) = ${result.toExponential(2)} mol/L`,
                            `pH = 14 - pOH = 14 - ${poh} = ${phValue.toFixed(2)}`
                        ];
                        solutionType = phValue < 7 ? '酸性' : phValue > 7 ? '碱性' : '中性';
                    }
                    break;
            }

            if (result !== undefined) {
                document.getElementById('phResultValue').textContent = 
                    typeof result === 'number' && result < 0.001 ? result.toExponential(2) : result.toFixed(4);
                document.getElementById('phResultLabel').textContent = label;
                document.getElementById('solutionTypeValue').textContent = solutionType;
                document.getElementById('phSteps').innerHTML = steps.map(step => 
                    `<div class="step"><div class="step-title">计算步骤</div>${step}</div>`
                ).join('');
                document.getElementById('phSteps').style.display = 'block';
            }
        }

        // 设置酸碱数据
        function setAcidBase(formula, type) {
            // 可以根据type设置相应的默认值
            switch(type) {
                case 'strong_acid':
                    document.getElementById('hConcentration').value = '0.1';
                    break;
                case 'strong_base':
                    document.getElementById('ohConcentration').value = '0.1';
                    break;
            }
        }

        // 溶解度计算
        function calculateSolubility() {
            const type = document.getElementById('solubilityType').value;
            const soluteMass = parseFloat(document.getElementById('soluteMass').value) || 0;
            const solventMass = parseFloat(document.getElementById('solventMass').value) || 0;
            const temp = parseFloat(document.getElementById('temperature').value) || 20;
            const givenSolubility = parseFloat(document.getElementById('givenSolubility').value) || 0;

            let result, label, steps = [];

            switch(type) {
                case 'solubility':
                    if (soluteMass && solventMass) {
                        result = (soluteMass / solventMass) * 100;
                        label = '溶解度 (g/100g水)';
                        steps = [
                            `溶解度 = (溶质质量 / 溶剂质量) × 100g`,
                            `溶解度 = (${soluteMass}g / ${solventMass}g) × 100g = ${result.toFixed(2)}g/100g水`
                        ];
                    }
                    break;
                case 'saturated':
                    if (givenSolubility && solventMass) {
                        result = (givenSolubility * solventMass) / 100;
                        label = '饱和时溶质质量 (g)';
                        steps = [
                            `在${temp}°C时，${solventMass}g水中最多能溶解的溶质质量：`,
                            `质量 = 溶解度 × 溶剂质量 / 100g = ${givenSolubility} × ${solventMass} / 100 = ${result.toFixed(2)}g`
                        ];
                    }
                    break;
                case 'crystallization':
                    if (soluteMass && solventMass && givenSolubility) {
                        const maxSoluble = (givenSolubility * solventMass) / 100;
                        result = Math.max(0, soluteMass - maxSoluble);
                        label = '析出晶体质量 (g)';
                        steps = [
                            `当前温度下最大溶解质量 = ${givenSolubility} × ${solventMass} / 100 = ${maxSoluble.toFixed(2)}g`,
                            `析出质量 = 总溶质 - 最大溶解质量 = ${soluteMass} - ${maxSoluble.toFixed(2)} = ${result.toFixed(2)}g`
                        ];
                    }
                    break;
            }

            if (result !== undefined) {
                document.getElementById('solubilityValue').textContent = result.toFixed(2);
                document.getElementById('solubilityLabel').textContent = label;
                document.getElementById('solubilitySteps').innerHTML = steps.map(step => 
                    `<div class="step"><div class="step-title">计算步骤</div>${step}</div>`
                ).join('');
                document.getElementById('solubilitySteps').style.display = 'block';
            }
        }

        // 设置溶解度数据
        function setSolubility(compound, solubility) {
            document.getElementById('givenSolubility').value = solubility;
        }

        // 反应速率计算
        function calculateRate() {
            const type = document.getElementById('rateType').value;
            const initialConc = parseFloat(document.getElementById('initialConc').value) || 0;
            const finalConc = parseFloat(document.getElementById('finalConc').value) || 0;
            const timeInterval = parseFloat(document.getElementById('timeInterval').value) || 0;
            const order = parseInt(document.getElementById('reactionOrder').value);
            const temp1 = parseFloat(document.getElementById('temp1').value) || 0;
            const temp2 = parseFloat(document.getElementById('temp2').value) || 0;

            let result, label, steps = [];

            switch(type) {
                case 'averageRate':
                    if (initialConc && finalConc && timeInterval) {
                        result = Math.abs(finalConc - initialConc) / timeInterval;
                        label = '平均反应速率 (mol/L·s)';
                        steps = [
                            `平均反应速率 = |Δc| / Δt`,
                            `v = |${finalConc} - ${initialConc}| / ${timeInterval} = ${result.toFixed(6)} mol/L·s`
                        ];
                    }
                    break;
                case 'concentration':
                    if (initialConc && timeInterval) {
                        // 简化的浓度计算，假设反应速率常数k=0.01
                        const k = 0.01;
                        switch(order) {
                            case 0:
                                result = initialConc - k * timeInterval;
                                steps = [
                                    `零级反应: [A] = [A]₀ - kt`,
                                    `[A] = ${initialConc} - ${k} × ${timeInterval} = ${result.toFixed(4)} mol/L`
                                ];
                                break;
                            case 1:
                                result = initialConc * Math.exp(-k * timeInterval);
                                steps = [
                                    `一级反应: [A] = [A]₀ × e^(-kt)`,
                                    `[A] = ${initialConc} × e^(-${k} × ${timeInterval}) = ${result.toFixed(4)} mol/L`
                                ];
                                break;
                            case 2:
                                result = initialConc / (1 + k * initialConc * timeInterval);
                                steps = [
                                    `二级反应: 1/[A] = 1/[A]₀ + kt`,
                                    `[A] = ${initialConc} / (1 + ${k} × ${initialConc} × ${timeInterval}) = ${result.toFixed(4)} mol/L`
                                ];
                                break;
                        }
                        label = '反应后浓度 (mol/L)';
                    }
                    break;
                case 'halfLife':
                    if (initialConc) {
                        const k = 0.01; // 假设反应速率常数
                        switch(order) {
                            case 0:
                                result = initialConc / (2 * k);
                                steps = [`零级反应半衰期: t₁/₂ = [A]₀ / (2k) = ${initialConc} / (2 × ${k}) = ${result.toFixed(2)} s`];
                                break;
                            case 1:
                                result = Math.log(2) / k;
                                steps = [`一级反应半衰期: t₁/₂ = ln(2) / k = 0.693 / ${k} = ${result.toFixed(2)} s`];
                                break;
                            case 2:
                                result = 1 / (k * initialConc);
                                steps = [`二级反应半衰期: t₁/₂ = 1 / (k[A]₀) = 1 / (${k} × ${initialConc}) = ${result.toFixed(2)} s`];
                                break;
                        }
                        label = '半衰期 (s)';
                    }
                    break;
                case 'temperature':
                    if (temp1 && temp2) {
                        // 范特霍夫规则：温度每升高10K，反应速率约增加2-4倍
                        const tempDiff = temp2 - temp1;
                        const factor = Math.pow(2.5, tempDiff / 10); // 假设每10K增加2.5倍
                        result = factor;
                        label = '速率变化倍数';
                        steps = [
                            `根据范特霍夫规则，温度从${temp1}K升至${temp2}K`,
                            `温度差 = ${tempDiff}K`,
                            `速率变化倍数 ≈ 2.5^(${tempDiff}/10) = ${result.toFixed(2)}倍`
                        ];
                    }
                    break;
            }

            if (result !== undefined) {
                document.getElementById('rateValue').textContent = result.toFixed(4);
                document.getElementById('rateLabel').textContent = label;
                document.getElementById('rateSteps').innerHTML = steps.map(step => 
                    `<div class="step"><div class="step-title">计算步骤</div>${step}</div>`
                ).join('');
                document.getElementById('rateSteps').style.display = 'block';
            }
        }

        // 更新pH指示器
        function updatePHIndicator(phValue) {
            const marker = document.getElementById('phMarker');
            if (marker && phValue >= 0 && phValue <= 14) {
                const percentage = (phValue / 14) * 100;
                marker.style.left = `calc(${percentage}% - 2px)`;
            }
        }

        // 演示计算功能
        function demoCalculation(type, example) {
            switch(type) {
                case 'ph':
                    switch(example) {
                        case 'lemon':
                            document.getElementById('hConcentration').value = '0.01';
                            document.getElementById('phType').value = 'fromH';
                            calculatePH();
                            break;
                        case 'water':
                            document.getElementById('hConcentration').value = '0.0000001';
                            document.getElementById('phType').value = 'fromH';
                            calculatePH();
                            break;
                        case 'soap':
                            document.getElementById('ohConcentration').value = '0.000001';
                            document.getElementById('phType').value = 'fromOH';
                            calculatePH();
                            break;
                    }
                    break;
            }
        }

        // 考试真题示例
        function examExample(type, questionNumber) {
            switch(type) {
                case 'molarity':
                    switch(questionNumber) {
                        case 1:
                            // 真题1: 配制250mL 0.1mol/L的NaCl溶液，需要多少克NaCl？
                            document.getElementById('molarityType').value = 'mass';
                            document.getElementById('volume').value = '0.25';
                            document.getElementById('molecularWeight').value = '58.44';
                            showSuccess('真题1: 配制250mL 0.1mol/L的NaCl溶液，需要多少克NaCl？');
                            // 设置摩尔浓度
                            setTimeout(() => {
                                // 模拟设置浓度并计算
                                const n = 0.1 * 0.25; // 摩尔数
                                const mass = n * 58.44;
                                document.getElementById('molarityValue').textContent = mass.toFixed(2);
                                document.getElementById('molarityLabel').textContent = '所需NaCl质量 (g)';
                                document.getElementById('molaritySteps').innerHTML = `
                                    <div class="step"><div class="step-title">解题步骤</div>
                                    步骤1: 计算所需摩尔数 n = M × V = 0.1 × 0.25 = 0.025 mol<br>
                                    步骤2: 计算质量 m = n × Mr = 0.025 × 58.44 = 1.46 g
                                    </div>`;
                                document.getElementById('molaritySteps').style.display = 'block';
                            }, 1000);
                            break;
                        case 2:
                            // 真题2: 将98%的浓硫酸(密度1.84g/mL)稀释至0.5mol/L，求原溶液的摩尔浓度
                            showSuccess('真题2: 98%浓硫酸(密度1.84g/mL)的摩尔浓度是多少？');
                            setTimeout(() => {
                                // 浓硫酸摩尔浓度计算
                                const density = 1.84; // g/mL
                                const percentage = 0.98;
                                const molarMass = 98.08;
                                const molarity = (density * 1000 * percentage) / molarMass;
                                document.getElementById('molarityValue').textContent = molarity.toFixed(2);
                                document.getElementById('molarityLabel').textContent = '浓硫酸摩尔浓度 (mol/L)';
                                document.getElementById('molaritySteps').innerHTML = `
                                    <div class="step"><div class="step-title">解题步骤</div>
                                    步骤1: 1L溶液质量 = 1000mL × 1.84g/mL = 1840g<br>
                                    步骤2: H₂SO₄质量 = 1840g × 98% = 1803.2g<br>
                                    步骤3: 摩尔浓度 = 1803.2g ÷ 98.08g/mol = ${molarity.toFixed(2)} mol/L
                                    </div>`;
                                document.getElementById('molaritySteps').style.display = 'block';
                            }, 1000);
                            break;
                        case 3:
                            // 真题3: 中和反应计算
                            showSuccess('真题3: 用0.2mol/L NaOH溶液中和0.1mol/L H₂SO₄，体积比是多少？');
                            setTimeout(() => {
                                // H₂SO₄ + 2NaOH → Na₂SO₄ + 2H₂O
                                const ratioMol = 2; // 摩尔比 NaOH:H₂SO₄ = 2:1
                                const ratioConc = 0.2 / 0.1; // 浓度比
                                const volumeRatio = ratioMol / ratioConc; // 体积比
                                document.getElementById('molarityValue').textContent = volumeRatio.toFixed(1);
                                document.getElementById('molarityLabel').textContent = 'NaOH:H₂SO₄体积比';
                                document.getElementById('molaritySteps').innerHTML = `
                                    <div class="step"><div class="step-title">解题步骤</div>
                                    步骤1: 反应方程式 H₂SO₄ + 2NaOH → Na₂SO₄ + 2H₂O<br>
                                    步骤2: 摩尔比 n(NaOH):n(H₂SO₄) = 2:1<br>
                                    步骤3: 体积比 V(NaOH):V(H₂SO₄) = (2×0.1):(1×0.2) = 1:1
                                    </div>`;
                                document.getElementById('molaritySteps').style.display = 'block';
                            }, 1000);
                            break;
                    }
                    break;
            }
        }

        // 错误处理和验证
        function validateInput(inputId, min, max) {
            const input = document.getElementById(inputId);
            const value = parseFloat(input.value);
            
            if (value < min || value > max) {
                showError(`${inputId}的值应在${min}到${max}之间`);
                return false;
            }
            return true;
        }

        function showError(message) {
            const errorDiv = document.querySelector('.error-message');
            if (errorDiv) {
                errorDiv.textContent = message;
                errorDiv.style.display = 'block';
                setTimeout(() => {
                    errorDiv.style.display = 'none';
                }, 3000);
            }
        }

        function showSuccess(message) {
            const successDiv = document.querySelector('.success-message');
            if (successDiv) {
                successDiv.textContent = message;
                successDiv.style.display = 'block';
                setTimeout(() => {
                    successDiv.style.display = 'none';
                }, 3000);
            }
        }

        // 添加学习模式功能
        function toggleLearningMode() {
            const tips = document.querySelectorAll('.calculation-tip');
            const demos = document.querySelectorAll('.interactive-demo');
            
            tips.forEach(tip => {
                tip.style.display = tip.style.display === 'none' ? 'block' : 'none';
            });
            
            demos.forEach(demo => {
                demo.style.display = demo.style.display === 'none' ? 'block' : 'none';
            });
        }

        // 键盘快捷键支持
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey || e.metaKey) {
                switch(e.key) {
                    case 'Enter':
                        e.preventDefault();
                        // 执行当前活跃标签的计算
                        const activeTab = document.querySelector('.calculator-tab.active');
                        if (activeTab) {
                            const tabType = activeTab.dataset.tab;
                            switch(tabType) {
                                case 'molarity': calculateMolarity(); break;
                                case 'stoichiometry': calculateStoichiometry(); break;
                                case 'composition': calculateComposition(); break;
                                case 'gas': calculateGas(); break;
                                case 'dilution': calculateDilution(); break;
                                case 'ph': calculatePH(); break;
                                case 'solubility': calculateSolubility(); break;
                                case 'rate': calculateRate(); break;
                            }
                        }
                        break;
                }
            }
        });

        // 初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 添加错误和成功消息容器
            const container = document.querySelector('.calculator-container');
            if (container && !document.querySelector('.error-message')) {
                const errorDiv = document.createElement('div');
                errorDiv.className = 'error-message';
                container.appendChild(errorDiv);
                
                const successDiv = document.createElement('div');
                successDiv.className = 'success-message';
                container.appendChild(successDiv);
            }
        });
    </script>
</body>
</html> 