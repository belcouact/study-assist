<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤ªé˜³ç³» - å¤©æ–‡å­¦ä¹ åŠ©æ‰‹</title>
    <link rel="icon" href="../../assets/icons/logo_btrfly.ico" type="image/x-icon">
    <link rel="stylesheet" href="../../css/common.css">
    <link rel="stylesheet" href="../../css/components.css">
    <link rel="stylesheet" href="../../css/utilities.css">
    <link rel="stylesheet" href="../../css/responsive.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <style>
        .solar-system-page {
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a3a 50%, #2d1b69 100%);
            min-height: 100vh;
            color: #fff;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 1rem;
        }

        .solar-system-header {
            text-align: center;
            padding: 3rem 0;
        }

        .solar-system-header h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            background: linear-gradient(45deg, #FFD700, #FFA500, #FF6347);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
        }

        .solar-system-header p {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
        }

        .main-solar-system {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 25px;
            padding: 2rem;
            margin: 2rem 0;
            border: 2px solid rgba(255, 215, 0, 0.2);
            box-shadow: 0 0 50px rgba(255, 215, 0, 0.1);
        }

        .main-solar-system h2 {
            text-align: center;
            color: #FFD700;
            margin-bottom: 2rem;
            font-size: 2rem;
        }

        #solar-system-container {
            width: 100%;
            height: 700px;
            background: radial-gradient(circle at center, rgba(255, 215, 0, 0.05) 0%, transparent 70%);
            border-radius: 20px;
            position: relative;
            overflow: hidden;
            border: 2px solid rgba(255, 215, 0, 0.3);
        }

        .solar-system-controls {
            position: absolute;
            top: 15px;
            left: 15px;
            display: flex;
            flex-direction: column;
            gap: 8px;
            z-index: 100;
        }

        .control-btn {
            width: 45px;
            height: 45px;
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid rgba(255, 215, 0, 0.6);
            border-radius: 10px;
            color: #FFD700;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .control-btn:hover {
            background: rgba(255, 215, 0, 0.2);
            border-color: #FFD700;
            transform: scale(1.05);
        }

        .planet-selector {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid rgba(255, 215, 0, 0.6);
            border-radius: 10px;
            padding: 10px;
            z-index: 100;
            backdrop-filter: blur(10px);
        }

        .planet-selector select {
            background: transparent;
            border: none;
            color: #FFD700;
            font-size: 14px;
            cursor: pointer;
            outline: none;
        }

        .planet-selector select option {
            background: #1a1a3a;
            color: #FFD700;
        }

        .solar-system-info {
            position: absolute;
            bottom: 15px;
            left: 15px;
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid rgba(255, 215, 0, 0.6);
            border-radius: 10px;
            padding: 15px;
            max-width: 250px;
            color: #FFD700;
            font-size: 13px;
            z-index: 100;
            backdrop-filter: blur(10px);
        }

        .loading-indicator {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            color: #FFD700;
            z-index: 10;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255, 215, 0, 0.3);
            border-top: 4px solid #FFD700;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .planet-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin: 3rem 0;
        }

        .planet-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
            border-radius: 20px;
            padding: 2rem;
            border: 1px solid rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .planet-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--planet-color, #FFD700);
            border-radius: 20px 20px 0 0;
        }

        .planet-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(67, 97, 238, 0.3);
        }

        .planet-header {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .planet-icon {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: white;
            background: var(--planet-color, #FFD700);
            box-shadow: 0 0 20px var(--planet-color, #FFD700);
        }

        .planet-info h3 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: #fff;
        }

        .planet-subtitle {
            color: #a8dadc;
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .planet-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .stat-item {
            background: rgba(0,0,0,0.2);
            padding: 1rem;
            border-radius: 10px;
            text-align: center;
        }

        .stat-value {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--planet-color, #FFD700);
            margin-bottom: 0.25rem;
        }

        .stat-label {
            font-size: 0.8rem;
            opacity: 0.7;
        }

        .planet-description {
            line-height: 1.6;
            margin-bottom: 1.5rem;
            opacity: 0.9;
        }

        .planet-features {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .feature-badge {
            background: rgba(67, 97, 238, 0.2);
            color: #a8dadc;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            border: 1px solid rgba(67, 97, 238, 0.3);
        }

        /* Planet-specific colors */
        .mercury-card { --planet-color: #8C7853; }
        .venus-card { --planet-color: #FFC649; }
        .earth-card { --planet-color: #6B93D6; }
        .mars-card { --planet-color: #CD5C5C; }
        .jupiter-card { --planet-color: #D2691E; }
        .saturn-card { --planet-color: #FAD5A5; }
        .uranus-card { --planet-color: #4FD0E7; }
        .neptune-card { --planet-color: #4169E1; }

        /* Natural Phenomena Section */
        .natural-phenomena-section {
            margin: 4rem 0;
            padding: 2rem;
            background: linear-gradient(135deg, rgba(67, 97, 238, 0.1), rgba(255, 215, 0, 0.05));
            border-radius: 25px;
            border: 2px solid rgba(255, 215, 0, 0.2);
        }

        .section-title {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 1rem;
            background: linear-gradient(45deg, #FFD700, #FFA500, #FF6347);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
        }

        .section-description {
            text-align: center;
            font-size: 1.1rem;
            margin-bottom: 3rem;
            opacity: 0.9;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }

        .phenomenon-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
            border-radius: 20px;
            padding: 2rem;
            margin: 2rem 0;
            border: 1px solid rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .phenomenon-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(67, 97, 238, 0.2);
        }

        .phenomenon-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .phenomenon-header h3 {
            font-size: 1.8rem;
            margin-bottom: 0.5rem;
            color: #FFD700;
        }

        .phenomenon-header p {
            opacity: 0.8;
            font-size: 1rem;
        }

        .phenomenon-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            align-items: start;
        }

        .phenomenon-3d {
            width: 100%;
            height: 400px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            position: relative;
            overflow: hidden;
            border: 2px solid rgba(255, 215, 0, 0.3);
        }

        .phenomenon-controls {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 15px;
            padding: 1.5rem;
            border: 1px solid rgba(255, 215, 0, 0.2);
        }

        .phenomenon-controls h4 {
            color: #FFD700;
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }

        .control-group {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .demo-btn {
            background: linear-gradient(135deg, rgba(67, 97, 238, 0.8), rgba(67, 97, 238, 0.6));
            border: 2px solid rgba(255, 215, 0, 0.6);
            border-radius: 10px;
            color: white;
            padding: 0.8rem 1rem;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            min-height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .demo-btn:hover {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.8), rgba(255, 165, 0, 0.6));
            border-color: #FFD700;
            transform: scale(1.02);
        }

        .demo-btn:active {
            transform: scale(0.98);
        }

        .phenomenon-info {
            grid-column: 1 / -1;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 15px;
            padding: 1.5rem;
            margin-top: 1rem;
            border: 1px solid rgba(255, 215, 0, 0.2);
        }

        .phenomenon-info h4 {
            color: #FFD700;
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }

        .phenomenon-info ul {
            list-style: none;
            padding: 0;
        }

        .phenomenon-info li {
            padding: 0.5rem 0;
            padding-left: 1.5rem;
            position: relative;
            line-height: 1.6;
        }

        .phenomenon-info li::before {
            content: "â­";
            position: absolute;
            left: 0;
            color: #FFD700;
        }

        /* Phenomenon-specific colors */
        .seasons-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #90EE90, #FFD700, #FF6347, #87CEEB);
            border-radius: 20px 20px 0 0;
        }

        .day-night-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #191970, #4169E1, #FFD700, #FF6347);
            border-radius: 20px 20px 0 0;
        }

        .tides-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #1E90FF, #00CED1, #20B2AA, #4682B4);
            border-radius: 20px 20px 0 0;
        }

        .moon-phases-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #2F2F2F, #696969, #C0C0C0, #F5F5F5);
            border-radius: 20px 20px 0 0;
        }

        .eclipses-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #000000, #8B0000, #FFD700, #FF4500);
            border-radius: 20px 20px 0 0;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .solar-system-header h1 {
                font-size: 2rem;
            }
            
            #solar-system-container {
                height: 500px;
            }
            
            .planet-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
            
            .solar-system-controls {
                flex-direction: row;
                flex-wrap: wrap;
                gap: 5px;
            }
            
            .control-btn {
                width: 40px;
                height: 40px;
                font-size: 16px;
            }
            
            .solar-system-info {
                font-size: 12px;
                max-width: 200px;
                padding: 10px;
            }

            /* Natural Phenomena Mobile Styles */
            .natural-phenomena-section {
                margin: 2rem 0;
                padding: 1rem;
            }

            .section-title {
                font-size: 1.8rem;
            }

            .section-description {
                font-size: 1rem;
                margin-bottom: 2rem;
            }

            .phenomenon-content {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }

            .phenomenon-3d {
                height: 300px;
            }

            .phenomenon-controls {
                padding: 1rem;
            }

            .control-group {
                grid-template-columns: 1fr;
                gap: 0.8rem;
            }

            .demo-btn {
                padding: 1rem;
                font-size: 1rem;
                min-height: 48px;
            }

            .phenomenon-info {
                padding: 1rem;
            }
        }

        @media (max-width: 480px) {
            #solar-system-container {
                height: 400px;
            }
            
            .control-btn {
                width: 35px;
                height: 35px;
                font-size: 14px;
            }
            
            .planet-card {
                padding: 1.5rem;
            }
            
            .planet-stats {
                grid-template-columns: 1fr;
            }

            .natural-phenomena-section {
                padding: 0.5rem;
            }

            .section-title {
                font-size: 1.5rem;
            }

            .phenomenon-card {
                padding: 1rem;
                margin: 1rem 0;
            }

            .phenomenon-header h3 {
                font-size: 1.4rem;
            }

            .phenomenon-3d {
                height: 250px;
            }

            .demo-btn {
                font-size: 0.9rem;
                padding: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <header class="main-header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <a href="../../index.html">
                        <i class="fas fa-graduation-cap" style="background: linear-gradient(90deg, #4361ee, #7209b7); -webkit-background-clip: text; background-clip: text; color: transparent;"></i>
                        <span>Alexçš„å­¦ä¹ åŠ©æ‰‹</span>
                    </a>
                </div>
                <nav class="main-nav">
                    <ul>
                        <li><a href="../../index.html">é¦–é¡µ</a></li>
                        <li><a href="main.html">å¤©æ–‡</a></li>
                        <li><a href="#" class="active">å¤ªé˜³ç³»</a></li>
                        <li><a href="../../tts.html">è¯­éŸ³</a></li>
                        <li><a href="../../draw.html">ç»˜å›¾</a></li>
                    </ul>
                </nav>
                <button class="mobile-menu-toggle" aria-label="åˆ‡æ¢èœå•">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
        </div>
    </header>

    <main class="solar-system-page">
        <section class="solar-system-header">
            <div class="container">
                <h1><i class="fas fa-sun"></i> 3D å¤ªé˜³ç³»æ¢ç´¢</h1>
                <p>ä½“éªŒçœŸå®çš„3Då¤ªé˜³ç³»æ¨¡å‹ï¼Œæ¢ç´¢å…«å¤§è¡Œæ˜Ÿçš„å¥‡å¦™ä¸–ç•Œ</p>
            </div>
        </section>

        <section class="container">
            <div class="main-solar-system">
                <h2>ğŸŒŸ äº¤äº’å¼å¤ªé˜³ç³»æ¨¡å‹</h2>
                
                <div id="solar-system-container">
                    <div class="solar-system-controls">
                        <button class="control-btn" id="play-pause" title="æ’­æ”¾/æš‚åœ">â¸ï¸</button>
                        <button class="control-btn" id="speed-up" title="åŠ é€Ÿ">â©</button>
                        <button class="control-btn" id="speed-down" title="å‡é€Ÿ">âª</button>
                        <button class="control-btn" id="reset-view" title="é‡ç½®è§†å›¾">ğŸ </button>
                        <button class="control-btn" id="toggle-orbits" title="æ˜¾ç¤º/éšè—è½¨é“">ğŸ”„</button>
                        <button class="control-btn" id="toggle-labels" title="æ˜¾ç¤º/éšè—æ ‡ç­¾">ğŸ·ï¸</button>
                    </div>
                    
                    <div class="planet-selector">
                        <select id="planet-focus">
                            <option value="overview">å¤ªé˜³ç³»å…¨æ™¯</option>
                            <option value="sun">å¤ªé˜³</option>
                            <option value="mercury">æ°´æ˜Ÿ</option>
                            <option value="venus">é‡‘æ˜Ÿ</option>
                            <option value="earth">åœ°çƒ</option>
                            <option value="mars">ç«æ˜Ÿ</option>
                            <option value="jupiter">æœ¨æ˜Ÿ</option>
                            <option value="saturn">åœŸæ˜Ÿ</option>
                            <option value="uranus">å¤©ç‹æ˜Ÿ</option>
                            <option value="neptune">æµ·ç‹æ˜Ÿ</option>
                        </select>
                    </div>
                    
                    <div class="solar-system-info">
                        <div id="current-planet-info">
                            <strong>å¤ªé˜³ç³»å…¨æ™¯</strong><br>
                            æ‹–æ‹½æ—‹è½¬è§†è§’<br>
                            æ»šè½®ç¼©æ”¾è·ç¦»<br>
                            ç‚¹å‡»è¡Œæ˜Ÿèšç„¦è§‚å¯Ÿ
                        </div>
                    </div>
                    
                    <div class="loading-indicator" id="solar-system-loading">
                        <div class="loading-spinner"></div>
                        <div>åŠ è½½çœŸå®3Då¤ªé˜³ç³»æ¨¡å‹ä¸­...</div>
                    </div>
                </div>
            </div>

            <div class="planet-grid">
                <!-- æ°´æ˜Ÿ -->
                <div class="planet-card mercury-card">
                    <div class="planet-header">
                        <div class="planet-icon">â˜¿ï¸</div>
                        <div class="planet-info">
                            <h3>æ°´æ˜Ÿ Mercury</h3>
                            <div class="planet-subtitle">è·ç¦»å¤ªé˜³æœ€è¿‘çš„è¡Œæ˜Ÿ</div>
                        </div>
                    </div>
                    
                    <div class="planet-stats">
                        <div class="stat-item">
                            <div class="stat-value">0.39 AU</div>
                            <div class="stat-label">è·ç¦»å¤ªé˜³</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">88å¤©</div>
                            <div class="stat-label">å…¬è½¬å‘¨æœŸ</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">4,879km</div>
                            <div class="stat-label">ç›´å¾„</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">427Â°C</div>
                            <div class="stat-label">æœ€é«˜æ¸©åº¦</div>
                        </div>
                    </div>
                    
                    <div class="planet-description">
                        æ°´æ˜Ÿæ˜¯å¤ªé˜³ç³»ä¸­æœ€å°çš„è¡Œæ˜Ÿï¼Œä¹Ÿæ˜¯è·ç¦»å¤ªé˜³æœ€è¿‘çš„è¡Œæ˜Ÿã€‚ç”±äºæ²¡æœ‰å¤§æ°”å±‚ä¿æŠ¤ï¼Œæ°´æ˜Ÿè¡¨é¢æ¸©å·®æå¤§ï¼Œç™½å¤©å¯è¾¾427Â°Cï¼Œå¤œæ™šå¯é™è‡³-173Â°Cã€‚
                    </div>
                    
                    <div class="planet-features">
                        <span class="feature-badge">æ— å¤§æ°”å±‚</span>
                        <span class="feature-badge">æç«¯æ¸©å·®</span>
                        <span class="feature-badge">å¤šé™¨çŸ³å‘</span>
                        <span class="feature-badge">é“æ ¸å æ¯”å¤§</span>
                    </div>
                </div>

                <!-- é‡‘æ˜Ÿ -->
                <div class="planet-card venus-card">
                    <div class="planet-header">
                        <div class="planet-icon">â™€ï¸</div>
                        <div class="planet-info">
                            <h3>é‡‘æ˜Ÿ Venus</h3>
                            <div class="planet-subtitle">å¤ªé˜³ç³»æœ€çƒ­çš„è¡Œæ˜Ÿ</div>
                        </div>
                    </div>
                    
                    <div class="planet-stats">
                        <div class="stat-item">
                            <div class="stat-value">0.72 AU</div>
                            <div class="stat-label">è·ç¦»å¤ªé˜³</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">225å¤©</div>
                            <div class="stat-label">å…¬è½¬å‘¨æœŸ</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">12,104km</div>
                            <div class="stat-label">ç›´å¾„</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">462Â°C</div>
                            <div class="stat-label">è¡¨é¢æ¸©åº¦</div>
                        </div>
                    </div>
                    
                    <div class="planet-description">
                        é‡‘æ˜Ÿè¢«ç§°ä¸ºåœ°çƒçš„"å§Šå¦¹æ˜Ÿ"ï¼Œå¤§å°ç›¸è¿‘ä½†ç¯å¢ƒæˆªç„¶ä¸åŒã€‚æµ“åšçš„äºŒæ°§åŒ–ç¢³å¤§æ°”å±‚é€ æˆå¼ºçƒˆçš„æ¸©å®¤æ•ˆåº”ï¼Œä½¿å…¶æˆä¸ºå¤ªé˜³ç³»æœ€çƒ­çš„è¡Œæ˜Ÿã€‚
                    </div>
                    
                    <div class="planet-features">
                        <span class="feature-badge">æµ“åšå¤§æ°”</span>
                        <span class="feature-badge">æ¸©å®¤æ•ˆåº”</span>
                        <span class="feature-badge">é€†å‘è‡ªè½¬</span>
                        <span class="feature-badge">ç¡«é…¸äº‘å±‚</span>
                    </div>
                </div>

                <!-- åœ°çƒ -->
                <div class="planet-card earth-card">
                    <div class="planet-header">
                        <div class="planet-icon">ğŸŒ</div>
                        <div class="planet-info">
                            <h3>åœ°çƒ Earth</h3>
                            <div class="planet-subtitle">æˆ‘ä»¬çš„å®¶å›­</div>
                        </div>
                    </div>
                    
                    <div class="planet-stats">
                        <div class="stat-item">
                            <div class="stat-value">1.00 AU</div>
                            <div class="stat-label">è·ç¦»å¤ªé˜³</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">365å¤©</div>
                            <div class="stat-label">å…¬è½¬å‘¨æœŸ</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">12,756km</div>
                            <div class="stat-label">ç›´å¾„</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">15Â°C</div>
                            <div class="stat-label">å¹³å‡æ¸©åº¦</div>
                        </div>
                    </div>
                    
                    <div class="planet-description">
                        åœ°çƒæ˜¯å¤ªé˜³ç³»ä¸­å”¯ä¸€å·²çŸ¥å­˜åœ¨ç”Ÿå‘½çš„è¡Œæ˜Ÿã€‚æ‹¥æœ‰æ¶²æ€æ°´ã€é€‚å®œçš„å¤§æ°”å±‚å’Œç£åœºä¿æŠ¤ï¼Œä¸ºç”Ÿå‘½çš„å­˜åœ¨å’Œæ¼”åŒ–æä¾›äº†å®Œç¾çš„æ¡ä»¶ã€‚
                    </div>
                    
                    <div class="planet-features">
                        <span class="feature-badge">æ¶²æ€æ°´</span>
                        <span class="feature-badge">ç”Ÿå‘½å­˜åœ¨</span>
                        <span class="feature-badge">ç£åœºä¿æŠ¤</span>
                        <span class="feature-badge">æ¿å—è¿åŠ¨</span>
                    </div>
                </div>

                <!-- ç«æ˜Ÿ -->
                <div class="planet-card mars-card">
                    <div class="planet-header">
                        <div class="planet-icon">â™‚ï¸</div>
                        <div class="planet-info">
                            <h3>ç«æ˜Ÿ Mars</h3>
                            <div class="planet-subtitle">çº¢è‰²æ˜Ÿçƒ</div>
                        </div>
                    </div>
                    
                    <div class="planet-stats">
                        <div class="stat-item">
                            <div class="stat-value">1.52 AU</div>
                            <div class="stat-label">è·ç¦»å¤ªé˜³</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">687å¤©</div>
                            <div class="stat-label">å…¬è½¬å‘¨æœŸ</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">6,792km</div>
                            <div class="stat-label">ç›´å¾„</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">-65Â°C</div>
                            <div class="stat-label">å¹³å‡æ¸©åº¦</div>
                        </div>
                    </div>
                    
                    <div class="planet-description">
                        ç«æ˜Ÿå› å…¶çº¢è‰²å¤–è§‚è€Œå¾—åï¼Œè¿™æ˜¯ç”±äºè¡¨é¢å¯Œå«æ°§åŒ–é“ã€‚ç«æ˜Ÿæ‹¥æœ‰å¤ªé˜³ç³»æœ€å¤§çš„ç«å±±å’Œå³¡è°·ï¼Œæ˜¯äººç±»æœªæ¥ç§»æ°‘çš„é‡è¦å€™é€‰åœ°ã€‚
                    </div>
                    
                    <div class="planet-features">
                        <span class="feature-badge">æåœ°å†°å¸½</span>
                        <span class="feature-badge">å¥¥æ—åŒ¹æ–¯å±±</span>
                        <span class="feature-badge">æ°´æ‰‹å³¡è°·</span>
                        <span class="feature-badge">ä¸¤é¢—å«æ˜Ÿ</span>
                    </div>
                </div>

                <!-- æœ¨æ˜Ÿ -->
                <div class="planet-card jupiter-card">
                    <div class="planet-header">
                        <div class="planet-icon">â™ƒ</div>
                        <div class="planet-info">
                            <h3>æœ¨æ˜Ÿ Jupiter</h3>
                            <div class="planet-subtitle">æ°”æ€å·¨è¡Œæ˜Ÿ</div>
                        </div>
                    </div>
                    
                    <div class="planet-stats">
                        <div class="stat-item">
                            <div class="stat-value">5.20 AU</div>
                            <div class="stat-label">è·ç¦»å¤ªé˜³</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">12å¹´</div>
                            <div class="stat-label">å…¬è½¬å‘¨æœŸ</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">142,984km</div>
                            <div class="stat-label">ç›´å¾„</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">95é¢—</div>
                            <div class="stat-label">å·²çŸ¥å«æ˜Ÿ</div>
                        </div>
                    </div>
                    
                    <div class="planet-description">
                        æœ¨æ˜Ÿæ˜¯å¤ªé˜³ç³»æœ€å¤§çš„è¡Œæ˜Ÿï¼Œè´¨é‡è¶…è¿‡å…¶ä»–æ‰€æœ‰è¡Œæ˜Ÿçš„æ€»å’Œã€‚å®ƒçš„å¤§çº¢æ–‘æ˜¯ä¸€ä¸ªæŒç»­äº†æ•°ç™¾å¹´çš„å·¨å¤§é£æš´ï¼Œæ¯”åœ°çƒè¿˜è¦å¤§ã€‚
                    </div>
                    
                    <div class="planet-features">
                        <span class="feature-badge">å¤§çº¢æ–‘</span>
                        <span class="feature-badge">ä¼½åˆ©ç•¥å«æ˜Ÿ</span>
                        <span class="feature-badge">ç¯ç³»ç»Ÿ</span>
                        <span class="feature-badge">è¾å°„å¸¦</span>
                    </div>
                </div>

                <!-- åœŸæ˜Ÿ -->
                <div class="planet-card saturn-card">
                    <div class="planet-header">
                        <div class="planet-icon">â™„</div>
                        <div class="planet-info">
                            <h3>åœŸæ˜Ÿ Saturn</h3>
                            <div class="planet-subtitle">ç¯ä¹‹ç‹</div>
                        </div>
                    </div>
                    
                    <div class="planet-stats">
                        <div class="stat-item">
                            <div class="stat-value">9.58 AU</div>
                            <div class="stat-label">è·ç¦»å¤ªé˜³</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">29å¹´</div>
                            <div class="stat-label">å…¬è½¬å‘¨æœŸ</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">120,536km</div>
                            <div class="stat-label">ç›´å¾„</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">146é¢—</div>
                            <div class="stat-label">å·²çŸ¥å«æ˜Ÿ</div>
                        </div>
                    </div>
                    
                    <div class="planet-description">
                        åœŸæ˜Ÿä»¥å…¶å£®è§‚çš„ç¯ç³»ç»Ÿè€Œé—»åï¼Œè¿™äº›ç¯ä¸»è¦ç”±å†°å—å’Œå²©çŸ³ç¢ç‰‡ç»„æˆã€‚åœŸæ˜Ÿçš„å¯†åº¦å¾ˆä½ï¼Œå¦‚æœæœ‰è¶³å¤Ÿå¤§çš„æµ·æ´‹ï¼Œå®ƒç”šè‡³èƒ½æµ®åœ¨æ°´é¢ä¸Šã€‚
                    </div>
                    
                    <div class="planet-features">
                        <span class="feature-badge">å£®è§‚ç¯ç³»ç»Ÿ</span>
                        <span class="feature-badge">æ³°å¦å«æ˜Ÿ</span>
                        <span class="feature-badge">ä½å¯†åº¦</span>
                        <span class="feature-badge">å…­è¾¹å½¢é£æš´</span>
                    </div>
                </div>

                <!-- å¤©ç‹æ˜Ÿ -->
                <div class="planet-card uranus-card">
                    <div class="planet-header">
                        <div class="planet-icon">â™…</div>
                        <div class="planet-info">
                            <h3>å¤©ç‹æ˜Ÿ Uranus</h3>
                            <div class="planet-subtitle">ä¾§èººçš„è¡Œæ˜Ÿ</div>
                        </div>
                    </div>
                    
                    <div class="planet-stats">
                        <div class="stat-item">
                            <div class="stat-value">19.20 AU</div>
                            <div class="stat-label">è·ç¦»å¤ªé˜³</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">84å¹´</div>
                            <div class="stat-label">å…¬è½¬å‘¨æœŸ</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">51,118km</div>
                            <div class="stat-label">ç›´å¾„</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">27é¢—</div>
                            <div class="stat-label">å·²çŸ¥å«æ˜Ÿ</div>
                        </div>
                    </div>
                    
                    <div class="planet-description">
                        å¤©ç‹æ˜Ÿæ˜¯ä¸€é¢—ç‹¬ç‰¹çš„è¡Œæ˜Ÿï¼Œå®ƒå‡ ä¹æ˜¯ä¾§èººç€ç»•å¤ªé˜³å…¬è½¬çš„ã€‚è¿™ç§æç«¯çš„å€¾æ–œå¯èƒ½æ˜¯ç”±äºæ—©æœŸä¸å…¶ä»–å¤©ä½“çš„ç¢°æ’é€ æˆçš„ã€‚
                    </div>
                    
                    <div class="planet-features">
                        <span class="feature-badge">æç«¯å€¾æ–œ</span>
                        <span class="feature-badge">å†°å·¨è¡Œæ˜Ÿ</span>
                        <span class="feature-badge">å¾®å¼±ç¯ç³»ç»Ÿ</span>
                        <span class="feature-badge">ç”²çƒ·å¤§æ°”</span>
                    </div>
                </div>

                <!-- æµ·ç‹æ˜Ÿ -->
                <div class="planet-card neptune-card">
                    <div class="planet-header">
                        <div class="planet-icon">â™†</div>
                        <div class="planet-info">
                            <h3>æµ·ç‹æ˜Ÿ Neptune</h3>
                            <div class="planet-subtitle">é£æš´ä¹‹ç‹</div>
                        </div>
                    </div>
                    
                    <div class="planet-stats">
                        <div class="stat-item">
                            <div class="stat-value">30.05 AU</div>
                            <div class="stat-label">è·ç¦»å¤ªé˜³</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">165å¹´</div>
                            <div class="stat-label">å…¬è½¬å‘¨æœŸ</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">49,528km</div>
                            <div class="stat-label">ç›´å¾„</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">16é¢—</div>
                            <div class="stat-label">å·²çŸ¥å«æ˜Ÿ</div>
                        </div>
                    </div>
                    
                    <div class="planet-description">
                        æµ·ç‹æ˜Ÿæ˜¯å¤ªé˜³ç³»æœ€å¤–å±‚çš„è¡Œæ˜Ÿï¼Œæ‹¥æœ‰å¤ªé˜³ç³»æœ€å¼ºçš„é£æš´ï¼Œé£é€Ÿå¯è¾¾æ¯å°æ—¶2100å…¬é‡Œã€‚å®ƒçš„æ·±è“è‰²æ¥è‡ªå¤§æ°”ä¸­çš„ç”²çƒ·ã€‚
                    </div>
                    
                    <div class="planet-features">
                        <span class="feature-badge">æœ€å¼ºé£æš´</span>
                        <span class="feature-badge">æµ·å«ä¸€</span>
                        <span class="feature-badge">æ·±è“è‰²</span>
                        <span class="feature-badge">æ•°å­¦å‘ç°</span>
                    </div>
                </div>
            </div>

            <!-- è‡ªç„¶ç°è±¡å­¦ä¹ åŒºåŸŸ -->
            <div class="natural-phenomena-section">
                <h2 class="section-title">ğŸŒ åœ°çƒè‡ªç„¶ç°è±¡æ¢ç´¢</h2>
                <p class="section-description">é€šè¿‡çœŸå®çš„3Dåœ°çƒæ¨¡å‹å­¦ä¹ å››å­£ã€æ—¥å¤œã€æ½®æ±ç­‰è‡ªç„¶ç°è±¡çš„å½¢æˆåŸç†</p>
                
                <!-- å››å­£ç°è±¡ -->
                <div class="phenomenon-card seasons-card">
                    <div class="phenomenon-header">
                        <h3>ğŸ‚ å››å­£å˜åŒ– (Seasons)</h3>
                        <p>åœ°çƒè½´å€¾æ–œ23.5Â°å¯¼è‡´çš„å­£èŠ‚å˜åŒ–</p>
                    </div>
                    
                    <div class="phenomenon-content">
                        <div class="phenomenon-3d" id="seasons-demo">
                            <div class="loading-indicator">
                                <div class="loading-spinner"></div>
                                <div>åŠ è½½å››å­£æ¼”ç¤ºæ¨¡å‹...</div>
                            </div>
                        </div>
                        
                        <div class="phenomenon-controls">
                            <h4>ğŸ® äº¤äº’æ§åˆ¶</h4>
                            <div class="control-group">
                                <button class="demo-btn" id="spring-btn">ğŸŒ¸ æ˜¥åˆ†</button>
                                <button class="demo-btn" id="summer-btn">â˜€ï¸ å¤è‡³</button>
                                <button class="demo-btn" id="autumn-btn">ğŸ ç§‹åˆ†</button>
                                <button class="demo-btn" id="winter-btn">â„ï¸ å†¬è‡³</button>
                            </div>
                            <div class="control-group">
                                <button class="demo-btn" id="auto-seasons">ğŸ”„ è‡ªåŠ¨æ¼”ç¤º</button>
                                <button class="demo-btn" id="reset-seasons">ğŸ  é‡ç½®è§†è§’</button>
                            </div>
                        </div>
                        
                        <div class="phenomenon-info">
                            <h4>ğŸ“š ç§‘å­¦åŸç†</h4>
                            <div id="seasons-info">
                                <p><strong>å››å­£å½¢æˆåŸå› ï¼š</strong></p>
                                <ul>
                                    <li>åœ°çƒè‡ªè½¬è½´ç›¸å¯¹äºå…¬è½¬è½¨é“å¹³é¢å€¾æ–œ23.5Â°</li>
                                    <li>åœ°çƒå…¬è½¬è¿‡ç¨‹ä¸­ï¼Œå—åŒ—åŠçƒæ¥å—é˜³å…‰ç…§å°„è§’åº¦ä¸åŒ</li>
                                    <li>å¤ªé˜³ç›´å°„ç‚¹åœ¨å—åŒ—å›å½’çº¿ä¹‹é—´ç§»åŠ¨</li>
                                    <li>ä¸åŒå­£èŠ‚æ˜¼å¤œé•¿çŸ­å’Œæ¸©åº¦å‘ç”Ÿå˜åŒ–</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- æ—¥å¤œç°è±¡ -->
                <div class="phenomenon-card day-night-card">
                    <div class="phenomenon-header">
                        <h3>ğŸŒ… æ—¥å¤œäº¤æ›¿ (Day & Night)</h3>
                        <p>åœ°çƒè‡ªè½¬äº§ç”Ÿçš„æ˜¼å¤œå¾ªç¯</p>
                    </div>
                    
                    <div class="phenomenon-content">
                        <div class="phenomenon-3d" id="day-night-demo">
                            <div class="loading-indicator">
                                <div class="loading-spinner"></div>
                                <div>åŠ è½½æ—¥å¤œæ¼”ç¤ºæ¨¡å‹...</div>
                            </div>
                        </div>
                        
                        <div class="phenomenon-controls">
                            <h4>ğŸ® äº¤äº’æ§åˆ¶</h4>
                            <div class="control-group">
                                <button class="demo-btn" id="dawn-btn">ğŸŒ… é»æ˜</button>
                                <button class="demo-btn" id="noon-btn">â˜€ï¸ æ­£åˆ</button>
                                <button class="demo-btn" id="dusk-btn">ğŸŒ‡ é»„æ˜</button>
                                <button class="demo-btn" id="midnight-btn">ğŸŒ™ åˆå¤œ</button>
                            </div>
                            <div class="control-group">
                                <button class="demo-btn" id="auto-rotation">ğŸ”„ è‡ªåŠ¨è‡ªè½¬</button>
                                <button class="demo-btn" id="show-terminator">ğŸŒ— æ™¨æ˜çº¿</button>
                            </div>
                        </div>
                        
                        <div class="phenomenon-info">
                            <h4>ğŸ“š ç§‘å­¦åŸç†</h4>
                            <div id="day-night-info">
                                <p><strong>æ—¥å¤œäº¤æ›¿åŸå› ï¼š</strong></p>
                                <ul>
                                    <li>åœ°çƒç»•è‡ªè½¬è½´è‡ªè¥¿å‘ä¸œæ—‹è½¬ï¼Œå‘¨æœŸçº¦24å°æ—¶</li>
                                    <li>é¢å‘å¤ªé˜³çš„åŠçƒä¸ºç™½å¤©ï¼ŒèƒŒå‘å¤ªé˜³çš„åŠçƒä¸ºå¤œæ™š</li>
                                    <li>æ™¨æ˜çº¿åˆ†éš”æ˜¼å¤œåŠçƒï¼Œä¸æ–­ç§»åŠ¨</li>
                                    <li>ä¸åŒçº¬åº¦åœ°åŒºæ—¥å‡ºæ—¥è½æ—¶é—´ä¸åŒ</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- æ½®æ±ç°è±¡ -->
                <div class="phenomenon-card tides-card">
                    <div class="phenomenon-header">
                        <h3>ğŸŒŠ æ½®æ±ç°è±¡ (Tides)</h3>
                        <p>æœˆçƒå’Œå¤ªé˜³å¼•åŠ›ä½œç”¨ä¸‹çš„æµ·æ°´æ¶¨è½</p>
                    </div>
                    
                    <div class="phenomenon-content">
                        <div class="phenomenon-3d" id="tides-demo">
                            <div class="loading-indicator">
                                <div class="loading-spinner"></div>
                                <div>åŠ è½½æ½®æ±æ¼”ç¤ºæ¨¡å‹...</div>
                            </div>
                        </div>
                        
                        <div class="phenomenon-controls">
                            <h4>ğŸ® äº¤äº’æ§åˆ¶</h4>
                            <div class="control-group">
                                <button class="demo-btn" id="high-tide-btn">ğŸŒŠ æ¶¨æ½®</button>
                                <button class="demo-btn" id="low-tide-btn">ğŸ–ï¸ é€€æ½®</button>
                                <button class="demo-btn" id="spring-tide-btn">ğŸŒ• å¤§æ½®</button>
                                <button class="demo-btn" id="neap-tide-btn">ğŸŒ— å°æ½®</button>
                            </div>
                            <div class="control-group">
                                <button class="demo-btn" id="auto-tides">ğŸ”„ è‡ªåŠ¨æ¼”ç¤º</button>
                                <button class="demo-btn" id="show-forces">âš¡ æ˜¾ç¤ºå¼•åŠ›</button>
                            </div>
                        </div>
                        
                        <div class="phenomenon-info">
                            <h4>ğŸ“š ç§‘å­¦åŸç†</h4>
                            <div id="tides-info">
                                <p><strong>æ½®æ±å½¢æˆåŸå› ï¼š</strong></p>
                                <ul>
                                    <li>æœˆçƒå¼•åŠ›æ˜¯æ½®æ±çš„ä¸»è¦æˆå› </li>
                                    <li>å¤ªé˜³å¼•åŠ›ä¹Ÿä¼šå½±å“æ½®æ±å¼ºåº¦</li>
                                    <li>åœ°çƒè‡ªè½¬äº§ç”Ÿç¦»å¿ƒåŠ›ï¼Œå½¢æˆæ½®æ±å‡¸èµ·</li>
                                    <li>æœˆç›¸å˜åŒ–å½±å“å¤§æ½®å’Œå°æ½®çš„å½¢æˆ</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- æœˆç›¸å˜åŒ– -->
                <div class="phenomenon-card moon-phases-card">
                    <div class="phenomenon-header">
                        <h3>ğŸŒ™ æœˆç›¸å˜åŒ– (Moon Phases)</h3>
                        <p>æœˆçƒå…¬è½¬è¿‡ç¨‹ä¸­çš„å½¢çŠ¶å˜åŒ–</p>
                    </div>
                    
                    <div class="phenomenon-content">
                        <div class="phenomenon-3d" id="moon-phases-demo">
                            <div class="loading-indicator">
                                <div class="loading-spinner"></div>
                                <div>åŠ è½½æœˆç›¸æ¼”ç¤ºæ¨¡å‹...</div>
                            </div>
                        </div>
                        
                        <div class="phenomenon-controls">
                            <h4>ğŸ® äº¤äº’æ§åˆ¶</h4>
                            <div class="control-group">
                                <button class="demo-btn" id="new-moon-btn">ğŸŒ‘ æ–°æœˆ</button>
                                <button class="demo-btn" id="first-quarter-btn">ğŸŒ“ ä¸Šå¼¦æœˆ</button>
                                <button class="demo-btn" id="full-moon-btn">ğŸŒ• æ»¡æœˆ</button>
                                <button class="demo-btn" id="last-quarter-btn">ğŸŒ— ä¸‹å¼¦æœˆ</button>
                            </div>
                            <div class="control-group">
                                <button class="demo-btn" id="auto-moon-cycle">ğŸ”„ è‡ªåŠ¨æ¼”ç¤º</button>
                                <button class="demo-btn" id="earth-view">ğŸŒ åœ°çƒè§†è§’</button>
                            </div>
                        </div>
                        
                        <div class="phenomenon-info">
                            <h4>ğŸ“š ç§‘å­¦åŸç†</h4>
                            <div id="moon-phases-info">
                                <p><strong>æœˆç›¸å˜åŒ–åŸå› ï¼š</strong></p>
                                <ul>
                                    <li>æœˆçƒæœ¬èº«ä¸å‘å…‰ï¼Œåå°„å¤ªé˜³å…‰</li>
                                    <li>æœˆçƒç»•åœ°çƒå…¬è½¬ï¼Œç›¸å¯¹ä½ç½®ä¸æ–­å˜åŒ–</li>
                                    <li>ä»åœ°çƒçœ‹åˆ°çš„æœˆçƒè¢«ç…§äº®éƒ¨åˆ†å½¢æˆä¸åŒæœˆç›¸</li>
                                    <li>æœˆç›¸å‘¨æœŸçº¦29.5å¤©ï¼Œç§°ä¸ºæœ”æœ›æœˆ</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- æ—¥é£Ÿæœˆé£Ÿ -->
                <div class="phenomenon-card eclipses-card">
                    <div class="phenomenon-header">
                        <h3>ğŸŒ’ æ—¥é£Ÿæœˆé£Ÿ (Eclipses)</h3>
                        <p>å¤ªé˜³ã€åœ°çƒã€æœˆçƒä¸‰ä½“å¯¹é½äº§ç”Ÿçš„å¤©æ–‡ç°è±¡</p>
                    </div>
                    
                    <div class="phenomenon-content">
                        <div class="phenomenon-3d" id="eclipses-demo">
                            <div class="loading-indicator">
                                <div class="loading-spinner"></div>
                                <div>åŠ è½½æ—¥é£Ÿæœˆé£Ÿæ¼”ç¤ºæ¨¡å‹...</div>
                            </div>
                        </div>
                        
                        <div class="phenomenon-controls">
                            <h4>ğŸ® äº¤äº’æ§åˆ¶</h4>
                            <div class="control-group">
                                <button class="demo-btn" id="solar-eclipse-btn">ğŸŒ‘ æ—¥é£Ÿ</button>
                                <button class="demo-btn" id="lunar-eclipse-btn">ğŸŒ• æœˆé£Ÿ</button>
                                <button class="demo-btn" id="partial-eclipse-btn">ğŸŒ— åé£Ÿ</button>
                                <button class="demo-btn" id="total-eclipse-btn">âš« å…¨é£Ÿ</button>
                            </div>
                            <div class="control-group">
                                <button class="demo-btn" id="show-shadows">ğŸŒ«ï¸ æ˜¾ç¤ºé˜´å½±</button>
                                <button class="demo-btn" id="eclipse-animation">ğŸ¬ åŠ¨ç”»æ¼”ç¤º</button>
                            </div>
                        </div>
                        
                        <div class="phenomenon-info">
                            <h4>ğŸ“š ç§‘å­¦åŸç†</h4>
                            <div id="eclipses-info">
                                <p><strong>æ—¥é£Ÿæœˆé£Ÿå½¢æˆï¼š</strong></p>
                                <ul>
                                    <li><strong>æ—¥é£Ÿï¼š</strong>æœˆçƒè¿è¡Œåˆ°å¤ªé˜³å’Œåœ°çƒä¹‹é—´ï¼Œé®æŒ¡é˜³å…‰</li>
                                    <li><strong>æœˆé£Ÿï¼š</strong>åœ°çƒè¿è¡Œåˆ°å¤ªé˜³å’Œæœˆçƒä¹‹é—´ï¼Œåœ°çƒé˜´å½±é®æŒ¡æœˆçƒ</li>
                                    <li>åªæœ‰åœ¨æ–°æœˆæˆ–æ»¡æœˆæ—¶æ‰å¯èƒ½å‘ç”Ÿé£Ÿç°è±¡</li>
                                    <li>ç”±äºè½¨é“å€¾æ–œï¼Œé£Ÿç°è±¡ç›¸å¯¹ç½•è§</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="main-footer">
        <div class="container">
            <div class="footer-content">
                <p class="copyright-text">study-llm.meåŸŸåä¸ºAlexæ‰€æœ‰ã€‚ä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚</p>
            </div>
        </div>
    </footer>

    <script src="../../js/common.js"></script>
    <script src="../../js/navigation.js"></script>
    <script>
        // çœŸå®3Då¤ªé˜³ç³»ç±» - åŸºäºä¸–ç•Œåœ°å›¾çš„åœ°çƒæ¨¡å‹æŠ€æœ¯
        class RealisticSolarSystem {
            constructor() {
                this.scene = null;
                this.camera = null;
                this.renderer = null;
                this.controls = null;
                this.planets = {};
                this.orbits = {};
                this.isPlaying = true;
                this.speed = 1;
                this.showOrbits = true;
                this.showLabels = true;
                this.focusedPlanet = 'overview';
                
                // çœŸå®å¤©æ–‡æ•°æ® (æŒ‰æ¯”ä¾‹ç¼©æ”¾ç”¨äºå¯è§†åŒ–)
                this.planetData = {
                    sun: { 
                        distance: 0, 
                        size: 3, 
                        color: 0xFFD700, 
                        period: 0, 
                        rotationPeriod: 25,
                        tilt: 7.25,
                        description: 'å¤ªé˜³æ˜¯å¤ªé˜³ç³»çš„ä¸­å¿ƒæ’æ˜Ÿ' 
                    },
                    mercury: { 
                        distance: 12, 
                        size: 0.35, 
                        color: 0x8C7853, 
                        period: 88, 
                        rotationPeriod: 59,
                        tilt: 0.034,
                        description: 'è·ç¦»å¤ªé˜³æœ€è¿‘ï¼Œè¡¨é¢æ¸©å·®æå¤§' 
                    },
                    venus: { 
                        distance: 18, 
                        size: 0.45, 
                        color: 0xFFC649, 
                        period: 225, 
                        rotationPeriod: -243,
                        tilt: 177.4,
                        description: 'å¤ªé˜³ç³»æœ€çƒ­çš„è¡Œæ˜Ÿï¼Œé€†å‘è‡ªè½¬' 
                    },
                    earth: { 
                        distance: 24, 
                        size: 0.5, 
                        color: 0x6B93D6, 
                        period: 365, 
                        rotationPeriod: 1,
                        tilt: 23.5,
                        description: 'æˆ‘ä»¬çš„å®¶å›­ï¼Œå”¯ä¸€å·²çŸ¥æœ‰ç”Ÿå‘½çš„è¡Œæ˜Ÿ' 
                    },
                    mars: { 
                        distance: 32, 
                        size: 0.4, 
                        color: 0xCD5C5C, 
                        period: 687, 
                        rotationPeriod: 1.03,
                        tilt: 25.2,
                        description: 'çº¢è‰²æ˜Ÿçƒï¼Œäººç±»æ¢ç´¢çš„é‡ç‚¹ç›®æ ‡' 
                    },
                    jupiter: { 
                        distance: 50, 
                        size: 1.8, 
                        color: 0xD2691E, 
                        period: 4333, 
                        rotationPeriod: 0.41,
                        tilt: 3.1,
                        description: 'å¤ªé˜³ç³»æœ€å¤§è¡Œæ˜Ÿï¼Œæ°”æ€å·¨è¡Œæ˜Ÿ' 
                    },
                    saturn: { 
                        distance: 70, 
                        size: 1.5, 
                        color: 0xFAD5A5, 
                        period: 10759, 
                        rotationPeriod: 0.45,
                        tilt: 26.7,
                        description: 'æ‹¥æœ‰å£®è§‚å…‰ç¯çš„ç¾ä¸½è¡Œæ˜Ÿ' 
                    },
                    uranus: { 
                        distance: 90, 
                        size: 0.9, 
                        color: 0x4FD0E7, 
                        period: 30687, 
                        rotationPeriod: -0.72,
                        tilt: 97.8,
                        description: 'ä¾§èººç€å…¬è½¬çš„å†°å·¨è¡Œæ˜Ÿ' 
                    },
                    neptune: { 
                        distance: 110, 
                        size: 0.85, 
                        color: 0x4169E1, 
                        period: 60190, 
                        rotationPeriod: 0.67,
                        tilt: 28.3,
                        description: 'é£é€Ÿæœ€å¼ºçš„æ·±è“è‰²è¡Œæ˜Ÿ' 
                    }
                };
                
                this.init();
            }

            async init() {
                try {
                    console.log('ğŸŒŸ åˆå§‹åŒ–çœŸå®3Då¤ªé˜³ç³»...');
                    this.setupScene();
                    this.setupCamera();
                    this.setupRenderer();
                    this.setupLights();
                    this.setupControls();
                    
                    await this.createRealisticSolarSystem();
                    this.setupEventListeners();
                    this.animate();
                    
                    document.getElementById('solar-system-loading').style.display = 'none';
                    console.log('âœ… 3Då¤ªé˜³ç³»åˆå§‹åŒ–å®Œæˆ');
                } catch (error) {
                    console.error('âŒ å¤ªé˜³ç³»åˆå§‹åŒ–å¤±è´¥:', error);
                    this.showFallbackMessage();
                }
            }

            setupScene() {
                this.scene = new THREE.Scene();
                this.scene.background = new THREE.Color(0x000011);
                // Removed star field for cleaner view
            }

            setupCamera() {
                const container = document.getElementById('solar-system-container');
                const width = container.clientWidth;
                const height = container.clientHeight;
                
                this.camera = new THREE.PerspectiveCamera(75, width / height, 0.1, 2000);
                this.camera.position.set(0, 40, 120);
            }

            setupRenderer() {
                const container = document.getElementById('solar-system-container');
                
                this.renderer = new THREE.WebGLRenderer({ antialias: true });
                this.renderer.setSize(container.clientWidth, container.clientHeight);
                this.renderer.setPixelRatio(window.devicePixelRatio);
                this.renderer.shadowMap.enabled = true;
                this.renderer.shadowMap.type = THREE.PCFSoftShadowMap;
                
                container.appendChild(this.renderer.domElement);
            }

            setupLights() {
                // æ¨¡æ‹Ÿå¤ªé˜³å…‰ç…§
                const ambientLight = new THREE.AmbientLight(0x404040, 0.4);
                this.scene.add(ambientLight);
                
                // å¤ªé˜³ä¸»å…‰æº
                this.sunLight = new THREE.PointLight(0xFFFFFF, 3, 300);
                this.sunLight.position.set(0, 0, 0);
                this.sunLight.castShadow = true;
                this.sunLight.shadow.mapSize.width = 2048;
                this.sunLight.shadow.mapSize.height = 2048;
                this.sunLight.shadow.camera.near = 0.5;
                this.sunLight.shadow.camera.far = 200;
                this.scene.add(this.sunLight);
                
                // è¡¥å……å…‰æºå‡å°‘æš—é¢è¿‡æš—
                const fillLight = new THREE.DirectionalLight(0x404080, 0.3);
                fillLight.position.set(50, 20, 50);
                this.scene.add(fillLight);
            }

            setupControls() {
                this.controls = new THREE.OrbitControls(this.camera, this.renderer.domElement);
                this.controls.enableDamping = true;
                this.controls.dampingFactor = 0.05;
                this.controls.minDistance = 5;
                this.controls.maxDistance = 200;
                
                // Enable touch controls for mobile
                this.controls.touches = {
                    ONE: THREE.TOUCH.ROTATE,
                    TWO: THREE.TOUCH.DOLLY_PAN
                };
                
                // Smooth controls
                this.controls.enableZoom = true;
                this.controls.enablePan = true;
                this.controls.enableRotate = true;
                
                // Auto-rotate when idle (optional)
                this.controls.autoRotate = false;
                this.controls.autoRotateSpeed = 0.5;
            }

            async createRealisticSolarSystem() {
                // Create planets
                for (const [name, data] of Object.entries(this.planetData)) {
                    await this.createPlanet(name, data);
                }
                
                // Create orbit lines
                this.createOrbitLines();
                
                // Create asteroid belt
                this.createAsteroidBelt();
                
                // Add some comets
                this.createComets();
            }

            async createPlanet(name, data) {
                // Create high-detail geometry for realistic planets
                const segments = name === 'sun' ? 128 : 64; // Higher detail for important planets
                const geometry = new THREE.SphereGeometry(data.size, segments, segments);
                
                // Create realistic planet based on type
                let planetMesh;
                switch(name) {
                    case 'sun':
                        planetMesh = await this.createRealisticSun(data.size);
                        break;
                    case 'earth':
                        planetMesh = await this.createRealisticEarth(data.size);
                        break;
                    case 'mars':
                        planetMesh = await this.createRealisticMars(data.size);
                        break;
                    case 'jupiter':
                        planetMesh = await this.createRealisticJupiter(data.size);
                        break;
                    case 'saturn':
                        planetMesh = await this.createRealisticSaturn(data.size);
                        break;
                    default:
                        planetMesh = await this.createGenericPlanet(name, data);
                }
                
                if (name === 'sun') {
                    // Sun stays at center
                    planetMesh.position.set(0, 0, 0);
                } else {
                    // Planets start at their orbital distance
                    planetMesh.position.set(data.distance, 0, 0);
                    planetMesh.castShadow = true;
                    planetMesh.receiveShadow = true;
                    
                    // Apply realistic axial tilt
                    if (data.tilt) {
                        planetMesh.rotation.z = THREE.MathUtils.degToRad(data.tilt);
                    }
                }
                
                // Add to scene and store reference
                this.scene.add(planetMesh);
                this.planets[name] = {
                    mesh: planetMesh,
                    data: data,
                    angle: Math.random() * Math.PI * 2,
                    group: new THREE.Group()
                };
                
                // Create planet group for orbital motion
                if (name !== 'sun') {
                    this.planets[name].group.add(planetMesh);
                    this.scene.add(this.planets[name].group);
                }
            }

            // Create realistic Sun with enhanced surface detail and corona
            async createRealisticSun(size) {
                const sunGroup = new THREE.Group();
                
                // Sun core with high-detail surface
                const sunGeometry = new THREE.SphereGeometry(size, 128, 128);
                const sunTexture = this.createAdvancedSunTexture();
                
                const sunMaterial = new THREE.MeshBasicMaterial({
                    map: sunTexture,
                    emissive: 0xFFAA00,
                    emissiveIntensity: 0.8,
                    emissiveMap: sunTexture
                });
                
                const sun = new THREE.Mesh(sunGeometry, sunMaterial);
                sunGroup.add(sun);
                
                // Multiple corona layers for realistic glow
                const coronaLayers = [
                    { size: size * 1.08, color: 0xFFD700, opacity: 0.6 },
                    { size: size * 1.15, color: 0xFF8800, opacity: 0.4 },
                    { size: size * 1.25, color: 0xFF6600, opacity: 0.2 },
                    { size: size * 1.4, color: 0xFFDD44, opacity: 0.1 }
                ];
                
                coronaLayers.forEach(layer => {
                    const coronaGeometry = new THREE.SphereGeometry(layer.size, 32, 32);
                    const coronaMaterial = new THREE.MeshBasicMaterial({
                        color: layer.color,
                        transparent: true,
                        opacity: layer.opacity,
                        side: THREE.BackSide
                    });
                    const corona = new THREE.Mesh(coronaGeometry, coronaMaterial);
                    sunGroup.add(corona);
                });
                
                return sunGroup;
            }

            // Create realistic Earth with continents, oceans, atmosphere and clouds
            async createRealisticEarth(size) {
                const earthGroup = new THREE.Group();
                
                // Earth main body with high detail
                const earthGeometry = new THREE.SphereGeometry(size, 128, 128);
                const earthTexture = this.createAdvancedEarthTexture();
                const earthBumpTexture = this.createEarthBumpMap();
                
                const earthMaterial = new THREE.MeshPhongMaterial({
                    map: earthTexture,
                    bumpMap: earthBumpTexture,
                    bumpScale: 0.05,
                    shininess: 100,
                    specular: new THREE.Color(0x222222)
                });
                
                const earth = new THREE.Mesh(earthGeometry, earthMaterial);
                earth.castShadow = true;
                earth.receiveShadow = true;
                earthGroup.add(earth);
                
                // Atmosphere layer
                const atmosphereGeometry = new THREE.SphereGeometry(size * 1.05, 32, 32);
                const atmosphereMaterial = new THREE.MeshBasicMaterial({
                    color: 0x87CEEB,
                    transparent: true,
                    opacity: 0.15,
                    side: THREE.BackSide
                });
                const atmosphere = new THREE.Mesh(atmosphereGeometry, atmosphereMaterial);
                earthGroup.add(atmosphere);
                
                // Cloud layer with realistic patterns
                const cloudGeometry = new THREE.SphereGeometry(size * 1.02, 64, 64);
                const cloudTexture = this.createAdvancedCloudTexture();
                const cloudMaterial = new THREE.MeshPhongMaterial({
                    map: cloudTexture,
                    transparent: true,
                    opacity: 0.4,
                    alphaMap: cloudTexture
                });
                const clouds = new THREE.Mesh(cloudGeometry, cloudMaterial);
                earthGroup.add(clouds);
                earthGroup.clouds = clouds; // Store for animation
                
                return earthGroup;
            }

            // Create realistic Mars with polar ice caps and terrain
            async createRealisticMars(size) {
                const marsGroup = new THREE.Group();
                
                const marsGeometry = new THREE.SphereGeometry(size, 64, 64);
                const marsTexture = this.createAdvancedMarsTexture();
                const marsBumpTexture = this.createMarsBumpMap();
                
                const marsMaterial = new THREE.MeshPhongMaterial({
                    map: marsTexture,
                    bumpMap: marsBumpTexture,
                    bumpScale: 0.08,
                    shininess: 5
                });
                
                const mars = new THREE.Mesh(marsGeometry, marsMaterial);
                mars.castShadow = true;
                mars.receiveShadow = true;
                marsGroup.add(mars);
                
                // Polar ice caps
                this.addMarsIceCaps(marsGroup, size);
                
                return marsGroup;
            }

            // Create realistic Jupiter with bands and Great Red Spot
            async createRealisticJupiter(size) {
                const jupiterGroup = new THREE.Group();
                
                const jupiterGeometry = new THREE.SphereGeometry(size, 64, 64);
                const jupiterTexture = this.createAdvancedJupiterTexture();
                
                const jupiterMaterial = new THREE.MeshPhongMaterial({
                    map: jupiterTexture,
                    shininess: 10
                });
                
                const jupiter = new THREE.Mesh(jupiterGeometry, jupiterMaterial);
                jupiter.castShadow = true;
                jupiter.receiveShadow = true;
                jupiterGroup.add(jupiter);
                
                // Great Red Spot as separate geometry
                this.addGreatRedSpot(jupiter, size);
                
                return jupiterGroup;
            }

            // Create realistic Saturn with detailed rings
            async createRealisticSaturn(size) {
                const saturnGroup = new THREE.Group();
                
                const saturnGeometry = new THREE.SphereGeometry(size, 64, 64);
                const saturnTexture = this.createAdvancedSaturnTexture();
                
                const saturnMaterial = new THREE.MeshPhongMaterial({
                    map: saturnTexture,
                    shininess: 5
                });
                
                const saturn = new THREE.Mesh(saturnGeometry, saturnMaterial);
                saturn.castShadow = true;
                saturn.receiveShadow = true;
                saturnGroup.add(saturn);
                
                // Detailed ring system
                this.createDetailedSaturnRings(saturnGroup, size);
                
                return saturnGroup;
            }

            // Create generic planet with appropriate textures
            async createGenericPlanet(name, data) {
                const planetGroup = new THREE.Group();
                
                const planetGeometry = new THREE.SphereGeometry(data.size, 64, 64);
                const planetTexture = this.createAdvancedPlanetTexture(name);
                
                const planetMaterial = new THREE.MeshPhongMaterial({
                    map: planetTexture,
                    shininess: 20
                });
                
                const planet = new THREE.Mesh(planetGeometry, planetMaterial);
                planet.castShadow = true;
                planet.receiveShadow = true;
                planetGroup.add(planet);
                
                return planetGroup;
            }

            createSolarFlares(sun) {
                // Create solar flare particles
                const flareCount = 150;
                const flareGeometry = new THREE.BufferGeometry();
                const flarePositions = [];
                const flareSizes = [];
                
                for (let i = 0; i < flareCount; i++) {
                    // Random positions around the sun
                    const radius = 2.2 + Math.random() * 1.5;
                    const theta = Math.random() * Math.PI * 2;
                    const phi = Math.random() * Math.PI;
                    
                    const x = radius * Math.sin(phi) * Math.cos(theta);
                    const y = radius * Math.sin(phi) * Math.sin(theta);
                    const z = radius * Math.cos(phi);
                    
                    flarePositions.push(x, y, z);
                    flareSizes.push(Math.random() * 0.15 + 0.05);
                }
                
                flareGeometry.setAttribute('position', new THREE.Float32BufferAttribute(flarePositions, 3));
                flareGeometry.setAttribute('size', new THREE.Float32BufferAttribute(flareSizes, 1));
                
                const flareMaterial = new THREE.PointsMaterial({
                    color: 0xFFAA00,
                    size: 0.1,
                    transparent: true,
                    opacity: 0.8,
                    blending: THREE.AdditiveBlending
                });
                
                const flares = new THREE.Points(flareGeometry, flareMaterial);
                sun.add(flares);
                
                // Store reference for animation
                this.solarFlares = flares;
            }

            createSaturnRings(saturn) {
                const ringGeometry = new THREE.RingGeometry(1.2, 2.0, 64);
                const ringMaterial = new THREE.MeshBasicMaterial({
                    color: 0xFAD5A5,
                    side: THREE.DoubleSide,
                    transparent: true,
                    opacity: 0.7
                });
                const rings = new THREE.Mesh(ringGeometry, ringMaterial);
                rings.rotation.x = Math.PI / 2;
                saturn.add(rings);
            }

            createOrbitLines() {
                for (const [name, data] of Object.entries(this.planetData)) {
                    if (name === 'sun') continue;
                    
                    const points = [];
                    const segments = 64;
                    
                    for (let i = 0; i <= segments; i++) {
                        const angle = (i / segments) * Math.PI * 2;
                        points.push(new THREE.Vector3(
                            Math.cos(angle) * data.distance,
                            0,
                            Math.sin(angle) * data.distance
                        ));
                    }
                    
                    const geometry = new THREE.BufferGeometry().setFromPoints(points);
                    const material = new THREE.LineBasicMaterial({
                        color: 0x444444,
                        transparent: true,
                        opacity: 0.3
                    });
                    
                    const orbit = new THREE.Line(geometry, material);
                    this.scene.add(orbit);
                    this.orbits[name] = orbit;
                }
            }

            createAsteroidBelt() {
                // Create asteroid belt between Mars and Jupiter
                const asteroidCount = 500;
                const innerRadius = 35; // Between Mars and Jupiter
                const outerRadius = 45;
                
                this.asteroids = [];
                
                for (let i = 0; i < asteroidCount; i++) {
                    const geometry = new THREE.SphereGeometry(0.02 + Math.random() * 0.03, 8, 8);
                    const material = new THREE.MeshBasicMaterial({ 
                        color: 0x666666,
                        transparent: true,
                        opacity: 0.7
                    });
                    
                    const asteroid = new THREE.Mesh(geometry, material);
                    
                    // Random position in belt
                    const angle = Math.random() * Math.PI * 2;
                    const distance = innerRadius + Math.random() * (outerRadius - innerRadius);
                    const height = (Math.random() - 0.5) * 2; // Some vertical spread
                    
                    asteroid.position.set(
                        Math.cos(angle) * distance,
                        height,
                        Math.sin(angle) * distance
                    );
                    
                    this.scene.add(asteroid);
                    this.asteroids.push({
                        mesh: asteroid,
                        angle: angle,
                        distance: distance,
                        speed: 0.001 + Math.random() * 0.002
                    });
                }
            }

            createComets() {
                // Create a few comets with elliptical orbits
                this.comets = [];
                const cometCount = 3;
                
                for (let i = 0; i < cometCount; i++) {
                    // Comet head
                    const geometry = new THREE.SphereGeometry(0.1, 16, 16);
                    const material = new THREE.MeshBasicMaterial({ 
                        color: 0xaaaaff,
                        transparent: true,
                        opacity: 0.8
                    });
                    
                    const comet = new THREE.Mesh(geometry, material);
                    
                    // Comet tail (simple line)
                    const tailGeometry = new THREE.BufferGeometry();
                    const tailPoints = [];
                    for (let j = 0; j < 20; j++) {
                        tailPoints.push(new THREE.Vector3(0, 0, -j * 0.5));
                    }
                    tailGeometry.setFromPoints(tailPoints);
                    
                    const tailMaterial = new THREE.LineBasicMaterial({
                        color: 0x88aaff,
                        transparent: true,
                        opacity: 0.5
                    });
                    
                    const tail = new THREE.Line(tailGeometry, tailMaterial);
                    comet.add(tail);
                    
                    this.scene.add(comet);
                    this.comets.push({
                        mesh: comet,
                        angle: Math.random() * Math.PI * 2,
                        eccentricity: 0.7 + Math.random() * 0.2,
                        semiMajorAxis: 40 + Math.random() * 20,
                        speed: 0.005 + Math.random() * 0.01
                    });
                }
            }

            async loadPlanetTexture(planetName) {
                // First try to load from our local 2k texture files
                const localTextures = {
                    sun: '../../assets/images/2k_sun.jpg',
                    mercury: '../../assets/images/2k_mercury.jpg',
                    venus: '../../assets/images/2k_venus.jpg',
                    earth: '../../assets/images/2k_earth.jpg',
                    mars: '../../assets/images/2k_mars.jpg',
                    jupiter: '../../assets/images/2k_jupiter.jpg',
                    saturn: '../../assets/images/2k_saturn.jpg',
                    uranus: '../../assets/images/2k_uranus.jpg',
                    neptune: '../../assets/images/2k_neptune.jpg',
                    moon: '../../assets/images/2k_moon.jpg'
                };
                
                // Fallback external texture URLs
                const textureUrls = {
                    earth: [
                        'https://upload.wikimedia.org/wikipedia/commons/thumb/9/97/The_Earth_seen_from_Apollo_17.jpg/512px-The_Earth_seen_from_Apollo_17.jpg'
                    ]
                };
                
                return new Promise((resolve) => {
                    const loader = new THREE.TextureLoader();
                    
                    // Try local texture first
                    if (localTextures[planetName]) {
                        loader.load(
                            localTextures[planetName],
                            (texture) => {
                                console.log(`Successfully loaded local texture for ${planetName}`);
                                texture.wrapS = THREE.RepeatWrapping;
                                texture.wrapT = THREE.RepeatWrapping;
                                resolve(texture);
                            },
                            undefined,
                            (error) => {
                                console.log(`Failed to load local texture for ${planetName}, trying fallback...`);
                                this.tryFallbackTextures(planetName, textureUrls, resolve);
                            }
                        );
                        return;
                    }
                    
                    // Try external URLs if no local texture
                    this.tryFallbackTextures(planetName, textureUrls, resolve);
                });
            }
            
            tryFallbackTextures(planetName, textureUrls, resolve) {
                const urls = textureUrls[planetName] || [];
                const loader = new THREE.TextureLoader();
                
                if (urls.length === 0) {
                    // Create procedural texture for this planet
                    resolve(this.createProceduralTexture(planetName));
                    return;
                }
                
                const tryLoadTexture = (urlIndex = 0) => {
                    if (urlIndex >= urls.length) {
                        // All URLs failed, create procedural texture
                        resolve(this.createProceduralTexture(planetName));
                        return;
                    }
                    
                    loader.load(
                        urls[urlIndex],
                        (texture) => {
                            console.log(`Successfully loaded external texture for ${planetName} from source ${urlIndex + 1}`);
                            texture.wrapS = THREE.RepeatWrapping;
                            texture.wrapT = THREE.RepeatWrapping;
                            resolve(texture);
                        },
                        undefined,
                        (error) => {
                            console.log(`Failed to load external texture for ${planetName} from source ${urlIndex + 1}, trying next...`);
                            tryLoadTexture(urlIndex + 1);
                        }
                    );
                };
                
                tryLoadTexture();
            }

            createProceduralTexture(planetName) {
                const canvas = document.createElement('canvas');
                canvas.width = 512;
                canvas.height = 512;
                const context = canvas.getContext('2d');
                
                // Create realistic procedural textures for each planet
                switch(planetName) {
                    case 'sun':
                        this.createSunTexture(context, canvas.width, canvas.height);
                        break;
                    case 'mercury':
                        this.createMercuryTexture(context, canvas.width, canvas.height);
                        break;
                    case 'venus':
                        this.createVenusTexture(context, canvas.width, canvas.height);
                        break;
                    case 'earth':
                        this.createEarthTexture(context, canvas.width, canvas.height);
                        break;
                    case 'earth_night':
                        this.createEarthNightTexture(context, canvas.width, canvas.height);
                        break;
                    case 'earth_clouds':
                        this.createEarthCloudsTexture(context, canvas.width, canvas.height);
                        break;
                    case 'moon':
                        this.createMoonTexture(context, canvas.width, canvas.height);
                        break;
                    case 'mars':
                        this.createMarsTexture(context, canvas.width, canvas.height);
                        break;
                    case 'jupiter':
                        this.createJupiterTexture(context, canvas.width, canvas.height);
                        break;
                    case 'saturn':
                        this.createSaturnTexture(context, canvas.width, canvas.height);
                        break;
                    case 'uranus':
                        this.createUranusTexture(context, canvas.width, canvas.height);
                        break;
                    case 'neptune':
                        this.createNeptuneTexture(context, canvas.width, canvas.height);
                        break;
                    default:
                        this.createDefaultTexture(context, canvas.width, canvas.height);
                }
                
                const texture = new THREE.CanvasTexture(canvas);
                texture.wrapS = THREE.RepeatWrapping;
                texture.wrapT = THREE.RepeatWrapping;
                return texture;
            }

            createSunTexture(ctx, width, height) {
                // Create realistic sun texture with solar granulation
                const gradient = ctx.createRadialGradient(width/2, height/2, 0, width/2, height/2, width/2);
                gradient.addColorStop(0, '#FFFF88');
                gradient.addColorStop(0.7, '#FFAA00');
                gradient.addColorStop(1, '#FF6600');
                
                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, width, height);
                
                // Add solar granulation pattern
                for (let i = 0; i < 1000; i++) {
                    const x = Math.random() * width;
                    const y = Math.random() * height;
                    const size = Math.random() * 8 + 2;
                    const brightness = Math.random() * 0.3 + 0.7;
                    
                    ctx.fillStyle = `rgba(255, 255, 0, ${brightness})`;
                    ctx.beginPath();
                    ctx.arc(x, y, size, 0, Math.PI * 2);
                    ctx.fill();
                }
            }

            createMercuryTexture(ctx, width, height) {
                // Mercury: grey with many craters
                ctx.fillStyle = '#8C7853';
                ctx.fillRect(0, 0, width, height);
                
                // Add craters
                for (let i = 0; i < 200; i++) {
                    const x = Math.random() * width;
                    const y = Math.random() * height;
                    const size = Math.random() * 15 + 5;
                    
                    ctx.fillStyle = '#666644';
                    ctx.beginPath();
                    ctx.arc(x, y, size, 0, Math.PI * 2);
                    ctx.fill();
                    
                    ctx.fillStyle = '#AA9977';
                    ctx.beginPath();
                    ctx.arc(x, y, size * 0.7, 0, Math.PI * 2);
                    ctx.fill();
                }
            }

            createVenusTexture(ctx, width, height) {
                // Venus: thick atmosphere with cloud patterns
                const gradient = ctx.createLinearGradient(0, 0, width, height);
                gradient.addColorStop(0, '#FFC649');
                gradient.addColorStop(0.5, '#FFB347');
                gradient.addColorStop(1, '#FF9933');
                
                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, width, height);
                
                // Add atmospheric swirls
                for (let i = 0; i < 50; i++) {
                    const x = Math.random() * width;
                    const y = Math.random() * height;
                    
                    ctx.strokeStyle = `rgba(255, 200, 100, ${Math.random() * 0.3})`;
                    ctx.lineWidth = Math.random() * 5 + 2;
                    ctx.beginPath();
                    ctx.arc(x, y, Math.random() * 30 + 10, 0, Math.PI * Math.random() * 2);
                    ctx.stroke();
                }
            }

            createEarthTexture(ctx, width, height) {
                // Earth: blue oceans with green/brown continents
                ctx.fillStyle = '#4F94CD';
                ctx.fillRect(0, 0, width, height);
                
                // Add continents
                const continents = [
                    {x: width * 0.3, y: height * 0.3, w: width * 0.2, h: height * 0.4}, // Africa
                    {x: width * 0.1, y: height * 0.4, w: width * 0.15, h: height * 0.3}, // America
                    {x: width * 0.6, y: height * 0.2, w: width * 0.25, h: height * 0.5}, // Asia
                ];
                
                continents.forEach(continent => {
                    ctx.fillStyle = '#228B22';
                    ctx.fillRect(continent.x, continent.y, continent.w, continent.h);
                    
                    // Add terrain variation
                    ctx.fillStyle = '#8B4513';
                    for (let i = 0; i < 10; i++) {
                        const x = continent.x + Math.random() * continent.w;
                        const y = continent.y + Math.random() * continent.h;
                        const size = Math.random() * 20 + 5;
                        ctx.fillRect(x, y, size, size);
                    }
                });
            }

            createEarthNightTexture(ctx, width, height) {
                // Earth night: black with city lights
                ctx.fillStyle = '#000011';
                ctx.fillRect(0, 0, width, height);
                
                // Add city lights
                for (let i = 0; i < 300; i++) {
                    const x = Math.random() * width;
                    const y = Math.random() * height;
                    const size = Math.random() * 2 + 1;
                    
                    ctx.fillStyle = '#FFFF88';
                    ctx.beginPath();
                    ctx.arc(x, y, size, 0, Math.PI * 2);
                    ctx.fill();
                }
            }

            createEarthCloudsTexture(ctx, width, height) {
                // Earth clouds: white wispy patterns
                ctx.fillStyle = 'transparent';
                ctx.fillRect(0, 0, width, height);
                
                for (let i = 0; i < 100; i++) {
                    const x = Math.random() * width;
                    const y = Math.random() * height;
                    const size = Math.random() * 30 + 10;
                    
                    ctx.fillStyle = `rgba(255, 255, 255, ${Math.random() * 0.7 + 0.3})`;
                    ctx.beginPath();
                    ctx.arc(x, y, size, 0, Math.PI * 2);
                    ctx.fill();
                }
            }

            createMoonTexture(ctx, width, height) {
                // Moon: grey with craters
                ctx.fillStyle = '#C0C0C0';
                ctx.fillRect(0, 0, width, height);
                
                // Add large craters
                for (let i = 0; i < 50; i++) {
                    const x = Math.random() * width;
                    const y = Math.random() * height;
                    const size = Math.random() * 25 + 10;
                    
                    ctx.fillStyle = '#888888';
                    ctx.beginPath();
                    ctx.arc(x, y, size, 0, Math.PI * 2);
                    ctx.fill();
                    
                    ctx.fillStyle = '#DDDDDD';
                    ctx.beginPath();
                    ctx.arc(x - size * 0.3, y - size * 0.3, size * 0.2, 0, Math.PI * 2);
                    ctx.fill();
                }
            }

            createMarsTexture(ctx, width, height) {
                // Mars: rusty red with darker regions
                ctx.fillStyle = '#CD5C5C';
                ctx.fillRect(0, 0, width, height);
                
                // Add polar ice caps
                ctx.fillStyle = '#FFFFFF';
                ctx.fillRect(0, 0, width, height * 0.1);
                ctx.fillRect(0, height * 0.9, width, height * 0.1);
                
                // Add dark regions
                for (let i = 0; i < 30; i++) {
                    const x = Math.random() * width;
                    const y = Math.random() * height;
                    const size = Math.random() * 40 + 20;
                    
                    ctx.fillStyle = '#A0522D';
                    ctx.beginPath();
                    ctx.arc(x, y, size, 0, Math.PI * 2);
                    ctx.fill();
                }
            }

            createJupiterTexture(ctx, width, height) {
                // Jupiter: banded atmosphere
                const bands = 8;
                const bandHeight = height / bands;
                
                for (let i = 0; i < bands; i++) {
                    const hue = i % 2 === 0 ? '#D2691E' : '#CD853F';
                    ctx.fillStyle = hue;
                    ctx.fillRect(0, i * bandHeight, width, bandHeight);
                }
                
                // Add Great Red Spot
                ctx.fillStyle = '#B22222';
                ctx.beginPath();
                ctx.ellipse(width * 0.7, height * 0.6, width * 0.1, height * 0.05, 0, 0, Math.PI * 2);
                ctx.fill();
            }

            createSaturnTexture(ctx, width, height) {
                // Saturn: pale yellow with subtle bands
                ctx.fillStyle = '#FAD5A5';
                ctx.fillRect(0, 0, width, height);
                
                // Add subtle bands
                for (let i = 0; i < 6; i++) {
                    ctx.fillStyle = i % 2 === 0 ? '#DEB887' : '#F5DEB3';
                    ctx.fillRect(0, i * height / 6, width, height / 6);
                }
            }

            createUranusTexture(ctx, width, height) {
                // Uranus: blue-green
                const gradient = ctx.createLinearGradient(0, 0, width, height);
                gradient.addColorStop(0, '#4FD0E7');
                gradient.addColorStop(1, '#3CB371');
                
                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, width, height);
            }

            createNeptuneTexture(ctx, width, height) {
                // Neptune: deep blue
                const gradient = ctx.createRadialGradient(width/2, height/2, 0, width/2, height/2, width/2);
                gradient.addColorStop(0, '#4169E1');
                gradient.addColorStop(1, '#0000CD');
                
                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, width, height);
            }

            createDefaultTexture(ctx, width, height) {
                // Default grey texture
                ctx.fillStyle = '#808080';
                ctx.fillRect(0, 0, width, height);
            }

            // Create realistic Earth with day/night textures and clouds
            async createRealisticEarth(size = 1.2, position = [0, 0, 0]) {
                const earthGroup = new THREE.Group();
                
                // Load textures
                const dayTexture = await this.loadPlanetTexture('earth');
                const nightTexture = await this.loadPlanetTexture('earth_night');
                const cloudsTexture = await this.loadPlanetTexture('earth_clouds');
                
                // Earth sphere with day texture
                const earthGeometry = new THREE.SphereGeometry(size, 64, 64);
                const earthMaterial = new THREE.MeshPhongMaterial({
                    map: dayTexture,
                    bumpMap: dayTexture,
                    bumpScale: 0.05,
                    specularMap: dayTexture,
                    specular: new THREE.Color('grey'),
                    shininess: 100
                });
                
                const earth = new THREE.Mesh(earthGeometry, earthMaterial);
                earth.castShadow = true;
                earth.receiveShadow = true;
                earthGroup.add(earth);
                
                // Apply 23.5 degree axial tilt
                earthGroup.rotation.z = Math.PI * 23.5 / 180;
                
                // Cloud layer
                if (cloudsTexture) {
                    const cloudGeometry = new THREE.SphereGeometry(size * 1.02, 64, 64);
                    const cloudMaterial = new THREE.MeshPhongMaterial({
                        map: cloudsTexture,
                        transparent: true,
                        opacity: 0.3
                    });
                    const clouds = new THREE.Mesh(cloudGeometry, cloudMaterial);
                    earthGroup.add(clouds);
                    
                    // Store cloud reference for animation
                    earthGroup.clouds = clouds;
                }
                
                // Atmosphere glow
                const atmosphereGeometry = new THREE.SphereGeometry(size * 1.05, 32, 32);
                const atmosphereMaterial = new THREE.MeshBasicMaterial({
                    color: 0x87CEEB,
                    transparent: true,
                    opacity: 0.2,
                    side: THREE.BackSide
                });
                const atmosphere = new THREE.Mesh(atmosphereGeometry, atmosphereMaterial);
                earthGroup.add(atmosphere);
                
                earthGroup.position.set(...position);
                return earthGroup;
            }

            // Create realistic Sun with surface texture and corona
            async createRealisticSun(size = 2, position = [0, 0, 0]) {
                const sunGroup = new THREE.Group();
                
                // Load sun texture
                const sunTexture = await this.loadPlanetTexture('sun');
                
                // Sun sphere with realistic surface
                const sunGeometry = new THREE.SphereGeometry(size, 64, 64);
                const sunMaterial = new THREE.MeshPhongMaterial({
                    map: sunTexture,
                    emissive: 0xFFAA00,
                    emissiveIntensity: 0.8,
                    emissiveMap: sunTexture
                });
                
                const sun = new THREE.Mesh(sunGeometry, sunMaterial);
                sunGroup.add(sun);
                
                // Corona layers for realistic glow
                const coronaLayers = [
                    { size: size * 1.1, color: 0xFFD700, opacity: 0.4 },
                    { size: size * 1.3, color: 0xFF6600, opacity: 0.2 },
                    { size: size * 1.6, color: 0xFFDD44, opacity: 0.1 }
                ];
                
                coronaLayers.forEach(layer => {
                    const coronaGeometry = new THREE.SphereGeometry(layer.size, 32, 32);
                    const coronaMaterial = new THREE.MeshBasicMaterial({
                        color: layer.color,
                        transparent: true,
                        opacity: layer.opacity,
                        side: THREE.BackSide
                    });
                    const corona = new THREE.Mesh(coronaGeometry, coronaMaterial);
                    sunGroup.add(corona);
                });
                
                // Solar flares particle system
                this.createEnhancedSolarFlares(sunGroup, size);
                
                sunGroup.position.set(...position);
                return sunGroup;
            }

            // Create realistic Moon with surface details
            async createRealisticMoon(size = 0.6, position = [0, 0, 0]) {
                const moonGroup = new THREE.Group();
                
                // Load moon texture
                const moonTexture = await this.loadPlanetTexture('moon');
                
                // Moon sphere with realistic surface
                const moonGeometry = new THREE.SphereGeometry(size, 64, 64);
                const moonMaterial = new THREE.MeshPhongMaterial({
                    map: moonTexture,
                    bumpMap: moonTexture,
                    bumpScale: 0.1,
                    shininess: 1
                });
                
                const moon = new THREE.Mesh(moonGeometry, moonMaterial);
                moon.castShadow = true;
                moon.receiveShadow = true;
                moonGroup.add(moon);
                
                // Subtle glow for moon
                const glowGeometry = new THREE.SphereGeometry(size * 1.1, 32, 32);
                const glowMaterial = new THREE.MeshBasicMaterial({
                    color: 0xC0C0C0,
                    transparent: true,
                    opacity: 0.1,
                    side: THREE.BackSide
                });
                const glow = new THREE.Mesh(glowGeometry, glowMaterial);
                moonGroup.add(glow);
                
                moonGroup.position.set(...position);
                return moonGroup;
            }

            createEnhancedSolarFlares(sunGroup, sunSize) {
                // Create more realistic solar flare particles
                const flareCount = 200;
                const flareGeometry = new THREE.BufferGeometry();
                const flarePositions = [];
                const flareSizes = [];
                const flareColors = [];
                
                for (let i = 0; i < flareCount; i++) {
                    // Random positions around the sun surface
                    const radius = sunSize + Math.random() * (sunSize * 0.5);
                    const theta = Math.random() * Math.PI * 2;
                    const phi = Math.random() * Math.PI;
                    
                    const x = radius * Math.sin(phi) * Math.cos(theta);
                    const y = radius * Math.sin(phi) * Math.sin(theta);
                    const z = radius * Math.cos(phi);
                    
                    flarePositions.push(x, y, z);
                    flareSizes.push(Math.random() * 0.2 + 0.1);
                    
                    // Vary colors from yellow to orange to red
                    const colorVariation = Math.random();
                    if (colorVariation < 0.4) {
                        flareColors.push(1, 1, 0); // Yellow
                    } else if (colorVariation < 0.7) {
                        flareColors.push(1, 0.5, 0); // Orange
                    } else {
                        flareColors.push(1, 0.2, 0); // Red-orange
                    }
                }
                
                flareGeometry.setAttribute('position', new THREE.Float32BufferAttribute(flarePositions, 3));
                flareGeometry.setAttribute('size', new THREE.Float32BufferAttribute(flareSizes, 1));
                flareGeometry.setAttribute('color', new THREE.Float32BufferAttribute(flareColors, 3));
                
                const flareMaterial = new THREE.PointsMaterial({
                    size: 0.15,
                    transparent: true,
                    opacity: 0.8,
                    blending: THREE.AdditiveBlending,
                    vertexColors: true
                });
                
                const flares = new THREE.Points(flareGeometry, flareMaterial);
                sunGroup.add(flares);
                
                // Store reference for animation
                sunGroup.solarFlares = flares;
                return flares;
            }

            setupEventListeners() {
                // Control buttons
                document.getElementById('play-pause').addEventListener('click', () => {
                    this.togglePlayPause();
                });
                
                document.getElementById('speed-up').addEventListener('click', () => {
                    this.speed = Math.min(this.speed * 2, 16);
                    this.updateSpeedDisplay();
                });
                
                document.getElementById('speed-down').addEventListener('click', () => {
                    this.speed = Math.max(this.speed / 2, 0.125);
                    this.updateSpeedDisplay();
                });
                
                document.getElementById('reset-view').addEventListener('click', () => {
                    this.resetView();
                });
                
                document.getElementById('toggle-orbits').addEventListener('click', () => {
                    this.toggleOrbits();
                });
                
                document.getElementById('toggle-labels').addEventListener('click', () => {
                    this.toggleLabels();
                });
                
                document.getElementById('planet-focus').addEventListener('change', (e) => {
                    this.focusOnPlanet(e.target.value);
                });
                
                // Window resize
                window.addEventListener('resize', () => {
                    this.onWindowResize();
                });
                
                // Planet click interaction
                this.renderer.domElement.addEventListener('click', (event) => {
                    this.onPlanetClick(event);
                });
                
                // Planet hover interaction
                this.renderer.domElement.addEventListener('mousemove', (event) => {
                    this.onPlanetHover(event);
                });
            }

            togglePlayPause() {
                this.isPlaying = !this.isPlaying;
                const button = document.getElementById('play-pause');
                button.textContent = this.isPlaying ? 'â¸ï¸' : 'â–¶ï¸';
                button.style.background = this.isPlaying ? 
                    'rgba(255, 255, 255, 0.95)' : 'rgba(67, 97, 238, 0.9)';
                button.style.color = this.isPlaying ? '#333' : 'white';
            }

            updateSpeedDisplay() {
                const info = document.getElementById('current-planet-info');
                const speedText = `é€Ÿåº¦: ${this.speed}x`;
                info.innerHTML = info.innerHTML.split('<br>')[0] + '<br>' + speedText + '<br>æ‹–æ‹½æ—‹è½¬è§†è§’<br>æ»šè½®ç¼©æ”¾è·ç¦»';
            }

            resetView() {
                this.camera.position.set(0, 30, 60);
                this.controls.reset();
                this.focusedPlanet = 'overview';
                document.getElementById('planet-focus').value = 'overview';
                this.updatePlanetInfo('overview');
            }

            toggleOrbits() {
                this.showOrbits = !this.showOrbits;
                Object.values(this.orbits).forEach(orbit => {
                    orbit.visible = this.showOrbits;
                });
                
                const button = document.getElementById('toggle-orbits');
                button.style.background = this.showOrbits ? 
                    'rgba(255, 255, 255, 0.95)' : 'rgba(67, 97, 238, 0.9)';
                button.style.color = this.showOrbits ? '#333' : 'white';
            }

            toggleLabels() {
                this.showLabels = !this.showLabels;
                Object.values(this.planets).forEach(planet => {
                    planet.mesh.visible = this.showLabels;
                });
                
                const button = document.getElementById('toggle-labels');
                button.style.background = this.showLabels ? 
                    'rgba(255, 255, 255, 0.95)' : 'rgba(67, 97, 238, 0.9)';
                button.style.color = this.showLabels ? '#333' : 'white';
            }

            focusOnPlanet(planetName) {
                this.focusedPlanet = planetName;
                
                if (planetName === 'overview') {
                    this.resetView();
                    return;
                }
                
                const planet = this.planets[planetName];
                if (planet) {
                    const position = planet.mesh.position.clone();
                    const distance = planet.data.size * 8;
                    
                    this.camera.position.set(
                        position.x + distance,
                        position.y + distance/2,
                        position.z + distance
                    );
                    this.controls.target.copy(position);
                    this.controls.update();
                    
                    this.updatePlanetInfo(planetName);
                }
            }

            updatePlanetInfo(planetName) {
                const info = document.getElementById('current-planet-info');
                const planetNames = {
                    overview: 'å¤ªé˜³ç³»å…¨æ™¯',
                    sun: 'å¤ªé˜³',
                    mercury: 'æ°´æ˜Ÿ',
                    venus: 'é‡‘æ˜Ÿ',
                    earth: 'åœ°çƒ',
                    mars: 'ç«æ˜Ÿ',
                    jupiter: 'æœ¨æ˜Ÿ',
                    saturn: 'åœŸæ˜Ÿ',
                    uranus: 'å¤©ç‹æ˜Ÿ',
                    neptune: 'æµ·ç‹æ˜Ÿ'
                };
                
                if (planetName === 'overview') {
                    info.innerHTML = `
                        <strong>${planetNames[planetName]}</strong><br>
                        é€Ÿåº¦: ${this.speed}x<br>
                        æ‹–æ‹½æ—‹è½¬è§†è§’<br>
                        æ»šè½®ç¼©æ”¾è·ç¦»<br>
                        é€‰æ‹©è¡Œæ˜Ÿèšç„¦è§‚å¯Ÿ
                    `;
                } else {
                    const data = this.planetData[planetName];
                    info.innerHTML = `
                        <strong>${planetNames[planetName]}</strong><br>
                        è·ç¦»: ${data.distance} AU<br>
                        å¤§å°: ${data.size} å€åœ°çƒ<br>
                        å…¬è½¬å‘¨æœŸ: ${data.period} å¤©
                    `;
                }
            }

            onWindowResize() {
                const container = document.getElementById('solar-system-container');
                const width = container.clientWidth;
                const height = container.clientHeight;
                
                this.camera.aspect = width / height;
                this.camera.updateProjectionMatrix();
                this.renderer.setSize(width, height);
            }

            onPlanetClick(event) {
                const rect = this.renderer.domElement.getBoundingClientRect();
                const mouse = new THREE.Vector2();
                mouse.x = ((event.clientX - rect.left) / rect.width) * 2 - 1;
                mouse.y = -((event.clientY - rect.top) / rect.height) * 2 + 1;
                
                const raycaster = new THREE.Raycaster();
                raycaster.setFromCamera(mouse, this.camera);
                
                const planetMeshes = Object.values(this.planets).map(p => p.mesh);
                const intersects = raycaster.intersectObjects(planetMeshes);
                
                if (intersects.length > 0) {
                    const clickedPlanet = intersects[0].object;
                    const planetName = Object.keys(this.planets).find(
                        name => this.planets[name].mesh === clickedPlanet
                    );
                    
                    if (planetName) {
                        this.focusOnPlanet(planetName);
                        document.getElementById('planet-focus').value = planetName;
                    }
                }
            }

            onPlanetHover(event) {
                const rect = this.renderer.domElement.getBoundingClientRect();
                const mouse = new THREE.Vector2();
                mouse.x = ((event.clientX - rect.left) / rect.width) * 2 - 1;
                mouse.y = -((event.clientY - rect.top) / rect.height) * 2 + 1;
                
                const raycaster = new THREE.Raycaster();
                raycaster.setFromCamera(mouse, this.camera);
                
                const planetMeshes = Object.values(this.planets).map(p => p.mesh);
                const intersects = raycaster.intersectObjects(planetMeshes);
                
                if (intersects.length > 0) {
                    this.renderer.domElement.style.cursor = 'pointer';
                    
                    const hoveredPlanet = intersects[0].object;
                    const planetName = Object.keys(this.planets).find(
                        name => this.planets[name].mesh === hoveredPlanet
                    );
                    
                    if (planetName && planetName !== this.focusedPlanet) {
                        this.showPlanetTooltip(event, planetName);
                    }
                } else {
                    this.renderer.domElement.style.cursor = 'grab';
                    this.hidePlanetTooltip();
                }
            }

            showPlanetTooltip(event, planetName) {
                const planetNames = {
                    sun: 'å¤ªé˜³',
                    mercury: 'æ°´æ˜Ÿ',
                    venus: 'é‡‘æ˜Ÿ',
                    earth: 'åœ°çƒ',
                    mars: 'ç«æ˜Ÿ',
                    jupiter: 'æœ¨æ˜Ÿ',
                    saturn: 'åœŸæ˜Ÿ',
                    uranus: 'å¤©ç‹æ˜Ÿ',
                    neptune: 'æµ·ç‹æ˜Ÿ'
                };
                
                let tooltip = document.getElementById('planet-tooltip');
                if (!tooltip) {
                    tooltip = document.createElement('div');
                    tooltip.id = 'planet-tooltip';
                    tooltip.style.cssText = `
                        position: absolute;
                        background: rgba(0,0,0,0.8);
                        color: white;
                        padding: 8px 12px;
                        border-radius: 6px;
                        font-size: 14px;
                        pointer-events: none;
                        z-index: 1000;
                        box-shadow: 0 2px 8px rgba(0,0,0,0.3);
                    `;
                    document.body.appendChild(tooltip);
                }
                
                tooltip.innerHTML = `<strong>${planetNames[planetName] || planetName}</strong><br>ç‚¹å‡»èšç„¦è§‚å¯Ÿ`;
                tooltip.style.left = (event.pageX + 10) + 'px';
                tooltip.style.top = (event.pageY + 10) + 'px';
                tooltip.style.display = 'block';
            }

            hidePlanetTooltip() {
                const tooltip = document.getElementById('planet-tooltip');
                if (tooltip) {
                    tooltip.style.display = 'none';
                }
            }

            animate() {
                requestAnimationFrame(() => this.animate());
                
                if (this.isPlaying) {
                    // Update planet positions and rotations
                    Object.entries(this.planets).forEach(([name, planet]) => {
                        if (name === 'sun') {
                            // Rotate sun
                            planet.mesh.rotation.y += 0.01 * this.speed;
                            return;
                        }
                        
                        // Orbital motion
                        const data = planet.data;
                        const speed = (365 / data.period) * 0.01 * this.speed;
                        planet.angle += speed;
                        
                        const x = Math.cos(planet.angle) * data.distance;
                        const z = Math.sin(planet.angle) * data.distance;
                        
                        planet.mesh.position.set(x, 0, z);
                        
                        // Planet rotation
                        planet.mesh.rotation.y += 0.02 * this.speed;
                        
                        // Special handling for Earth clouds
                        if (name === 'earth' && planet.mesh.clouds) {
                            planet.mesh.clouds.rotation.y += 0.015 * this.speed; // Clouds rotate slightly faster
                        }
                        
                        // Update focused planet camera if needed
                        if (this.focusedPlanet === name) {
                            const position = planet.mesh.position.clone();
                            this.controls.target.copy(position);
                        }
                    });
                    
                    // Update asteroids
                    if (this.asteroids) {
                        this.asteroids.forEach(asteroid => {
                            asteroid.angle += asteroid.speed * this.speed;
                            const x = Math.cos(asteroid.angle) * asteroid.distance;
                            const z = Math.sin(asteroid.angle) * asteroid.distance;
                            asteroid.mesh.position.x = x;
                            asteroid.mesh.position.z = z;
                        });
                    }
                    
                    // Update comets
                    if (this.comets) {
                        this.comets.forEach(comet => {
                            comet.angle += comet.speed * this.speed;
                            
                            // Elliptical orbit calculation
                            const a = comet.semiMajorAxis;
                            const e = comet.eccentricity;
                            const r = a * (1 - e * e) / (1 + e * Math.cos(comet.angle));
                            
                            const x = r * Math.cos(comet.angle);
                            const z = r * Math.sin(comet.angle);
                            
                            comet.mesh.position.set(x, 0, z);
                            
                            // Point tail away from sun
                            comet.mesh.lookAt(0, 0, 0);
                        });
                    }
                }
                
                this.controls.update();
                this.renderer.render(this.scene, this.camera);
            }

            showFallbackMessage() {
                const container = document.getElementById('solar-system-container');
                container.innerHTML = `
                    <div style="display: flex; align-items: center; justify-content: center; height: 100%; color: white; text-align: center;">
                        <div>
                            <i class="fas fa-exclamation-triangle" style="font-size: 2rem; margin-bottom: 1rem;"></i>
                            <div>3Då¤ªé˜³ç³»åŠ è½½å¤±è´¥</div>
                            <div style="font-size: 0.8rem; margin-top: 0.5rem;">è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–æµè§ˆå™¨å…¼å®¹æ€§</div>
                        </div>
                    </div>
                `;
            }

            createEarthBumpTexture() {
                const canvas = document.createElement('canvas');
                canvas.width = 512;
                canvas.height = 256;
                const context = canvas.getContext('2d');
                
                const imageData = context.createImageData(512, 256);
                for (let i = 0; i < imageData.data.length; i += 4) {
                    const height = Math.random() * 100 + 155;
                    imageData.data[i] = height;
                    imageData.data[i + 1] = height;
                    imageData.data[i + 2] = height;
                    imageData.data[i + 3] = 255;
                }
                context.putImageData(imageData, 0, 0);
                return new THREE.CanvasTexture(canvas);
            }

            createEarthCloudTexture() {
                const canvas = document.createElement('canvas');
                canvas.width = 512;
                canvas.height = 256;
                const context = canvas.getContext('2d');
                
                context.clearRect(0, 0, 512, 256);
                for (let i = 0; i < 500; i++) {
                    const x = Math.random() * 512;
                    const y = Math.random() * 256;
                    const size = Math.random() * 20 + 5;
                    const opacity = Math.random() * 0.8 + 0.2;
                    
                    context.fillStyle = `rgba(255, 255, 255, ${opacity})`;
                    context.beginPath();
                    context.arc(x, y, size, 0, Math.PI * 2);
                    context.fill();
                }
                return new THREE.CanvasTexture(canvas);
            }

            createProceduralMarsTexture() {
                const canvas = document.createElement('canvas');
                canvas.width = 512;
                canvas.height = 256;
                const context = canvas.getContext('2d');
                
                const gradient = context.createLinearGradient(0, 0, 512, 256);
                gradient.addColorStop(0, '#CD853F');
                gradient.addColorStop(0.5, '#D2691E');
                gradient.addColorStop(1, '#A0522D');
                
                context.fillStyle = gradient;
                context.fillRect(0, 0, 512, 256);
                
                // Add Mars features
                for (let i = 0; i < 100; i++) {
                    const x = Math.random() * 512;
                    const y = Math.random() * 256;
                    const size = Math.random() * 5 + 1;
                    context.fillStyle = '#654321';
                    context.beginPath();
                    context.arc(x, y, size, 0, Math.PI * 2);
                    context.fill();
                }
                
                return new THREE.CanvasTexture(canvas);
            }

            createMarsBumpTexture() {
                const canvas = document.createElement('canvas');
                canvas.width = 512;
                canvas.height = 256;
                const context = canvas.getContext('2d');
                
                const imageData = context.createImageData(1024, 512);
                
                for (let y = 0; y < 256; y++) {
                    for (let x = 0; x < 512; x++) {
                        const index = (y * 512 + x) * 4;
                        let height = 128;
                        height += Math.sin(x * 0.02) * 30;
                        height += Math.sin(y * 0.03) * 20;
                        height += (Math.random() - 0.5) * 40;
                        height = Math.max(0, Math.min(255, height));
                        
                        imageData.data[index] = height;
                        imageData.data[index + 1] = height;
                        imageData.data[index + 2] = height;
                        imageData.data[index + 3] = 255;
                    }
                }
                
                context.putImageData(imageData, 0, 0);
                return new THREE.CanvasTexture(canvas);
            }

            createProceduralJupiterTexture() {
                const canvas = document.createElement('canvas');
                canvas.width = 512;
                canvas.height = 256;
                const context = canvas.getContext('2d');
                
                for (let y = 0; y < 256; y++) {
                    const intensity = Math.sin(y * 0.1) * 0.3 + 0.7;
                    const hue = 30 + Math.sin(y * 0.05) * 10;
                    context.fillStyle = `hsl(${hue}, 60%, ${intensity * 60}%)`;
                    context.fillRect(0, y, 512, 1);
                }
                
                return new THREE.CanvasTexture(canvas);
            }

            createProceduralSaturnTexture() {
                const canvas = document.createElement('canvas');
                canvas.width = 512;
                canvas.height = 256;
                const context = canvas.getContext('2d');
                
                for (let y = 0; y < 256; y++) {
                    const intensity = Math.sin(y * 0.08) * 0.2 + 0.8;
                    const hue = 45 + Math.sin(y * 0.03) * 5;
                    context.fillStyle = `hsl(${hue}, 40%, ${intensity * 70}%)`;
                    context.fillRect(0, y, 512, 1);
                }
                
                return new THREE.CanvasTexture(canvas);
            }

            createProceduralPlanetTexture(planetName) {
                const canvas = document.createElement('canvas');
                canvas.width = 512;
                canvas.height = 256;
                const context = canvas.getContext('2d');
                
                // Basic planet textures based on type
                switch(planetName) {
                    case 'mercury':
                        context.fillStyle = '#8C7853';
                        context.fillRect(0, 0, 512, 256);
                        break;
                    case 'venus':
                        const venusGradient = context.createRadialGradient(256, 128, 0, 256, 128, 200);
                        venusGradient.addColorStop(0, '#FFEB3B');
                        venusGradient.addColorStop(1, '#FF9800');
                        context.fillStyle = venusGradient;
                        context.fillRect(0, 0, 512, 256);
                        break;
                    case 'uranus':
                        context.fillStyle = '#4FD0E7';
                        context.fillRect(0, 0, 512, 256);
                        break;
                    case 'neptune':
                        context.fillStyle = '#4169E1';
                        context.fillRect(0, 0, 512, 256);
                        break;
                    default:
                        context.fillStyle = '#888888';
                        context.fillRect(0, 0, 512, 256);
                }
                
                return new THREE.CanvasTexture(canvas);
            }

            // Advanced texture creation methods for realistic planets
            createAdvancedSunTexture() {
                const loader = new THREE.TextureLoader();
                const texture = loader.load('../../assets/images/2k_sun.jpg');
                texture.wrapS = THREE.RepeatWrapping;
                texture.wrapT = THREE.RepeatWrapping;
                return texture;
            }

            createAdvancedEarthTexture() {
                // For Earth, we'll use a procedural texture since we don't have 2k_earth.jpg
                // But we'll enhance it to look more realistic
                const canvas = document.createElement('canvas');
                canvas.width = 2048;
                canvas.height = 1024;
                const context = canvas.getContext('2d');
                
                // Ocean base
                context.fillStyle = '#1e3a8a';
                context.fillRect(0, 0, 2048, 1024);
                
                // Continents with realistic shapes
                this.drawDetailedContinents(context);
                
                // Add terrain variation
                this.addEarthTerrainDetails(context);
                
                return new THREE.CanvasTexture(canvas);
            }

            drawDetailedContinents(context) {
                // Africa
                context.fillStyle = '#22c55e';
                context.beginPath();
                context.moveTo(1100, 300);
                context.bezierCurveTo(1150, 280, 1200, 320, 1180, 400);
                context.bezierCurveTo(1190, 500, 1160, 580, 1120, 620);
                context.bezierCurveTo(1080, 600, 1060, 520, 1070, 450);
                context.bezierCurveTo(1050, 380, 1080, 320, 1100, 300);
                context.fill();
                
                // Eurasia
                context.fillStyle = '#16a34a';
                context.beginPath();
                context.moveTo(1000, 200);
                context.bezierCurveTo(1300, 180, 1600, 220, 1800, 280);
                context.bezierCurveTo(1850, 320, 1800, 360, 1700, 340);
                context.bezierCurveTo(1400, 350, 1200, 320, 1000, 300);
                context.bezierCurveTo(980, 260, 990, 220, 1000, 200);
                context.fill();
                
                // North America
                context.fillStyle = '#15803d';
                context.beginPath();
                context.moveTo(400, 250);
                context.bezierCurveTo(500, 200, 600, 240, 650, 300);
                context.bezierCurveTo(680, 380, 620, 420, 550, 400);
                context.bezierCurveTo(450, 390, 380, 340, 380, 290);
                context.bezierCurveTo(390, 260, 400, 250, 400, 250);
                context.fill();
                
                // South America
                context.fillStyle = '#166534';
                context.beginPath();
                context.moveTo(450, 450);
                context.bezierCurveTo(500, 430, 520, 480, 510, 550);
                context.bezierCurveTo(500, 650, 480, 750, 460, 800);
                context.bezierCurveTo(440, 780, 430, 720, 440, 650);
                context.bezierCurveTo(430, 550, 440, 480, 450, 450);
                context.fill();
                
                // Australia
                context.fillStyle = '#14532d';
                context.ellipse(1600, 600, 80, 40, 0, 0, Math.PI * 2);
                context.fill();
                
                // Antarctica
                context.fillStyle = '#ffffff';
                context.fillRect(0, 900, 2048, 124);
            }

            addEarthTerrainDetails(context) {
                // Mountain ranges
                const mountains = [
                    {x: 1150, y: 250, w: 100, h: 30}, // Himalayas
                    {x: 450, y: 300, w: 80, h: 20},   // Rockies
                    {x: 480, y: 500, w: 40, h: 150},  // Andes
                ];
                
                mountains.forEach(mountain => {
                    context.fillStyle = '#8b5a3c';
                    context.fillRect(mountain.x, mountain.y, mountain.w, mountain.h);
                });
                
                // Deserts
                const deserts = [
                    {x: 1050, y: 280, w: 120, h: 80}, // Sahara
                    {x: 1400, y: 300, w: 100, h: 60}, // Gobi
                ];
                
                deserts.forEach(desert => {
                    context.fillStyle = '#d4a574';
                    context.fillRect(desert.x, desert.y, desert.w, desert.h);
                });
            }

            createEarthBumpMap() {
                const canvas = document.createElement('canvas');
                canvas.width = 1024;
                canvas.height = 512;
                const context = canvas.getContext('2d');
                
                const imageData = context.createImageData(1024, 512);
                
                for (let y = 0; y < 512; y++) {
                    for (let x = 0; x < 1024; x++) {
                        const index = (y * 1024 + x) * 4;
                        
                        // Generate terrain height based on position
                        let height = 128; // Base sea level
                        
                        // Add continental elevation
                        if (this.isLandArea(x / 1024, y / 512)) {
                            height += 50;
                            
                            // Add mountain ranges
                            height += this.getMountainHeight(x / 1024, y / 512) * 80;
                        }
                        
                        // Add noise for surface details
                        height += (Math.random() - 0.5) * 20;
                        
                        // Clamp values
                        height = Math.max(0, Math.min(255, height));
                        
                        imageData.data[index] = height;
                        imageData.data[index + 1] = height;
                        imageData.data[index + 2] = height;
                        imageData.data[index + 3] = 255;
                    }
                }
                
                context.putImageData(imageData, 0, 0);
                return new THREE.CanvasTexture(canvas);
            }

            isLandArea(x, y) {
                // Simplified land detection based on major continents
                // Africa
                if (x > 0.5 && x < 0.6 && y > 0.3 && y < 0.7) return true;
                // Eurasia
                if (x > 0.4 && x < 0.9 && y > 0.15 && y < 0.45) return true;
                // Americas
                if (x > 0.1 && x < 0.35 && y > 0.2 && y < 0.8) return true;
                // Australia
                if (x > 0.75 && x < 0.85 && y > 0.55 && y < 0.65) return true;
                
                return false;
            }

            getMountainHeight(x, y) {
                let height = 0;
                
                // Himalayas
                const himalayaDist = Math.sqrt(Math.pow(x - 0.6, 2) + Math.pow(y - 0.25, 2));
                if (himalayaDist < 0.05) {
                    height += (1 - himalayaDist / 0.05) * 0.8;
                }
                
                // Andes
                if (x > 0.22 && x < 0.26 && y > 0.4 && y < 0.8) {
                    height += 0.6;
                }
                
                // Rockies
                if (x > 0.18 && x < 0.22 && y > 0.25 && y < 0.4) {
                    height += 0.4;
                }
                
                return height;
            }

            createAdvancedCloudTexture() {
                const canvas = document.createElement('canvas');
                canvas.width = 1024;
                canvas.height = 512;
                const context = canvas.getContext('2d');
                
                // Clear background
                context.clearRect(0, 0, 1024, 512);
                
                // Create realistic cloud patterns
                const cloudSystems = [
                    // Tropical storms
                    {x: 200, y: 256, size: 80, type: 'spiral'},
                    {x: 600, y: 200, size: 60, type: 'spiral'},
                    
                    // Cloud bands
                    {x: 0, y: 150, w: 1024, h: 30, type: 'band'},
                    {x: 0, y: 300, w: 1024, h: 40, type: 'band'},
                    
                    // Scattered clouds
                    ...Array.from({length: 200}, () => ({
                        x: Math.random() * 1024,
                        y: Math.random() * 512,
                        size: Math.random() * 30 + 10,
                        type: 'scattered'
                    }))
                ];
                
                cloudSystems.forEach(cloud => {
                    const opacity = Math.random() * 0.6 + 0.4;
                    
                    switch(cloud.type) {
                        case 'spiral':
                            this.drawSpiralCloud(context, cloud.x, cloud.y, cloud.size, opacity);
                            break;
                        case 'band':
                            context.fillStyle = `rgba(255, 255, 255, ${opacity * 0.5})`;
                            context.fillRect(cloud.x, cloud.y, cloud.w, cloud.h);
                            break;
                        case 'scattered':
                            context.fillStyle = `rgba(255, 255, 255, ${opacity})`;
                            context.beginPath();
                            context.arc(cloud.x, cloud.y, cloud.size, 0, Math.PI * 2);
                            context.fill();
                            break;
                    }
                });
                
                return new THREE.CanvasTexture(canvas);
            }

            drawSpiralCloud(context, centerX, centerY, size, opacity) {
                context.strokeStyle = `rgba(255, 255, 255, ${opacity})`;
                context.lineWidth = 8;
                
                for (let i = 0; i < 100; i++) {
                    const angle = i * 0.2;
                    const radius = (i / 100) * size;
                    const x = centerX + Math.cos(angle) * radius;
                    const y = centerY + Math.sin(angle) * radius;
                    
                    if (i === 0) {
                        context.beginPath();
                        context.moveTo(x, y);
                    } else {
                        context.lineTo(x, y);
                    }
                }
                context.stroke();
            }

            createAdvancedMarsTexture() {
                const loader = new THREE.TextureLoader();
                const texture = loader.load('../../assets/images/2k_mars.jpg');
                texture.wrapS = THREE.RepeatWrapping;
                texture.wrapT = THREE.RepeatWrapping;
                return texture;
            }

            createMarsBumpMap() {
                const canvas = document.createElement('canvas');
                canvas.width = 1024;
                canvas.height = 512;
                const context = canvas.getContext('2d');
                
                const imageData = context.createImageData(1024, 512);
                
                for (let y = 0; y < 256; y++) {
                    for (let x = 0; x < 512; x++) {
                        const index = (y * 512 + x) * 4;
                        
                        let height = 128; // Base level
                        
                        // Olympus Mons elevation
                        const olympusDist = Math.sqrt(Math.pow(x - 300, 2) + Math.pow(y - 200, 2));
                        if (olympusDist < 50) {
                            height += (1 - olympusDist / 50) * 100;
                        }
                        
                        // Valles Marineris depression
                        if (Math.abs(y - 250) < 15 && x > 200 && x < 800) {
                            height -= 60;
                        }
                        
                        // Random terrain variation
                        height += (Math.random() - 0.5) * 30;
                        
                        height = Math.max(0, Math.min(255, height));
                        
                        imageData.data[index] = height;
                        imageData.data[index + 1] = height;
                        imageData.data[index + 2] = height;
                        imageData.data[index + 3] = 255;
                    }
                }
                
                context.putImageData(imageData, 0, 0);
                return new THREE.CanvasTexture(canvas);
            }

            addMarsIceCaps(marsGroup, size) {
                // North polar ice cap
                const northCapGeometry = new THREE.SphereGeometry(size * 0.2, 16, 8, 0, Math.PI * 2, 0, Math.PI * 0.25);
                const iceCapMaterial = new THREE.MeshPhongMaterial({
                    color: 0xffffff,
                    transparent: true,
                    opacity: 0.8,
                    shininess: 200
                });
                
                const northCap = new THREE.Mesh(northCapGeometry, iceCapMaterial);
                northCap.position.y = size * 0.9;
                marsGroup.add(northCap);
                
                // South polar ice cap
                const southCapGeometry = new THREE.SphereGeometry(size * 0.15, 16, 8, 0, Math.PI * 2, Math.PI * 0.75, Math.PI * 0.25);
                const southCap = new THREE.Mesh(southCapGeometry, iceCapMaterial);
                southCap.position.y = -size * 0.9;
                marsGroup.add(southCap);
            }

            createAdvancedJupiterTexture() {
                const loader = new THREE.TextureLoader();
                const texture = loader.load('../../assets/images/2k_jupiter.jpg');
                texture.wrapS = THREE.RepeatWrapping;
                texture.wrapT = THREE.RepeatWrapping;
                return texture;
            }

            addGreatRedSpot(jupiter, size) {
                // Great Red Spot geometry
                const spotGeometry = new THREE.SphereGeometry(size * 0.12, 16, 16);
                const spotMaterial = new THREE.MeshPhongMaterial({
                    color: 0x8b0000,
                    transparent: true,
                    opacity: 0.9
                });
                
                const spot = new THREE.Mesh(spotGeometry, spotMaterial);
                spot.position.set(0, -size * 0.2, size * 0.95);
                jupiter.add(spot);
            }

            createAdvancedSaturnTexture() {
                const loader = new THREE.TextureLoader();
                const texture = loader.load('../../assets/images/2k_saturn.jpg');
                texture.wrapS = THREE.RepeatWrapping;
                texture.wrapT = THREE.RepeatWrapping;
                return texture;
            }

            createDetailedSaturnRings(saturnGroup, planetSize) {
                const ringData = [
                    { inner: planetSize * 1.15, outer: planetSize * 1.3, color: 0xcccccc, opacity: 0.9, name: 'D Ring' },
                    { inner: planetSize * 1.32, outer: planetSize * 1.52, color: 0xaaaaaa, opacity: 0.95, name: 'C Ring' },
                    { inner: planetSize * 1.52, outer: planetSize * 1.95, color: 0xdddddd, opacity: 1.0, name: 'B Ring' },
                    { inner: planetSize * 1.95, outer: planetSize * 2.02, color: 0x999999, opacity: 0.6, name: 'Cassini Division' },
                    { inner: planetSize * 2.02, outer: planetSize * 2.27, color: 0xbbbbbb, opacity: 0.9, name: 'A Ring' },
                    { inner: planetSize * 2.45, outer: planetSize * 2.51, color: 0x888888, opacity: 0.7, name: 'F Ring' },
                ];
                
                ringData.forEach(ring => {
                    const ringGeometry = new THREE.RingGeometry(ring.inner, ring.outer, 128);
                    const ringMaterial = new THREE.MeshPhongMaterial({
                        color: ring.color,
                        transparent: true,
                        opacity: ring.opacity,
                        side: THREE.DoubleSide,
                        shininess: 50
                    });
                    
                    const ringMesh = new THREE.Mesh(ringGeometry, ringMaterial);
                    ringMesh.rotation.x = Math.PI / 2;
                    ringMesh.castShadow = true;
                    ringMesh.receiveShadow = true;
                    saturnGroup.add(ringMesh);
                });
            }

            createAdvancedPlanetTexture(planetName) {
                const loader = new THREE.TextureLoader();
                
                // Check if we have a texture file for this planet
                const textureFiles = {
                    'mercury': '../../assets/images/2k_mercury.jpg',
                    'venus': '../../assets/images/2k_venus.jpg',
                    'neptune': '../../assets/images/2k_neptune.jpg'
                };
                
                if (textureFiles[planetName]) {
                    const texture = loader.load(textureFiles[planetName]);
                    texture.wrapS = THREE.RepeatWrapping;
                    texture.wrapT = THREE.RepeatWrapping;
                    return texture;
                }
                
                // Fallback to procedural texture for planets without image files
                const canvas = document.createElement('canvas');
                canvas.width = 512;
                canvas.height = 256;
                const context = canvas.getContext('2d');
                
                switch(planetName) {
                    case 'uranus':
                        this.createUranusTexture(context);
                        break;
                    default:
                        this.createDefaultPlanetTexture(context);
                }
                
                return new THREE.CanvasTexture(canvas);
            }

            createMercuryTexture(context) {
                // Mercury base color
                context.fillStyle = '#8c7853';
                context.fillRect(0, 0, 512, 256);
                
                // Heavy cratering
                for (let i = 0; i < 400; i++) {
                    const x = Math.random() * 512;
                    const y = Math.random() * 256;
                    const size = Math.random() * 12 + 2;
                    
                    // Crater
                    context.fillStyle = '#666644';
                    context.beginPath();
                    context.arc(x, y, size, 0, Math.PI * 2);
                    context.fill();
                    
                    // Crater rim
                    context.fillStyle = '#aa9977';
                    context.beginPath();
                    context.arc(x, y, size * 0.6, 0, Math.PI * 2);
                    context.fill();
                }
                
                // Caloris Basin (large impact crater)
                context.fillStyle = '#554433';
                context.beginPath();
                context.arc(200, 128, 30, 0, Math.PI * 2);
                context.fill();
            }

            createVenusTexture(context) {
                // Venus thick atmosphere
                const gradient = context.createRadialGradient(256, 128, 0, 256, 128, 200);
                gradient.addColorStop(0, '#ffeb3b');
                gradient.addColorStop(0.5, '#ffc107');
                gradient.addColorStop(1, '#ff9800');
                
                context.fillStyle = gradient;
                context.fillRect(0, 0, 512, 256);
                
                // Atmospheric swirls and cloud patterns
                for (let i = 0; i < 80; i++) {
                    const x = Math.random() * 512;
                    const y = Math.random() * 256;
                    const size = Math.random() * 25 + 10;
                    const opacity = Math.random() * 0.4 + 0.3;
                    
                    context.fillStyle = `rgba(255, 255, 200, ${opacity})`;
                    context.beginPath();
                    context.arc(x, y, size, 0, Math.PI * 2);
                    context.fill();
                }
                
                // Add spiral storm patterns
                this.drawSpiralCloud(context, 150, 100, 40, 0.5);
                this.drawSpiralCloud(context, 350, 180, 35, 0.4);
            }

            createUranusTexture(context) {
                // Uranus blue-green with subtle banding
                const gradient = context.createLinearGradient(0, 0, 0, 256);
                gradient.addColorStop(0, '#4fd0e7');
                gradient.addColorStop(0.3, '#3cb371');
                gradient.addColorStop(0.7, '#20b2aa');
                gradient.addColorStop(1, '#008b8b');
                
                context.fillStyle = gradient;
                context.fillRect(0, 0, 512, 256);
                
                // Subtle atmospheric features
                for (let i = 0; i < 30; i++) {
                    const x = Math.random() * 512;
                    const y = Math.random() * 256;
                    const size = Math.random() * 20 + 5;
                    const opacity = Math.random() * 0.2 + 0.1;
                    
                    context.fillStyle = `rgba(100, 200, 255, ${opacity})`;
                    context.beginPath();
                    context.arc(x, y, size, 0, Math.PI * 2);
                    context.fill();
                }
            }

            createNeptuneTexture(context) {
                // Neptune deep blue with storm systems
                const gradient = context.createRadialGradient(256, 128, 0, 256, 128, 200);
                gradient.addColorStop(0, '#4169e1');
                gradient.addColorStop(0.5, '#0000cd');
                gradient.addColorStop(1, '#191970');
                
                context.fillStyle = gradient;
                context.fillRect(0, 0, 512, 256);
                
                // Great Dark Spot
                context.fillStyle = 'rgba(25, 25, 112, 0.8)';
                context.beginPath();
                context.ellipse(300, 150, 25, 15, 0, 0, Math.PI * 2);
                context.fill();
                
                // Storm systems and cloud bands
                for (let i = 0; i < 60; i++) {
                    const x = Math.random() * 512;
                    const y = Math.random() * 256;
                    const size = Math.random() * 15 + 5;
                    const opacity = Math.random() * 0.4 + 0.3;
                    
                    context.fillStyle = `rgba(173, 216, 230, ${opacity})`;
                    context.beginPath();
                    context.arc(x, y, size, 0, Math.PI * 2);
                    context.fill();
                }
            }

            createDefaultPlanetTexture(context) {
                // Default rocky planet texture
                context.fillStyle = '#808080';
                context.fillRect(0, 0, 512, 256);
                
                // Add some surface variation
                for (let i = 0; i < 100; i++) {
                    const x = Math.random() * 512;
                    const y = Math.random() * 256;
                    const size = Math.random() * 10 + 3;
                    const opacity = Math.random() * 0.5 + 0.3;
                    
                    context.fillStyle = `rgba(100, 100, 100, ${opacity})`;
                    context.beginPath();
                    context.arc(x, y, size, 0, Math.PI * 2);
                    context.fill();
                }
            }
        }

        // Initialize 3D Solar System and Phenomena
        let solarSystem3D;
        let naturalPhenomena;
        
        document.addEventListener('DOMContentLoaded', async () => {
            // Initialize main solar system first
            solarSystem3D = new RealisticSolarSystem();
            
            // Initialize natural phenomena demonstrations
            naturalPhenomena = new NaturalPhenomenaDemo();
        });

        // Natural Phenomena Demonstration Class
        class NaturalPhenomenaDemo {
            constructor() {
                this.demos = {};
                this.isAutoPlaying = {};
                this.init();
            }

            async init() {
                console.log('ğŸŒ åˆå§‹åŒ–è‡ªç„¶ç°è±¡æ¼”ç¤º...');
                
                // Initialize each phenomenon demo
                await this.initSeasonsDemo();
                await this.initDayNightDemo();
                await this.initTidesDemo();
                await this.initMoonPhasesDemo();
                await this.initEclipsesDemo();
                
                this.setupEventListeners();
                console.log('âœ… è‡ªç„¶ç°è±¡æ¼”ç¤ºåˆå§‹åŒ–å®Œæˆ');
            }

            async initSeasonsDemo() {
                const container = document.getElementById('seasons-demo');
                if (!container) return;

                const demo = new SeasonsDemo(container);
                await demo.init();
                this.demos.seasons = demo;
            }

            async initDayNightDemo() {
                const container = document.getElementById('day-night-demo');
                if (!container) return;

                const demo = new DayNightDemo(container);
                await demo.init();
                this.demos.dayNight = demo;
            }

            async initTidesDemo() {
                const container = document.getElementById('tides-demo');
                if (!container) return;

                const demo = new TidesDemo(container);
                await demo.init();
                this.demos.tides = demo;
            }

            async initMoonPhasesDemo() {
                const container = document.getElementById('moon-phases-demo');
                if (!container) return;

                const demo = new MoonPhasesDemo(container);
                await demo.init();
                this.demos.moonPhases = demo;
            }

            async initEclipsesDemo() {
                const container = document.getElementById('eclipses-demo');
                if (!container) return;

                const demo = new EclipsesDemo(container);
                await demo.init();
                this.demos.eclipses = demo;
            }

            setupEventListeners() {
                // Seasons controls
                document.getElementById('spring-btn')?.addEventListener('click', () => {
                    this.demos.seasons?.showSeason('spring');
                    this.updateSeasonsInfo('spring');
                });
                
                document.getElementById('summer-btn')?.addEventListener('click', () => {
                    this.demos.seasons?.showSeason('summer');
                    this.updateSeasonsInfo('summer');
                });
                
                document.getElementById('autumn-btn')?.addEventListener('click', () => {
                    this.demos.seasons?.showSeason('autumn');
                    this.updateSeasonsInfo('autumn');
                });
                
                document.getElementById('winter-btn')?.addEventListener('click', () => {
                    this.demos.seasons?.showSeason('winter');
                    this.updateSeasonsInfo('winter');
                });

                document.getElementById('auto-seasons')?.addEventListener('click', () => {
                    this.toggleAutoPlay('seasons');
                });

                document.getElementById('reset-seasons')?.addEventListener('click', () => {
                    this.demos.seasons?.resetView();
                });

                // Day/Night controls
                document.getElementById('dawn-btn')?.addEventListener('click', () => {
                    this.demos.dayNight?.showTime('dawn');
                    this.updateDayNightInfo('dawn');
                });

                document.getElementById('noon-btn')?.addEventListener('click', () => {
                    this.demos.dayNight?.showTime('noon');
                    this.updateDayNightInfo('noon');
                });

                document.getElementById('dusk-btn')?.addEventListener('click', () => {
                    this.demos.dayNight?.showTime('dusk');
                    this.updateDayNightInfo('dusk');
                });

                document.getElementById('midnight-btn')?.addEventListener('click', () => {
                    this.demos.dayNight?.showTime('midnight');
                    this.updateDayNightInfo('midnight');
                });

                document.getElementById('auto-rotation')?.addEventListener('click', () => {
                    this.toggleAutoPlay('dayNight');
                });

                document.getElementById('show-terminator')?.addEventListener('click', () => {
                    this.demos.dayNight?.toggleTerminator();
                });

                // Tides controls
                document.getElementById('high-tide-btn')?.addEventListener('click', () => {
                    this.demos.tides?.showTide('high');
                    this.updateTidesInfo('high');
                });

                document.getElementById('low-tide-btn')?.addEventListener('click', () => {
                    this.demos.tides?.showTide('low');
                    this.updateTidesInfo('low');
                });

                document.getElementById('spring-tide-btn')?.addEventListener('click', () => {
                    this.demos.tides?.showTide('spring');
                    this.updateTidesInfo('spring');
                });

                document.getElementById('neap-tide-btn')?.addEventListener('click', () => {
                    this.demos.tides?.showTide('neap');
                    this.updateTidesInfo('neap');
                });

                document.getElementById('auto-tides')?.addEventListener('click', () => {
                    this.toggleAutoPlay('tides');
                });

                document.getElementById('show-forces')?.addEventListener('click', () => {
                    this.demos.tides?.toggleForces();
                });

                // Moon phases controls
                document.getElementById('new-moon-btn')?.addEventListener('click', () => {
                    this.demos.moonPhases?.showPhase('new');
                    this.updateMoonPhasesInfo('new');
                });

                document.getElementById('first-quarter-btn')?.addEventListener('click', () => {
                    this.demos.moonPhases?.showPhase('firstQuarter');
                    this.updateMoonPhasesInfo('firstQuarter');
                });

                document.getElementById('full-moon-btn')?.addEventListener('click', () => {
                    this.demos.moonPhases?.showPhase('full');
                    this.updateMoonPhasesInfo('full');
                });

                document.getElementById('last-quarter-btn')?.addEventListener('click', () => {
                    this.demos.moonPhases?.showPhase('lastQuarter');
                    this.updateMoonPhasesInfo('lastQuarter');
                });

                document.getElementById('auto-moon-cycle')?.addEventListener('click', () => {
                    this.toggleAutoPlay('moonPhases');
                });

                document.getElementById('earth-view')?.addEventListener('click', () => {
                    this.demos.moonPhases?.toggleEarthView();
                });

                // Eclipses controls
                document.getElementById('solar-eclipse-btn')?.addEventListener('click', () => {
                    this.demos.eclipses?.showEclipse('solar');
                    this.updateEclipsesInfo('solar');
                });

                document.getElementById('lunar-eclipse-btn')?.addEventListener('click', () => {
                    this.demos.eclipses?.showEclipse('lunar');
                    this.updateEclipsesInfo('lunar');
                });

                document.getElementById('partial-eclipse-btn')?.addEventListener('click', () => {
                    this.demos.eclipses?.showEclipse('partial');
                    this.updateEclipsesInfo('partial');
                });

                document.getElementById('total-eclipse-btn')?.addEventListener('click', () => {
                    this.demos.eclipses?.showEclipse('total');
                    this.updateEclipsesInfo('total');
                });

                document.getElementById('show-shadows')?.addEventListener('click', () => {
                    this.demos.eclipses?.toggleShadows();
                });

                document.getElementById('eclipse-animation')?.addEventListener('click', () => {
                    this.demos.eclipses?.playAnimation();
                });
            }

            toggleAutoPlay(demoName) {
                this.isAutoPlaying[demoName] = !this.isAutoPlaying[demoName];
                
                if (this.isAutoPlaying[demoName]) {
                    this.demos[demoName]?.startAutoPlay();
                } else {
                    this.demos[demoName]?.stopAutoPlay();
                }

                // Update button text
                const buttonMap = {
                    seasons: 'auto-seasons',
                    dayNight: 'auto-rotation',
                    tides: 'auto-tides',
                    moonPhases: 'auto-moon-cycle'
                };

                const button = document.getElementById(buttonMap[demoName]);
                if (button) {
                    button.textContent = this.isAutoPlaying[demoName] ? 'â¸ï¸ æš‚åœ' : 'ğŸ”„ è‡ªåŠ¨æ¼”ç¤º';
                }
            }

            updateSeasonsInfo(season) {
                const info = document.getElementById('seasons-info');
                if (!info) return;

                const seasonInfo = {
                    spring: {
                        title: 'æ˜¥åˆ† (3æœˆ20-21æ—¥)',
                        description: 'å¤ªé˜³ç›´å°„èµ¤é“ï¼Œå…¨çƒæ˜¼å¤œç­‰é•¿ï¼ŒåŒ—åŠçƒå¼€å§‹å‡æ¸©ã€‚'
                    },
                    summer: {
                        title: 'å¤è‡³ (6æœˆ20-22æ—¥)',
                        description: 'å¤ªé˜³ç›´å°„åŒ—å›å½’çº¿ï¼ŒåŒ—åŠçƒç™½æ˜¼æœ€é•¿ï¼Œæ¸©åº¦æœ€é«˜ã€‚'
                    },
                    autumn: {
                        title: 'ç§‹åˆ† (9æœˆ22-23æ—¥)',
                        description: 'å¤ªé˜³å†æ¬¡ç›´å°„èµ¤é“ï¼Œå…¨çƒæ˜¼å¤œç­‰é•¿ï¼ŒåŒ—åŠçƒå¼€å§‹é™æ¸©ã€‚'
                    },
                    winter: {
                        title: 'å†¬è‡³ (12æœˆ21-22æ—¥)',
                        description: 'å¤ªé˜³ç›´å°„å—å›å½’çº¿ï¼ŒåŒ—åŠçƒç™½æ˜¼æœ€çŸ­ï¼Œæ¸©åº¦æœ€ä½ã€‚'
                    }
                };

                const current = seasonInfo[season];
                if (current) {
                    info.innerHTML = `
                        <p><strong>å½“å‰å­£èŠ‚ï¼š${current.title}</strong></p>
                        <p>${current.description}</p>
                        <p><strong>å››å­£å½¢æˆåŸå› ï¼š</strong></p>
                        <ul>
                            <li>åœ°çƒè‡ªè½¬è½´ç›¸å¯¹äºå…¬è½¬è½¨é“å¹³é¢å€¾æ–œ23.5Â°</li>
                            <li>åœ°çƒå…¬è½¬è¿‡ç¨‹ä¸­ï¼Œå—åŒ—åŠçƒæ¥å—é˜³å…‰ç…§å°„è§’åº¦ä¸åŒ</li>
                            <li>å¤ªé˜³ç›´å°„ç‚¹åœ¨å—åŒ—å›å½’çº¿ä¹‹é—´ç§»åŠ¨</li>
                            <li>ä¸åŒå­£èŠ‚æ˜¼å¤œé•¿çŸ­å’Œæ¸©åº¦å‘ç”Ÿå˜åŒ–</li>
                        </ul>
                    `;
                }
            }

            updateDayNightInfo(time) {
                const info = document.getElementById('day-night-info');
                if (!info) return;

                const timeInfo = {
                    dawn: {
                        title: 'é»æ˜æ—¶åˆ†',
                        description: 'å¤ªé˜³å³å°†å‡èµ·ï¼Œå¤©ç©ºå¼€å§‹å˜äº®ï¼Œæ™¨æ˜çº¿ç»è¿‡è§‚æµ‹ç‚¹ã€‚'
                    },
                    noon: {
                        title: 'æ­£åˆæ—¶åˆ†',
                        description: 'å¤ªé˜³ä½äºå¤©ç©ºæœ€é«˜ç‚¹ï¼Œé˜³å…‰ç›´å°„ï¼Œå½±å­æœ€çŸ­ã€‚'
                    },
                    dusk: {
                        title: 'é»„æ˜æ—¶åˆ†',
                        description: 'å¤ªé˜³å³å°†è½ä¸‹ï¼Œå¤©ç©ºå¼€å§‹å˜æš—ï¼Œæ™¨æ˜çº¿å†æ¬¡ç»è¿‡è§‚æµ‹ç‚¹ã€‚'
                    },
                    midnight: {
                        title: 'åˆå¤œæ—¶åˆ†',
                        description: 'å¤ªé˜³ä½äºåœ°çƒå¦ä¸€ä¾§ï¼Œè§‚æµ‹ç‚¹å¤„äºå¤œæ™šï¼Œçœ‹åˆ°æ˜Ÿç©ºã€‚'
                    }
                };

                const current = timeInfo[time];
                if (current) {
                    info.innerHTML = `
                        <p><strong>å½“å‰æ—¶é—´ï¼š${current.title}</strong></p>
                        <p>${current.description}</p>
                        <p><strong>æ—¥å¤œäº¤æ›¿åŸå› ï¼š</strong></p>
                        <ul>
                            <li>åœ°çƒç»•è‡ªè½¬è½´è‡ªè¥¿å‘ä¸œæ—‹è½¬ï¼Œå‘¨æœŸçº¦24å°æ—¶</li>
                            <li>é¢å‘å¤ªé˜³çš„åŠçƒä¸ºç™½å¤©ï¼ŒèƒŒå‘å¤ªé˜³çš„åŠçƒä¸ºå¤œæ™š</li>
                            <li>æ™¨æ˜çº¿åˆ†éš”æ˜¼å¤œåŠçƒï¼Œä¸æ–­ç§»åŠ¨</li>
                            <li>ä¸åŒçº¬åº¦åœ°åŒºæ—¥å‡ºæ—¥è½æ—¶é—´ä¸åŒ</li>
                        </ul>
                    `;
                }
            }

            updateTidesInfo(tideType) {
                const info = document.getElementById('tides-info');
                if (!info) return;

                const tideInfo = {
                    high: {
                        title: 'æ¶¨æ½®',
                        description: 'æµ·æ°´æ°´ä½ä¸Šå‡åˆ°æœ€é«˜ç‚¹ï¼Œé€šå¸¸æ¯å¤©å‘ç”Ÿä¸¤æ¬¡ã€‚'
                    },
                    low: {
                        title: 'é€€æ½®',
                        description: 'æµ·æ°´æ°´ä½ä¸‹é™åˆ°æœ€ä½ç‚¹ï¼Œéœ²å‡ºæ›´å¤šæµ·æ»©å’Œç¤çŸ³ã€‚'
                    },
                    spring: {
                        title: 'å¤§æ½®',
                        description: 'æ–°æœˆæˆ–æ»¡æœˆæ—¶ï¼Œå¤ªé˜³å’Œæœˆçƒå¼•åŠ›å åŠ ï¼Œæ½®å·®æœ€å¤§ã€‚'
                    },
                    neap: {
                        title: 'å°æ½®',
                        description: 'ä¸Šå¼¦æœˆæˆ–ä¸‹å¼¦æœˆæ—¶ï¼Œå¤ªé˜³å’Œæœˆçƒå¼•åŠ›ç›¸äº’æŠµæ¶ˆï¼Œæ½®å·®æœ€å°ã€‚'
                    }
                };

                const current = tideInfo[tideType];
                if (current) {
                    info.innerHTML = `
                        <p><strong>å½“å‰çŠ¶æ€ï¼š${current.title}</strong></p>
                        <p>${current.description}</p>
                        <p><strong>æ½®æ±å½¢æˆåŸå› ï¼š</strong></p>
                        <ul>
                            <li>æœˆçƒå¼•åŠ›æ˜¯æ½®æ±çš„ä¸»è¦æˆå› </li>
                            <li>å¤ªé˜³å¼•åŠ›ä¹Ÿä¼šå½±å“æ½®æ±å¼ºåº¦</li>
                            <li>åœ°çƒè‡ªè½¬äº§ç”Ÿç¦»å¿ƒåŠ›ï¼Œå½¢æˆæ½®æ±å‡¸èµ·</li>
                            <li>æœˆç›¸å˜åŒ–å½±å“å¤§æ½®å’Œå°æ½®çš„å½¢æˆ</li>
                        </ul>
                    `;
                }
            }

            updateMoonPhasesInfo(phase) {
                const info = document.getElementById('moon-phases-info');
                if (!info) return;

                const phaseInfo = {
                    new: {
                        title: 'æ–°æœˆ',
                        description: 'æœˆçƒä½äºå¤ªé˜³å’Œåœ°çƒä¹‹é—´ï¼Œä»åœ°çƒçœ‹ä¸åˆ°æœˆçƒè¢«ç…§äº®çš„éƒ¨åˆ†ã€‚'
                    },
                    firstQuarter: {
                        title: 'ä¸Šå¼¦æœˆ',
                        description: 'æœˆçƒã€åœ°çƒã€å¤ªé˜³æˆç›´è§’ï¼Œä»åœ°çƒçœ‹åˆ°æœˆçƒå³åŠéƒ¨åˆ†è¢«ç…§äº®ã€‚'
                    },
                    full: {
                        title: 'æ»¡æœˆ',
                        description: 'åœ°çƒä½äºå¤ªé˜³å’Œæœˆçƒä¹‹é—´ï¼Œä»åœ°çƒçœ‹åˆ°æœˆçƒå®Œå…¨è¢«ç…§äº®ã€‚'
                    },
                    lastQuarter: {
                        title: 'ä¸‹å¼¦æœˆ',
                        description: 'æœˆçƒã€åœ°çƒã€å¤ªé˜³å†æ¬¡æˆç›´è§’ï¼Œä»åœ°çƒçœ‹åˆ°æœˆçƒå·¦åŠéƒ¨åˆ†è¢«ç…§äº®ã€‚'
                    }
                };

                const current = phaseInfo[phase];
                if (current) {
                    info.innerHTML = `
                        <p><strong>å½“å‰æœˆç›¸ï¼š${current.title}</strong></p>
                        <p>${current.description}</p>
                        <p><strong>æœˆç›¸å˜åŒ–åŸå› ï¼š</strong></p>
                        <ul>
                            <li>æœˆçƒæœ¬èº«ä¸å‘å…‰ï¼Œåå°„å¤ªé˜³å…‰</li>
                            <li>æœˆçƒç»•åœ°çƒå…¬è½¬ï¼Œç›¸å¯¹ä½ç½®ä¸æ–­å˜åŒ–</li>
                            <li>ä»åœ°çƒçœ‹åˆ°çš„æœˆçƒè¢«ç…§äº®éƒ¨åˆ†å½¢æˆä¸åŒæœˆç›¸</li>
                            <li>æœˆç›¸å‘¨æœŸçº¦29.5å¤©ï¼Œç§°ä¸ºæœ”æœ›æœˆ</li>
                        </ul>
                    `;
                }
            }

            updateEclipsesInfo(eclipseType) {
                const info = document.getElementById('eclipses-info');
                if (!info) return;

                const eclipseInfo = {
                    solar: {
                        title: 'æ—¥é£Ÿ',
                        description: 'æœˆçƒè¿è¡Œåˆ°å¤ªé˜³å’Œåœ°çƒä¹‹é—´ï¼Œä»åœ°çƒæŸäº›åœ°åŒºçœ‹åˆ°å¤ªé˜³è¢«é®æŒ¡ã€‚'
                    },
                    lunar: {
                        title: 'æœˆé£Ÿ',
                        description: 'åœ°çƒè¿è¡Œåˆ°å¤ªé˜³å’Œæœˆçƒä¹‹é—´ï¼Œæœˆçƒè¿›å…¥åœ°çƒé˜´å½±ä¸­ã€‚'
                    },
                    partial: {
                        title: 'åé£Ÿ',
                        description: 'åªæœ‰éƒ¨åˆ†å¤ªé˜³æˆ–æœˆçƒè¢«é®æŒ¡ï¼Œå½¢æˆåé£Ÿç°è±¡ã€‚'
                    },
                    total: {
                        title: 'å…¨é£Ÿ',
                        description: 'å¤ªé˜³æˆ–æœˆçƒå®Œå…¨è¢«é®æŒ¡ï¼Œæ˜¯æœ€å£®è§‚çš„å¤©æ–‡ç°è±¡ã€‚'
                    }
                };

                const current = eclipseInfo[eclipseType];
                if (current) {
                    info.innerHTML = `
                        <p><strong>å½“å‰ç°è±¡ï¼š${current.title}</strong></p>
                        <p>${current.description}</p>
                        <p><strong>æ—¥é£Ÿæœˆé£Ÿå½¢æˆï¼š</strong></p>
                        <ul>
                            <li><strong>æ—¥é£Ÿï¼š</strong>æœˆçƒè¿è¡Œåˆ°å¤ªé˜³å’Œåœ°çƒä¹‹é—´ï¼Œé®æŒ¡é˜³å…‰</li>
                            <li><strong>æœˆé£Ÿï¼š</strong>åœ°çƒè¿è¡Œåˆ°å¤ªé˜³å’Œæœˆçƒä¹‹é—´ï¼Œåœ°çƒé˜´å½±é®æŒ¡æœˆçƒ</li>
                            <li>åªæœ‰åœ¨æ–°æœˆæˆ–æ»¡æœˆæ—¶æ‰å¯èƒ½å‘ç”Ÿé£Ÿç°è±¡</li>
                            <li>ç”±äºè½¨é“å€¾æ–œï¼Œé£Ÿç°è±¡ç›¸å¯¹ç½•è§</li>
                        </ul>
                    `;
                }
            }
        }

        // Individual Demo Classes for Natural Phenomena
        class SeasonsDemo {
            constructor(container) {
                this.container = container;
                this.scene = null;
                this.camera = null;
                this.renderer = null;
                this.controls = null;
                this.earth = null;
                this.sun = null;
                this.currentSeason = 'spring';
                this.isAutoPlaying = false;
                this.autoPlayInterval = null;
            }

            async init() {
                this.setupScene();
                this.setupCamera();
                this.setupRenderer();
                this.setupLights();
                this.setupControls();
                
                await this.createEarthSunSystem();
                this.animate();
                
                // Hide loading indicator
                const loading = this.container.querySelector('.loading-indicator');
                if (loading) loading.style.display = 'none';
            }

            setupScene() {
                this.scene = new THREE.Scene();
                this.scene.background = new THREE.Color(0x000011);
            }

            setupCamera() {
                const width = this.container.clientWidth;
                const height = this.container.clientHeight;
                
                this.camera = new THREE.PerspectiveCamera(75, width / height, 0.1, 1000);
                this.camera.position.set(15, 10, 15);
            }

            setupRenderer() {
                this.renderer = new THREE.WebGLRenderer({ antialias: true });
                this.renderer.setSize(this.container.clientWidth, this.container.clientHeight);
                this.renderer.setPixelRatio(window.devicePixelRatio);
                this.renderer.shadowMap.enabled = true;
                this.renderer.shadowMap.type = THREE.PCFSoftShadowMap;
                
                this.container.appendChild(this.renderer.domElement);
            }

            setupLights() {
                const ambientLight = new THREE.AmbientLight(0x404040, 0.3);
                this.scene.add(ambientLight);
                
                this.sunLight = new THREE.DirectionalLight(0xFFFFFF, 2);
                this.sunLight.position.set(0, 0, 0);
                this.sunLight.castShadow = true;
                this.scene.add(this.sunLight);
            }

            setupControls() {
                this.controls = new THREE.OrbitControls(this.camera, this.renderer.domElement);
                this.controls.enableDamping = true;
                this.controls.dampingFactor = 0.05;
                this.controls.minDistance = 5;
                this.controls.maxDistance = 50;
            }

            async createEarthSunSystem() {
                // Create Sun
                const sunGeometry = new THREE.SphereGeometry(2, 32, 32);
                const loader = new THREE.TextureLoader();
                const sunTexture = loader.load('../../assets/images/2k_sun.jpg');
                
                const sunMaterial = new THREE.MeshBasicMaterial({
                    map: sunTexture,
                    emissive: 0xFFAA00,
                    emissiveIntensity: 0.8
                });
                
                this.sun = new THREE.Mesh(sunGeometry, sunMaterial);
                this.sun.position.set(0, 0, 0);
                this.scene.add(this.sun);

                // Create Earth
                const earthGeometry = new THREE.SphereGeometry(1, 64, 64);
                const earthTexture = loader.load('../../assets/images/2k_earth.jpg');
                
                const earthMaterial = new THREE.MeshPhongMaterial({
                    map: earthTexture,
                    shininess: 100
                });
                
                this.earth = new THREE.Mesh(earthGeometry, earthMaterial);
                this.earth.position.set(8, 0, 0);
                
                // Apply Earth's axial tilt (23.5 degrees)
                this.earth.rotation.z = THREE.MathUtils.degToRad(23.5);
                
                this.scene.add(this.earth);

                // Create orbital path
                this.createOrbitPath();
            }

            createOrbitPath() {
                const points = [];
                const segments = 64;
                const radius = 8;
                
                for (let i = 0; i <= segments; i++) {
                    const angle = (i / segments) * Math.PI * 2;
                    points.push(new THREE.Vector3(
                        Math.cos(angle) * radius,
                        0,
                        Math.sin(angle) * radius
                    ));
                }
                
                const geometry = new THREE.BufferGeometry().setFromPoints(points);
                const material = new THREE.LineBasicMaterial({
                    color: 0x444444,
                    transparent: true,
                    opacity: 0.5
                });
                
                const orbit = new THREE.Line(geometry, material);
                this.scene.add(orbit);
            }

            showSeason(season) {
                this.currentSeason = season;
                
                const seasonPositions = {
                    spring: { angle: 0, description: 'æ˜¥åˆ†ï¼šå¤ªé˜³ç›´å°„èµ¤é“' },
                    summer: { angle: Math.PI / 2, description: 'å¤è‡³ï¼šå¤ªé˜³ç›´å°„åŒ—å›å½’çº¿' },
                    autumn: { angle: Math.PI, description: 'ç§‹åˆ†ï¼šå¤ªé˜³å†æ¬¡ç›´å°„èµ¤é“' },
                    winter: { angle: 3 * Math.PI / 2, description: 'å†¬è‡³ï¼šå¤ªé˜³ç›´å°„å—å›å½’çº¿' }
                };
                
                const position = seasonPositions[season];
                if (position) {
                    const radius = 8;
                    this.earth.position.set(
                        Math.cos(position.angle) * radius,
                        0,
                        Math.sin(position.angle) * radius
                    );
                    
                    // Update sun light direction
                    this.sunLight.position.copy(this.earth.position).negate().normalize().multiplyScalar(10);
                }
            }

            startAutoPlay() {
                this.isAutoPlaying = true;
                const seasons = ['spring', 'summer', 'autumn', 'winter'];
                let currentIndex = 0;
                
                this.autoPlayInterval = setInterval(() => {
                    this.showSeason(seasons[currentIndex]);
                    currentIndex = (currentIndex + 1) % seasons.length;
                }, 3000);
            }

            stopAutoPlay() {
                this.isAutoPlaying = false;
                if (this.autoPlayInterval) {
                    clearInterval(this.autoPlayInterval);
                    this.autoPlayInterval = null;
                }
            }

            resetView() {
                this.camera.position.set(15, 10, 15);
                this.controls.reset();
            }

            animate() {
                requestAnimationFrame(() => this.animate());
                
                // Rotate sun
                if (this.sun) {
                    this.sun.rotation.y += 0.01;
                }
                
                // Rotate earth
                if (this.earth) {
                    this.earth.rotation.y += 0.02;
                }
                
                this.controls.update();
                this.renderer.render(this.scene, this.camera);
            }
        }

        class DayNightDemo {
            constructor(container) {
                this.container = container;
                this.scene = null;
                this.camera = null;
                this.renderer = null;
                this.controls = null;
                this.earth = null;
                this.sun = null;
                this.terminator = null;
                this.showTerminatorLine = false;
                this.isAutoRotating = false;
                this.autoRotateInterval = null;
            }

            async init() {
                this.setupScene();
                this.setupCamera();
                this.setupRenderer();
                this.setupLights();
                this.setupControls();
                
                await this.createEarthSunSystem();
                this.createTerminator();
                this.animate();
                
                const loading = this.container.querySelector('.loading-indicator');
                if (loading) loading.style.display = 'none';
            }

            setupScene() {
                this.scene = new THREE.Scene();
                this.scene.background = new THREE.Color(0x000011);
            }

            setupCamera() {
                const width = this.container.clientWidth;
                const height = this.container.clientHeight;
                
                this.camera = new THREE.PerspectiveCamera(75, width / height, 0.1, 1000);
                this.camera.position.set(5, 3, 5);
            }

            setupRenderer() {
                this.renderer = new THREE.WebGLRenderer({ antialias: true });
                this.renderer.setSize(this.container.clientWidth, this.container.clientHeight);
                this.renderer.setPixelRatio(window.devicePixelRatio);
                this.renderer.shadowMap.enabled = true;
                
                this.container.appendChild(this.renderer.domElement);
            }

            setupLights() {
                const ambientLight = new THREE.AmbientLight(0x404040, 0.2);
                this.scene.add(ambientLight);
                
                this.sunLight = new THREE.DirectionalLight(0xFFFFFF, 2);
                this.sunLight.position.set(10, 0, 0);
                this.sunLight.castShadow = true;
                this.scene.add(this.sunLight);
            }

            setupControls() {
                this.controls = new THREE.OrbitControls(this.camera, this.renderer.domElement);
                this.controls.enableDamping = true;
                this.controls.dampingFactor = 0.05;
                this.controls.minDistance = 2;
                this.controls.maxDistance = 20;
            }

            async createEarthSunSystem() {
                // Create Earth with day/night textures
                const earthGeometry = new THREE.SphereGeometry(1.5, 64, 64);
                const loader = new THREE.TextureLoader();
                const earthTexture = loader.load('../../assets/images/2k_earth.jpg');
                
                const earthMaterial = new THREE.MeshPhongMaterial({
                    map: earthTexture,
                    shininess: 100
                });
                
                this.earth = new THREE.Mesh(earthGeometry, earthMaterial);
                this.earth.position.set(0, 0, 0);
                this.scene.add(this.earth);

                // Create Sun (distant)
                const sunGeometry = new THREE.SphereGeometry(0.5, 32, 32);
                const sunTexture = loader.load('../../assets/images/2k_sun.jpg');
                
                const sunMaterial = new THREE.MeshBasicMaterial({
                    map: sunTexture,
                    emissive: 0xFFAA00,
                    emissiveIntensity: 1
                });
                
                this.sun = new THREE.Mesh(sunGeometry, sunMaterial);
                this.sun.position.set(8, 0, 0);
                this.scene.add(this.sun);
            }

            createTerminator() {
                // Create terminator line (day/night boundary)
                const points = [];
                const segments = 64;
                
                for (let i = 0; i <= segments; i++) {
                    const angle = (i / segments) * Math.PI * 2;
                    points.push(new THREE.Vector3(
                        0,
                        Math.cos(angle) * 1.51,
                        Math.sin(angle) * 1.51
                    ));
                }
                
                const geometry = new THREE.BufferGeometry().setFromPoints(points);
                const material = new THREE.LineBasicMaterial({
                    color: 0xFFD700,
                    linewidth: 3
                });
                
                this.terminator = new THREE.Line(geometry, material);
                this.terminator.visible = false;
                this.scene.add(this.terminator);
            }

            showTime(time) {
                const timeRotations = {
                    dawn: 0,
                    noon: Math.PI / 2,
                    dusk: Math.PI,
                    midnight: 3 * Math.PI / 2
                };
                
                const rotation = timeRotations[time];
                if (rotation !== undefined) {
                    this.earth.rotation.y = rotation;
                }
            }

            toggleTerminator() {
                this.showTerminatorLine = !this.showTerminatorLine;
                if (this.terminator) {
                    this.terminator.visible = this.showTerminatorLine;
                }
            }

            startAutoPlay() {
                this.isAutoRotating = true;
            }

            stopAutoPlay() {
                this.isAutoRotating = false;
            }

            animate() {
                requestAnimationFrame(() => this.animate());
                
                if (this.isAutoRotating && this.earth) {
                    this.earth.rotation.y += 0.02;
                }
                
                if (this.sun) {
                    this.sun.rotation.y += 0.01;
                }
                
                this.controls.update();
                this.renderer.render(this.scene, this.camera);
            }
        }

        class TidesDemo {
            constructor(container) {
                this.container = container;
                this.scene = null;
                this.camera = null;
                this.renderer = null;
                this.controls = null;
                this.earth = null;
                this.moon = null;
                this.sun = null;
                this.tideIndicators = [];
                this.showForces = false;
                this.forceArrows = [];
            }

            async init() {
                this.setupScene();
                this.setupCamera();
                this.setupRenderer();
                this.setupLights();
                this.setupControls();
                
                await this.createEarthMoonSunSystem();
                this.createTideIndicators();
                this.animate();
                
                const loading = this.container.querySelector('.loading-indicator');
                if (loading) loading.style.display = 'none';
            }

            setupScene() {
                this.scene = new THREE.Scene();
                this.scene.background = new THREE.Color(0x000011);
            }

            setupCamera() {
                const width = this.container.clientWidth;
                const height = this.container.clientHeight;
                
                this.camera = new THREE.PerspectiveCamera(75, width / height, 0.1, 1000);
                this.camera.position.set(8, 5, 8);
            }

            setupRenderer() {
                this.renderer = new THREE.WebGLRenderer({ antialias: true });
                this.renderer.setSize(this.container.clientWidth, this.container.clientHeight);
                this.renderer.setPixelRatio(window.devicePixelRatio);
                
                this.container.appendChild(this.renderer.domElement);
            }

            setupLights() {
                const ambientLight = new THREE.AmbientLight(0x404040, 0.4);
                this.scene.add(ambientLight);
                
                const directionalLight = new THREE.DirectionalLight(0xFFFFFF, 1);
                directionalLight.position.set(10, 10, 5);
                this.scene.add(directionalLight);
            }

            setupControls() {
                this.controls = new THREE.OrbitControls(this.camera, this.renderer.domElement);
                this.controls.enableDamping = true;
                this.controls.dampingFactor = 0.05;
                this.controls.minDistance = 3;
                this.controls.maxDistance = 30;
            }

            async createEarthMoonSunSystem() {
                const loader = new THREE.TextureLoader();
                
                // Create Earth
                const earthGeometry = new THREE.SphereGeometry(1.5, 64, 64);
                const earthTexture = loader.load('../../assets/images/2k_earth.jpg');
                
                const earthMaterial = new THREE.MeshPhongMaterial({
                    map: earthTexture,
                    shininess: 100
                });
                
                this.earth = new THREE.Mesh(earthGeometry, earthMaterial);
                this.earth.position.set(0, 0, 0);
                this.scene.add(this.earth);

                // Create Moon
                const moonGeometry = new THREE.SphereGeometry(0.4, 32, 32);
                const moonTexture = loader.load('../../assets/images/2k_moon.jpg');
                
                const moonMaterial = new THREE.MeshPhongMaterial({
                    map: moonTexture,
                    shininess: 1
                });
                
                this.moon = new THREE.Mesh(moonGeometry, moonMaterial);
                this.moon.position.set(4, 0, 0);
                this.scene.add(this.moon);

                // Create Sun (distant)
                const sunGeometry = new THREE.SphereGeometry(0.3, 32, 32);
                const sunTexture = loader.load('../../assets/images/2k_sun.jpg');
                
                const sunMaterial = new THREE.MeshBasicMaterial({
                    map: sunTexture,
                    emissive: 0xFFAA00,
                    emissiveIntensity: 1
                });
                
                this.sun = new THREE.Mesh(sunGeometry, sunMaterial);
                this.sun.position.set(12, 0, 0);
                this.scene.add(this.sun);
            }

            createTideIndicators() {
                // Create tide bulges on Earth
                const bulgeGeometry = new THREE.SphereGeometry(0.1, 16, 16);
                const highTideMaterial = new THREE.MeshBasicMaterial({
                    color: 0x00BFFF,
                    transparent: true,
                    opacity: 0.7
                });
                
                // High tide indicators
                for (let i = 0; i < 4; i++) {
                    const indicator = new THREE.Mesh(bulgeGeometry, highTideMaterial);
                    this.tideIndicators.push(indicator);
                    this.scene.add(indicator);
                }
                
                this.updateTidePositions();
            }

            updateTidePositions() {
                if (this.tideIndicators.length >= 4) {
                    // Position tide indicators around Earth
                    this.tideIndicators[0].position.set(1.7, 0, 0);  // Moon side high tide
                    this.tideIndicators[1].position.set(-1.7, 0, 0); // Opposite side high tide
                    this.tideIndicators[2].position.set(0, 0, 1.7);  // Low tide
                    this.tideIndicators[3].position.set(0, 0, -1.7); // Low tide
                }
            }

            showTide(tideType) {
                const tideConfigs = {
                    high: { moonDistance: 3.5, intensity: 1.2 },
                    low: { moonDistance: 5, intensity: 0.8 },
                    spring: { moonDistance: 3, intensity: 1.5 },
                    neap: { moonDistance: 4, intensity: 0.6 }
                };
                
                const config = tideConfigs[tideType];
                if (config && this.moon) {
                    this.moon.position.setLength(config.moonDistance);
                    
                    // Update tide indicator sizes
                    this.tideIndicators.forEach((indicator, index) => {
                        const scale = index < 2 ? config.intensity : 1 / config.intensity;
                        indicator.scale.setScalar(scale);
                    });
                }
            }

            toggleForces() {
                this.showForces = !this.showForces;
                // Implementation for showing gravitational force arrows
            }

            startAutoPlay() {
                // Implementation for automatic tide cycle
            }

            stopAutoPlay() {
                // Implementation to stop automatic cycle
            }

            animate() {
                requestAnimationFrame(() => this.animate());
                
                // Rotate Earth
                if (this.earth) {
                    this.earth.rotation.y += 0.01;
                }
                
                // Rotate Moon around Earth
                if (this.moon) {
                    const time = Date.now() * 0.001;
                    this.moon.position.x = Math.cos(time * 0.5) * 4;
                    this.moon.position.z = Math.sin(time * 0.5) * 4;
                }
                
                this.updateTidePositions();
                this.controls.update();
                this.renderer.render(this.scene, this.camera);
            }
        }

        class MoonPhasesDemo {
            constructor(container) {
                this.container = container;
                this.scene = null;
                this.camera = null;
                this.renderer = null;
                this.controls = null;
                this.earth = null;
                this.moon = null;
                this.sun = null;
                this.currentPhase = 'new';
                this.earthView = false;
            }

            async init() {
                this.setupScene();
                this.setupCamera();
                this.setupRenderer();
                this.setupLights();
                this.setupControls();
                
                await this.createEarthMoonSunSystem();
                this.animate();
                
                const loading = this.container.querySelector('.loading-indicator');
                if (loading) loading.style.display = 'none';
            }

            setupScene() {
                this.scene = new THREE.Scene();
                this.scene.background = new THREE.Color(0x000011);
            }

            setupCamera() {
                const width = this.container.clientWidth;
                const height = this.container.clientHeight;
                
                this.camera = new THREE.PerspectiveCamera(75, width / height, 0.1, 1000);
                this.camera.position.set(8, 5, 8);
            }

            setupRenderer() {
                this.renderer = new THREE.WebGLRenderer({ antialias: true });
                this.renderer.setSize(this.container.clientWidth, this.container.clientHeight);
                this.renderer.setPixelRatio(window.devicePixelRatio);
                this.renderer.shadowMap.enabled = true;
                
                this.container.appendChild(this.renderer.domElement);
            }

            setupLights() {
                const ambientLight = new THREE.AmbientLight(0x404040, 0.2);
                this.scene.add(ambientLight);
                
                this.sunLight = new THREE.DirectionalLight(0xFFFFFF, 2);
                this.sunLight.position.set(15, 0, 0);
                this.sunLight.castShadow = true;
                this.scene.add(this.sunLight);
            }

            setupControls() {
                this.controls = new THREE.OrbitControls(this.camera, this.renderer.domElement);
                this.controls.enableDamping = true;
                this.controls.dampingFactor = 0.05;
                this.controls.minDistance = 3;
                this.controls.maxDistance = 25;
            }

            async createEarthMoonSunSystem() {
                const loader = new THREE.TextureLoader();
                
                // Create Earth
                const earthGeometry = new THREE.SphereGeometry(1, 64, 64);
                const earthTexture = loader.load('../../assets/images/2k_earth.jpg');
                
                const earthMaterial = new THREE.MeshPhongMaterial({
                    map: earthTexture,
                    shininess: 100
                });
                
                this.earth = new THREE.Mesh(earthGeometry, earthMaterial);
                this.earth.position.set(0, 0, 0);
                this.earth.castShadow = true;
                this.earth.receiveShadow = true;
                this.scene.add(this.earth);

                // Create Moon
                const moonGeometry = new THREE.SphereGeometry(0.27, 32, 32);
                const moonTexture = loader.load('../../assets/images/2k_moon.jpg');
                
                const moonMaterial = new THREE.MeshPhongMaterial({
                    map: moonTexture,
                    shininess: 1
                });
                
                this.moon = new THREE.Mesh(moonGeometry, moonMaterial);
                this.moon.position.set(3, 0, 0);
                this.moon.castShadow = true;
                this.moon.receiveShadow = true;
                this.scene.add(this.moon);

                // Create Sun (distant)
                const sunGeometry = new THREE.SphereGeometry(0.5, 32, 32);
                const sunTexture = loader.load('../../assets/images/2k_sun.jpg');
                
                const sunMaterial = new THREE.MeshBasicMaterial({
                    map: sunTexture,
                    emissive: 0xFFAA00,
                    emissiveIntensity: 1
                });
                
                this.sun = new THREE.Mesh(sunGeometry, sunMaterial);
                this.sun.position.set(15, 0, 0);
                this.scene.add(this.sun);
            }

            showPhase(phase) {
                this.currentPhase = phase;
                
                const phaseAngles = {
                    new: 0,
                    firstQuarter: Math.PI / 2,
                    full: Math.PI,
                    lastQuarter: 3 * Math.PI / 2
                };
                
                const angle = phaseAngles[phase];
                if (angle !== undefined) {
                    const radius = 3;
                    this.moon.position.set(
                        Math.cos(angle) * radius,
                        0,
                        Math.sin(angle) * radius
                    );
                }
            }

            toggleEarthView() {
                this.earthView = !this.earthView;
                
                if (this.earthView) {
                    // View from Earth surface
                    this.camera.position.set(0.5, 0, 0);
                    this.camera.lookAt(this.moon.position);
                } else {
                    // View from space
                    this.camera.position.set(8, 5, 8);
                    this.controls.reset();
                }
            }

            startAutoPlay() {
                // Implementation for automatic moon phase cycle
            }

            stopAutoPlay() {
                // Implementation to stop automatic cycle
            }

            animate() {
                requestAnimationFrame(() => this.animate());
                
                // Rotate Earth
                if (this.earth) {
                    this.earth.rotation.y += 0.01;
                }
                
                // Rotate Moon
                if (this.moon) {
                    this.moon.rotation.y += 0.02;
                }
                
                this.controls.update();
                this.renderer.render(this.scene, this.camera);
            }
        }

        class EclipsesDemo {
            constructor(container) {
                this.container = container;
                this.scene = null;
                this.camera = null;
                this.renderer = null;
                this.controls = null;
                this.earth = null;
                this.moon = null;
                this.sun = null;
                this.shadows = [];
                this.showShadowCones = false;
            }

            async init() {
                this.setupScene();
                this.setupCamera();
                this.setupRenderer();
                this.setupLights();
                this.setupControls();
                
                await this.createEclipseSystem();
                this.animate();
                
                const loading = this.container.querySelector('.loading-indicator');
                if (loading) loading.style.display = 'none';
            }

            setupScene() {
                this.scene = new THREE.Scene();
                this.scene.background = new THREE.Color(0x000011);
            }

            setupCamera() {
                const width = this.container.clientWidth;
                const height = this.container.clientHeight;
                
                this.camera = new THREE.PerspectiveCamera(75, width / height, 0.1, 1000);
                this.camera.position.set(0, 8, 12);
            }

            setupRenderer() {
                this.renderer = new THREE.WebGLRenderer({ antialias: true });
                this.renderer.setSize(this.container.clientWidth, this.container.clientHeight);
                this.renderer.setPixelRatio(window.devicePixelRatio);
                this.renderer.shadowMap.enabled = true;
                this.renderer.shadowMap.type = THREE.PCFSoftShadowMap;
                
                this.container.appendChild(this.renderer.domElement);
            }

            setupLights() {
                const ambientLight = new THREE.AmbientLight(0x404040, 0.1);
                this.scene.add(ambientLight);
                
                this.sunLight = new THREE.DirectionalLight(0xFFFFFF, 3);
                this.sunLight.position.set(-15, 0, 0);
                this.sunLight.castShadow = true;
                this.sunLight.shadow.mapSize.width = 2048;
                this.sunLight.shadow.mapSize.height = 2048;
                this.scene.add(this.sunLight);
            }

            setupControls() {
                this.controls = new THREE.OrbitControls(this.camera, this.renderer.domElement);
                this.controls.enableDamping = true;
                this.controls.dampingFactor = 0.05;
                this.controls.minDistance = 5;
                this.controls.maxDistance = 30;
            }

            async createEclipseSystem() {
                const loader = new THREE.TextureLoader();
                
                // Create Sun
                const sunGeometry = new THREE.SphereGeometry(1.5, 32, 32);
                const sunTexture = loader.load('../../assets/images/2k_sun.jpg');
                
                const sunMaterial = new THREE.MeshBasicMaterial({
                    map: sunTexture,
                    emissive: 0xFFAA00,
                    emissiveIntensity: 1
                });
                
                this.sun = new THREE.Mesh(sunGeometry, sunMaterial);
                this.sun.position.set(-12, 0, 0);
                this.scene.add(this.sun);

                // Create Earth
                const earthGeometry = new THREE.SphereGeometry(1, 64, 64);
                const earthTexture = loader.load('../../assets/images/2k_earth.jpg');
                
                const earthMaterial = new THREE.MeshPhongMaterial({
                    map: earthTexture,
                    shininess: 100
                });
                
                this.earth = new THREE.Mesh(earthGeometry, earthMaterial);
                this.earth.position.set(0, 0, 0);
                this.earth.castShadow = true;
                this.earth.receiveShadow = true;
                this.scene.add(this.earth);

                // Create Moon
                const moonGeometry = new THREE.SphereGeometry(0.27, 32, 32);
                const moonTexture = loader.load('../../assets/images/2k_moon.jpg');
                
                const moonMaterial = new THREE.MeshPhongMaterial({
                    map: moonTexture,
                    shininess: 1
                });
                
                this.moon = new THREE.Mesh(moonGeometry, moonMaterial);
                this.moon.position.set(-3, 0, 0);
                this.moon.castShadow = true;
                this.moon.receiveShadow = true;
                this.scene.add(this.moon);
            }

            showEclipse(eclipseType) {
                switch(eclipseType) {
                    case 'solar':
                        // Position moon between sun and earth
                        this.moon.position.set(-6, 0, 0);
                        break;
                    case 'lunar':
                        // Position earth between sun and moon
                        this.moon.position.set(3, 0, 0);
                        break;
                    case 'partial':
                        // Slightly offset alignment
                        this.moon.position.set(-6, 0.5, 0);
                        break;
                    case 'total':
                        // Perfect alignment
                        this.moon.position.set(-6, 0, 0);
                        break;
                }
            }

            toggleShadows() {
                this.showShadowCones = !this.showShadowCones;
                // Implementation for showing shadow cones
            }

            playAnimation() {
                // Implementation for eclipse animation
            }

            animate() {
                requestAnimationFrame(() => this.animate());
                
                // Rotate celestial bodies
                if (this.earth) {
                    this.earth.rotation.y += 0.01;
                }
                
                if (this.moon) {
                    this.moon.rotation.y += 0.02;
                }
                
                if (this.sun) {
                    this.sun.rotation.y += 0.005;
                }
                
                this.controls.update();
                this.renderer.render(this.scene, this.camera);
            }
        }
    </script>
</body>
</html> 