<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>太阳系 - 天文学习助手</title>
    <link rel="icon" href="../../assets/icons/logo_btrfly.ico" type="image/x-icon">
    <link rel="stylesheet" href="../../css/common.css">
    <link rel="stylesheet" href="../../css/components.css">
    <link rel="stylesheet" href="../../css/utilities.css">
    <link rel="stylesheet" href="../../css/responsive.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
    <style>
        .solar-system-page {
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a3a 50%, #2d1b69 100%);
            min-height: 100vh;
            color: #fff;
        }

        .planet-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 2rem;
            margin: 2rem 0;
        }

        .planet-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
            border-radius: 20px;
            padding: 2rem;
            border: 1px solid rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .planet-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(67, 97, 238, 0.3);
        }

        .planet-header {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .planet-icon {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: white;
            position: relative;
        }

        .planet-mercury { background: linear-gradient(135deg, #8C7853, #FFC649); }
        .planet-venus { background: linear-gradient(135deg, #FFC649, #FFB347); }
        .planet-earth { background: linear-gradient(135deg, #6B93D6, #4F94CD); }
        .planet-mars { background: linear-gradient(135deg, #CD5C5C, #A0522D); }
        .planet-jupiter { background: linear-gradient(135deg, #D2691E, #CD853F); }
        .planet-saturn { background: linear-gradient(135deg, #FAD5A5, #DEB887); }
        .planet-uranus { background: linear-gradient(135deg, #4FD0E7, #3CB371); }
        .planet-neptune { background: linear-gradient(135deg, #4169E1, #0000CD); }

        .planet-info h3 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: #fff;
        }

        .planet-subtitle {
            color: #a8dadc;
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .planet-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .stat-item {
            background: rgba(0,0,0,0.2);
            padding: 1rem;
            border-radius: 10px;
            text-align: center;
        }

        .stat-value {
            font-size: 1.2rem;
            font-weight: 600;
            color: #4361ee;
            margin-bottom: 0.25rem;
        }

        .stat-label {
            font-size: 0.8rem;
            opacity: 0.7;
        }

        .planet-description {
            line-height: 1.6;
            margin-bottom: 1.5rem;
            opacity: 0.9;
        }

        .planet-features {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .feature-badge {
            background: rgba(67, 97, 238, 0.2);
            color: #a8dadc;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            border: 1px solid rgba(67, 97, 238, 0.3);
        }

        .solar-system-model {
            background: rgba(0,0,0,0.3);
            border-radius: 20px;
            padding: 2rem;
            margin: 3rem 0;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        #solar-system-container {
            width: 100%;
            height: 600px;
            margin: 2rem auto;
            border-radius: 20px;
            background: radial-gradient(circle at center, rgba(255, 215, 0, 0.1) 0%, transparent 70%);
            position: relative;
            overflow: hidden;
        }

        .solar-system-controls {
            position: absolute;
            top: 10px;
            left: 10px;
            display: flex;
            flex-direction: column;
            gap: 5px;
            z-index: 100;
        }

        .solar-system-btn {
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.95);
            border: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            font-weight: bold;
            color: #333;
            transition: all 0.2s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .solar-system-btn:hover {
            background: white;
            transform: scale(1.05);
        }

        .solar-system-info {
            position: absolute;
            bottom: 10px;
            left: 10px;
            background: rgba(255, 255, 255, 0.95);
            padding: 10px;
            border-radius: 8px;
            font-size: 12px;
            color: #333;
            backdrop-filter: blur(5px);
            z-index: 100;
            max-width: 200px;
        }

        .planet-selector {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255, 255, 255, 0.95);
            padding: 10px;
            border-radius: 8px;
            backdrop-filter: blur(5px);
            z-index: 100;
        }

        .planet-selector select {
            background: transparent;
            border: none;
            color: #333;
            font-size: 14px;
            cursor: pointer;
        }

        /* 3D Solar System Styles */
        .loading-indicator {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            text-align: center;
            z-index: 10;
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid #FFD700;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* 自然现象演示区域 */
        .phenomena-section {
            background: rgba(0,0,0,0.3);
            border-radius: 20px;
            padding: 2rem;
            margin: 3rem 0;
        }

        .phenomena-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 3rem;
            margin: 2rem 0;
        }

        .phenomenon-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.08), rgba(255,255,255,0.03));
            border-radius: 20px;
            padding: 2rem;
            border: 1px solid rgba(255,255,255,0.1);
        }

        /* 四季演示 */
        .seasons-demo {
            position: relative;
            width: 100%;
            max-width: 500px;
            height: 300px;
            margin: 2rem auto;
            background: radial-gradient(circle at center, rgba(255, 215, 0, 0.2) 0%, transparent 60%);
            border-radius: 20px;
            overflow: hidden;
        }

        .earth-orbit-seasons {
            position: absolute;
            width: 200px;
            height: 200px;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            border: 2px dashed rgba(255,255,255,0.3);
            border-radius: 50%;
            animation: seasons-orbit 20s linear infinite;
        }

        .earth-seasons {
            position: absolute;
            width: 30px;
            height: 30px;
            background: linear-gradient(135deg, #6B93D6, #228B22);
            border-radius: 50%;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            box-shadow: 0 0 10px #6B93D6;
        }

        .earth-seasons::before {
            content: '';
            position: absolute;
            width: 20px;
            height: 1px;
            background: #FFD700;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(var(--earth-tilt, 23.5deg));
            transform-origin: center;
        }

        .sun-seasons {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            width: 40px;
            height: 40px;
            background: radial-gradient(circle, #FFD700, #FFA500);
            border-radius: 50%;
            box-shadow: 0 0 20px #FFD700;
        }

        @keyframes seasons-orbit {
            0% { transform: translate(-50%, -50%) rotate(0deg); --earth-tilt: 23.5deg; }
            25% { transform: translate(-50%, -50%) rotate(90deg); --earth-tilt: 23.5deg; }
            50% { transform: translate(-50%, -50%) rotate(180deg); --earth-tilt: 23.5deg; }
            75% { transform: translate(-50%, -50%) rotate(270deg); --earth-tilt: 23.5deg; }
            100% { transform: translate(-50%, -50%) rotate(360deg); --earth-tilt: 23.5deg; }
        }

        /* 日夜演示 */
        .day-night-demo {
            position: relative;
            width: 200px;
            height: 200px;
            margin: 2rem auto;
            background: linear-gradient(90deg, #FFD700 0%, #87CEEB 50%, #191970 100%);
            border-radius: 50%;
            overflow: hidden;
        }

        .earth-day-night {
            position: absolute;
            width: 100px;
            height: 100px;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(90deg, #228B22 0%, #6B93D6 50%, #2F4F4F 100%);
            border-radius: 50%;
            animation: day-night-rotation 8s linear infinite;
        }

        .earth-day-night::before {
            content: '';
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            width: 50%;
            height: 50%;
            background: rgba(0,0,0,0.5);
            border-radius: 50%;
            animation: shadow-rotation 8s linear infinite;
        }

        @keyframes day-night-rotation {
            from { transform: translate(-50%, -50%) rotate(0deg); }
            to { transform: translate(-50%, -50%) rotate(360deg); }
        }

        @keyframes shadow-rotation {
            from { transform: translate(-50%, -50%) rotate(0deg); }
            to { transform: translate(-50%, -50%) rotate(-360deg); }
        }

        /* 潮汐演示 */
        .tidal-demo {
            position: relative;
            width: 100%;
            max-width: 400px;
            height: 200px;
            margin: 2rem auto;
            background: linear-gradient(180deg, #87CEEB 0%, #4682B4 100%);
            border-radius: 20px;
            overflow: hidden;
        }

        .earth-tidal {
            position: absolute;
            left: 20%;
            top: 50%;
            transform: translateY(-50%);
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #6B93D6, #228B22);
            border-radius: 50%;
        }

        .moon-tidal {
            position: absolute;
            right: 20%;
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            background: #C0C0C0;
            border-radius: 50%;
            box-shadow: 0 0 8px #C0C0C0;
        }

        .tidal-wave {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 30px;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(255,255,255,0.3) 25%, 
                transparent 50%, 
                rgba(255,255,255,0.3) 75%, 
                transparent 100%);
            animation: tidal-movement 6s ease-in-out infinite;
        }

        @keyframes tidal-movement {
            0%, 100% { transform: translateY(0); }
            25% { transform: translateY(-10px); }
            50% { transform: translateY(0); }
            75% { transform: translateY(-10px); }
        }

        .season-labels {
            position: absolute;
            width: 100%;
            height: 100%;
        }

        .season-label {
            position: absolute;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 10px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .spring { top: 10%; left: 50%; transform: translateX(-50%); color: #90EE90; }
        .summer { right: 10%; top: 50%; transform: translateY(-50%); color: #FFD700; }
        .autumn { bottom: 10%; left: 50%; transform: translateX(-50%); color: #FFA500; }
        .winter { left: 10%; top: 50%; transform: translateY(-50%); color: #87CEEB; }

        .comparison-section {
            background: rgba(0,0,0,0.2);
            border-radius: 20px;
            padding: 2rem;
            margin: 3rem 0;
        }

        .size-comparison {
            display: flex;
            align-items: end;
            justify-content: center;
            gap: 1rem;
            margin: 2rem 0;
            flex-wrap: wrap;
        }

        .size-planet {
            text-align: center;
            margin: 0.5rem;
        }

        .size-circle {
            border-radius: 50%;
            margin: 0 auto 0.5rem;
        }

        .size-label {
            font-size: 0.7rem;
            opacity: 0.8;
        }

        .explanation-box {
            background: rgba(67, 97, 238, 0.1);
            border: 1px solid rgba(67, 97, 238, 0.3);
            border-radius: 15px;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }

        .explanation-box h4 {
            color: #4361ee;
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }

        .explanation-box p {
            line-height: 1.6;
            opacity: 0.9;
        }

        @media (max-width: 768px) {
            .solar-system-page {
                padding: 1rem 0;
            }
            
            .planet-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
            
            #solar-system-container {
                height: 400px;
                margin: 1rem auto;
            }
            
            .solar-system-controls {
                flex-direction: row;
                flex-wrap: wrap;
                gap: 3px;
            }
            
            .solar-system-btn {
                width: 35px;
                height: 35px;
                font-size: 14px;
            }
            
            .planet-selector {
                top: auto;
                bottom: 10px;
                right: 10px;
                padding: 8px;
            }
            
            .planet-selector select {
                font-size: 12px;
            }
            
            .solar-system-info {
                font-size: 11px;
                padding: 8px;
                max-width: 150px;
            }
            
            .planet-card {
                padding: 1.5rem;
            }
            
            .planet-stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 0.75rem;
            }
            
            .stat-item {
                padding: 0.75rem;
            }
        }

        @media (max-width: 480px) {
            #solar-system-container {
                height: 300px;
            }
            
            .solar-system-controls {
                gap: 2px;
            }
            
            .solar-system-btn {
                width: 30px;
                height: 30px;
                font-size: 12px;
            }
            
            .planet-selector select {
                font-size: 11px;
            }
            
            .solar-system-info {
                font-size: 10px;
                padding: 6px;
                max-width: 120px;
            }
            
            .planet-stats {
                grid-template-columns: 1fr;
            }
        }

        @media (min-width: 768px) {
            .planet-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            #solar-system-container {
                height: 600px;
            }
        }

        @media (min-width: 1024px) {
            .planet-grid {
                grid-template-columns: repeat(2, 1fr);
                max-width: 1200px;
                margin: 2rem auto;
            }
            
            #solar-system-container {
                height: 700px;
            }
        }
    </style>
</head>
<body>
    <header class="main-header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <a href="../../index.html">
                        <i class="fas fa-graduation-cap" style="background: linear-gradient(90deg, #4361ee, #7209b7); -webkit-background-clip: text; background-clip: text; color: transparent;"></i>
                        <span>Alex的学习助手</span>
                    </a>
                </div>
                <nav class="main-nav">
                    <ul>
                        <li><a href="../../index.html">首页</a></li>
                        <li><a href="main.html">天文</a></li>
                        <li><a href="#" class="active">太阳系</a></li>
                        <li><a href="../../tts.html">语音</a></li>
                        <li><a href="../../draw.html">绘图</a></li>
                    </ul>
                </nav>
                <button class="mobile-menu-toggle" aria-label="切换菜单">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
        </div>
    </header>

    <main class="solar-system-page">
        <section class="hero-section">
            <div class="container">
                <div class="hero-content">
                    <h1><i class="fas fa-sun"></i> 太阳系探索</h1>
                    <p>探索我们的太阳系，了解八大行星的特征和运动规律</p>
                </div>
            </div>
        </section>

        <section class="container">
            <div class="solar-system-model">
                <h2>3D 太阳系轨道模型</h2>
                <p>探索真实的3D太阳系，观察行星围绕太阳的轨道运动</p>
                
                <div id="solar-system-container">
                    <div class="solar-system-controls">
                        <button class="solar-system-btn" id="play-pause" title="播放/暂停">⏸️</button>
                        <button class="solar-system-btn" id="speed-up" title="加速">⏩</button>
                        <button class="solar-system-btn" id="speed-down" title="减速">⏪</button>
                        <button class="solar-system-btn" id="reset-view" title="重置视图">🏠</button>
                        <button class="solar-system-btn" id="toggle-orbits" title="显示/隐藏轨道">🔄</button>
                    </div>
                    
                    <div class="planet-selector">
                        <select id="planet-focus">
                            <option value="overview">太阳系全景</option>
                            <option value="sun">太阳</option>
                            <option value="mercury">水星</option>
                            <option value="venus">金星</option>
                            <option value="earth">地球</option>
                            <option value="mars">火星</option>
                            <option value="jupiter">木星</option>
                            <option value="saturn">土星</option>
                            <option value="uranus">天王星</option>
                            <option value="neptune">海王星</option>
                        </select>
                    </div>
                    
                    <div class="solar-system-info">
                        <div id="current-planet-info">
                            <strong>太阳系全景</strong><br>
                            拖拽旋转视角<br>
                            滚轮缩放距离<br>
                            选择行星聚焦观察
                        </div>
                    </div>
                    
                    <div class="loading-indicator" id="solar-system-loading">
                        <div class="loading-spinner"></div>
                        <div>加载3D太阳系模型中...</div>
                    </div>
                </div>

                <div class="explanation-box">
                    <h4><i class="fas fa-info-circle"></i> 轨道运动说明</h4>
                    <p>行星围绕太阳的轨道运动遵循开普勒定律。距离太阳越近的行星，公转速度越快，公转周期越短。水星公转一周只需88天，而海王星需要165年。动画中的速度比例已经调整，便于观察各行星的相对运动关系。</p>
                </div>
            </div>

            <div class="phenomena-section">
                <h2>自然现象形成原理</h2>
                <p>了解地球上四季、日夜、潮汐等自然现象的天文成因</p>
                
                <div class="phenomena-grid">
                    <!-- 四季形成 -->
                    <div class="phenomenon-card">
                        <h3><i class="fas fa-leaf"></i> 四季形成</h3>
                        <div class="seasons-demo">
                            <div class="sun-seasons"></div>
                            <div class="earth-orbit-seasons">
                                <div class="earth-seasons"></div>
                            </div>
                            <div class="season-labels">
                                <div class="season-label spring">春分</div>
                                <div class="season-label summer">夏至</div>
                                <div class="season-label autumn">秋分</div>
                                <div class="season-label winter">冬至</div>
                            </div>
                        </div>
                        <div class="explanation-box">
                            <h4>形成原理</h4>
                            <p>四季的形成是由于地球自转轴相对于公转轨道平面倾斜23.5°。当地球公转到不同位置时，南北半球接受太阳辐射的角度和时长不同，从而形成四季变化。夏至时北半球倾向太阳，冬至时背离太阳。</p>
                        </div>
                    </div>

                    <!-- 日夜交替 -->
                    <div class="phenomenon-card">
                        <h3><i class="fas fa-moon"></i> 日夜交替</h3>
                        <div class="day-night-demo">
                            <div class="earth-day-night"></div>
                        </div>
                        <div class="explanation-box">
                            <h4>形成原理</h4>
                            <p>日夜交替是由地球自转造成的。地球绕自转轴旋转一周约24小时，面向太阳的一面是白天，背离太阳的一面是黑夜。地球自转使得地表各点轮流接受太阳照射，形成昼夜循环。</p>
                        </div>
                    </div>

                    <!-- 潮汐现象 -->
                    <div class="phenomenon-card">
                        <h3><i class="fas fa-water"></i> 潮汐现象</h3>
                        <div class="tidal-demo">
                            <div class="earth-tidal"></div>
                            <div class="moon-tidal"></div>
                            <div class="tidal-wave"></div>
                        </div>
                        <div class="explanation-box">
                            <h4>形成原理</h4>
                            <p>潮汐是由月球和太阳的引力作用引起的。月球引力使面向月球的海水被拉起形成高潮，同时地球背面由于惯性力也形成高潮。月球绕地球公转使潮汐位置不断变化，一天内通常有两次高潮和两次低潮。</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="planet-grid">
                <!-- 水星 -->
                <div class="planet-card">
                    <div class="planet-header">
                        <div class="planet-icon planet-mercury">
                            <i class="fas fa-circle"></i>
                        </div>
                        <div class="planet-info">
                            <h3>水星 Mercury</h3>
                            <div class="planet-subtitle">距离太阳最近的行星</div>
                        </div>
                    </div>
                    
                    <div class="planet-stats">
                        <div class="stat-item">
                            <div class="stat-value">0.39 AU</div>
                            <div class="stat-label">距离太阳</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">88天</div>
                            <div class="stat-label">公转周期</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">4,879km</div>
                            <div class="stat-label">直径</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">427°C</div>
                            <div class="stat-label">最高温度</div>
                        </div>
                    </div>
                    
                    <div class="planet-description">
                        水星是太阳系中最小的行星，也是距离太阳最近的行星。由于没有大气层保护，水星表面温差极大，白天可达427°C，夜晚可降至-173°C。
                    </div>
                    
                    <div class="planet-features">
                        <span class="feature-badge">无大气层</span>
                        <span class="feature-badge">极端温差</span>
                        <span class="feature-badge">多陨石坑</span>
                        <span class="feature-badge">铁核占比大</span>
                    </div>
                </div>

                <!-- 金星 -->
                <div class="planet-card">
                    <div class="planet-header">
                        <div class="planet-icon planet-venus">
                            <i class="fas fa-circle"></i>
                        </div>
                        <div class="planet-info">
                            <h3>金星 Venus</h3>
                            <div class="planet-subtitle">太阳系最热的行星</div>
                        </div>
                    </div>
                    
                    <div class="planet-stats">
                        <div class="stat-item">
                            <div class="stat-value">0.72 AU</div>
                            <div class="stat-label">距离太阳</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">225天</div>
                            <div class="stat-label">公转周期</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">12,104km</div>
                            <div class="stat-label">直径</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">462°C</div>
                            <div class="stat-label">表面温度</div>
                        </div>
                    </div>
                    
                    <div class="planet-description">
                        金星被称为地球的"姊妹星"，大小相近但环境截然不同。浓厚的二氧化碳大气层造成强烈的温室效应，使其成为太阳系最热的行星。
                    </div>
                    
                    <div class="planet-features">
                        <span class="feature-badge">浓厚大气</span>
                        <span class="feature-badge">温室效应</span>
                        <span class="feature-badge">逆向自转</span>
                        <span class="feature-badge">硫酸云层</span>
                    </div>
                </div>

                <!-- 地球 -->
                <div class="planet-card">
                    <div class="planet-header">
                        <div class="planet-icon planet-earth">
                            <i class="fas fa-globe"></i>
                        </div>
                        <div class="planet-info">
                            <h3>地球 Earth</h3>
                            <div class="planet-subtitle">我们的家园</div>
                        </div>
                    </div>
                    
                    <div class="planet-stats">
                        <div class="stat-item">
                            <div class="stat-value">1.00 AU</div>
                            <div class="stat-label">距离太阳</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">365天</div>
                            <div class="stat-label">公转周期</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">12,756km</div>
                            <div class="stat-label">直径</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">15°C</div>
                            <div class="stat-label">平均温度</div>
                        </div>
                    </div>
                    
                    <div class="planet-description">
                        地球是太阳系中唯一已知存在生命的行星。拥有液态水、适宜的大气层和磁场保护，为生命的存在和演化提供了完美的条件。
                    </div>
                    
                    <div class="planet-features">
                        <span class="feature-badge">液态水</span>
                        <span class="feature-badge">生命存在</span>
                        <span class="feature-badge">磁场保护</span>
                        <span class="feature-badge">板块运动</span>
                    </div>
                </div>

                <!-- 火星 -->
                <div class="planet-card">
                    <div class="planet-header">
                        <div class="planet-icon planet-mars">
                            <i class="fas fa-circle"></i>
                        </div>
                        <div class="planet-info">
                            <h3>火星 Mars</h3>
                            <div class="planet-subtitle">红色星球</div>
                        </div>
                    </div>
                    
                    <div class="planet-stats">
                        <div class="stat-item">
                            <div class="stat-value">1.52 AU</div>
                            <div class="stat-label">距离太阳</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">687天</div>
                            <div class="stat-label">公转周期</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">6,792km</div>
                            <div class="stat-label">直径</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">-65°C</div>
                            <div class="stat-label">平均温度</div>
                        </div>
                    </div>
                    
                    <div class="planet-description">
                        火星因其红色外观而得名，这是由于表面富含氧化铁。火星拥有太阳系最大的火山和峡谷，是人类未来移民的重要候选地。
                    </div>
                    
                    <div class="planet-features">
                        <span class="feature-badge">极地冰帽</span>
                        <span class="feature-badge">奥林匹斯山</span>
                        <span class="feature-badge">水手峡谷</span>
                        <span class="feature-badge">两颗卫星</span>
                    </div>
                </div>

                <!-- 木星 -->
                <div class="planet-card">
                    <div class="planet-header">
                        <div class="planet-icon planet-jupiter">
                            <i class="fas fa-circle"></i>
                        </div>
                        <div class="planet-info">
                            <h3>木星 Jupiter</h3>
                            <div class="planet-subtitle">气态巨行星</div>
                        </div>
                    </div>
                    
                    <div class="planet-stats">
                        <div class="stat-item">
                            <div class="stat-value">5.20 AU</div>
                            <div class="stat-label">距离太阳</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">12年</div>
                            <div class="stat-label">公转周期</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">142,984km</div>
                            <div class="stat-label">直径</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">79颗</div>
                            <div class="stat-label">已知卫星</div>
                        </div>
                    </div>
                    
                    <div class="planet-description">
                        木星是太阳系最大的行星，质量超过其他所有行星的总和。它的大红斑是一个持续了数百年的巨大风暴，比地球还要大。
                    </div>
                    
                    <div class="planet-features">
                        <span class="feature-badge">大红斑</span>
                        <span class="feature-badge">伽利略卫星</span>
                        <span class="feature-badge">环系统</span>
                        <span class="feature-badge">辐射带</span>
                    </div>
                </div>

                <!-- 土星 -->
                <div class="planet-card">
                    <div class="planet-header">
                        <div class="planet-icon planet-saturn">
                            <i class="fas fa-circle"></i>
                        </div>
                        <div class="planet-info">
                            <h3>土星 Saturn</h3>
                            <div class="planet-subtitle">环之王</div>
                        </div>
                    </div>
                    
                    <div class="planet-stats">
                        <div class="stat-item">
                            <div class="stat-value">9.58 AU</div>
                            <div class="stat-label">距离太阳</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">29年</div>
                            <div class="stat-label">公转周期</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">120,536km</div>
                            <div class="stat-label">直径</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">82颗</div>
                            <div class="stat-label">已知卫星</div>
                        </div>
                    </div>
                    
                    <div class="planet-description">
                        土星以其壮观的环系统而闻名，这些环主要由冰块和岩石碎片组成。土星的密度很低，如果有足够大的海洋，它甚至能浮在水面上。
                    </div>
                    
                    <div class="planet-features">
                        <span class="feature-badge">壮观环系统</span>
                        <span class="feature-badge">泰坦卫星</span>
                        <span class="feature-badge">低密度</span>
                        <span class="feature-badge">六边形风暴</span>
                    </div>
                </div>

                <!-- 天王星 -->
                <div class="planet-card">
                    <div class="planet-header">
                        <div class="planet-icon planet-uranus">
                            <i class="fas fa-circle"></i>
                        </div>
                        <div class="planet-info">
                            <h3>天王星 Uranus</h3>
                            <div class="planet-subtitle">侧躺的行星</div>
                        </div>
                    </div>
                    
                    <div class="planet-stats">
                        <div class="stat-item">
                            <div class="stat-value">19.20 AU</div>
                            <div class="stat-label">距离太阳</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">84年</div>
                            <div class="stat-label">公转周期</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">51,118km</div>
                            <div class="stat-label">直径</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">27颗</div>
                            <div class="stat-label">已知卫星</div>
                        </div>
                    </div>
                    
                    <div class="planet-description">
                        天王星是一颗独特的行星，它几乎是侧躺着绕太阳公转的。这种极端的倾斜可能是由于早期与其他天体的碰撞造成的。
                    </div>
                    
                    <div class="planet-features">
                        <span class="feature-badge">极端倾斜</span>
                        <span class="feature-badge">冰巨行星</span>
                        <span class="feature-badge">微弱环系统</span>
                        <span class="feature-badge">甲烷大气</span>
                    </div>
                </div>

                <!-- 海王星 -->
                <div class="planet-card">
                    <div class="planet-header">
                        <div class="planet-icon planet-neptune">
                            <i class="fas fa-circle"></i>
                        </div>
                        <div class="planet-info">
                            <h3>海王星 Neptune</h3>
                            <div class="planet-subtitle">风暴之王</div>
                        </div>
                    </div>
                    
                    <div class="planet-stats">
                        <div class="stat-item">
                            <div class="stat-value">30.05 AU</div>
                            <div class="stat-label">距离太阳</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">165年</div>
                            <div class="stat-label">公转周期</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">49,528km</div>
                            <div class="stat-label">直径</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">14颗</div>
                            <div class="stat-label">已知卫星</div>
                        </div>
                    </div>
                    
                    <div class="planet-description">
                        海王星是太阳系最外层的行星，拥有太阳系最强的风暴，风速可达每小时2100公里。它的深蓝色来自大气中的甲烷。
                    </div>
                    
                    <div class="planet-features">
                        <span class="feature-badge">最强风暴</span>
                        <span class="feature-badge">海卫一</span>
                        <span class="feature-badge">深蓝色</span>
                        <span class="feature-badge">数学发现</span>
                    </div>
                </div>
            </div>

            <div class="comparison-section">
                <h2>行星大小比较</h2>
                <p>直观比较太阳系各行星的相对大小</p>
                
                <div class="size-comparison">
                    <div class="size-planet">
                        <div class="size-circle" style="width: 8px; height: 8px; background: #8C7853;"></div>
                        <div class="size-label">水星</div>
                    </div>
                    <div class="size-planet">
                        <div class="size-circle" style="width: 12px; height: 12px; background: #FFC649;"></div>
                        <div class="size-label">金星</div>
                    </div>
                    <div class="size-planet">
                        <div class="size-circle" style="width: 13px; height: 13px; background: #6B93D6;"></div>
                        <div class="size-label">地球</div>
                    </div>
                    <div class="size-planet">
                        <div class="size-circle" style="width: 10px; height: 10px; background: #CD5C5C;"></div>
                        <div class="size-label">火星</div>
                    </div>
                    <div class="size-planet">
                        <div class="size-circle" style="width: 40px; height: 40px; background: #D2691E;"></div>
                        <div class="size-label">木星</div>
                    </div>
                    <div class="size-planet">
                        <div class="size-circle" style="width: 35px; height: 35px; background: #FAD5A5;"></div>
                        <div class="size-label">土星</div>
                    </div>
                    <div class="size-planet">
                        <div class="size-circle" style="width: 18px; height: 18px; background: #4FD0E7;"></div>
                        <div class="size-label">天王星</div>
                    </div>
                    <div class="size-planet">
                        <div class="size-circle" style="width: 17px; height: 17px; background: #4169E1;"></div>
                        <div class="size-label">海王星</div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="main-footer">
        <div class="container">
            <div class="footer-content">
                <p class="copyright-text">study-llm.me域名为Alex所有。保留所有权利。</p>
            </div>
        </div>
    </footer>

    <script src="../../js/common.js"></script>
    <script src="../../js/navigation.js"></script>
    <script>
        // 3D Solar System Implementation
        class SolarSystem3D {
            constructor() {
                this.scene = null;
                this.camera = null;
                this.renderer = null;
                this.controls = null;
                this.planets = {};
                this.orbits = {};
                this.isPlaying = true;
                this.speed = 1;
                this.showOrbits = true;
                this.focusedPlanet = 'overview';
                
                // Real astronomical data (scaled for visualization)
                this.planetData = {
                    sun: { distance: 0, size: 2, color: 0xFFD700, period: 0, texture: 'sun' },
                    mercury: { distance: 8, size: 0.3, color: 0x8C7853, period: 88, texture: 'mercury' },
                    venus: { distance: 12, size: 0.4, color: 0xFFC649, period: 225, texture: 'venus' },
                    earth: { distance: 16, size: 0.4, color: 0x6B93D6, period: 365, texture: 'earth' },
                    mars: { distance: 20, size: 0.35, color: 0xCD5C5C, period: 687, texture: 'mars' },
                    jupiter: { distance: 28, size: 1.2, color: 0xD2691E, period: 4333, texture: 'jupiter' },
                    saturn: { distance: 36, size: 1.0, color: 0xFAD5A5, period: 10759, texture: 'saturn' },
                    uranus: { distance: 44, size: 0.7, color: 0x4FD0E7, period: 30687, texture: 'uranus' },
                    neptune: { distance: 52, size: 0.7, color: 0x4169E1, period: 60190, texture: 'neptune' }
                };
                
                this.init();
            }

            async init() {
                try {
                    this.setupScene();
                    this.setupCamera();
                    this.setupRenderer();
                    this.setupLights();
                    this.setupControls();
                    
                    await this.createSolarSystem();
                    this.setupEventListeners();
                    this.animate();
                    
                    document.getElementById('solar-system-loading').style.display = 'none';
                } catch (error) {
                    console.error('Failed to initialize 3D solar system:', error);
                    this.showFallbackMessage();
                }
            }

            setupScene() {
                this.scene = new THREE.Scene();
                this.scene.background = new THREE.Color(0x000011);
                this.createStarField();
            }

            setupCamera() {
                const container = document.getElementById('solar-system-container');
                const width = container.clientWidth;
                const height = container.clientHeight;
                
                this.camera = new THREE.PerspectiveCamera(75, width / height, 0.1, 1000);
                this.camera.position.set(0, 30, 60);
            }

            setupRenderer() {
                const container = document.getElementById('solar-system-container');
                
                this.renderer = new THREE.WebGLRenderer({ antialias: true });
                this.renderer.setSize(container.clientWidth, container.clientHeight);
                this.renderer.setPixelRatio(window.devicePixelRatio);
                this.renderer.shadowMap.enabled = true;
                this.renderer.shadowMap.type = THREE.PCFSoftShadowMap;
                
                container.appendChild(this.renderer.domElement);
            }

            setupLights() {
                // Ambient light
                const ambientLight = new THREE.AmbientLight(0x404040, 0.3);
                this.scene.add(ambientLight);
                
                // Point light (sun)
                const sunLight = new THREE.PointLight(0xFFFFFF, 2, 200);
                sunLight.position.set(0, 0, 0);
                sunLight.castShadow = true;
                sunLight.shadow.mapSize.width = 2048;
                sunLight.shadow.mapSize.height = 2048;
                this.scene.add(sunLight);
            }

            setupControls() {
                this.controls = new THREE.OrbitControls(this.camera, this.renderer.domElement);
                this.controls.enableDamping = true;
                this.controls.dampingFactor = 0.05;
                this.controls.minDistance = 5;
                this.controls.maxDistance = 200;
                
                // Enable touch controls for mobile
                this.controls.touches = {
                    ONE: THREE.TOUCH.ROTATE,
                    TWO: THREE.TOUCH.DOLLY_PAN
                };
                
                // Smooth controls
                this.controls.enableZoom = true;
                this.controls.enablePan = true;
                this.controls.enableRotate = true;
                
                // Auto-rotate when idle (optional)
                this.controls.autoRotate = false;
                this.controls.autoRotateSpeed = 0.5;
            }

            createStarField() {
                const starsGeometry = new THREE.BufferGeometry();
                const starsMaterial = new THREE.PointsMaterial({ color: 0xffffff, size: 0.5 });
                
                const starsVertices = [];
                for (let i = 0; i < 10000; i++) {
                    const x = (Math.random() - 0.5) * 2000;
                    const y = (Math.random() - 0.5) * 2000;
                    const z = (Math.random() - 0.5) * 2000;
                    starsVertices.push(x, y, z);
                }
                
                starsGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starsVertices, 3));
                const stars = new THREE.Points(starsGeometry, starsMaterial);
                this.scene.add(stars);
            }

            async createSolarSystem() {
                // Create planets
                for (const [name, data] of Object.entries(this.planetData)) {
                    await this.createPlanet(name, data);
                }
                
                // Create orbit lines
                this.createOrbitLines();
                
                // Create asteroid belt
                this.createAsteroidBelt();
                
                // Add some comets
                this.createComets();
            }

            async createPlanet(name, data) {
                const geometry = new THREE.SphereGeometry(data.size, 32, 32);
                
                // Load planet texture
                const texture = await this.loadPlanetTexture(name);
                const material = new THREE.MeshPhongMaterial({ 
                    map: texture,
                    color: texture ? 0xffffff : data.color, // Use color as fallback
                    shininess: name === 'sun' ? 0 : 30,
                    transparent: name === 'sun',
                    opacity: name === 'sun' ? 0.9 : 1.0
                });
                
                const planet = new THREE.Mesh(geometry, material);
                
                if (name === 'sun') {
                    // Sun at center with glow effect
                    planet.position.set(0, 0, 0);
                    
                    // Add sun glow
                    const glowGeometry = new THREE.SphereGeometry(data.size * 1.2, 32, 32);
                    const glowMaterial = new THREE.MeshBasicMaterial({
                        color: 0xFFD700,
                        transparent: true,
                        opacity: 0.3
                    });
                    const glow = new THREE.Mesh(glowGeometry, glowMaterial);
                    planet.add(glow);
                } else {
                    // Planets start at their orbital distance
                    planet.position.set(data.distance, 0, 0);
                    planet.castShadow = true;
                    planet.receiveShadow = true;
                }
                
                // Add to scene and store reference
                this.scene.add(planet);
                this.planets[name] = {
                    mesh: planet,
                    data: data,
                    angle: Math.random() * Math.PI * 2, // Random starting position
                    group: new THREE.Group()
                };
                
                // Create planet group for orbital motion
                if (name !== 'sun') {
                    this.planets[name].group.add(planet);
                    this.scene.add(this.planets[name].group);
                }
                
                // Special handling for Saturn's rings
                if (name === 'saturn') {
                    this.createSaturnRings(planet);
                }
            }

            createSaturnRings(saturn) {
                const ringGeometry = new THREE.RingGeometry(1.2, 2.0, 64);
                const ringMaterial = new THREE.MeshBasicMaterial({
                    color: 0xFAD5A5,
                    side: THREE.DoubleSide,
                    transparent: true,
                    opacity: 0.7
                });
                const rings = new THREE.Mesh(ringGeometry, ringMaterial);
                rings.rotation.x = Math.PI / 2;
                saturn.add(rings);
            }

            createOrbitLines() {
                for (const [name, data] of Object.entries(this.planetData)) {
                    if (name === 'sun') continue;
                    
                    const points = [];
                    const segments = 64;
                    
                    for (let i = 0; i <= segments; i++) {
                        const angle = (i / segments) * Math.PI * 2;
                        points.push(new THREE.Vector3(
                            Math.cos(angle) * data.distance,
                            0,
                            Math.sin(angle) * data.distance
                        ));
                    }
                    
                    const geometry = new THREE.BufferGeometry().setFromPoints(points);
                    const material = new THREE.LineBasicMaterial({
                        color: 0x444444,
                        transparent: true,
                        opacity: 0.3
                    });
                    
                    const orbit = new THREE.Line(geometry, material);
                    this.scene.add(orbit);
                    this.orbits[name] = orbit;
                }
            }

            createAsteroidBelt() {
                // Create asteroid belt between Mars and Jupiter
                const asteroidCount = 200;
                const innerRadius = 22; // Between Mars (20) and Jupiter (28)
                const outerRadius = 26;
                
                this.asteroids = [];
                
                for (let i = 0; i < asteroidCount; i++) {
                    const geometry = new THREE.SphereGeometry(0.02 + Math.random() * 0.03, 8, 8);
                    const material = new THREE.MeshBasicMaterial({ 
                        color: 0x666666,
                        transparent: true,
                        opacity: 0.7
                    });
                    
                    const asteroid = new THREE.Mesh(geometry, material);
                    
                    // Random position in belt
                    const angle = Math.random() * Math.PI * 2;
                    const distance = innerRadius + Math.random() * (outerRadius - innerRadius);
                    const height = (Math.random() - 0.5) * 2; // Some vertical spread
                    
                    asteroid.position.set(
                        Math.cos(angle) * distance,
                        height,
                        Math.sin(angle) * distance
                    );
                    
                    this.scene.add(asteroid);
                    this.asteroids.push({
                        mesh: asteroid,
                        angle: angle,
                        distance: distance,
                        speed: 0.001 + Math.random() * 0.002
                    });
                }
            }

            createComets() {
                // Create a few comets with elliptical orbits
                this.comets = [];
                const cometCount = 3;
                
                for (let i = 0; i < cometCount; i++) {
                    // Comet head
                    const geometry = new THREE.SphereGeometry(0.1, 16, 16);
                    const material = new THREE.MeshBasicMaterial({ 
                        color: 0xaaaaff,
                        transparent: true,
                        opacity: 0.8
                    });
                    
                    const comet = new THREE.Mesh(geometry, material);
                    
                    // Comet tail (simple line)
                    const tailGeometry = new THREE.BufferGeometry();
                    const tailPoints = [];
                    for (let j = 0; j < 20; j++) {
                        tailPoints.push(new THREE.Vector3(0, 0, -j * 0.5));
                    }
                    tailGeometry.setFromPoints(tailPoints);
                    
                    const tailMaterial = new THREE.LineBasicMaterial({
                        color: 0x88aaff,
                        transparent: true,
                        opacity: 0.5
                    });
                    
                    const tail = new THREE.Line(tailGeometry, tailMaterial);
                    comet.add(tail);
                    
                    this.scene.add(comet);
                    this.comets.push({
                        mesh: comet,
                        angle: Math.random() * Math.PI * 2,
                        eccentricity: 0.7 + Math.random() * 0.2,
                        semiMajorAxis: 40 + Math.random() * 20,
                        speed: 0.005 + Math.random() * 0.01
                    });
                }
            }

            async loadPlanetTexture(planetName) {
                const textureUrls = {
                    sun: 'https://cdn.jsdelivr.net/gh/mrdoob/three.js@dev/examples/textures/planets/sun.jpg',
                    mercury: 'https://cdn.jsdelivr.net/gh/mrdoob/three.js@dev/examples/textures/planets/mercury.jpg',
                    venus: 'https://cdn.jsdelivr.net/gh/mrdoob/three.js@dev/examples/textures/planets/venus_surface.jpg',
                    earth: 'https://cdn.jsdelivr.net/gh/mrdoob/three.js@dev/examples/textures/planets/earth_atmos_2048.jpg',
                    mars: 'https://cdn.jsdelivr.net/gh/mrdoob/three.js@dev/examples/textures/planets/mars_1k_color.jpg',
                    jupiter: 'https://cdn.jsdelivr.net/gh/mrdoob/three.js@dev/examples/textures/planets/jupiter_2k.jpg',
                    saturn: 'https://cdn.jsdelivr.net/gh/mrdoob/three.js@dev/examples/textures/planets/saturn_2k.jpg',
                    uranus: 'https://cdn.jsdelivr.net/gh/mrdoob/three.js@dev/examples/textures/planets/uranus_2k.jpg',
                    neptune: 'https://cdn.jsdelivr.net/gh/mrdoob/three.js@dev/examples/textures/planets/neptune_2k.jpg'
                };
                
                return new Promise((resolve, reject) => {
                    const loader = new THREE.TextureLoader();
                    loader.load(
                        textureUrls[planetName] || textureUrls.earth,
                        resolve,
                        undefined,
                        () => {
                            // Fallback to colored material
                            resolve(null);
                        }
                    );
                });
            }

            setupEventListeners() {
                // Control buttons
                document.getElementById('play-pause').addEventListener('click', () => {
                    this.togglePlayPause();
                });
                
                document.getElementById('speed-up').addEventListener('click', () => {
                    this.speed = Math.min(this.speed * 2, 16);
                    this.updateSpeedDisplay();
                });
                
                document.getElementById('speed-down').addEventListener('click', () => {
                    this.speed = Math.max(this.speed / 2, 0.125);
                    this.updateSpeedDisplay();
                });
                
                document.getElementById('reset-view').addEventListener('click', () => {
                    this.resetView();
                });
                
                document.getElementById('toggle-orbits').addEventListener('click', () => {
                    this.toggleOrbits();
                });
                
                document.getElementById('planet-focus').addEventListener('change', (e) => {
                    this.focusOnPlanet(e.target.value);
                });
                
                // Window resize
                window.addEventListener('resize', () => {
                    this.onWindowResize();
                });
                
                // Planet click interaction
                this.renderer.domElement.addEventListener('click', (event) => {
                    this.onPlanetClick(event);
                });
                
                // Planet hover interaction
                this.renderer.domElement.addEventListener('mousemove', (event) => {
                    this.onPlanetHover(event);
                });
            }

            togglePlayPause() {
                this.isPlaying = !this.isPlaying;
                const button = document.getElementById('play-pause');
                button.textContent = this.isPlaying ? '⏸️' : '▶️';
                button.style.background = this.isPlaying ? 
                    'rgba(255, 255, 255, 0.95)' : 'rgba(67, 97, 238, 0.9)';
                button.style.color = this.isPlaying ? '#333' : 'white';
            }

            updateSpeedDisplay() {
                const info = document.getElementById('current-planet-info');
                const speedText = `速度: ${this.speed}x`;
                info.innerHTML = info.innerHTML.split('<br>')[0] + '<br>' + speedText + '<br>拖拽旋转视角<br>滚轮缩放距离';
            }

            resetView() {
                this.camera.position.set(0, 30, 60);
                this.controls.reset();
                this.focusedPlanet = 'overview';
                document.getElementById('planet-focus').value = 'overview';
                this.updatePlanetInfo('overview');
            }

            toggleOrbits() {
                this.showOrbits = !this.showOrbits;
                Object.values(this.orbits).forEach(orbit => {
                    orbit.visible = this.showOrbits;
                });
                
                const button = document.getElementById('toggle-orbits');
                button.style.background = this.showOrbits ? 
                    'rgba(255, 255, 255, 0.95)' : 'rgba(67, 97, 238, 0.9)';
                button.style.color = this.showOrbits ? '#333' : 'white';
            }

            focusOnPlanet(planetName) {
                this.focusedPlanet = planetName;
                
                if (planetName === 'overview') {
                    this.resetView();
                    return;
                }
                
                const planet = this.planets[planetName];
                if (planet) {
                    const position = planet.mesh.position.clone();
                    const distance = planet.data.size * 8;
                    
                    this.camera.position.set(
                        position.x + distance,
                        position.y + distance/2,
                        position.z + distance
                    );
                    this.controls.target.copy(position);
                    this.controls.update();
                    
                    this.updatePlanetInfo(planetName);
                }
            }

            updatePlanetInfo(planetName) {
                const info = document.getElementById('current-planet-info');
                const planetNames = {
                    overview: '太阳系全景',
                    sun: '太阳',
                    mercury: '水星',
                    venus: '金星',
                    earth: '地球',
                    mars: '火星',
                    jupiter: '木星',
                    saturn: '土星',
                    uranus: '天王星',
                    neptune: '海王星'
                };
                
                if (planetName === 'overview') {
                    info.innerHTML = `
                        <strong>${planetNames[planetName]}</strong><br>
                        速度: ${this.speed}x<br>
                        拖拽旋转视角<br>
                        滚轮缩放距离<br>
                        选择行星聚焦观察
                    `;
                } else {
                    const data = this.planetData[planetName];
                    info.innerHTML = `
                        <strong>${planetNames[planetName]}</strong><br>
                        距离: ${data.distance} AU<br>
                        大小: ${data.size} 倍地球<br>
                        公转周期: ${data.period} 天
                    `;
                }
            }

            onWindowResize() {
                const container = document.getElementById('solar-system-container');
                const width = container.clientWidth;
                const height = container.clientHeight;
                
                this.camera.aspect = width / height;
                this.camera.updateProjectionMatrix();
                this.renderer.setSize(width, height);
            }

            onPlanetClick(event) {
                const rect = this.renderer.domElement.getBoundingClientRect();
                const mouse = new THREE.Vector2();
                mouse.x = ((event.clientX - rect.left) / rect.width) * 2 - 1;
                mouse.y = -((event.clientY - rect.top) / rect.height) * 2 + 1;
                
                const raycaster = new THREE.Raycaster();
                raycaster.setFromCamera(mouse, this.camera);
                
                const planetMeshes = Object.values(this.planets).map(p => p.mesh);
                const intersects = raycaster.intersectObjects(planetMeshes);
                
                if (intersects.length > 0) {
                    const clickedPlanet = intersects[0].object;
                    const planetName = Object.keys(this.planets).find(
                        name => this.planets[name].mesh === clickedPlanet
                    );
                    
                    if (planetName) {
                        this.focusOnPlanet(planetName);
                        document.getElementById('planet-focus').value = planetName;
                    }
                }
            }

            onPlanetHover(event) {
                const rect = this.renderer.domElement.getBoundingClientRect();
                const mouse = new THREE.Vector2();
                mouse.x = ((event.clientX - rect.left) / rect.width) * 2 - 1;
                mouse.y = -((event.clientY - rect.top) / rect.height) * 2 + 1;
                
                const raycaster = new THREE.Raycaster();
                raycaster.setFromCamera(mouse, this.camera);
                
                const planetMeshes = Object.values(this.planets).map(p => p.mesh);
                const intersects = raycaster.intersectObjects(planetMeshes);
                
                if (intersects.length > 0) {
                    this.renderer.domElement.style.cursor = 'pointer';
                    
                    const hoveredPlanet = intersects[0].object;
                    const planetName = Object.keys(this.planets).find(
                        name => this.planets[name].mesh === hoveredPlanet
                    );
                    
                    if (planetName && planetName !== this.focusedPlanet) {
                        this.showPlanetTooltip(event, planetName);
                    }
                } else {
                    this.renderer.domElement.style.cursor = 'grab';
                    this.hidePlanetTooltip();
                }
            }

            showPlanetTooltip(event, planetName) {
                const planetNames = {
                    sun: '太阳',
                    mercury: '水星',
                    venus: '金星',
                    earth: '地球',
                    mars: '火星',
                    jupiter: '木星',
                    saturn: '土星',
                    uranus: '天王星',
                    neptune: '海王星'
                };
                
                let tooltip = document.getElementById('planet-tooltip');
                if (!tooltip) {
                    tooltip = document.createElement('div');
                    tooltip.id = 'planet-tooltip';
                    tooltip.style.cssText = `
                        position: absolute;
                        background: rgba(0,0,0,0.8);
                        color: white;
                        padding: 8px 12px;
                        border-radius: 6px;
                        font-size: 14px;
                        pointer-events: none;
                        z-index: 1000;
                        box-shadow: 0 2px 8px rgba(0,0,0,0.3);
                    `;
                    document.body.appendChild(tooltip);
                }
                
                tooltip.innerHTML = `<strong>${planetNames[planetName] || planetName}</strong><br>点击聚焦观察`;
                tooltip.style.left = (event.pageX + 10) + 'px';
                tooltip.style.top = (event.pageY + 10) + 'px';
                tooltip.style.display = 'block';
            }

            hidePlanetTooltip() {
                const tooltip = document.getElementById('planet-tooltip');
                if (tooltip) {
                    tooltip.style.display = 'none';
                }
            }

            animate() {
                requestAnimationFrame(() => this.animate());
                
                if (this.isPlaying) {
                    // Update planet positions
                    Object.entries(this.planets).forEach(([name, planet]) => {
                        if (name === 'sun') {
                            // Rotate sun
                            planet.mesh.rotation.y += 0.01 * this.speed;
                            return;
                        }
                        
                        // Orbital motion
                        const data = planet.data;
                        const speed = (365 / data.period) * 0.01 * this.speed;
                        planet.angle += speed;
                        
                        const x = Math.cos(planet.angle) * data.distance;
                        const z = Math.sin(planet.angle) * data.distance;
                        
                        planet.mesh.position.set(x, 0, z);
                        
                        // Planet rotation
                        planet.mesh.rotation.y += 0.02 * this.speed;
                        
                        // Update focused planet camera if needed
                        if (this.focusedPlanet === name) {
                            const position = planet.mesh.position.clone();
                            const distance = planet.data.size * 8;
                            this.controls.target.copy(position);
                        }
                    });
                    
                    // Update asteroids
                    if (this.asteroids) {
                        this.asteroids.forEach(asteroid => {
                            asteroid.angle += asteroid.speed * this.speed;
                            const x = Math.cos(asteroid.angle) * asteroid.distance;
                            const z = Math.sin(asteroid.angle) * asteroid.distance;
                            asteroid.mesh.position.x = x;
                            asteroid.mesh.position.z = z;
                        });
                    }
                    
                    // Update comets
                    if (this.comets) {
                        this.comets.forEach(comet => {
                            comet.angle += comet.speed * this.speed;
                            
                            // Elliptical orbit calculation
                            const a = comet.semiMajorAxis;
                            const e = comet.eccentricity;
                            const r = a * (1 - e * e) / (1 + e * Math.cos(comet.angle));
                            
                            const x = r * Math.cos(comet.angle);
                            const z = r * Math.sin(comet.angle);
                            
                            comet.mesh.position.set(x, 0, z);
                            
                            // Point tail away from sun
                            comet.mesh.lookAt(0, 0, 0);
                        });
                    }
                }
                
                this.controls.update();
                this.renderer.render(this.scene, this.camera);
            }

            showFallbackMessage() {
                const container = document.getElementById('solar-system-container');
                container.innerHTML = `
                    <div style="display: flex; align-items: center; justify-content: center; height: 100%; color: white; text-align: center;">
                        <div>
                            <i class="fas fa-exclamation-triangle" style="font-size: 2rem; margin-bottom: 1rem;"></i>
                            <div>3D太阳系加载失败</div>
                            <div style="font-size: 0.8rem; margin-top: 0.5rem;">请检查网络连接或浏览器兼容性</div>
                        </div>
                    </div>
                `;
            }
        }

        // Initialize 3D Solar System
        let solarSystem3D;
        document.addEventListener('DOMContentLoaded', () => {
            solarSystem3D = new SolarSystem3D();
        });
    </script>
</body>
</html> 