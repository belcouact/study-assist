<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ°”å€™ä¸å¤©æ°” - åœ°ç†å­¦ä¹ åŠ©æ‰‹</title>
    <link rel="icon" href="../../assets/icons/logo_btrfly.ico" type="image/x-icon">
    <link rel="stylesheet" href="../../css/common.css">
    <link rel="stylesheet" href="../../css/components.css">
    <link rel="stylesheet" href="../../css/utilities.css">
    <link rel="stylesheet" href="../../css/responsive.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        .climate-page {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 2rem 0;
        }

        .climate-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
            margin: 2rem auto;
            max-width: 1600px;
            width: 100%;
        }

        .climate-header {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            padding: 2rem;
            text-align: center;
        }

        .climate-header h1 {
            margin: 0;
            font-size: 2.5rem;
            font-weight: 700;
        }

        .climate-header p {
            margin: 1rem 0 0 0;
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .climate-tabs {
            background: #f8f9fa;
            padding: 0;
            border-bottom: 1px solid #e9ecef;
            display: flex;
            overflow-x: auto;
        }

        .climate-tab {
            padding: 1rem 2rem;
            background: none;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            color: #666;
            border-bottom: 3px solid transparent;
            white-space: nowrap;
        }

        .climate-tab.active {
            color: #28a745;
            border-bottom-color: #28a745;
            background: white;
        }

        .climate-tab:hover {
            color: #28a745;
            background: #f0f8ff;
        }

        .climate-content {
            padding: 2rem;
            min-height: 600px;
        }

        .tab-panel {
            display: none;
        }

        .tab-panel.active {
            display: block;
        }

        .weather-workspace {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 2rem;
            min-height: 400px;
            height: auto;
        }

        .weather-display {
            background: #f8f9fa;
            border-radius: 15px;
            position: relative;
            overflow: hidden;
            border: 2px solid #e9ecef;
            min-height: 400px;
        }

        .weather-canvas {
            width: 100%;
            height: 100%;
            display: block;
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            min-height: 400px;
        }

        .weather-controls {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            height: fit-content;
            border: 1px solid #e9ecef;
            overflow-y: auto;
            max-height: 80vh;
        }

        .weather-controls h3 {
            margin: 0 0 1rem 0;
            color: #28a745;
            font-size: 1.2rem;
        }

        .weather-data {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .data-card {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            border: 1px solid #e9ecef;
            text-align: center;
            transition: all 0.3s ease;
        }

        .data-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(40, 167, 69, 0.15);
        }

        .data-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #28a745;
            margin-bottom: 0.5rem;
        }

        .data-label {
            font-size: 0.9rem;
            color: #666;
        }

        .data-icon {
            font-size: 2rem;
            margin-bottom: 1rem;
            color: #28a745;
        }

        .climate-zones {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 2rem;
        }

        .zone-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .zone-card {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            border: 1px solid #e9ecef;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .zone-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(40, 167, 69, 0.15);
        }

        .zone-card h4 {
            color: #28a745;
            margin: 0 0 1rem 0;
        }

        .zone-card p {
            color: #666;
            margin: 0;
            line-height: 1.5;
        }

        .zone-features {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .zone-feature {
            background: linear-gradient(135deg, rgba(40, 167, 69, 0.1), rgba(32, 201, 151, 0.1));
            color: #28a745;
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .weather-patterns {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 2rem;
        }

        .pattern-selector {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .pattern-btn {
            padding: 0.75rem 1.5rem;
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .pattern-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.3);
        }

        .pattern-btn.secondary {
            background: linear-gradient(135deg, #6c757d, #495057);
        }

        .pattern-display {
            background: white;
            border-radius: 10px;
            padding: 2rem;
            border: 1px solid #e9ecef;
            min-height: 300px;
        }

        .pattern-animation {
            width: 100%;
            height: 200px;
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            border-radius: 10px;
            position: relative;
            overflow: hidden;
            margin-bottom: 1rem;
        }

        .cloud {
            position: absolute;
            background: white;
            border-radius: 50px;
            opacity: 0.8;
            animation: float 6s ease-in-out infinite;
        }

        .cloud::before,
        .cloud::after {
            content: '';
            position: absolute;
            background: white;
            border-radius: 50px;
        }

        .cloud1 {
            width: 60px;
            height: 30px;
            top: 20px;
            left: -60px;
            animation: drift 15s linear infinite;
        }

        .cloud1::before {
            width: 40px;
            height: 40px;
            top: -20px;
            left: 10px;
        }

        .cloud1::after {
            width: 30px;
            height: 30px;
            top: -10px;
            right: 10px;
        }

        .rain {
            position: absolute;
            width: 2px;
            height: 20px;
            background: #4fc3f7;
            border-radius: 1px;
            animation: fall 1s linear infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        @keyframes drift {
            0% { left: -60px; }
            100% { left: 100%; }
        }

        @keyframes fall {
            0% { top: -20px; opacity: 1; }
            100% { top: 200px; opacity: 0; }
        }

        .forecast-section {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 2rem;
        }

        .forecast-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .forecast-card {
            background: white;
            border-radius: 10px;
            padding: 1rem;
            text-align: center;
            border: 1px solid #e9ecef;
        }

        .forecast-day {
            font-weight: 600;
            color: #333;
            margin-bottom: 0.5rem;
        }

        .forecast-icon {
            font-size: 2rem;
            margin: 0.5rem 0;
            color: #28a745;
        }

        .forecast-temp {
            font-size: 1.2rem;
            font-weight: bold;
            color: #28a745;
        }

        .forecast-desc {
            font-size: 0.8rem;
            color: #666;
            margin-top: 0.5rem;
        }

        @media (max-width: 1024px) {
            .weather-workspace {
                grid-template-columns: 1fr 280px;
                gap: 1rem;
            }
            
            .weather-controls {
                padding: 1rem;
            }
        }

        @media (max-width: 768px) {
            .climate-page {
                padding: 1rem 0;
            }
            
            .climate-container {
                margin: 1rem;
                border-radius: 15px;
            }
            
            .climate-header {
                padding: 1.5rem 1rem;
            }
            
            .climate-header h1 {
                font-size: 2rem;
            }
            
            .climate-content {
                padding: 1rem;
            }
            
            .weather-workspace {
                grid-template-columns: 1fr;
                gap: 1rem;
                min-height: auto;
            }
            
            .weather-display {
                min-height: 300px;
                order: 2;
            }
            
            .weather-canvas {
                min-height: 300px;
            }
            
            .weather-controls {
                order: 1;
                max-height: none;
                overflow-y: visible;
            }
            
            .climate-tabs {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                scrollbar-width: none;
                -ms-overflow-style: none;
            }
            
            .climate-tabs::-webkit-scrollbar {
                display: none;
            }
            
            .climate-tab {
                text-align: center;
                padding: 0.75rem 1.5rem;
                font-size: 0.9rem;
            }
            
            .weather-data {
                grid-template-columns: repeat(2, 1fr);
                gap: 0.75rem;
            }
            
            .data-card {
                padding: 1rem;
            }
            
            .data-icon {
                font-size: 1.5rem;
                margin-bottom: 0.5rem;
            }
            
            .data-value {
                font-size: 1.4rem;
            }
            
            .zone-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .zone-card {
                padding: 1rem;
            }
            
            .pattern-selector {
                flex-wrap: wrap;
                gap: 0.5rem;
            }
            
            .pattern-btn {
                padding: 0.5rem 1rem;
                font-size: 0.9rem;
                flex: 1;
                min-width: 120px;
            }
            
            .forecast-grid {
                grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
                gap: 0.75rem;
            }
            
            .forecast-card {
                padding: 0.75rem;
            }
        }

        @media (max-width: 480px) {
            .climate-header h1 {
                font-size: 1.75rem;
            }
            
            .climate-header p {
                font-size: 1rem;
            }
            
            .weather-data {
                grid-template-columns: 1fr;
            }
            
            .data-card {
                padding: 0.75rem;
            }
            
            .pattern-btn {
                min-width: 100px;
                padding: 0.5rem 0.75rem;
                font-size: 0.85rem;
            }
            
            .forecast-grid {
                grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            }
        }
    </style>
</head>
<body>
    <header class="main-header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <a href="../../index.html">
                        <i class="fas fa-graduation-cap" style="background: linear-gradient(90deg, #4361ee, #7209b7); -webkit-background-clip: text; background-clip: text; color: transparent;"></i>
                        <span>Alexçš„å­¦ä¹ åŠ©æ‰‹</span>
                    </a>
                </div>
                <nav class="main-nav">
                    <ul>
                        <li><a href="../../index.html">é¦–é¡µ</a></li>
                        <li><a href="main.html">åœ°ç†</a></li>
                        <li><a href="../../index.html#subjects">ç§‘ç›®</a></li>
                        <li><a href="../../tts.html">è¯­éŸ³</a></li>
                        <li><a href="../../draw.html">ç»˜å›¾</a></li>
                    </ul>
                </nav>
                <button class="mobile-menu-toggle" aria-label="åˆ‡æ¢èœå•">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
        </div>
    </header>

    <main class="climate-page">
        <div class="container">
            <div class="climate-container">
                <div class="climate-header">
                    <h1><i class="fas fa-cloud-sun"></i> æ°”å€™ä¸å¤©æ°”</h1>
                    <p>æ¢ç´¢å…¨çƒæ°”å€™æ¨¡å¼ã€å¤©æ°”ç°è±¡å’Œå¤§æ°”ç§‘å­¦</p>
                </div>

                <div class="climate-tabs">
                    <button class="climate-tab active" data-tab="weather">å¤©æ°”ç›‘æµ‹</button>
                    <button class="climate-tab" data-tab="climate">æ°”å€™å¸¦</button>
                    <button class="climate-tab" data-tab="patterns">å¤©æ°”æ¨¡å¼</button>
                    <button class="climate-tab" data-tab="forecast">å¤©æ°”é¢„æŠ¥</button>
                </div>

                <div class="climate-content">
                    <!-- å¤©æ°”ç›‘æµ‹æ ‡ç­¾é¡µ -->
                    <div class="tab-panel active" id="weather-panel">
                        <div class="weather-workspace">
                            <div class="weather-display">
                                <canvas class="weather-canvas" id="weather-canvas"></canvas>
                            </div>
                            
                            <div class="weather-controls">
                                <h3><i class="fas fa-thermometer-half"></i> å®æ—¶å¤©æ°”æ•°æ®</h3>
                                
                                <div class="weather-data">
                                    <div class="data-card">
                                        <div class="data-icon">
                                            <i class="fas fa-thermometer-half"></i>
                                        </div>
                                        <div class="data-value" id="temperature">22Â°C</div>
                                        <div class="data-label">æ¸©åº¦</div>
                                    </div>
                                    
                                    <div class="data-card">
                                        <div class="data-icon">
                                            <i class="fas fa-tint"></i>
                                        </div>
                                        <div class="data-value" id="humidity">65%</div>
                                        <div class="data-label">æ¹¿åº¦</div>
                                    </div>
                                    
                                    <div class="data-card">
                                        <div class="data-icon">
                                            <i class="fas fa-wind"></i>
                                        </div>
                                        <div class="data-value" id="wind-speed">12 km/h</div>
                                        <div class="data-label">é£é€Ÿ</div>
                                    </div>
                                    
                                    <div class="data-card">
                                        <div class="data-icon">
                                            <i class="fas fa-compress-arrows-alt"></i>
                                        </div>
                                        <div class="data-value" id="pressure">1013 hPa</div>
                                        <div class="data-label">æ°”å‹</div>
                                    </div>
                                </div>

                                <div class="pattern-selector">
                                    <button class="pattern-btn" id="update-weather">æ›´æ–°æ•°æ®</button>
                                    <button class="pattern-btn secondary" id="reset-weather">é‡ç½®</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- æ°”å€™å¸¦æ ‡ç­¾é¡µ -->
                    <div class="tab-panel" id="climate-panel">
                        <h2>å…¨çƒæ°”å€™å¸¦åˆ†å¸ƒ</h2>
                        <div class="climate-zones">
                            <div class="zone-grid">
                                <div class="zone-card" data-zone="tropical">
                                    <h4>ğŸŒ´ çƒ­å¸¦æ°”å€™</h4>
                                    <p>å…¨å¹´é«˜æ¸©å¤šé›¨ï¼Œå¹´å¹³å‡æ°”æ¸©åœ¨20Â°Cä»¥ä¸Šï¼Œé™æ°´é‡ä¸°å¯Œï¼Œå­£èŠ‚å˜åŒ–ä¸æ˜æ˜¾ã€‚</p>
                                    <div class="zone-features">
                                        <span class="zone-feature">é«˜æ¸©</span>
                                        <span class="zone-feature">å¤šé›¨</span>
                                        <span class="zone-feature">æ¹¿æ¶¦</span>
                                    </div>
                                </div>
                                
                                <div class="zone-card" data-zone="subtropical">
                                    <h4>ğŸŒ äºšçƒ­å¸¦æ°”å€™</h4>
                                    <p>å¤å­£ç‚çƒ­å¤šé›¨ï¼Œå†¬å­£æ¸©å’Œå°‘é›¨ï¼Œå››å­£åˆ†æ˜ï¼Œé€‚å®œå†œä¸šå‘å±•ã€‚</p>
                                    <div class="zone-features">
                                        <span class="zone-feature">å››å­£åˆ†æ˜</span>
                                        <span class="zone-feature">é›¨çƒ­åŒæœŸ</span>
                                        <span class="zone-feature">é€‚å®œå†œä¸š</span>
                                    </div>
                                </div>
                                
                                <div class="zone-card" data-zone="temperate">
                                    <h4>ğŸ‚ æ¸©å¸¦æ°”å€™</h4>
                                    <p>å››å­£å˜åŒ–æ˜æ˜¾ï¼Œå¤å­£æ¸©æš–ï¼Œå†¬å­£å¯’å†·ï¼Œé™æ°´é€‚ä¸­ï¼Œåˆ†å¸ƒå¹¿æ³›ã€‚</p>
                                    <div class="zone-features">
                                        <span class="zone-feature">å››å­£æ˜æ˜¾</span>
                                        <span class="zone-feature">é™æ°´é€‚ä¸­</span>
                                        <span class="zone-feature">åˆ†å¸ƒå¹¿æ³›</span>
                                    </div>
                                </div>
                                
                                <div class="zone-card" data-zone="continental">
                                    <h4>ğŸ”ï¸ å¤§é™†æ€§æ°”å€™</h4>
                                    <p>å¤å­£ç‚çƒ­ï¼Œå†¬å­£ä¸¥å¯’ï¼Œæ˜¼å¤œæ¸©å·®å¤§ï¼Œé™æ°´è¾ƒå°‘ï¼Œä¸»è¦åˆ†å¸ƒåœ¨å†…é™†åœ°åŒºã€‚</p>
                                    <div class="zone-features">
                                        <span class="zone-feature">æ¸©å·®å¤§</span>
                                        <span class="zone-feature">é™æ°´å°‘</span>
                                        <span class="zone-feature">å†…é™†åˆ†å¸ƒ</span>
                                    </div>
                                </div>
                                
                                <div class="zone-card" data-zone="polar">
                                    <h4>â„ï¸ æåœ°æ°”å€™</h4>
                                    <p>å…¨å¹´ä¸¥å¯’ï¼Œé™æ°´ç¨€å°‘ï¼Œä¸»è¦ä¸ºé›ªï¼Œæ¤è¢«ç¨€å°‘ï¼Œåˆ†å¸ƒåœ¨æåœ°åœ°åŒºã€‚</p>
                                    <div class="zone-features">
                                        <span class="zone-feature">ä¸¥å¯’</span>
                                        <span class="zone-feature">é™é›ª</span>
                                        <span class="zone-feature">æ¤è¢«ç¨€å°‘</span>
                                    </div>
                                </div>
                                
                                <div class="zone-card" data-zone="desert">
                                    <h4>ğŸœï¸ å¹²æ—±æ°”å€™</h4>
                                    <p>é™æ°´æå°‘ï¼Œè’¸å‘å¼ºçƒˆï¼Œæ˜¼å¤œæ¸©å·®æå¤§ï¼Œæ¤è¢«ç¨€ç–ï¼Œæ²™æ¼ å¹¿å¸ƒã€‚</p>
                                    <div class="zone-features">
                                        <span class="zone-feature">æåº¦å¹²æ—±</span>
                                        <span class="zone-feature">æ¸©å·®æå¤§</span>
                                        <span class="zone-feature">æ²™æ¼ åŒ–</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- å¤©æ°”æ¨¡å¼æ ‡ç­¾é¡µ -->
                    <div class="tab-panel" id="patterns-panel">
                        <h2>å¤©æ°”ç°è±¡æ¨¡æ‹Ÿ</h2>
                        <div class="weather-patterns">
                            <div class="pattern-selector">
                                <button class="pattern-btn" id="show-rain">é™é›¨</button>
                                <button class="pattern-btn" id="show-snow">é™é›ª</button>
                                <button class="pattern-btn" id="show-storm">é›·æš´</button>
                                <button class="pattern-btn" id="show-wind">å¤§é£</button>
                                <button class="pattern-btn secondary" id="clear-pattern">æ¸…é™¤</button>
                            </div>
                            
                            <div class="pattern-display">
                                <div class="pattern-animation" id="pattern-animation">
                                    <div class="cloud cloud1"></div>
                                </div>
                                
                                <div id="pattern-description">
                                    <h4>å¤©æ°”ç°è±¡è¯´æ˜</h4>
                                    <p>é€‰æ‹©ä¸Šæ–¹æŒ‰é’®æŸ¥çœ‹ä¸åŒå¤©æ°”ç°è±¡çš„å½¢æˆè¿‡ç¨‹å’Œç‰¹å¾ã€‚</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- å¤©æ°”é¢„æŠ¥æ ‡ç­¾é¡µ -->
                    <div class="tab-panel" id="forecast-panel">
                        <h2>7å¤©å¤©æ°”é¢„æŠ¥</h2>
                        <div class="forecast-section">
                            <div class="forecast-grid" id="forecast-grid">
                                <div class="forecast-card">
                                    <div class="forecast-day">ä»Šå¤©</div>
                                    <div class="forecast-icon"><i class="fas fa-sun"></i></div>
                                    <div class="forecast-temp">25Â°C</div>
                                    <div class="forecast-desc">æ™´æœ—</div>
                                </div>
                                
                                <div class="forecast-card">
                                    <div class="forecast-day">æ˜å¤©</div>
                                    <div class="forecast-icon"><i class="fas fa-cloud-sun"></i></div>
                                    <div class="forecast-temp">23Â°C</div>
                                    <div class="forecast-desc">å¤šäº‘</div>
                                </div>
                                
                                <div class="forecast-card">
                                    <div class="forecast-day">åå¤©</div>
                                    <div class="forecast-icon"><i class="fas fa-cloud-rain"></i></div>
                                    <div class="forecast-temp">20Â°C</div>
                                    <div class="forecast-desc">å°é›¨</div>
                                </div>
                                
                                <div class="forecast-card">
                                    <div class="forecast-day">å‘¨å››</div>
                                    <div class="forecast-icon"><i class="fas fa-cloud-rain"></i></div>
                                    <div class="forecast-temp">18Â°C</div>
                                    <div class="forecast-desc">ä¸­é›¨</div>
                                </div>
                                
                                <div class="forecast-card">
                                    <div class="forecast-day">å‘¨äº”</div>
                                    <div class="forecast-icon"><i class="fas fa-cloud"></i></div>
                                    <div class="forecast-temp">21Â°C</div>
                                    <div class="forecast-desc">é˜´å¤©</div>
                                </div>
                                
                                <div class="forecast-card">
                                    <div class="forecast-day">å‘¨å…­</div>
                                    <div class="forecast-icon"><i class="fas fa-cloud-sun"></i></div>
                                    <div class="forecast-temp">24Â°C</div>
                                    <div class="forecast-desc">å¤šäº‘</div>
                                </div>
                                
                                <div class="forecast-card">
                                    <div class="forecast-day">å‘¨æ—¥</div>
                                    <div class="forecast-icon"><i class="fas fa-sun"></i></div>
                                    <div class="forecast-temp">26Â°C</div>
                                    <div class="forecast-desc">æ™´æœ—</div>
                                </div>
                            </div>

                            <div class="pattern-selector">
                                <button class="pattern-btn" id="generate-forecast">ç”Ÿæˆæ–°é¢„æŠ¥</button>
                                <button class="pattern-btn secondary" id="export-forecast">å¯¼å‡ºæ•°æ®</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="main-footer">
        <div class="container">
            <div class="footer-content">
                <p class="copyright-text">study-llm.meåŸŸåä¸ºAlexæ‰€æœ‰ã€‚ä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚</p>
            </div>
        </div>
    </footer>

    <script src="../../js/common.js"></script>
    <script src="../../js/navigation.js"></script>
    <script>
        // æ°”å€™ä¸å¤©æ°”åŠŸèƒ½
        class ClimateWeather {
            constructor() {
                this.canvas = document.getElementById('weather-canvas');
                this.ctx = this.canvas.getContext('2d');
                this.animationId = null;
                this.weatherData = this.initializeWeatherData();
                
                this.initializeEventListeners();
                this.setupCanvasResponsiveness();
                this.drawWeatherMap();
                this.startWeatherAnimation();
            }

            setupCanvasResponsiveness() {
                const resizeCanvas = () => {
                    const container = this.canvas.parentElement;
                    const rect = container.getBoundingClientRect();
                    
                    // Set canvas size to match container
                    this.canvas.width = rect.width;
                    this.canvas.height = rect.height;
                    
                    // Redraw after resize
                    this.drawWeatherMap();
                };

                // Initial resize
                resizeCanvas();

                // Resize on window resize
                window.addEventListener('resize', resizeCanvas);

                // Resize when tab becomes active
                const observer = new MutationObserver((mutations) => {
                    mutations.forEach((mutation) => {
                        if (mutation.type === 'attributes' && 
                            mutation.attributeName === 'class' &&
                            mutation.target.classList.contains('active')) {
                            setTimeout(resizeCanvas, 100);
                        }
                    });
                });

                observer.observe(document.getElementById('weather-panel'), {
                    attributes: true,
                    attributeFilter: ['class']
                });
            }

            initializeWeatherData() {
                return {
                    temperature: 22,
                    humidity: 65,
                    windSpeed: 12,
                    pressure: 1013,
                    conditions: 'sunny'
                };
            }

            initializeEventListeners() {
                // æ ‡ç­¾é¡µåˆ‡æ¢
                document.querySelectorAll('.climate-tab').forEach(tab => {
                    tab.addEventListener('click', (e) => {
                        this.switchTab(e.target.dataset.tab);
                    });
                });

                // å¤©æ°”æ§åˆ¶
                document.getElementById('update-weather').addEventListener('click', () => {
                    this.updateWeatherData();
                });

                document.getElementById('reset-weather').addEventListener('click', () => {
                    this.resetWeatherData();
                });

                // æ°”å€™å¸¦é€‰æ‹©
                document.querySelectorAll('.zone-card').forEach(card => {
                    card.addEventListener('click', (e) => {
                        this.selectClimateZone(e.currentTarget.dataset.zone);
                    });
                });

                // å¤©æ°”æ¨¡å¼
                document.getElementById('show-rain').addEventListener('click', () => {
                    this.showWeatherPattern('rain');
                });

                document.getElementById('show-snow').addEventListener('click', () => {
                    this.showWeatherPattern('snow');
                });

                document.getElementById('show-storm').addEventListener('click', () => {
                    this.showWeatherPattern('storm');
                });

                document.getElementById('show-wind').addEventListener('click', () => {
                    this.showWeatherPattern('wind');
                });

                document.getElementById('clear-pattern').addEventListener('click', () => {
                    this.clearWeatherPattern();
                });

                // å¤©æ°”é¢„æŠ¥
                document.getElementById('generate-forecast').addEventListener('click', () => {
                    this.generateForecast();
                });

                document.getElementById('export-forecast').addEventListener('click', () => {
                    this.exportForecast();
                });
            }

            switchTab(tabName) {
                // æ›´æ–°æ ‡ç­¾é¡µçŠ¶æ€
                document.querySelectorAll('.climate-tab').forEach(tab => {
                    tab.classList.remove('active');
                });
                document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');

                // æ˜¾ç¤ºå¯¹åº”é¢æ¿
                document.querySelectorAll('.tab-panel').forEach(panel => {
                    panel.classList.remove('active');
                });
                document.getElementById(`${tabName}-panel`).classList.add('active');
            }

            drawWeatherMap() {
                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);

                // ç»˜åˆ¶å¤©ç©ºèƒŒæ™¯
                const gradient = this.ctx.createLinearGradient(0, 0, 0, this.canvas.height);
                gradient.addColorStop(0, '#87CEEB');
                gradient.addColorStop(1, '#E0F6FF');
                this.ctx.fillStyle = gradient;
                this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);

                // ç»˜åˆ¶å¤ªé˜³
                this.ctx.fillStyle = '#FFD700';
                this.ctx.beginPath();
                this.ctx.arc(150, 100, 40, 0, 2 * Math.PI);
                this.ctx.fill();

                // ç»˜åˆ¶å¤ªé˜³å…‰çº¿
                this.ctx.strokeStyle = '#FFD700';
                this.ctx.lineWidth = 3;
                for (let i = 0; i < 8; i++) {
                    const angle = (i * Math.PI) / 4;
                    const x1 = 150 + Math.cos(angle) * 60;
                    const y1 = 100 + Math.sin(angle) * 60;
                    const x2 = 150 + Math.cos(angle) * 80;
                    const y2 = 100 + Math.sin(angle) * 80;
                    
                    this.ctx.beginPath();
                    this.ctx.moveTo(x1, y1);
                    this.ctx.lineTo(x2, y2);
                    this.ctx.stroke();
                }

                // ç»˜åˆ¶äº‘æœµ
                this.drawCloud(400, 120, 80, '#FFFFFF');
                this.drawCloud(600, 80, 60, '#F0F0F0');

                // ç»˜åˆ¶åœ°é¢
                this.ctx.fillStyle = '#90EE90';
                this.ctx.fillRect(0, this.canvas.height - 100, this.canvas.width, 100);

                // ç»˜åˆ¶å±±è„‰
                this.ctx.fillStyle = '#8B7355';
                this.ctx.beginPath();
                this.ctx.moveTo(0, this.canvas.height - 100);
                this.ctx.lineTo(200, this.canvas.height - 200);
                this.ctx.lineTo(400, this.canvas.height - 150);
                this.ctx.lineTo(600, this.canvas.height - 180);
                this.ctx.lineTo(800, this.canvas.height - 120);
                this.ctx.lineTo(800, this.canvas.height - 100);
                this.ctx.closePath();
                this.ctx.fill();

                // ç»˜åˆ¶æ¸©åº¦å’Œé£å‘æŒ‡ç¤º
                this.ctx.fillStyle = '#333';
                this.ctx.font = '16px Arial';
                this.ctx.fillText(`æ¸©åº¦: ${this.weatherData.temperature}Â°C`, 20, 30);
                this.ctx.fillText(`æ¹¿åº¦: ${this.weatherData.humidity}%`, 20, 50);
                this.ctx.fillText(`é£é€Ÿ: ${this.weatherData.windSpeed} km/h`, 20, 70);
            }

            drawCloud(x, y, size, color) {
                this.ctx.fillStyle = color;
                
                // ä¸»ä½“
                this.ctx.beginPath();
                this.ctx.arc(x, y, size * 0.5, 0, 2 * Math.PI);
                this.ctx.fill();
                
                // å·¦ä¾§
                this.ctx.beginPath();
                this.ctx.arc(x - size * 0.3, y, size * 0.4, 0, 2 * Math.PI);
                this.ctx.fill();
                
                // å³ä¾§
                this.ctx.beginPath();
                this.ctx.arc(x + size * 0.3, y, size * 0.4, 0, 2 * Math.PI);
                this.ctx.fill();
                
                // é¡¶éƒ¨
                this.ctx.beginPath();
                this.ctx.arc(x, y - size * 0.2, size * 0.3, 0, 2 * Math.PI);
                this.ctx.fill();
            }

            startWeatherAnimation() {
                const animate = () => {
                    // ç®€å•çš„åŠ¨ç”»æ•ˆæœï¼Œå¯ä»¥æ·»åŠ äº‘æœµç§»åŠ¨ç­‰
                    this.animationId = requestAnimationFrame(animate);
                };
                animate();
            }

            updateWeatherData() {
                // æ¨¡æ‹Ÿå¤©æ°”æ•°æ®æ›´æ–°
                this.weatherData.temperature = Math.round(15 + Math.random() * 20);
                this.weatherData.humidity = Math.round(40 + Math.random() * 40);
                this.weatherData.windSpeed = Math.round(5 + Math.random() * 20);
                this.weatherData.pressure = Math.round(990 + Math.random() * 40);

                // æ›´æ–°æ˜¾ç¤º
                document.getElementById('temperature').textContent = `${this.weatherData.temperature}Â°C`;
                document.getElementById('humidity').textContent = `${this.weatherData.humidity}%`;
                document.getElementById('wind-speed').textContent = `${this.weatherData.windSpeed} km/h`;
                document.getElementById('pressure').textContent = `${this.weatherData.pressure} hPa`;

                this.drawWeatherMap();
            }

            resetWeatherData() {
                this.weatherData = this.initializeWeatherData();
                document.getElementById('temperature').textContent = `${this.weatherData.temperature}Â°C`;
                document.getElementById('humidity').textContent = `${this.weatherData.humidity}%`;
                document.getElementById('wind-speed').textContent = `${this.weatherData.windSpeed} km/h`;
                document.getElementById('pressure').textContent = `${this.weatherData.pressure} hPa`;
                this.drawWeatherMap();
            }

            selectClimateZone(zone) {
                // ç§»é™¤æ‰€æœ‰é€‰ä¸­çŠ¶æ€
                document.querySelectorAll('.zone-card').forEach(card => {
                    card.style.borderColor = '#e9ecef';
                });

                // æ·»åŠ é€‰ä¸­çŠ¶æ€
                const selectedCard = document.querySelector(`[data-zone="${zone}"]`);
                selectedCard.style.borderColor = '#28a745';
                selectedCard.style.borderWidth = '2px';

                // æ˜¾ç¤ºæ°”å€™å¸¦ä¿¡æ¯
                const zoneInfo = {
                    'tropical': { temp: '25-30Â°C', rainfall: '2000-3000mm', desc: 'çƒ­å¸¦é›¨æ—å’Œçƒ­å¸¦è‰åŸæ°”å€™' },
                    'subtropical': { temp: '15-25Â°C', rainfall: '1000-1500mm', desc: 'äºšçƒ­å¸¦å­£é£å’Œåœ°ä¸­æµ·æ°”å€™' },
                    'temperate': { temp: '5-20Â°C', rainfall: '500-1000mm', desc: 'æ¸©å¸¦å¤§é™†æ€§å’Œæµ·æ´‹æ€§æ°”å€™' },
                    'continental': { temp: '-10-25Â°C', rainfall: '200-500mm', desc: 'å¤§é™†æ€§æ°”å€™ï¼Œæ¸©å·®å¤§' },
                    'polar': { temp: '-30-0Â°C', rainfall: '100-200mm', desc: 'æåœ°æ°”å€™ï¼Œå…¨å¹´ä¸¥å¯’' },
                    'desert': { temp: '10-40Â°C', rainfall: '0-200mm', desc: 'å¹²æ—±å’ŒåŠå¹²æ—±æ°”å€™' }
                };

                const info = zoneInfo[zone];
                alert(`${selectedCard.querySelector('h4').textContent}\n\nå¹´å‡æ¸©åº¦: ${info.temp}\nå¹´é™æ°´é‡: ${info.rainfall}\nç‰¹å¾: ${info.desc}`);
            }

            showWeatherPattern(pattern) {
                const animation = document.getElementById('pattern-animation');
                const description = document.getElementById('pattern-description');
                
                // æ¸…é™¤ç°æœ‰åŠ¨ç”»
                animation.innerHTML = '<div class="cloud cloud1"></div>';
                
                const patterns = {
                    'rain': {
                        animation: () => {
                            // æ·»åŠ é›¨æ»´
                            for (let i = 0; i < 20; i++) {
                                const rain = document.createElement('div');
                                rain.className = 'rain';
                                rain.style.left = Math.random() * 100 + '%';
                                rain.style.animationDelay = Math.random() * 2 + 's';
                                animation.appendChild(rain);
                            }
                        },
                        description: {
                            title: 'é™é›¨ç°è±¡',
                            text: 'å½“ç©ºæ°”ä¸­çš„æ°´è’¸æ°”è¾¾åˆ°é¥±å’ŒçŠ¶æ€æ—¶ï¼Œæ°´æ»´åœ¨äº‘ä¸­å‡ç»“å¹¶å¢å¤§ï¼Œå½“é‡åŠ›è¶…è¿‡ä¸Šå‡æ°”æµæ—¶å°±ä¼šé™è½å½¢æˆé›¨ã€‚'
                        }
                    },
                    'snow': {
                        animation: () => {
                            for (let i = 0; i < 15; i++) {
                                const snow = document.createElement('div');
                                snow.style.position = 'absolute';
                                snow.style.width = '6px';
                                snow.style.height = '6px';
                                snow.style.background = 'white';
                                snow.style.borderRadius = '50%';
                                snow.style.left = Math.random() * 100 + '%';
                                snow.style.animation = 'fall 3s linear infinite';
                                snow.style.animationDelay = Math.random() * 3 + 's';
                                animation.appendChild(snow);
                            }
                        },
                        description: {
                            title: 'é™é›ªç°è±¡',
                            text: 'å½“æ°”æ¸©ä½äº0Â°Cæ—¶ï¼Œæ°´è’¸æ°”ç›´æ¥å‡åæˆå†°æ™¶ï¼Œå†°æ™¶åœ¨äº‘ä¸­èšé›†å¢å¤§å½¢æˆé›ªèŠ±é™è½ã€‚'
                        }
                    },
                    'storm': {
                        animation: () => {
                            animation.style.background = 'linear-gradient(135deg, #2c3e50 0%, #34495e 100%)';
                            // æ·»åŠ é—ªç”µæ•ˆæœ
                            const lightning = document.createElement('div');
                            lightning.style.position = 'absolute';
                            lightning.style.width = '2px';
                            lightning.style.height = '100px';
                            lightning.style.background = '#FFD700';
                            lightning.style.left = '50%';
                            lightning.style.top = '0';
                            lightning.style.animation = 'flash 2s infinite';
                            animation.appendChild(lightning);
                        },
                        description: {
                            title: 'é›·æš´ç°è±¡',
                            text: 'å¼ºçƒˆçš„å¯¹æµè¿åŠ¨äº§ç”Ÿç§¯é›¨äº‘ï¼Œäº‘ä¸­æ­£è´Ÿç”µè·åˆ†ç¦»å½¢æˆå¼ºç”µåœºï¼Œå½“ç”µå‹è¶³å¤Ÿé«˜æ—¶äº§ç”Ÿé—ªç”µå’Œé›·å£°ã€‚'
                        }
                    },
                    'wind': {
                        animation: () => {
                            // æ·»åŠ é£çš„è§†è§‰æ•ˆæœ
                            for (let i = 0; i < 10; i++) {
                                const windLine = document.createElement('div');
                                windLine.style.position = 'absolute';
                                windLine.style.width = '30px';
                                windLine.style.height = '2px';
                                windLine.style.background = 'rgba(255,255,255,0.7)';
                                windLine.style.top = Math.random() * 100 + '%';
                                windLine.style.left = '-30px';
                                windLine.style.animation = 'drift 2s linear infinite';
                                windLine.style.animationDelay = Math.random() * 2 + 's';
                                animation.appendChild(windLine);
                            }
                        },
                        description: {
                            title: 'å¤§é£ç°è±¡',
                            text: 'ç”±äºæ°”å‹å·®å¼‚äº§ç”Ÿçš„ç©ºæ°”æµåŠ¨ã€‚é«˜å‹åŒºçš„ç©ºæ°”å‘ä½å‹åŒºæµåŠ¨ï¼Œå½¢æˆé£ã€‚é£é€Ÿå—æ°”å‹æ¢¯åº¦ã€åœ°å½¢ç­‰å› ç´ å½±å“ã€‚'
                        }
                    }
                };

                if (patterns[pattern]) {
                    patterns[pattern].animation();
                    description.innerHTML = `
                        <h4>${patterns[pattern].description.title}</h4>
                        <p>${patterns[pattern].description.text}</p>
                    `;
                }
            }

            clearWeatherPattern() {
                const animation = document.getElementById('pattern-animation');
                const description = document.getElementById('pattern-description');
                
                animation.innerHTML = '<div class="cloud cloud1"></div>';
                animation.style.background = 'linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%)';
                
                description.innerHTML = `
                    <h4>å¤©æ°”ç°è±¡è¯´æ˜</h4>
                    <p>é€‰æ‹©ä¸Šæ–¹æŒ‰é’®æŸ¥çœ‹ä¸åŒå¤©æ°”ç°è±¡çš„å½¢æˆè¿‡ç¨‹å’Œç‰¹å¾ã€‚</p>
                `;
            }

            generateForecast() {
                const days = ['ä»Šå¤©', 'æ˜å¤©', 'åå¤©', 'å‘¨å››', 'å‘¨äº”', 'å‘¨å…­', 'å‘¨æ—¥'];
                const conditions = [
                    { icon: 'fas fa-sun', desc: 'æ™´æœ—' },
                    { icon: 'fas fa-cloud-sun', desc: 'å¤šäº‘' },
                    { icon: 'fas fa-cloud', desc: 'é˜´å¤©' },
                    { icon: 'fas fa-cloud-rain', desc: 'å°é›¨' },
                    { icon: 'fas fa-cloud-rain', desc: 'ä¸­é›¨' }
                ];

                const grid = document.getElementById('forecast-grid');
                grid.innerHTML = '';

                days.forEach(day => {
                    const condition = conditions[Math.floor(Math.random() * conditions.length)];
                    const temp = Math.round(15 + Math.random() * 15);
                    
                    const card = document.createElement('div');
                    card.className = 'forecast-card';
                    card.innerHTML = `
                        <div class="forecast-day">${day}</div>
                        <div class="forecast-icon"><i class="${condition.icon}"></i></div>
                        <div class="forecast-temp">${temp}Â°C</div>
                        <div class="forecast-desc">${condition.desc}</div>
                    `;
                    grid.appendChild(card);
                });
            }

            exportForecast() {
                const cards = document.querySelectorAll('.forecast-card');
                const forecastData = [];
                
                cards.forEach(card => {
                    forecastData.push({
                        day: card.querySelector('.forecast-day').textContent,
                        temperature: card.querySelector('.forecast-temp').textContent,
                        condition: card.querySelector('.forecast-desc').textContent
                    });
                });

                const dataStr = JSON.stringify(forecastData, null, 2);
                const dataBlob = new Blob([dataStr], {type: 'application/json'});
                const url = URL.createObjectURL(dataBlob);
                const link = document.createElement('a');
                link.href = url;
                link.download = 'weather_forecast.json';
                link.click();
            }
        }

        // æ·»åŠ é—ªç”µåŠ¨ç”»
        const style = document.createElement('style');
        style.textContent = `
            @keyframes flash {
                0%, 90%, 100% { opacity: 0; }
                5%, 85% { opacity: 1; }
            }
        `;
        document.head.appendChild(style);

        // åˆå§‹åŒ–æ°”å€™å¤©æ°”ç³»ç»Ÿ
        let climateWeather;
        document.addEventListener('DOMContentLoaded', () => {
            climateWeather = new ClimateWeather();
        });
    </script>
</body>
</html> 