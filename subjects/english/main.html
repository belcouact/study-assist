<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Learning - Study Assist</title>
    <link rel="stylesheet" href="../../css/common.css">
    <link rel="stylesheet" href="../../css/components.css">
    <link rel="stylesheet" href="../../css/utilities.css">
    <link rel="stylesheet" href="../../css/responsive.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap">
</head>
<body>
    <header class="main-header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <a href="../../index.html">
                        <img src="../../assets/icons/logo.svg" alt="Study Assist Logo">
                        <span>Study Assist</span>
                    </a>
                </div>
                <nav class="main-nav">
                    <ul>
                        <li><a href="../../index.html">Home</a></li>
                        <li><a href="../../index.html#subjects">Subjects</a></li>
                        <li><a href="../../index.html#features">Features</a></li>
                        <li><a href="../../index.html#about">About</a></li>
                    </ul>
                </nav>
                <div class="profile-section">
                    <button id="profile-button" class="profile-button">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                        学习阶段
                    </button>
                    <div id="profile-display" class="profile-display"></div>
                </div>
                <button class="mobile-menu-toggle" aria-label="Toggle Menu">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
        </div>
    </header>

    <main>
        <!-- Hero Section -->
        <section class="subject-hero">
            <div class="container">
                <div class="subject-hero-content">
                    <h1>English <span class="gradient-text">Learning</span></h1>
                    <p class="subject-description">Master English with DeepSeek AI assistance. Improve grammar, enhance vocabulary, analyze literature, and develop writing skills with personalized guidance.</p>
                </div>
                <div class="subject-hero-image">
                    <img src="../../assets/icons/english-icon.svg" alt="English Learning Illustration">
                </div>
            </div>
        </section>

        <!-- English Topics Section -->
        <section class="topics-section">
            <div class="container">
                <div class="section-header">
                    <h2>Explore English <span class="gradient-text">Topics</span></h2>
                    <p>Select a topic to start learning with AI assistance</p>
                </div>
                <div class="topics-grid">
                    <div class="topic-card" data-topic="grammar">
                        <div class="topic-icon">
                            <img src="../../assets/icons/grammar-icon.svg" alt="Grammar Icon">
                        </div>
                        <h3>Grammar</h3>
                        <p>Parts of speech, sentence structure, and usage rules</p>
                    </div>
                    <div class="topic-card" data-topic="vocabulary">
                        <div class="topic-icon">
                            <img src="../../assets/icons/vocab-icon.svg" alt="Vocabulary Icon">
                        </div>
                        <h3>Vocabulary</h3>
                        <p>Word meanings, synonyms, antonyms, and context usage</p>
                    </div>
                    <div class="topic-card" data-topic="literature">
                        <div class="topic-icon">
                            <img src="../../assets/icons/literature-icon.svg" alt="Literature Icon">
                        </div>
                        <h3>Literature</h3>
                        <p>Text analysis, themes, characters, and literary devices</p>
                    </div>
                    <div class="topic-card" data-topic="writing">
                        <div class="topic-icon">
                            <img src="../../assets/icons/writing-icon.svg" alt="Writing Icon">
                        </div>
                        <h3>Writing</h3>
                        <p>Essays, creative writing, style, and structure</p>
                    </div>
                    <div class="topic-card" data-topic="comprehension">
                        <div class="topic-icon">
                            <img src="../../assets/icons/comprehension-icon.svg" alt="Comprehension Icon">
                        </div>
                        <h3>Reading Comprehension</h3>
                        <p>Understanding texts, inference, and critical reading</p>
                    </div>
                    <div class="topic-card" data-topic="poetry">
                        <div class="topic-icon">
                            <img src="../../assets/icons/poem-icon.svg" alt="Poetry Icon">
                        </div>
                        <h3>Poetry</h3>
                        <p>Poetic forms, meter, rhyme, and interpretation</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- AI English Assistant Section -->
        <section class="ai-assistant-section">
            <div class="container">
                <div class="section-header">
                    <h2>AI English <span class="gradient-text">Assistant</span></h2>
                    <p>Get help with grammar, vocabulary, literature, and writing</p>
                </div>
                <div class="assistant-container">
                    <div class="chat-container">
                        <div class="chat-header">
                            <img src="../../assets/icons/english-assistant-icon.svg" alt="English Assistant Icon">
                            <h3>DeepSeek English Assistant</h3>
                        </div>
                        <div class="chat-messages" id="english-chat-messages">
                            <div class="message message-ai">
                                <p>Hi there! I'm your DeepSeek English Assistant. How can I help you improve your English skills today?</p>
                            </div>
                        </div>
                        <div class="chat-input">
                            <input type="text" id="english-question-input" placeholder="Ask a question or type text to analyze...">
                            <button class="btn btn-primary" id="send-english-question">Ask</button>
                        </div>
                    </div>
                    <div class="assistant-features">
                        <div class="feature-item">
                            <div class="feature-icon">
                                <img src="../../assets/icons/grammar-check-icon.svg" alt="Grammar Check Icon">
                            </div>
                            <div class="feature-content">
                                <h4>Grammar Check</h4>
                                <p>Get corrections and explanations for grammar mistakes</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">
                                <img src="../../assets/icons/vocab-icon.svg" alt="Vocabulary Help Icon">
                            </div>
                            <div class="feature-content">
                                <h4>Vocabulary Help</h4>
                                <p>Learn word meanings, synonyms, and proper usage</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">
                                <img src="../../assets/icons/literature-analysis-icon.svg" alt="Literature Analysis Icon">
                            </div>
                            <div class="feature-content">
                                <h4>Literature Analysis</h4>
                                <p>Analyze texts for themes, symbols, and meaning</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Vocabulary Practice Section -->
        <section class="vocab-section bg-light">
            <div class="container">
                <div class="section-header">
                    <h2>Vocabulary <span class="gradient-text">Builder</span></h2>
                    <p>Expand your vocabulary with interactive learning tools</p>
                </div>
                <div class="vocab-container">
                    <div class="vocab-controls">
                        <div class="form-group">
                            <label for="vocab-level">Difficulty Level</label>
                            <select id="vocab-level" class="form-control">
                                <option value="elementary">Elementary</option>
                                <option value="intermediate" selected>Intermediate</option>
                                <option value="advanced">Advanced</option>
                                <option value="academic">Academic</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="vocab-category">Category</label>
                            <select id="vocab-category" class="form-control">
                                <option value="general">General Vocabulary</option>
                                <option value="academic">Academic Words</option>
                                <option value="literature">Literary Terms</option>
                                <option value="idioms">Idioms & Phrases</option>
                            </select>
                        </div>
                        <button id="generate-vocab" class="btn btn-primary">Generate Words</button>
                    </div>
                    <div id="vocab-container" class="vocab-content">
                        <p class="text-center">Configure your vocabulary options and click "Generate Words" to start learning.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Poetry Analysis Section -->
        <section class="poetry-section">
            <div class="container">
                <div class="section-header">
                    <h2>Poetry <span class="gradient-text">Analysis</span></h2>
                    <p>Explore and analyze poems with AI assistance</p>
                </div>
                <div class="poetry-container">
                    <div class="poetry-selector">
                        <div class="form-group">
                            <label for="poetry-period">Time Period</label>
                            <select id="poetry-period" class="form-control">
                                <option value="renaissance">Renaissance</option>
                                <option value="romantic">Romantic</option>
                                <option value="victorian">Victorian</option>
                                <option value="modern">Modern</option>
                                <option value="contemporary">Contemporary</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="poetry-style">Style</label>
                            <select id="poetry-style" class="form-control">
                                <option value="sonnet">Sonnet</option>
                                <option value="haiku">Haiku</option>
                                <option value="ode">Ode</option>
                                <option value="freeverse">Free Verse</option>
                                <option value="narrative">Narrative</option>
                            </select>
                        </div>
                        <button id="load-poem" class="btn btn-primary">Load Poem</button>
                    </div>
                    <div id="poem-display" class="poem-content">
                        <div class="placeholder-content">
                            <img src="../../assets/icons/poem-icon.svg" alt="Poetry Analysis Placeholder">
                            <p>Select options and click "Load Poem" to analyze a poem with AI assistance.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Writing Assistant Section -->
        <section class="writing-section bg-light">
            <div class="container">
                <div class="section-header">
                    <h2>Writing <span class="gradient-text">Assistant</span></h2>
                    <p>Improve your writing with AI-powered feedback and suggestions</p>
                </div>
                <div class="writing-container">
                    <div class="writing-tools">
                        <div class="form-group">
                            <label for="writing-type">Writing Type</label>
                            <select id="writing-type" class="form-control">
                                <option value="essay">Academic Essay</option>
                                <option value="creative">Creative Writing</option>
                                <option value="report">Report</option>
                                <option value="letter">Letter/Email</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="writing-focus">Focus Area</label>
                            <select id="writing-focus" class="form-control">
                                <option value="grammar">Grammar & Mechanics</option>
                                <option value="structure">Structure & Organization</option>
                                <option value="style">Style & Tone</option>
                                <option value="overall">Overall Improvement</option>
                            </select>
                        </div>
                    </div>
                    <div class="writing-editor">
                        <textarea id="writing-input" placeholder="Enter your text here for analysis and suggestions..."></textarea>
                        <button id="analyze-writing" class="btn btn-primary">Analyze Writing</button>
                    </div>
                    <div id="writing-feedback" class="writing-feedback">
                        <p class="text-center">Your writing feedback will appear here after analysis.</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="main-footer">
        <div class="container">
            <div class="footer-bottom">
                <p>&copy; 2023 Study Assist. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="../../js/common.js"></script>
    <script src="../../js/navigation.js"></script>
    <script src="../../js/auth.js"></script>
    <script src="../../js/api.js"></script>
    <script src="../../js/profile.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize API
            initAPI();
            
            // English chat functionality
            const chatInput = document.getElementById('english-question-input');
            const sendButton = document.getElementById('send-english-question');
            const chatMessages = document.getElementById('english-chat-messages');
            
            sendButton.addEventListener('click', function() {
                const question = chatInput.value.trim();
                if (question) {
                    // Add user message
                    const userMessage = document.createElement('div');
                    userMessage.className = 'message message-user';
                    userMessage.innerHTML = `<p>${question}</p>`;
                    chatMessages.appendChild(userMessage);
                    
                    // Clear input
                    chatInput.value = '';
                    
                    // Show loading indicator
                    const loadingMessage = document.createElement('div');
                    loadingMessage.className = 'message message-ai message-loading';
                    loadingMessage.innerHTML = '<p>Thinking...</p>';
                    chatMessages.appendChild(loadingMessage);
                    
                    // Scroll to bottom
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                    
                    // Get AI response (simulated)
                    setTimeout(() => {
                        // Remove loading message
                        chatMessages.removeChild(loadingMessage);
                        
                        // Simulate API call
                        askQuestion(question, 'english')
                            .then(response => {
                                // Add AI response
                                const aiMessage = document.createElement('div');
                                aiMessage.className = 'message message-ai';
                                aiMessage.innerHTML = `<p>${response}</p>`;
                                chatMessages.appendChild(aiMessage);
                                
                                // Scroll to bottom
                                chatMessages.scrollTop = chatMessages.scrollHeight;
                            })
                            .catch(error => {
                                console.error('Error:', error);
                                const errorMessage = document.createElement('div');
                                errorMessage.className = 'message message-error';
                                errorMessage.innerHTML = '<p>Sorry, I encountered an error. Please try again.</p>';
                                chatMessages.appendChild(errorMessage);
                                chatMessages.scrollTop = chatMessages.scrollHeight;
                            });
                    }, 1000);
                }
            });
            
            // Allow Enter key to send messages
            chatInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendButton.click();
                }
            });
            
            // Vocabulary generator
            const generateVocabButton = document.getElementById('generate-vocab');
            const vocabContainer = document.getElementById('vocab-container');
            
            generateVocabButton.addEventListener('click', function() {
                const level = document.getElementById('vocab-level').value;
                const category = document.getElementById('vocab-category').value;
                
                // Show loading
                vocabContainer.innerHTML = '<p class="loading">Generating vocabulary list...</p>';
                
                // Simulate API call to generate vocabulary
                setTimeout(() => {
                    // This would be an actual API call in production
                    const words = [
                        { word: 'Eloquent', definition: 'Fluent or persuasive in speaking or writing', example: 'She gave an eloquent speech that moved the audience.' },
                        { word: 'Meticulous', definition: 'Showing great attention to detail; very careful and precise', example: 'He was meticulous in his research, checking every fact twice.' },
                        { word: 'Ambiguous', definition: 'Open to more than one interpretation; having a double meaning', example: 'The poem\'s ambiguous ending has been debated by scholars for decades.' },
                        { word: 'Benevolent', definition: 'Well meaning and kindly', example: 'The benevolent organization provided food and shelter to those in need.' },
                        { word: 'Rhetoric', definition: 'The art of effective or persuasive speaking or writing', example: 'The politician was known for his powerful rhetoric during debates.' }
                    ];
                    
                    let html = '<div class="vocab-list">';
                    html += `<h3>${level.charAt(0).toUpperCase() + level.slice(1)} ${category.charAt(0).toUpperCase() + category.slice(1)} Words</h3>`;
                    
                    words.forEach(word => {
                        html += `
                            <div class="vocab-card">
                                <h4>${word.word}</h4>
                                <p class="definition"><strong>Definition:</strong> ${word.definition}</p>
                                <p class="example"><strong>Example:</strong> <em>${word.example}</em></p>
                                <button class="btn btn-small btn-secondary save-word">Save to My List</button>
                            </div>
                        `;
                    });
                    
                    html += `
                        <div class="vocab-actions">
                            <button class="btn btn-primary" id="more-words">Load More Words</button>
                            <button class="btn btn-secondary" id="practice-vocab">Practice These Words</button>
                        </div>
                    </div>`;
                    
                    vocabContainer.innerHTML = html;
                    
                    // Add event listeners to new buttons
                    document.getElementById('more-words').addEventListener('click', function() {
                        generateVocabButton.click();
                    });
                    
                    document.querySelectorAll('.save-word').forEach(button => {
                        button.addEventListener('click', function() {
                            this.innerHTML = 'Saved ✓';
                            this.disabled = true;
                        });
                    });
                }, 1500);
            });
            
            // Poetry analysis functionality
            const loadPoemButton = document.getElementById('load-poem');
            const poemDisplay = document.getElementById('poem-display');
            
            loadPoemButton.addEventListener('click', function() {
                const period = document.getElementById('poetry-period').value;
                const style = document.getElementById('poetry-style').value;
                
                // Show loading
                poemDisplay.innerHTML = '<p class="loading">Loading poem...</p>';
                
                // Simulate API call to load poem
                setTimeout(() => {
                    // This would be an actual API call in production
                    let poemHtml = '<div class="poem-analysis">';
                    
                    if (style === 'sonnet' && period === 'romantic') {
                        poemHtml += `
                            <div class="poem-text">
                                <h3>"Ozymandias" by Percy Bysshe Shelley</h3>
                                <pre>
I met a traveller from an antique land,
Who said—"Two vast and trunkless legs of stone
Stand in the desert. . . . Near them, on the sand,
Half sunk a shattered visage lies, whose frown,
And wrinkled lip, and sneer of cold command,
Tell that its sculptor well those passions read
Which yet survive, stamped on these lifeless things,
The hand that mocked them, and the heart that fed;
And on the pedestal, these words appear:
My name is Ozymandias, King of Kings;
Look on my Works, ye Mighty, and despair!
Nothing beside remains. Round the decay
Of that colossal Wreck, boundless and bare
The lone and level sands stretch far away."</pre>
                            </div>
                            <div class="poem-breakdown">
                                <h4>Analysis</h4>
                                <p>This famous sonnet by Shelley explores themes of power, impermanence, and the inevitable decline of even the mightiest empires. The poem describes the ruins of a statue of "Ozymandias" (another name for Pharaoh Ramesses II) and reflects on how even this once-great ruler's works have crumbled to nothing.</p>
                                
                                <h4>Literary Devices</h4>
                                <ul>
                                    <li><strong>Irony:</strong> The inscription boasts of great works, yet nothing remains.</li>
                                    <li><strong>Imagery:</strong> Vivid descriptions of the "shattered visage" and desert landscape.</li>
                                    <li><strong>Symbolism:</strong> The broken statue represents the temporary nature of human power.</li>
                                    <li><strong>Structure:</strong> Sonnet form with irregular rhyme scheme, breaking away from tradition.</li>
                                </ul>
                                
                                <h4>Key Themes</h4>
                                <ul>
                                    <li>The impermanence of power and human achievements</li>
                                    <li>The arrogance of rulers and empires</li>
                                    <li>Time's power to erode all human creations</li>
                                    <li>The contrast between human ambition and natural forces</li>
                                </ul>
                            </div>
                        `;
                    } else {
                        poemHtml += `
                            <div class="placeholder-content">
                                <p>A ${style} from the ${period} period would be displayed here with full analysis.</p>
                                <p>Try selecting "Sonnet" and "Romantic" to see a full example.</p>
                            </div>
                        `;
                    }
                    
                    poemHtml += '</div>';
                    poemDisplay.innerHTML = poemHtml;
                }, 1500);
            });
            
            // Writing analysis functionality
            const analyzeWritingButton = document.getElementById('analyze-writing');
            const writingFeedback = document.getElementById('writing-feedback');
            
            analyzeWritingButton.addEventListener('click', function() {
                const writingInput = document.getElementById('writing-input').value.trim();
                const writingType = document.getElementById('writing-type').value;
                const focusArea = document.getElementById('writing-focus').value;
                
                if (writingInput.length < 20) {
                    writingFeedback.innerHTML = '<p class="error">Please enter more text for a meaningful analysis (at least 20 characters).</p>';
                    return;
                }
                
                // Show loading
                writingFeedback.innerHTML = '<p class="loading">Analyzing your writing...</p>';
                
                // Simulate API call for writing analysis
                setTimeout(() => {
                    // This would be an actual API call in production
                    let feedbackHtml = '<div class="writing-analysis">';
                    feedbackHtml += '<h3>Writing Analysis</h3>';
                    
                    // Simple demo feedback
                    feedbackHtml += `
                        <div class="feedback-section">
                            <h4>Overall Assessment</h4>
                            <div class="feedback-meter">
                                <div class="meter-fill" style="width: 75%"></div>
                            </div>
                            <p>Your writing demonstrates good understanding of the topic and clear organization. There are some areas for improvement in terms of sentence variety and word choice.</p>
                        </div>
                        
                        <div class="feedback-section">
                            <h4>Strengths</h4>
                            <ul>
                                <li>Clear main idea and purpose</li>
                                <li>Logical organization of thoughts</li>
                                <li>Good use of supporting details</li>
                            </ul>
                        </div>
                        
                        <div class="feedback-section">
                            <h4>Areas for Improvement</h4>
                            <ul>
                                <li>Consider varying sentence structure to improve flow</li>
                                <li>Some vocabulary could be more precise</li>
                                <li>Transitions between paragraphs could be stronger</li>
                            </ul>
                        </div>
                        
                        <div class="feedback-section">
                            <h4>Highlighted Text</h4>
                            <div class="highlighted-text">
                                ${writingInput.replace(/\n/g, '<br>')}
                            </div>
                        </div>
                        
                        <button class="btn btn-primary" id="detailed-suggestions">Get Detailed Suggestions</button>
                    `;
                    
                    feedbackHtml += '</div>';
                    writingFeedback.innerHTML = feedbackHtml;
                    
                    // Add event listener to the detailed suggestions button
                    document.getElementById('detailed-suggestions').addEventListener('click', function() {
                        alert('In the full version, this would provide line-by-line suggestions for improving your writing.');
                    });
                }, 2000);
            });
        });
    </script>
</body>
</html> 