<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>英语 - 学习助手</title>
    <link rel="stylesheet" href="../../css/common.css">
    <link rel="stylesheet" href="../../css/components.css">
    <link rel="stylesheet" href="../../css/utilities.css">
    <link rel="stylesheet" href="../../css/responsive.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap">
</head>
<body>
    <header class="main-header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <a href="../../index.html">
                        <i class="fas fa-graduation-cap"></i>
                        <span>学习助手</span>
                    </a>
                </div>
                <nav class="main-nav">
                    <ul>
                        <li><a href="../../index.html">首页</a></li>
                        <li><a href="../../index.html#subjects">科目</a></li>
                        <li><a href="../../index.html#features">功能</a></li>
                        <li><a href="../../index.html#about">关于</a></li>
                    </ul>
                </nav>
                <div class="profile-section">
                    <button id="profile-button" class="profile-button">
                        <i class="fas fa-user-circle"></i>
                        学习阶段
                    </button>
                    <div id="profile-display" class="profile-display"></div>
                </div>
                <button class="mobile-menu-toggle" aria-label="切换菜单">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
        </div>
    </header>

    <main>
        <!-- 英雄部分 -->
        <section class="subject-hero">
            <div class="container">
                <div class="subject-hero-content">
                    <h1>英语<span class="gradient-text">学习</span></h1>
                    <p class="subject-description">在DeepSeek AI的辅助下掌握英语。提高语法，扩展词汇，分析文学，并通过个性化指导发展写作技能。</p>
                </div>
                <div class="subject-hero-image">
                    <img src="../../assets/icons/english-icon.svg" alt="英语学习插图">
                </div>
            </div>
        </section>

        <!-- 英语主题部分 -->
        <section class="topics-section">
            <div class="container">
                <div class="section-header">
                    <h2>探索英语<span class="gradient-text">主题</span></h2>
                    <p>选择一个主题，开始使用AI辅助学习</p>
                </div>
                <div class="topics-grid">
                    <div class="topic-card" data-topic="grammar">
                        <div class="topic-icon">
                            <img src="../../assets/icons/grammar-icon.svg" alt="语法图标">
                        </div>
                        <h3>语法</h3>
                        <p>词性、句子结构和用法规则</p>
                    </div>
                    <div class="topic-card" data-topic="vocabulary">
                        <div class="topic-icon">
                            <img src="../../assets/icons/vocab-icon.svg" alt="词汇图标">
                        </div>
                        <h3>词汇</h3>
                        <p>单词含义、同义词、反义词和语境用法</p>
                    </div>
                    <div class="topic-card" data-topic="literature">
                        <div class="topic-icon">
                            <img src="../../assets/icons/literature-icon.svg" alt="文学图标">
                        </div>
                        <h3>文学</h3>
                        <p>文本分析、主题、人物和文学手法</p>
                    </div>
                    <div class="topic-card" data-topic="writing">
                        <div class="topic-icon">
                            <img src="../../assets/icons/writing-icon.svg" alt="写作图标">
                        </div>
                        <h3>写作</h3>
                        <p>论文、创意写作、风格和结构</p>
                    </div>
                    <div class="topic-card" data-topic="comprehension">
                        <div class="topic-icon">
                            <img src="../../assets/icons/comprehension-icon.svg" alt="阅读理解图标">
                        </div>
                        <h3>阅读理解</h3>
                        <p>理解文本、推断和批判性阅读</p>
                    </div>
                    <div class="topic-card" data-topic="poetry">
                        <div class="topic-icon">
                            <img src="../../assets/icons/poem-icon.svg" alt="诗歌图标">
                        </div>
                        <h3>诗歌</h3>
                        <p>诗歌形式、韵律、韵脚和解读</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- AI英语助手部分 -->
        <section class="ai-assistant-section">
            <div class="container">
                <div class="section-header">
                    <h2>AI英语<span class="gradient-text">助手</span></h2>
                    <p>获取语法、词汇、文学和写作方面的帮助</p>
                </div>
                <div class="assistant-container">
                    <div class="chat-container">
                        <div class="chat-header">
                            <i class="fas fa-robot"></i>
                            <h3>DeepSeek英语助手</h3>
                        </div>
                        <div class="chat-messages" id="english-chat-messages">
                            <div class="message message-ai">
                                <p>你好！我是你的DeepSeek英语助手。今天我能如何帮助你提高英语技能？</p>
                            </div>
                        </div>
                        <div class="chat-input">
                            <input type="text" id="english-question-input" placeholder="提问或输入文本进行分析...">
                            <button class="btn btn-primary" id="send-english-question">提问</button>
                        </div>
                    </div>
                    <div class="assistant-features">
                        <div class="feature-item">
                            <div class="feature-icon">
                                <i class="fas fa-spell-check"></i>
                            </div>
                            <div class="feature-content">
                                <h4>语法检查</h4>
                                <p>获取语法错误的纠正和解释</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">
                                <i class="fas fa-book"></i>
                            </div>
                            <div class="feature-content">
                                <h4>词汇帮助</h4>
                                <p>学习单词含义、同义词和正确用法</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">
                                <i class="fas fa-theater-masks"></i>
                            </div>
                            <div class="feature-content">
                                <h4>文学分析</h4>
                                <p>分析文本的主题、象征和含义</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 词汇练习部分 -->
        <section class="vocab-section bg-light">
            <div class="container">
                <div class="section-header">
                    <h2>词汇<span class="gradient-text">构建器</span></h2>
                    <p>通过互动学习工具扩展您的词汇量</p>
                </div>
                <div class="vocab-container">
                    <div class="vocab-controls">
                        <div class="form-group">
                            <label for="vocab-level">难度级别</label>
                            <select id="vocab-level" class="form-control">
                                <option value="elementary">初级</option>
                                <option value="intermediate" selected>中级</option>
                                <option value="advanced">高级</option>
                                <option value="academic">学术</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="vocab-category">类别</label>
                            <select id="vocab-category" class="form-control">
                                <option value="general">通用词汇</option>
                                <option value="academic">学术词汇</option>
                                <option value="literature">文学术语</option>
                                <option value="idioms">习语和短语</option>
                            </select>
                        </div>
                        <button id="generate-vocab" class="btn btn-primary">生成词汇</button>
                    </div>
                    <div id="vocab-container" class="vocab-content">
                        <p class="text-center">配置您的词汇选项并点击"生成词汇"开始学习。</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 诗歌分析部分 -->
        <section class="poetry-section">
            <div class="container">
                <div class="section-header">
                    <h2>诗歌<span class="gradient-text">分析</span></h2>
                    <p>在AI辅助下探索和分析诗歌</p>
                </div>
                <div class="poetry-container">
                    <div class="poetry-selector">
                        <div class="form-group">
                            <label for="poetry-period">时代</label>
                            <select id="poetry-period" class="form-control">
                                <option value="renaissance">文艺复兴</option>
                                <option value="romantic">浪漫主义</option>
                                <option value="victorian">维多利亚</option>
                                <option value="modern">现代</option>
                                <option value="contemporary">当代</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="poetry-style">风格</label>
                            <select id="poetry-style" class="form-control">
                                <option value="sonnet">十四行诗</option>
                                <option value="haiku">俳句</option>
                                <option value="ode">颂诗</option>
                                <option value="freeverse">自由诗</option>
                                <option value="narrative">叙事诗</option>
                            </select>
                        </div>
                        <button id="load-poem" class="btn btn-primary">加载诗歌</button>
                    </div>
                    <div id="poem-display" class="poem-content">
                        <div class="placeholder-content">
                            <img src="../../assets/icons/poem-icon.svg" alt="诗歌分析占位符">
                            <p>选择选项并点击"加载诗歌"，使用AI辅助分析诗歌。</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 写作助手部分 -->
        <section class="writing-section bg-light">
            <div class="container">
                <div class="section-header">
                    <h2>写作<span class="gradient-text">助手</span></h2>
                    <p>通过AI驱动的反馈和建议提高您的写作</p>
                </div>
                <div class="writing-container">
                    <div class="writing-tools">
                        <div class="form-group">
                            <label for="writing-type">写作类型</label>
                            <select id="writing-type" class="form-control">
                                <option value="essay">学术论文</option>
                                <option value="creative">创意写作</option>
                                <option value="report">报告</option>
                                <option value="letter">信件/邮件</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="writing-focus">重点领域</label>
                            <select id="writing-focus" class="form-control">
                                <option value="grammar">语法和技巧</option>
                                <option value="structure">结构和组织</option>
                                <option value="style">风格和语调</option>
                                <option value="overall">整体改进</option>
                            </select>
                        </div>
                    </div>
                    <div class="writing-editor">
                        <textarea id="writing-input" placeholder="在此输入您的文本进行分析和建议..."></textarea>
                        <button id="analyze-writing" class="btn btn-primary">分析写作</button>
                    </div>
                    <div id="writing-feedback" class="writing-feedback">
                        <p class="text-center">分析后您的写作反馈将显示在这里。</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="main-footer">
        <div class="container">
            <div class="footer-bottom">
                <p>&copy; 2023 学习助手。保留所有权利。</p>
            </div>
        </div>
    </footer>

    <script src="../../js/common.js"></script>
    <script src="../../js/navigation.js"></script>
    <script src="../../js/auth.js"></script>
    <script src="../../js/api.js"></script>
    <script src="../../js/profile.js"></script>
    <script src="../../js/education-level.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化API
            initAPI();
            
            // 英语聊天功能
            const chatInput = document.getElementById('english-question-input');
            const sendButton = document.getElementById('send-english-question');
            const chatMessages = document.getElementById('english-chat-messages');
            
            sendButton.addEventListener('click', function() {
                const question = chatInput.value.trim();
                if (question) {
                    // 添加用户消息
                    const userMessage = document.createElement('div');
                    userMessage.className = 'message message-user';
                    userMessage.innerHTML = `<p>${question}</p>`;
                    chatMessages.appendChild(userMessage);
                    
                    // 清空输入
                    chatInput.value = '';
                    
                    // 显示加载指示器
                    const loadingMessage = document.createElement('div');
                    loadingMessage.className = 'message message-ai message-loading';
                    loadingMessage.innerHTML = '<p>思考中...</p>';
                    chatMessages.appendChild(loadingMessage);
                    
                    // 滚动到底部
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                    
                    // 获取AI响应（模拟）
                    setTimeout(() => {
                        // 移除加载消息
                        chatMessages.removeChild(loadingMessage);
                        
                        // 模拟API调用
                        askQuestion(question, 'english')
                            .then(response => {
                                // 添加AI响应
                                const aiMessage = document.createElement('div');
                                aiMessage.className = 'message message-ai';
                                aiMessage.innerHTML = `<p>${response}</p>`;
                                chatMessages.appendChild(aiMessage);
                                
                                // 滚动到底部
                                chatMessages.scrollTop = chatMessages.scrollHeight;
                            })
                            .catch(error => {
                                console.error('错误:', error);
                                const errorMessage = document.createElement('div');
                                errorMessage.className = 'message message-error';
                                errorMessage.innerHTML = '<p>抱歉，我遇到了一个错误。请再试一次。</p>';
                                chatMessages.appendChild(errorMessage);
                                chatMessages.scrollTop = chatMessages.scrollHeight;
                            });
                    }, 1000);
                }
            });
            
            // 允许按回车键发送消息
            chatInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendButton.click();
                }
            });
            
            // 词汇生成器
            const generateVocabButton = document.getElementById('generate-vocab');
            const vocabContainer = document.getElementById('vocab-container');
            
            generateVocabButton.addEventListener('click', function() {
                const level = document.getElementById('vocab-level').value;
                const category = document.getElementById('vocab-category').value;
                
                // 显示加载
                vocabContainer.innerHTML = '<p class="loading">正在生成词汇列表...</p>';
                
                // 模拟API调用生成词汇
                setTimeout(() => {
                    // 在生产环境中这将是一个实际的API调用
                    const words = [
                        { word: 'Eloquent', definition: '口齿流利或有说服力的', example: 'She gave an eloquent speech that moved the audience.（她发表了一场感人的演讲，打动了观众。）' },
                        { word: 'Meticulous', definition: '非常细心；非常仔细和精确', example: 'He was meticulous in his research, checking every fact twice.（他在研究中非常细致，每个事实都核对两次。）' },
                        { word: 'Ambiguous', definition: '可作多种理解的；有双重含义的', example: 'The poem\'s ambiguous ending has been debated by scholars for decades.（这首诗模糊的结尾已被学者们讨论了几十年。）' },
                        { word: 'Benevolent', definition: '善意的；亲切的', example: 'The benevolent organization provided food and shelter to those in need.（这个慈善组织为有需要的人提供食物和住所。）' },
                        { word: 'Rhetoric', definition: '修辞；有效或有说服力的演讲或写作的艺术', example: 'The politician was known for his powerful rhetoric during debates.（这位政治家以在辩论中有力的修辞而闻名。）' }
                    ];
                    
                    let html = '<div class="vocab-list">';
                    let levelName, categoryName;
                    
                    // 翻译难度等级
                    switch(level) {
                        case 'elementary': levelName = '初级'; break;
                        case 'intermediate': levelName = '中级'; break;
                        case 'advanced': levelName = '高级'; break;
                        case 'academic': levelName = '学术'; break;
                        default: levelName = level;
                    }
                    
                    // 翻译类别
                    switch(category) {
                        case 'general': categoryName = '通用词汇'; break;
                        case 'academic': categoryName = '学术词汇'; break;
                        case 'literature': categoryName = '文学术语'; break;
                        case 'idioms': categoryName = '习语和短语'; break;
                        default: categoryName = category;
                    }
                    
                    html += `<h3>${levelName}${categoryName}</h3>`;
                    
                    words.forEach(word => {
                        html += `
                            <div class="vocab-card">
                                <h4>${word.word}</h4>
                                <p class="definition"><strong>定义:</strong> ${word.definition}</p>
                                <p class="example"><strong>示例:</strong> <em>${word.example}</em></p>
                                <button class="btn btn-small btn-secondary save-word">保存到我的列表</button>
                            </div>
                        `;
                    });
                    
                    html += `
                        <div class="vocab-actions">
                            <button class="btn btn-primary" id="more-words">加载更多词汇</button>
                            <button class="btn btn-secondary" id="practice-vocab">练习这些词汇</button>
                        </div>
                    </div>`;
                    
                    vocabContainer.innerHTML = html;
                    
                    // 为新按钮添加事件监听器
                    document.getElementById('more-words').addEventListener('click', function() {
                        generateVocabButton.click();
                    });
                    
                    document.querySelectorAll('.save-word').forEach(button => {
                        button.addEventListener('click', function() {
                            this.innerHTML = '已保存 ✓';
                            this.disabled = true;
                        });
                    });
                }, 1500);
            });
            
            // 诗歌分析功能
            const loadPoemButton = document.getElementById('load-poem');
            const poemDisplay = document.getElementById('poem-display');
            
            loadPoemButton.addEventListener('click', function() {
                const period = document.getElementById('poetry-period').value;
                const style = document.getElementById('poetry-style').value;
                
                // 显示加载
                poemDisplay.innerHTML = '<p class="loading">正在加载诗歌...</p>';
                
                // 模拟API调用加载诗歌
                setTimeout(() => {
                    // 在生产环境中这将是一个实际的API调用
                    let poemHtml = '<div class="poem-analysis">';
                    
                    if (style === 'sonnet' && period === 'romantic') {
                        poemHtml += `
                            <div class="poem-text">
                                <h3>"奥兹曼迪亚斯" - 珀西·比希·雪莱</h3>
                                <pre>
I met a traveller from an antique land,
Who said—"Two vast and trunkless legs of stone
Stand in the desert. . . . Near them, on the sand,
Half sunk a shattered visage lies, whose frown,
And wrinkled lip, and sneer of cold command,
Tell that its sculptor well those passions read
Which yet survive, stamped on these lifeless things,
The hand that mocked them, and the heart that fed;
And on the pedestal, these words appear:
My name is Ozymandias, King of Kings;
Look on my Works, ye Mighty, and despair!
Nothing beside remains. Round the decay
Of that colossal Wreck, boundless and bare
The lone and level sands stretch far away."</pre>
                            </div>
                            <div class="poem-breakdown">
                                <h4>分析</h4>
                                <p>这首著名的雪莱十四行诗探讨了权力、无常和即使是最强大的帝国也不可避免地衰落的主题。诗中描述了"奥兹曼迪亚斯"（法老拉美西斯二世的另一个名字）的雕像废墟，并反思了这位曾经伟大的统治者的作品如何已经崩塌为乌有。</p>
                                
                                <h4>文学手法</h4>
                                <ul>
                                    <li><strong>讽刺:</strong> 碑文夸耀伟大的作品，但却无物可存。</li>
                                    <li><strong>意象:</strong> 对"破碎的面容"和沙漠景观的生动描述。</li>
                                    <li><strong>象征主义:</strong> 破碎的雕像代表人类权力的暂时性。</li>
                                    <li><strong>结构:</strong> 十四行诗形式，但有不规则的韵律模式，打破传统。</li>
                                </ul>
                                
                                <h4>关键主题</h4>
                                <ul>
                                    <li>权力和人类成就的无常</li>
                                    <li>统治者和帝国的傲慢</li>
                                    <li>时间侵蚀所有人类创造物的力量</li>
                                    <li>人类雄心与自然力量之间的对比</li>
                                </ul>
                            </div>
                        `;
                    } else {
                        poemHtml += `
                            <div class="placeholder-content">
                                <p>这里会显示${period}时期的${style}诗歌及完整分析。</p>
                                <p>尝试选择"十四行诗"和"浪漫主义"查看完整示例。</p>
                            </div>
                        `;
                    }
                    
                    poemHtml += '</div>';
                    poemDisplay.innerHTML = poemHtml;
                }, 1500);
            });
            
            // 写作分析功能
            const analyzeWritingButton = document.getElementById('analyze-writing');
            const writingFeedback = document.getElementById('writing-feedback');
            
            analyzeWritingButton.addEventListener('click', function() {
                const writingInput = document.getElementById('writing-input').value.trim();
                const writingType = document.getElementById('writing-type').value;
                const focusArea = document.getElementById('writing-focus').value;
                
                if (writingInput.length < 20) {
                    writingFeedback.innerHTML = '<p class="error">请输入更多文本以获得有意义的分析（至少20个字符）。</p>';
                    return;
                }
                
                // 显示加载
                writingFeedback.innerHTML = '<p class="loading">正在分析您的写作...</p>';
                
                // 模拟API调用进行写作分析
                setTimeout(() => {
                    // 在生产环境中这将是一个实际的API调用
                    let feedbackHtml = '<div class="writing-analysis">';
                    feedbackHtml += '<h3>写作分析</h3>';
                    
                    // 简单的演示反馈
                    feedbackHtml += `
                        <div class="feedback-section">
                            <h4>整体评估</h4>
                            <div class="feedback-meter">
                                <div class="meter-fill" style="width: 75%"></div>
                            </div>
                            <p>您的写作表明对主题有良好的理解和清晰的组织。在句子多样性和词汇选择方面有一些需要改进的地方。</p>
                        </div>
                        
                        <div class="feedback-section">
                            <h4>优势</h4>
                            <ul>
                                <li>明确的主旨和目的</li>
                                <li>思想的逻辑组织</li>
                                <li>良好地使用支持细节</li>
                            </ul>
                        </div>
                        
                        <div class="feedback-section">
                            <h4>改进领域</h4>
                            <ul>
                                <li>考虑变换句子结构以改善流畅度</li>
                                <li>某些词汇可以更精确</li>
                                <li>段落之间的过渡可以更强</li>
                            </ul>
                        </div>
                        
                        <div class="feedback-section">
                            <h4>高亮文本</h4>
                            <div class="highlighted-text">
                                ${writingInput.replace(/\n/g, '<br>')}
                            </div>
                        </div>
                        
                        <button class="btn btn-primary" id="detailed-suggestions">获取详细建议</button>
                    `;
                    
                    feedbackHtml += '</div>';
                    writingFeedback.innerHTML = feedbackHtml;
                    
                    // 为详细建议按钮添加事件监听器
                    document.getElementById('detailed-suggestions').addEventListener('click', function() {
                        alert('在完整版中，这里会提供逐行建议以改进您的写作。');
                    });
                }, 2000);
            });
        });
    </script>
</body>
</html> 