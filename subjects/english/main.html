<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>英语 - 学习助手</title>
    <link rel="icon" href="../../assets/icons/logo_btrfly.ico" type="image/x-icon">
    <link rel="stylesheet" href="../../css/common.css">
    <link rel="stylesheet" href="../../css/components.css">
    <link rel="stylesheet" href="../../css/utilities.css">
    <link rel="stylesheet" href="../../css/responsive.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Footer Styles */
        .footer-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 1rem;
            padding: 1rem 0;
        }

        .copyright-text {
            margin: 0;
            color: #4a5568;
            font-size: 0.9rem;
        }
        
        /* Profile Section Styles */
        .profile-section {
            position: relative;
            display: flex;
            align-items: center;
        }
        
        .profile-button {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: linear-gradient(135deg, rgba(67, 97, 238, 0.1), rgba(114, 9, 183, 0.1));
            border: none;
            border-radius: 25px;
            padding: 0.5rem 1rem;
            font-size: 0.9rem;
            color: #4361ee;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
        }
        
        .profile-button:hover {
            background: linear-gradient(135deg, rgba(67, 97, 238, 0.2), rgba(114, 9, 183, 0.2));
        }
        
        .profile-display {
            position: relative;
            margin-left: 1rem;
            background: rgba(255, 255, 255, 0.7);
            padding: 0.4rem 0.8rem;
            border-radius: 20px;
            font-size: 0.9rem;
            color: #4361ee;
            font-weight: 500;
            box-shadow: 0 2px 8px rgba(67, 97, 238, 0.1);
            display: inline-block;
        }

        /* English Card Styles */
        .english-cards-section {
            padding: 4rem 0;
            background-color: #f8f9fa;
        }
        
        .english-cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }
        
        .english-card {
            background: #fff;
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            border-top: 5px solid transparent;
        }
        
        .english-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, #4361ee, #7209b7);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .english-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        }
        
        .english-card:hover::before {
            opacity: 1;
        }
        
        .card-icon {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: linear-gradient(135deg, #f0f4ff, #e6eaff);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1.5rem;
        }
        
        .card-icon i {
            font-size: 2rem;
            background: linear-gradient(90deg, #4361ee, #7209b7);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .card-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: #2d3748;
        }
        
        .card-description {
            color: #718096;
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }
        
        .card-features {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }
        
        .card-features .feature {
            color: #4a5568;
            font-size: 0.9rem;
        }
        
        .card-features .feature i {
            color: #4361ee;
            margin-right: 0.5rem;
        }
        
        .card-btn {
            background: linear-gradient(90deg, #4361ee, #7209b7);
            color: white;
            border: none;
            border-radius: 10px;
            padding: 0.8rem 0;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: auto;
        }
        
        .card-btn:hover {
            background: linear-gradient(90deg, #3b57d1, #6507a3);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(67, 97, 238, 0.3);
        }
        
        /* Content Panels */
        .content-panels {
            position: relative;
            padding: 2rem 0;
        }
        
        .content-panel {
            background: #fff;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-bottom: 2rem;
            overflow: hidden;
            display: none;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s ease, transform 0.5s ease;
        }
        
        .content-panel.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }
        
        .panel-header {
            background: linear-gradient(90deg, #4361ee, #7209b7);
            color: white;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .panel-header h3 {
            margin: 0;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }
        
        .close-panel {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
        }
        
        .close-panel:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .panel-content {
            padding: 2rem;
        }
        
        .panel-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .panel-result {
            border-top: 1px solid #e2e8f0;
            padding-top: 2rem;
            min-height: 300px;
        }
        
        /* Writing Editor */
        .writing-editor {
            margin-bottom: 2rem;
        }
        
        .writing-editor textarea {
            width: 100%;
            height: 200px;
            padding: 1rem;
            border: 1px solid #e2e8f0;
            border-radius: 10px;
            margin-bottom: 1rem;
            resize: vertical;
        }
        
        /* Media Queries */
        @media (max-width: 768px) {
            .english-cards-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
            
            .panel-controls {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .footer-content {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }

            .profile-section {
                width: 100%;
                display: flex;
                align-items: center;
                justify-content: flex-start;
                gap: 0.8rem;
            }

            .profile-button {
                width: auto;
                max-width: 100%;
            }
            
            .profile-display {
                margin-left: 0;
            }
        }
    </style>
</head>
<body>
    <header class="main-header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <a href="../../index.html">
                        <i class="fas fa-graduation-cap" style="background: linear-gradient(90deg, #4361ee, #7209b7); -webkit-background-clip: text; background-clip: text; color: transparent;"></i>
                        <span class="gradient-text">Alex的学习助手</span>
                    </a>
                </div>
                <nav class="main-nav">
                    <ul>
                        <li><a href="../../index.html">首页</a></li>
                        <li><a href="../../index.html#subjects">科目</a></li>
                        <li><a href="../../tts.html">语音</a></li>
                        <li><a href="../../draw.html">绘图</a></li>
                    </ul>
                </nav>
                <button class="mobile-menu-toggle" aria-label="切换菜单">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
        </div>
    </header>

    <main>
        <!-- 英雄部分 -->
        <section class="subject-hero">
            <div class="container">
                <div class="subject-hero-content">
                    <h1>英语<span class="gradient-text">学习</span></h1>
                    <p class="subject-description">在DeepSeek AI的辅助下掌握英语。提高语法，扩展词汇，分析文学，并通过个性化指导发展写作技能。</p>
                </div>
            </div>
        </section>

        <!-- 英语学习卡片部分 -->
        <section class="english-cards-section">
            <div class="container">
                <div class="section-header">
                    <h2>英语<span class="gradient-text">学习区</span></h2>
                    <p>选择一个学习区域开始您的英语学习之旅</p>
                </div>
                
                <div class="english-cards-grid">
                    <!-- 单词卡 -->
                    <div class="english-card" data-category="vocabulary">
                        <div class="card-icon">
                            <i class="fas fa-book"></i>
                        </div>
                        <h3 class="card-title">单词学习</h3>
                        <p class="card-description">扩展您的词汇量，掌握词义、用法和发音</p>
                        <div class="card-features">
                            <span class="feature"><i class="fas fa-check"></i> 分级词汇表</span>
                            <span class="feature"><i class="fas fa-check"></i> 记忆技巧</span>
                            <span class="feature"><i class="fas fa-check"></i> 情境例句</span>
                        </div>
                        <a href="vocabulary.html" class="card-btn">开始学习</a>
                    </div>
                    
                    <!-- 语法卡 -->
                    <div class="english-card" data-category="grammar">
                        <div class="card-icon">
                            <i class="fas fa-spell-check"></i>
                        </div>
                        <h3 class="card-title">语法掌握</h3>
                        <p class="card-description">学习英语语法规则、句式结构和正确用法</p>
                        <div class="card-features">
                            <span class="feature"><i class="fas fa-check"></i> 语法规则</span>
                            <span class="feature"><i class="fas fa-check"></i> 句型练习</span>
                            <span class="feature"><i class="fas fa-check"></i> 常见错误</span>
                        </div>
                        <button class="card-btn" onclick="window.location.href='grammar.html'">开始学习</button>
                    </div>
                    
                    <!-- 口语卡 -->
                    <div class="english-card" data-category="speaking">
                        <div class="card-icon">
                            <i class="fas fa-comments"></i>
                        </div>
                        <h3 class="card-title">口语练习</h3>
                        <p class="card-description">提高您的英语口语表达能力和流利度</p>
                        <div class="card-features">
                            <span class="feature"><i class="fas fa-check"></i> 日常对话</span>
                            <span class="feature"><i class="fas fa-check"></i> 发音指导</span>
                            <span class="feature"><i class="fas fa-check"></i> 实用表达</span>
                        </div>
                        <button class="card-btn" onclick="window.location.href='speaking.html'">开始学习</button>
                    </div>
                    
                    <!-- 写作卡 -->
                    <div class="english-card" data-category="writing">
                        <div class="card-icon">
                            <i class="fas fa-pen-fancy"></i>
                        </div>
                        <h3 class="card-title">写作提升</h3>
                        <p class="card-description">通过AI辅导提高您的英语写作能力</p>
                        <div class="card-features">
                            <span class="feature"><i class="fas fa-check"></i> 写作技巧</span>
                            <span class="feature"><i class="fas fa-check"></i> 文章结构</span>
                            <span class="feature"><i class="fas fa-check"></i> AI反馈</span>
                        </div>
                        <button class="card-btn" onclick="window.location.href='writing.html'">开始学习</button>
                    </div>
                    
                    <!-- 阅读卡 -->
                    <div class="english-card" data-category="reading">
                        <div class="card-icon">
                            <i class="fas fa-book-reader"></i>
                        </div>
                        <h3 class="card-title">阅读理解</h3>
                        <p class="card-description">提高英语阅读理解能力和批判性思维</p>
                        <div class="card-features">
                            <span class="feature"><i class="fas fa-check"></i> 阅读材料</span>
                            <span class="feature"><i class="fas fa-check"></i> 理解测试</span>
                            <span class="feature"><i class="fas fa-check"></i> 分析技巧</span>
                        </div>
                        <button class="card-btn" onclick="window.location.href='reading.html'">开始学习</button>
                    </div>
                    
                    <!-- 测试卡 -->
                    <div class="english-card" data-category="testing">
                        <div class="card-icon">
                            <i class="fas fa-tasks"></i>
                        </div>
                        <h3 class="card-title">能力测试</h3>
                        <p class="card-description">测试您的英语水平并获取个性化学习建议</p>
                        <div class="card-features">
                            <span class="feature"><i class="fas fa-check"></i> 多种测试</span>
                            <span class="feature"><i class="fas fa-check"></i> 即时反馈</span>
                            <span class="feature"><i class="fas fa-check"></i> 进度追踪</span>
                        </div>
                        <a href="testing.html" class="card-btn">开始测试</a>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- 内容面板区域 -->
        <section class="content-panels">
            <div class="container">
                <!-- 单词学习面板 -->
                <div id="vocabulary-panel" class="content-panel">
                    <div class="panel-header">
                        <h3><i class="fas fa-book"></i> 单词学习</h3>
                        <button class="close-panel"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="panel-content">
                        <div class="panel-controls">
                            <div class="form-group">
                                <label for="vocab-level">词汇级别</label>
                                <select id="vocab-level" class="form-control">
                                    <option value="elementary">初级</option>
                                    <option value="intermediate" selected>中级</option>
                                    <option value="advanced">高级</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="vocab-category">词汇类别</label>
                                <select id="vocab-category" class="form-control">
                                    <option value="daily">日常用语</option>
                                    <option value="academic">学术词汇</option>
                                    <option value="business">商务英语</option>
                                    <option value="idioms">习语成语</option>
                                </select>
                            </div>
                            <button id="generate-vocabulary" class="btn btn-primary">生成词汇表</button>
                        </div>
                        <div id="vocabulary-content" class="panel-result">
                            <p class="text-center">选择词汇级别和类别后点击"生成词汇表"开始学习。</p>
                        </div>
                    </div>
                </div>
                
                <!-- 语法学习面板 -->
                <div id="grammar-panel" class="content-panel">
                    <div class="panel-header">
                        <h3><i class="fas fa-spell-check"></i> 语法掌握</h3>
                        <button class="close-panel"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="panel-content">
                        <div class="panel-controls">
                            <div class="form-group">
                                <label for="grammar-topic">语法主题</label>
                                <select id="grammar-topic" class="form-control">
                                    <option value="tenses">时态</option>
                                    <option value="articles">冠词</option>
                                    <option value="prepositions">介词</option>
                                    <option value="conditionals">条件句</option>
                                    <option value="passive">被动语态</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="grammar-level">难度级别</label>
                                <select id="grammar-level" class="form-control">
                                    <option value="elementary">初级</option>
                                    <option value="intermediate" selected>中级</option>
                                    <option value="advanced">高级</option>
                                </select>
                            </div>
                            <button id="generate-grammar" class="btn btn-primary">学习语法</button>
                        </div>
                        <div id="grammar-content" class="panel-result">
                            <p class="text-center">选择语法主题和难度级别后点击"学习语法"开始学习。</p>
                        </div>
                    </div>
                </div>
                
                <!-- 口语练习面板 -->
                <div id="speaking-panel" class="content-panel">
                    <div class="panel-header">
                        <h3><i class="fas fa-comments"></i> 口语练习</h3>
                        <button class="close-panel"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="panel-content">
                        <div class="panel-controls">
                            <div class="form-group">
                                <label for="speaking-scenario">对话场景</label>
                                <select id="speaking-scenario" class="form-control">
                                    <option value="daily">日常对话</option>
                                    <option value="travel">旅行交流</option>
                                    <option value="business">商务会谈</option>
                                    <option value="academic">学术讨论</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="speaking-level">难度级别</label>
                                <select id="speaking-level" class="form-control">
                                    <option value="elementary">初级</option>
                                    <option value="intermediate" selected>中级</option>
                                    <option value="advanced">高级</option>
                                </select>
                            </div>
                            <button id="generate-speaking" class="btn btn-primary">生成对话</button>
                        </div>
                        <div id="speaking-content" class="panel-result">
                            <p class="text-center">选择对话场景和难度级别后点击"生成对话"开始练习。</p>
                        </div>
                    </div>
                </div>
                
                <!-- 写作提升面板 -->
                <div id="writing-panel" class="content-panel">
                    <div class="panel-header">
                        <h3><i class="fas fa-pen-fancy"></i> 写作提升</h3>
                        <button class="close-panel"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="panel-content">
                        <div class="panel-controls">
                            <div class="form-group">
                                <label for="writing-type">写作类型</label>
                                <select id="writing-type" class="form-control">
                                    <option value="creative">创意写作</option>
                                    <option value="report">报告</option>
                                    <option value="letter">信件/邮件</option>
                                    <option value="essay">议论文</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="writing-focus">重点领域</label>
                                <select id="writing-focus" class="form-control">
                                    <option value="grammar">语法和技巧</option>
                                    <option value="structure">结构和组织</option>
                                    <option value="style">风格和语调</option>
                                    <option value="overall">整体改进</option>
                                </select>
                            </div>
                        </div>
                        <div class="writing-editor">
                            <textarea id="writing-input" placeholder="在此输入您的文本进行分析和建议..."></textarea>
                            <button id="analyze-writing" class="btn btn-primary">分析写作</button>
                        </div>
                        <div id="writing-feedback" class="writing-feedback panel-result">
                            <p class="text-center">分析后您的写作反馈将显示在这里。</p>
                        </div>
                    </div>
                </div>
                
                <!-- 阅读理解面板 -->
                <div id="reading-panel" class="content-panel">
                    <div class="panel-header">
                        <h3><i class="fas fa-book-reader"></i> 阅读理解</h3>
                        <button class="close-panel"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="panel-content">
                        <div class="panel-controls">
                            <div class="form-group">
                                <label for="reading-test-type">测试类型</label>
                                <select id="reading-test-type" class="form-control">
                                    <option value="cloze">完形填空</option>
                                    <option value="comprehension">阅读理解</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="reading-test-difficulty">难度级别</label>
                                <select id="reading-test-difficulty" class="form-control">
                                    <option value="easy">初级</option>
                                    <option value="medium" selected>中级</option>
                                    <option value="hard">高级</option>
                                </select>
                            </div>
                            <div class="form-group" id="reading-test-questions-container">
                                <label for="reading-test-questions">题目数量</label>
                                <select id="reading-test-questions" class="form-control">
                                    <option value="10" selected>10题</option>
                                </select>
                            </div>
                            <button class="btn btn-primary" id="generate-reading-test">生成测验</button>
                        </div>
                        <div id="reading-test-container" class="panel-result">
                            <p class="text-center">选择测试类型和难度级别后点击"生成测验"开始练习。</p>
                        </div>
                    </div>
                </div>
                
                <!-- 能力测试面板 -->
                <div id="testing-panel" class="content-panel">
                    <div class="panel-header">
                        <h3><i class="fas fa-tasks"></i> 能力测试</h3>
                        <button class="close-panel"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="panel-content">
                        <div class="panel-controls">
                            <div class="form-group">
                                <label for="quiz-topic">测试主题</label>
                                <select id="quiz-topic" class="form-control">
                                    <option value="grammar">语法</option>
                                    <option value="vocabulary">词汇</option>
                                    <option value="mixed" selected>综合</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="quiz-difficulty">难度级别</label>
                                <select id="quiz-difficulty" class="form-control">
                                    <option value="easy">初级</option>
                                    <option value="medium" selected>中级</option>
                                    <option value="hard">高级</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="quiz-questions">题目数量</label>
                                <select id="quiz-questions" class="form-control">
                                    <option value="5">5题</option>
                                    <option value="10" selected>10题</option>
                                    <option value="15">15题</option>
                                </select>
                            </div>
                            <button class="btn btn-primary" id="generate-quiz">生成测验</button>
                        </div>
                        <div id="quiz-container" class="panel-result">
                            <p class="text-center">选择测试主题和难度级别后点击"生成测验"开始测试。</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- AI英语助手部分 -->
        <!--
        <section class="ai-assistant-section">
            <div class="container">
                <div class="section-header">
                    <h2>AI英语<span class="gradient-text">助手</span></h2>
                    <p>获取语法、词汇、文学和写作方面的帮助</p>
                </div>
                <div class="assistant-container">
                    <div class="chat-container">
                        <div class="chat-header">
                            <i class="fas fa-robot"></i>
                            <h3>DeepSeek英语助手</h3>
                        </div>
                        <div class="chat-messages" id="english-chat-messages">
                            <div class="message message-ai">
                                <p>你好！我是你的DeepSeek英语助手。今天我能如何帮助你提高英语技能？</p>
                            </div>
                        </div>
                        <div class="chat-input">
                            <input type="text" id="english-question-input" placeholder="提问或输入文本进行分析...">
                            <button class="btn btn-primary" id="send-english-question">提问</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        -->
    </main>

    <footer class="main-footer">
        <div class="container">
            <div class="footer-content">
                <p class="copyright-text">study-llm.me域名为Alex所有。保留所有权利。</p>
                <div class="profile-section">
                    <button id="profile-button" class="profile-button">
                        <i class="fas fa-user-circle"></i>
                        学习阶段
                    </button>
                    <div id="profile-display" class="profile-display"></div>
                </div>
            </div>
        </div>
    </footer>

    <script src="../../js/common.js"></script>
    <script src="../../js/navigation.js"></script>
    <script src="../../js/profile.js"></script>
    <script src="script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize the card navigation system
            initCardNavigation();
            
            // Initialize existing functionality
            if (typeof initAPI === 'function') {
                initAPI();
            }
            
            // English chat input handling
            const chatInput = document.getElementById('english-question-input');
            const sendButton = document.getElementById('send-english-question');
            
            if (chatInput && sendButton) {
            chatInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendButton.click();
                }
            });
            }
            
            // Reading test type and questions linking
            const readingTestType = document.getElementById('reading-test-type');
            const readingTestQuestions = document.getElementById('reading-test-questions');
            
            if (readingTestType && readingTestQuestions) {
            readingTestType.addEventListener('change', function() {
                const testType = this.value;
                readingTestQuestions.innerHTML = '';
                
                if (testType === 'cloze') {
                    readingTestQuestions.innerHTML = '<option value="10" selected>10题</option>';
                } else if (testType === 'comprehension') {
                    readingTestQuestions.innerHTML = '<option value="5" selected>5题</option>';
                }
            });
            }
            
            // Hook up existing buttons to their functionality
            setupExistingButtons();
        });
        
        // Initialize card navigation system
        function initCardNavigation() {
            const cardButtons = document.querySelectorAll('.card-btn');
            const contentPanels = document.querySelectorAll('.content-panel');
            const closePanelButtons = document.querySelectorAll('.close-panel');
            
            // Card button click handlers
            cardButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const targetPanel = this.getAttribute('data-target');
                    
                    // Hide all panels
                    contentPanels.forEach(panel => {
                        panel.classList.remove('active');
            });
            
                    // Show target panel
                    const panel = document.getElementById(targetPanel);
                    if (panel) {
                        panel.classList.add('active');
                        // Scroll to panel
                        panel.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                });
            });
            
            // Close panel buttons
            closePanelButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const panel = this.closest('.content-panel');
                    if (panel) {
                        panel.classList.remove('active');
                        // Scroll back to cards
                        document.querySelector('.english-cards-section').scrollIntoView({ behavior: 'smooth' });
                }
            });
            });
        }
        
        // Connect existing button functionality
        function setupExistingButtons() {
            // Quiz generator button
            const generateQuizBtn = document.getElementById('generate-quiz');
            if (generateQuizBtn) {
                generateQuizBtn.addEventListener('click', function() {
                    const quizContainer = document.getElementById('quiz-container');
                    if (quizContainer) {
                        quizContainer.innerHTML = '<div class="loading">正在生成测验，请稍候...</div>';
                    }
                    
                    if (typeof window.generateQuiz === 'function') {
                        window.generateQuiz();
                    } else {
                        console.warn('generateQuiz function not found');
                    }
                });
            }
            
            // Reading test generator button
            const generateReadingTestBtn = document.getElementById('generate-reading-test');
            if (generateReadingTestBtn) {
                generateReadingTestBtn.addEventListener('click', function() {
                    const container = document.getElementById('reading-test-container');
                    if (container) {
                        container.innerHTML = '<div class="loading">正在生成阅读测试，请稍候...</div>';
                    }
                    
                    if (typeof window.generateReadingTest === 'function') {
                        window.generateReadingTest();
                    } else {
                        console.warn('generateReadingTest function not found');
            }
        });
            }
            
            // Writing analysis button
            const analyzeWritingBtn = document.getElementById('analyze-writing');
            if (analyzeWritingBtn) {
                analyzeWritingBtn.addEventListener('click', function() {
                    const feedbackContainer = document.getElementById('writing-feedback');
                    if (feedbackContainer) {
                        feedbackContainer.innerHTML = '<div class="loading">正在分析您的写作，请稍候...</div>';
                    }
                    
                    if (typeof window.analyzeWriting === 'function') {
                        window.analyzeWriting();
                    } else {
                        console.warn('analyzeWriting function not found');
                    }
                });
            }
            
            // Add new functionality for vocabulary and grammar
            const generateVocabularyBtn = document.getElementById('generate-vocabulary');
            if (generateVocabularyBtn) {
                generateVocabularyBtn.addEventListener('click', function() {
                    const vocabularyContent = document.getElementById('vocabulary-content');
                    if (vocabularyContent) {
                        vocabularyContent.innerHTML = '<div class="loading">正在生成词汇表，请稍候...</div>';
                    }
                    
                    if (typeof window.generateVocabulary === 'function') {
                        window.generateVocabulary();
                    } else {
                        // Fallback implementation
                        setTimeout(() => {
                            vocabularyContent.innerHTML = '<p class="text-center">词汇生成功能即将上线，敬请期待！</p>';
                        }, 1500);
                    }
                });
            }
            
            // Grammar generation
            const generateGrammarBtn = document.getElementById('generate-grammar');
            if (generateGrammarBtn) {
                generateGrammarBtn.addEventListener('click', function() {
                    const grammarContent = document.getElementById('grammar-content');
                    if (grammarContent) {
                        grammarContent.innerHTML = '<div class="loading">正在生成语法内容，请稍候...</div>';
                    }
                    
                    if (typeof window.generateGrammar === 'function') {
                        window.generateGrammar();
                    } else {
                        // Fallback implementation
                        setTimeout(() => {
                            grammarContent.innerHTML = '<p class="text-center">语法学习功能即将上线，敬请期待！</p>';
                        }, 1500);
                    }
                });
            }
            
            // Speaking practice
            const generateSpeakingBtn = document.getElementById('generate-speaking');
            if (generateSpeakingBtn) {
                generateSpeakingBtn.addEventListener('click', function() {
                    const speakingContent = document.getElementById('speaking-content');
                    if (speakingContent) {
                        speakingContent.innerHTML = '<div class="loading">正在生成口语对话，请稍候...</div>';
                    }
                    
                    if (typeof window.generateSpeaking === 'function') {
                        window.generateSpeaking();
            } else {
                        // Fallback implementation
                        setTimeout(() => {
                            speakingContent.innerHTML = '<p class="text-center">口语练习功能即将上线，敬请期待！</p>';
                        }, 1500);
            }
                });
            }
        }
        
        // Loading spinner style
        document.head.insertAdjacentHTML('beforeend', `
            <style>
                .loading {
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    flex-direction: column;
                    padding: 2rem;
                }
                
                .loading::before {
                    content: '';
                    width: 40px;
                    height: 40px;
                    border-radius: 50%;
                    border: 3px solid #e2e8f0;
                    border-top-color: #4361ee;
                    animation: spin 1s linear infinite;
                    margin-bottom: 1rem;
                }
                
                @keyframes spin {
                    to { transform: rotate(360deg); }
                }
            </style>
        `);
    </script>
</body>
</html> 