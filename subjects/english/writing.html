<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>写作提升 - 英语学习助手</title>
    <link rel="icon" href="../../assets/icons/alex.ico" type="image/x-icon">
    <link rel="stylesheet" href="../../css/common.css">
    <link rel="stylesheet" href="../../css/components.css">
    <link rel="stylesheet" href="../../css/utilities.css">
    <link rel="stylesheet" href="../../css/responsive.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        .writing-hero {
            background: linear-gradient(135deg, #6c5ce7 0%, #a29bfe 100%);
            color: white;
            padding: 4rem 0;
            text-align: center;
        }

        .writing-hero h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            font-weight: 700;
        }

        .writing-hero p {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
        }

        .writing-tabs {
            display: flex;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin: 2rem 0;
            overflow: hidden;
        }

        .writing-tab {
            flex: 1;
            padding: 1rem 2rem;
            background: #f8f9fa;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .writing-tab.active {
            background: linear-gradient(135deg, #6c5ce7, #a29bfe);
            color: white;
        }

        .writing-tab:hover:not(.active) {
            background: #e9ecef;
        }

        .writing-content {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .writing-panel {
            display: none;
        }

        .writing-panel.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .writing-types-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .writing-type-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .writing-type-card:hover {
            background: #e9ecef;
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .writing-type-card.selected {
            border-color: #6c5ce7;
            background: linear-gradient(135deg, rgba(108, 92, 231, 0.1), rgba(162, 155, 254, 0.1));
        }

        .writing-type-card h3 {
            color: #6c5ce7;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .writing-editor {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 2rem;
            margin-top: 2rem;
        }

        .editor-toolbar {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .toolbar-btn {
            background: #6c5ce7;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 0.5rem 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .toolbar-btn:hover {
            background: #5a4fcf;
        }

        .writing-textarea {
            width: 100%;
            min-height: 300px;
            padding: 1.5rem;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 1rem;
            line-height: 1.6;
            resize: vertical;
            font-family: 'Poppins', sans-serif;
        }

        .writing-textarea:focus {
            outline: none;
            border-color: #6c5ce7;
            box-shadow: 0 0 0 3px rgba(108, 92, 231, 0.1);
        }

        .writing-stats {
            display: flex;
            gap: 2rem;
            margin: 1rem 0;
            padding: 1rem;
            background: white;
            border-radius: 8px;
            flex-wrap: wrap;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 1.5rem;
            font-weight: 700;
            color: #6c5ce7;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #636e72;
        }

        .feedback-container {
            background: white;
            border-radius: 10px;
            padding: 2rem;
            margin-top: 2rem;
        }

        .feedback-section {
            margin-bottom: 2rem;
            padding: 1.5rem;
            border-radius: 8px;
            border-left: 4px solid #6c5ce7;
        }

        .feedback-section.grammar {
            background: linear-gradient(135deg, rgba(231, 76, 60, 0.1), rgba(192, 57, 43, 0.1));
            border-left-color: #e74c3c;
        }

        .feedback-section.style {
            background: linear-gradient(135deg, rgba(52, 152, 219, 0.1), rgba(41, 128, 185, 0.1));
            border-left-color: #3498db;
        }

        .feedback-section.structure {
            background: linear-gradient(135deg, rgba(46, 204, 113, 0.1), rgba(39, 174, 96, 0.1));
            border-left-color: #2ecc71;
        }

        .feedback-section.vocabulary {
            background: linear-gradient(135deg, rgba(155, 89, 182, 0.1), rgba(142, 68, 173, 0.1));
            border-left-color: #9b59b6;
        }

        .feedback-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .feedback-item {
            background: white;
            border-radius: 6px;
            padding: 1rem;
            margin-bottom: 0.5rem;
            border-left: 3px solid #6c5ce7;
        }

        .feedback-text {
            margin-bottom: 0.5rem;
        }

        .feedback-suggestion {
            color: #27ae60;
            font-style: italic;
            font-size: 0.9rem;
        }

        .prompt-card {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            border-left: 4px solid #6c5ce7;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .prompt-card:hover {
            background: #f8f9fa;
            transform: translateX(5px);
        }

        .prompt-title {
            font-weight: 600;
            color: #2d3436;
            margin-bottom: 0.5rem;
        }

        .prompt-description {
            color: #636e72;
            font-size: 0.9rem;
        }

        .template-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 2rem;
            margin-top: 2rem;
        }

        .template-card {
            background: white;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            border: 1px solid #e9ecef;
        }

        .template-title {
            font-weight: 600;
            color: #6c5ce7;
            margin-bottom: 1rem;
        }

        .template-content {
            background: #f8f9fa;
            border-radius: 6px;
            padding: 1rem;
            font-family: monospace;
            font-size: 0.9rem;
            line-height: 1.6;
            white-space: pre-line;
        }

        .score-circle {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: conic-gradient(#6c5ce7 0deg, #6c5ce7 var(--score-deg), #e9ecef var(--score-deg), #e9ecef 360deg);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
            position: relative;
        }

        .score-circle::before {
            content: '';
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: white;
            position: absolute;
        }

        .score-number {
            font-size: 1.5rem;
            font-weight: 700;
            color: #6c5ce7;
            z-index: 1;
        }

        @media (max-width: 768px) {
            .writing-tabs {
                flex-direction: column;
            }

            .writing-tab {
                padding: 0.8rem 1rem;
            }

            .writing-hero h1 {
                font-size: 2rem;
            }

            .writing-types-grid {
                grid-template-columns: 1fr;
            }

            .writing-stats {
                flex-direction: column;
                gap: 1rem;
            }

            .editor-toolbar {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <header class="main-header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <a href="../../index.html">
                        <i class="fas fa-graduation-cap" style="background: linear-gradient(90deg, #4361ee, #7209b7); -webkit-background-clip: text; background-clip: text; color: transparent;"></i>
                        <span class="gradient-text">Alex的学习助手</span>
                    </a>
                </div>
                <nav class="main-nav">
                    <ul>
                        <li><a href="../../index.html">首页</a></li>
                        <li><a href="../../index.html#subjects">科目</a></li>
                        <li><a href="../../tts.html">语音</a></li>
                        <li><a href="../../draw.html">绘图</a></li>
                        <li><a href="index.html">返回英语</a></li>
                    </ul>
                </nav>
                <button class="mobile-menu-toggle" aria-label="切换菜单">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
        </div>
    </header>

    <main>
        <!-- Hero Section -->
        <section class="writing-hero">
            <div class="container">
                <h1><i class="fas fa-pen-fancy"></i> 写作提升</h1>
                <p>通过AI辅导和专业反馈提高您的英语写作技能，掌握各种写作类型</p>
            </div>
        </section>

        <!-- Main Content -->
        <section class="main-content">
            <div class="container">
                <!-- Writing Tabs -->
                <div class="writing-tabs">
                    <button class="writing-tab active" data-tab="learn">
                        <i class="fas fa-pen-fancy"></i> 写作技巧
                    </button>
                    <button class="writing-tab" data-tab="practice">
                        <i class="fas fa-edit"></i> 写作练习
                    </button>
                    <button class="writing-tab" data-tab="analysis">
                        <i class="fas fa-chart-line"></i> 写作分析
                    </button>
                    <button class="writing-tab" data-tab="reference">
                        <i class="fas fa-bookmark"></i> 写作手册
                    </button>
                </div>

                <!-- Editor Panel -->
                <div id="editor-panel" class="writing-content writing-panel active">
                    <h2><i class="fas fa-edit"></i> 选择写作类型</h2>
                    <div class="writing-types-grid">
                        <div class="writing-type-card" data-type="essay">
                            <h3><i class="fas fa-graduation-cap"></i> 议论文</h3>
                            <p>学术写作，表达观点和论证</p>
                        </div>
                        <div class="writing-type-card" data-type="letter">
                            <h3><i class="fas fa-envelope"></i> 信件/邮件</h3>
                            <p>正式和非正式的书信写作</p>
                        </div>
                        <div class="writing-type-card" data-type="report">
                            <h3><i class="fas fa-chart-bar"></i> 报告</h3>
                            <p>商务报告和研究报告</p>
                        </div>
                        <div class="writing-type-card" data-type="creative">
                            <h3><i class="fas fa-magic"></i> 创意写作</h3>
                            <p>故事、诗歌和创意表达</p>
                        </div>
                        <div class="writing-type-card" data-type="review">
                            <h3><i class="fas fa-star"></i> 评论</h3>
                            <p>产品、电影、书籍评论</p>
                        </div>
                        <div class="writing-type-card" data-type="description">
                            <h3><i class="fas fa-image"></i> 描述文</h3>
                            <p>人物、地点、事物描述</p>
                        </div>
                    </div>

                    <div id="writing-editor" class="writing-editor" style="display: none;">
                        <div class="editor-toolbar">
                            <button class="toolbar-btn" onclick="insertText('**', '**')">
                                <i class="fas fa-bold"></i> 加粗
                            </button>
                            <button class="toolbar-btn" onclick="insertText('*', '*')">
                                <i class="fas fa-italic"></i> 斜体
                            </button>
                            <button class="toolbar-btn" onclick="insertText('\n- ', '')">
                                <i class="fas fa-list-ul"></i> 列表
                            </button>
                            <button class="toolbar-btn" onclick="insertText('\n> ', '')">
                                <i class="fas fa-quote-right"></i> 引用
                            </button>
                            <button class="toolbar-btn" onclick="clearEditor()">
                                <i class="fas fa-trash"></i> 清空
                            </button>
                            <button class="toolbar-btn" onclick="analyzeWriting()">
                                <i class="fas fa-search"></i> 分析
                            </button>
                        </div>
                        
                        <textarea id="writing-textarea" class="writing-textarea" placeholder="开始您的写作..."></textarea>
                        
                        <div class="writing-stats">
                            <div class="stat-item">
                                <div id="word-count" class="stat-number">0</div>
                                <div class="stat-label">单词</div>
                            </div>
                            <div class="stat-item">
                                <div id="char-count" class="stat-number">0</div>
                                <div class="stat-label">字符</div>
                            </div>
                            <div class="stat-item">
                                <div id="sentence-count" class="stat-number">0</div>
                                <div class="stat-label">句子</div>
                            </div>
                            <div class="stat-item">
                                <div id="paragraph-count" class="stat-number">0</div>
                                <div class="stat-label">段落</div>
                            </div>
                        </div>
                    </div>

                    <div id="feedback-container" class="feedback-container" style="display: none;">
                        <!-- Feedback will be displayed here -->
                    </div>
                </div>

                <!-- Prompts Panel -->
                <div id="prompts-panel" class="writing-content writing-panel">
                    <h2><i class="fas fa-lightbulb"></i> 写作提示</h2>
                    <div class="form-group">
                        <label for="prompt-category">选择提示类别：</label>
                        <select id="prompt-category" class="form-control">
                            <option value="academic">学术写作</option>
                            <option value="creative">创意写作</option>
                            <option value="business">商务写作</option>
                            <option value="personal">个人写作</option>
                        </select>
                    </div>
                    <button id="load-prompts" class="btn btn-primary">
                        <i class="fas fa-refresh"></i> 加载提示
                    </button>
                    <div id="prompts-content" class="template-section" style="display: none;">
                        <!-- Prompts will be loaded here -->
                    </div>
                </div>

                <!-- Templates Panel -->
                <div id="templates-panel" class="writing-content writing-panel">
                    <h2><i class="fas fa-file-alt"></i> 写作模板</h2>
                    <div class="form-group">
                        <label for="template-type">选择模板类型：</label>
                        <select id="template-type" class="form-control">
                            <option value="essay">议论文模板</option>
                            <option value="letter">信件模板</option>
                            <option value="report">报告模板</option>
                            <option value="email">邮件模板</option>
                        </select>
                    </div>
                    <button id="load-templates" class="btn btn-primary">
                        <i class="fas fa-download"></i> 加载模板
                    </button>
                    <div id="templates-content" class="template-section" style="display: none;">
                        <!-- Templates will be loaded here -->
                    </div>
                </div>

                <!-- Analysis Panel -->
                <div id="analysis-panel" class="writing-content writing-panel">
                    <h2><i class="fas fa-chart-line"></i> 写作分析</h2>
                    <p>上传或粘贴您的文本进行详细分析</p>
                    <div class="writing-editor">
                        <textarea id="analysis-textarea" class="writing-textarea" placeholder="粘贴您要分析的文本..."></textarea>
                        <button id="start-analysis" class="btn btn-primary">
                            <i class="fas fa-play"></i> 开始分析
                        </button>
                    </div>
                    <div id="analysis-results" class="feedback-container" style="display: none;">
                        <!-- Analysis results will be displayed here -->
                    </div>
                </div>

                <!-- 写作手册面板 -->
                <div id="reference-panel" class="writing-content writing-panel">
                    <h2><i class="fas fa-bookmark"></i> 写作手册</h2>
                    <p>快速查阅各类写作格式、技巧与范例</p>
                    <div class="writing-types-grid">
                        <div class="writing-type-card" data-reference="essay-structure">
                            <h3><i class="fas fa-paragraph"></i> 论文结构</h3>
                            <p>学术论文的标准结构与写作要点</p>
                        </div>
                        <div class="writing-type-card" data-reference="email-writing">
                            <h3><i class="fas fa-envelope"></i> 邮件写作</h3>
                            <p>正式与非正式邮件的格式与用语</p>
                        </div>
                        <div class="writing-type-card" data-reference="narrative">
                            <h3><i class="fas fa-book"></i> 叙事文写作</h3>
                            <p>故事与叙事性文章的写作技巧</p>
                        </div>
                        <div class="writing-type-card" data-reference="argumentative">
                            <h3><i class="fas fa-gavel"></i> 议论文写作</h3>
                            <p>有效论证与说服性写作指南</p>
                        </div>
                        <div class="writing-type-card" data-reference="business">
                            <h3><i class="fas fa-briefcase"></i> 商务写作</h3>
                            <p>专业商务文件与报告的写作规范</p>
                        </div>
                        <div class="writing-type-card" data-reference="cv-resume">
                            <h3><i class="fas fa-file-alt"></i> 简历写作</h3>
                            <p>有效简历与求职信的写作指南</p>
                        </div>
                        <div class="writing-type-card" data-reference="creative">
                            <h3><i class="fas fa-feather-alt"></i> 创意写作</h3>
                            <p>创意写作与文学表达技巧</p>
                        </div>
                        <div class="writing-type-card" data-reference="cohesion">
                            <h3><i class="fas fa-link"></i> 衔接与连贯</h3>
                            <p>增强文章连贯性与流畅度的技巧</p>
                        </div>
                        <div class="writing-type-card" data-reference="punctuation">
                            <h3><i class="fas fa-quote-right"></i> 标点使用</h3>
                            <p>标点符号的正确使用指南</p>
                        </div>
                    </div>
                    <div id="reference-content" class="feedback-container" style="display: none;">
                        <!-- 参考内容将在这里显示 -->
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script src="../../js/common.js"></script>
    <script src="../../js/navigation.js"></script>
    <script src="../../js/profile.js"></script>
    <script>
        // Writing data
        const writingPrompts = {
            academic: [
                {
                    title: "环境保护议论文",
                    description: "讨论气候变化对全球的影响，并提出解决方案",
                    prompt: "Climate change is one of the most pressing issues of our time. Discuss the main causes of climate change and propose practical solutions that individuals and governments can implement."
                },
                {
                    title: "教育技术",
                    description: "分析技术在现代教育中的作用",
                    prompt: "Technology has revolutionized education in recent years. Analyze the benefits and drawbacks of using technology in classrooms and discuss its impact on student learning."
                },
                {
                    title: "社交媒体影响",
                    description: "探讨社交媒体对社会的正面和负面影响",
                    prompt: "Social media has become an integral part of modern life. Examine both the positive and negative effects of social media on society and personal relationships."
                }
            ],
            creative: [
                {
                    title: "时间旅行故事",
                    description: "写一个关于时间旅行的短故事",
                    prompt: "You discover an old pocket watch that allows you to travel through time. Write a story about your first journey and what you learn about yourself."
                },
                {
                    title: "未来世界",
                    description: "描述100年后的世界",
                    prompt: "Imagine the world 100 years from now. Describe a day in the life of someone living in this future world, including technology, society, and environment."
                },
                {
                    title: "神秘信件",
                    description: "基于一封神秘信件创作故事",
                    prompt: "You receive a letter addressed to someone who lived in your house 50 years ago. The letter contains a mysterious message. Write about what happens next."
                }
            ],
            business: [
                {
                    title: "商业提案",
                    description: "为新产品写一份商业提案",
                    prompt: "Write a business proposal for a new eco-friendly product. Include market analysis, target audience, and financial projections."
                },
                {
                    title: "客户投诉回复",
                    description: "回复一位不满客户的邮件",
                    prompt: "A customer has complained about a delayed order and poor customer service. Write a professional response that addresses their concerns and offers solutions."
                }
            ],
            personal: [
                {
                    title: "人生转折点",
                    description: "描述改变您人生的一个时刻",
                    prompt: "Write about a moment that changed your perspective on life. Describe the situation, your feelings, and how it influenced your future decisions."
                },
                {
                    title: "理想假期",
                    description: "描述您的理想假期",
                    prompt: "Describe your ideal vacation. Where would you go, what would you do, and who would you travel with? Explain why this would be perfect for you."
                }
            ]
        };

        const writingTemplates = {
            essay: {
                title: "五段式议论文模板",
                content: `Introduction:
- Hook: An interesting opening statement
- Background information
- Thesis statement: Your main argument

Body Paragraph 1:
- Topic sentence
- Supporting evidence
- Explanation
- Concluding sentence

Body Paragraph 2:
- Topic sentence
- Supporting evidence
- Explanation
- Concluding sentence

Body Paragraph 3:
- Topic sentence
- Supporting evidence
- Explanation
- Concluding sentence

Conclusion:
- Restate thesis
- Summarize main points
- Call to action or final thought`
            },
            letter: {
                title: "正式信件模板",
                content: `[Your Address]
[City, State, ZIP Code]
[Date]

[Recipient's Name]
[Recipient's Title]
[Company/Organization]
[Address]

Dear [Mr./Ms. Last Name],

Opening paragraph:
- State the purpose of your letter
- Provide context if necessary

Body paragraph(s):
- Present your main points
- Provide supporting details
- Use clear and concise language

Closing paragraph:
- Summarize your request or main point
- Indicate next steps
- Express appreciation

Sincerely,
[Your signature]
[Your typed name]`
            },
            report: {
                title: "商务报告模板",
                content: `EXECUTIVE SUMMARY
- Brief overview of the report
- Key findings
- Main recommendations

1. INTRODUCTION
- Purpose of the report
- Scope and methodology
- Background information

2. FINDINGS
- Present data and analysis
- Use headings and subheadings
- Include charts/graphs if applicable

3. ANALYSIS
- Interpret the findings
- Discuss implications
- Compare with benchmarks

4. RECOMMENDATIONS
- Specific action items
- Timeline for implementation
- Resource requirements

5. CONCLUSION
- Summary of key points
- Final thoughts
- Next steps`
            },
            email: {
                title: "商务邮件模板",
                content: `Subject: [Clear and specific subject line]

Dear [Name],

Opening:
- Greeting
- Brief context or reference

Body:
- Main message
- Key points in logical order
- Clear action items if needed

Closing:
- Summary or next steps
- Professional closing

Best regards,
[Your name]
[Your title]
[Contact information]`
            }
        };

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            initWritingTabs();
            initWritingTypes();
            initTextEditor();
            initPromptsSystem();
            initTemplatesSystem();
            initAnalysisSystem();
            initReferenceSystem();
        });

        // Tab system
        function initWritingTabs() {
            const tabs = document.querySelectorAll('.writing-tab');
            const panels = document.querySelectorAll('.writing-panel');

            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const targetPanel = this.getAttribute('data-tab') + '-panel';
                    
                    // Update active tab
                    tabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Update active panel
                    panels.forEach(p => p.classList.remove('active'));
                    document.getElementById(targetPanel).classList.add('active');
                });
            });
        }

        // Writing types
        function initWritingTypes() {
            const typeCards = document.querySelectorAll('.writing-type-card');
            const editor = document.getElementById('writing-editor');

            typeCards.forEach(card => {
                card.addEventListener('click', function() {
                    const type = this.getAttribute('data-type');
                    
                    // Update selected card
                    typeCards.forEach(c => c.classList.remove('selected'));
                    this.classList.add('selected');
                    
                    // Show editor
                    editor.style.display = 'block';
                    
                    // Set placeholder based on type
                    setEditorPlaceholder(type);
                });
            });
        }

        function setEditorPlaceholder(type) {
            const textarea = document.getElementById('writing-textarea');
            const placeholders = {
                essay: "开始写您的议论文...\n\n提示：\n1. 明确您的论点\n2. 提供支持证据\n3. 考虑反对观点\n4. 得出结论",
                letter: "开始写您的信件...\n\n提示：\n1. 使用适当的称呼\n2. 清楚说明写信目的\n3. 保持礼貌和专业\n4. 以合适的结尾",
                report: "开始写您的报告...\n\n提示：\n1. 提供执行摘要\n2. 使用清晰的标题\n3. 包含数据和分析\n4. 给出具体建议",
                creative: "释放您的创意...\n\n提示：\n1. 创造生动的场景\n2. 发展有趣的角色\n3. 使用描述性语言\n4. 保持读者兴趣",
                review: "开始写您的评论...\n\n提示：\n1. 简要介绍评论对象\n2. 分析优缺点\n3. 提供具体例子\n4. 给出总体评价",
                description: "开始您的描述...\n\n提示：\n1. 使用五感描述\n2. 选择生动的形容词\n3. 创造清晰的画面\n4. 组织逻辑结构"
            };
            textarea.placeholder = placeholders[type] || "开始您的写作...";
        }

        // Text editor functionality
        function initTextEditor() {
            const textarea = document.getElementById('writing-textarea');
            
            textarea.addEventListener('input', updateStats);
            textarea.addEventListener('input', debounce(autoSave, 2000));
        }

        function updateStats() {
            const textarea = document.getElementById('writing-textarea');
            const text = textarea.value;
            
            const wordCount = text.trim() ? text.trim().split(/\s+/).length : 0;
            const charCount = text.length;
            const sentenceCount = text.split(/[.!?]+/).filter(s => s.trim().length > 0).length;
            const paragraphCount = text.split(/\n\s*\n/).filter(p => p.trim().length > 0).length;
            
            document.getElementById('word-count').textContent = wordCount;
            document.getElementById('char-count').textContent = charCount;
            document.getElementById('sentence-count').textContent = sentenceCount;
            document.getElementById('paragraph-count').textContent = paragraphCount;
        }

        function insertText(before, after) {
            const textarea = document.getElementById('writing-textarea');
            const start = textarea.selectionStart;
            const end = textarea.selectionEnd;
            const selectedText = textarea.value.substring(start, end);
            
            const newText = before + selectedText + after;
            textarea.value = textarea.value.substring(0, start) + newText + textarea.value.substring(end);
            
            // Set cursor position
            const newCursorPos = start + before.length + selectedText.length;
            textarea.setSelectionRange(newCursorPos, newCursorPos);
            textarea.focus();
            
            updateStats();
        }

        function clearEditor() {
            if (confirm('确定要清空编辑器内容吗？')) {
                document.getElementById('writing-textarea').value = '';
                updateStats();
            }
        }

        function analyzeWriting() {
            const text = document.getElementById('writing-textarea').value;
            if (!text.trim()) {
                alert('请先输入一些文本再进行分析。');
                return;
            }
            
            const feedbackContainer = document.getElementById('feedback-container');
            feedbackContainer.style.display = 'block';
            
            // Simulate analysis
            feedbackContainer.innerHTML = '<div class="loading">正在分析您的写作，请稍候...</div>';
            
            setTimeout(() => {
                showWritingFeedback(text, feedbackContainer);
            }, 2000);
        }

        function showWritingFeedback(text, container) {
            const wordCount = text.trim().split(/\s+/).length;
            const score = Math.min(95, Math.max(60, 70 + Math.random() * 25));
            
            container.innerHTML = `
                <div style="text-align: center; margin-bottom: 2rem;">
                    <div class="score-circle" style="--score-deg: ${score * 3.6}deg;">
                        <div class="score-number">${Math.round(score)}</div>
                    </div>
                    <h3>写作质量评分</h3>
                </div>
                
                <div class="feedback-section grammar">
                    <div class="feedback-title">
                        <i class="fas fa-spell-check"></i> 语法和拼写
                    </div>
                    <div class="feedback-item">
                        <div class="feedback-text">检测到 2 个语法问题</div>
                        <div class="feedback-suggestion">建议：检查主谓一致和时态使用</div>
                    </div>
                </div>
                
                <div class="feedback-section style">
                    <div class="feedback-title">
                        <i class="fas fa-paint-brush"></i> 写作风格
                    </div>
                    <div class="feedback-item">
                        <div class="feedback-text">句子长度变化良好</div>
                        <div class="feedback-suggestion">建议：增加更多过渡词来改善流畅性</div>
                    </div>
                </div>
                
                <div class="feedback-section structure">
                    <div class="feedback-title">
                        <i class="fas fa-sitemap"></i> 结构组织
                    </div>
                    <div class="feedback-item">
                        <div class="feedback-text">段落结构清晰</div>
                        <div class="feedback-suggestion">建议：加强结论段的总结性</div>
                    </div>
                </div>
                
                <div class="feedback-section vocabulary">
                    <div class="feedback-title">
                        <i class="fas fa-book"></i> 词汇使用
                    </div>
                    <div class="feedback-item">
                        <div class="feedback-text">词汇多样性: 中等</div>
                        <div class="feedback-suggestion">建议：使用更多高级词汇和同义词</div>
                    </div>
                </div>
            `;
        }

        // Prompts system
        function initPromptsSystem() {
            const loadBtn = document.getElementById('load-prompts');
            const container = document.getElementById('prompts-content');

            loadBtn.addEventListener('click', function() {
                const category = document.getElementById('prompt-category').value;
                loadPrompts(category, container);
            });
        }

        function loadPrompts(category, container) {
            const prompts = writingPrompts[category];
            if (!prompts) return;

            let html = `<h3><i class="fas fa-lightbulb"></i> ${getCategoryName(category)}提示</h3>`;
            
            prompts.forEach(prompt => {
                html += `
                    <div class="prompt-card" onclick="usePrompt('${prompt.prompt.replace(/'/g, "\\'")}')">
                        <div class="prompt-title">${prompt.title}</div>
                        <div class="prompt-description">${prompt.description}</div>
                    </div>
                `;
            });

            container.innerHTML = html;
            container.style.display = 'block';
        }

        function usePrompt(promptText) {
            // Switch to editor tab
            document.querySelector('[data-tab="editor"]').click();
            
            // Set the prompt in the textarea
            const textarea = document.getElementById('writing-textarea');
            textarea.value = `写作提示：${promptText}\n\n开始您的写作：\n\n`;
            textarea.focus();
            
            // Show editor
            document.getElementById('writing-editor').style.display = 'block';
            updateStats();
        }

        // Templates system
        function initTemplatesSystem() {
            const loadBtn = document.getElementById('load-templates');
            const container = document.getElementById('templates-content');

            loadBtn.addEventListener('click', function() {
                const type = document.getElementById('template-type').value;
                loadTemplate(type, container);
            });
        }

        function loadTemplate(type, container) {
            const template = writingTemplates[type];
            if (!template) return;

            container.innerHTML = `
                <div class="template-card">
                    <div class="template-title">${template.title}</div>
                    <div class="template-content">${template.content}</div>
                    <button class="btn btn-primary" onclick="useTemplate('${template.content.replace(/'/g, "\\'")}')">
                        <i class="fas fa-copy"></i> 使用此模板
                    </button>
                </div>
            `;
            container.style.display = 'block';
        }

        function useTemplate(templateContent) {
            // Switch to editor tab
            document.querySelector('[data-tab="editor"]').click();
            
            // Set the template in the textarea
            const textarea = document.getElementById('writing-textarea');
            textarea.value = templateContent;
            textarea.focus();
            
            // Show editor
            document.getElementById('writing-editor').style.display = 'block';
            updateStats();
        }

        // Analysis system
        function initAnalysisSystem() {
            const startBtn = document.getElementById('start-analysis');
            const textarea = document.getElementById('analysis-textarea');
            const container = document.getElementById('analysis-results');

            startBtn.addEventListener('click', function() {
                const text = textarea.value;
                if (!text.trim()) {
                    alert('请输入要分析的文本。');
                    return;
                }
                
                container.style.display = 'block';
                container.innerHTML = '<div class="loading">正在分析文本，请稍候...</div>';
                
                setTimeout(() => {
                    showDetailedAnalysis(text, container);
                }, 2000);
            });
        }

        function showDetailedAnalysis(text, container) {
            const wordCount = text.trim().split(/\s+/).length;
            const readabilityScore = Math.round(60 + Math.random() * 30);
            const sentimentScore = Math.round(40 + Math.random() * 20);
            
            container.innerHTML = `
                <h3><i class="fas fa-chart-line"></i> 详细分析报告</h3>
                
                <div class="writing-stats">
                    <div class="stat-item">
                        <div class="stat-number">${wordCount}</div>
                        <div class="stat-label">总词数</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">${readabilityScore}</div>
                        <div class="stat-label">可读性评分</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">${sentimentScore}</div>
                        <div class="stat-label">情感倾向</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">${Math.round(wordCount / 4.7)}</div>
                        <div class="stat-label">平均句长</div>
                    </div>
                </div>
                
                <div class="feedback-section">
                    <div class="feedback-title">
                        <i class="fas fa-eye"></i> 可读性分析
                    </div>
                    <div class="feedback-item">
                        <div class="feedback-text">文本可读性: ${readabilityScore > 70 ? '良好' : readabilityScore > 50 ? '中等' : '需要改进'}</div>
                        <div class="feedback-suggestion">建议：${readabilityScore > 70 ? '保持当前写作风格' : '简化句子结构，使用更常见的词汇'}</div>
                    </div>
                </div>
                
                <div class="feedback-section">
                    <div class="feedback-title">
                        <i class="fas fa-heart"></i> 情感分析
                    </div>
                    <div class="feedback-item">
                        <div class="feedback-text">情感倾向: ${sentimentScore > 60 ? '积极' : sentimentScore > 40 ? '中性' : '消极'}</div>
                        <div class="feedback-suggestion">文本整体情感倾向为${sentimentScore > 60 ? '积极正面' : sentimentScore > 40 ? '中性客观' : '消极负面'}</div>
                    </div>
                </div>
            `;
        }

        // Reference system
        function initReferenceSystem() {
            const referenceCards = document.querySelectorAll('[data-reference]');
            const referenceContent = document.getElementById('reference-content');

            referenceCards.forEach(card => {
                card.addEventListener('click', function() {
                    const reference = this.getAttribute('data-reference');
                    
                    referenceCards.forEach(c => c.classList.remove('selected'));
                    this.classList.add('selected');
                    
                    loadReferenceContent(reference, referenceContent);
                });
            });
        }

        function loadReferenceContent(reference, container) {
            let html = '';
            
            switch(reference) {
                case 'essay-structure':
                    html = `
                        <h3><i class="fas fa-paragraph"></i> 论文结构</h3>
                        
                        <div class="feedback-section structure">
                            <div class="feedback-title"><i class="fas fa-list-ol"></i> 标准学术论文结构</div>
                            <div class="feedback-item">
                                <h4>引言 (Introduction)</h4>
                                <p><strong>目的：</strong>介绍论文主题，提供背景信息，陈述论文的目的和主要论点。</p>
                                <p><strong>要点：</strong></p>
                                <ul>
                                    <li>以引人入胜的方式开头（问题、引用、统计数据等）</li>
                                    <li>提供必要的背景信息</li>
                                    <li>明确陈述论文的主题和目的</li>
                                    <li>提出明确的论点或论文陈述 (thesis statement)</li>
                                    <li>简要概述论文的主要部分</li>
                                </ul>
                                <p><strong>例句：</strong></p>
                                <p class="example-sentence">In recent years, climate change has emerged as one of the most pressing challenges facing humanity. This essay examines the impact of climate change on global food security and argues that immediate international cooperation is essential to mitigate its effects.</p>
                                <p class="example-sentence-cn">近年来，气候变化已成为人类面临的最紧迫挑战之一。本文探讨了气候变化对全球粮食安全的影响，并论证了国际合作对减轻其影响的必要性。</p>
                            </div>
                            
                            <div class="feedback-item">
                                <h4>主体段落 (Body Paragraphs)</h4>
                                <p><strong>目的：</strong>展开论证，支持论文的主要论点。</p>
                                <p><strong>要点：</strong></p>
                                <ul>
                                    <li>每段应围绕一个主要观点展开</li>
                                    <li>以主题句开始每个段落</li>
                                    <li>提供支持性证据（事实、数据、例子、引用等）</li>
                                    <li>解释证据如何支持你的论点</li>
                                    <li>使用过渡词语保持段落之间的连贯性</li>
                                </ul>
                                <p><strong>例句：</strong></p>
                                <p class="example-sentence">The rise in global temperatures has already begun to affect crop yields in many regions. According to a 2020 study by the UN Food and Agriculture Organization, wheat production in South Asia has declined by 15% over the past decade due to increased heat stress and irregular rainfall patterns. This demonstrates the direct relationship between climate change and food production capability.</p>
                                <p class="example-sentence-cn">全球气温上升已经开始影响许多地区的农作物产量。根据联合国粮食及农业组织2020年的一项研究，由于热应激增加和降雨模式不规则，过去十年南亚的小麦产量下降了15%。这证明了气候变化与粮食生产能力之间的直接关系。</p>
                            </div>
                            
                            <div class="feedback-item">
                                <h4>结论 (Conclusion)</h4>
                                <p><strong>目的：</strong>总结论文的主要观点，重申论点，并给读者留下深刻印象。</p>
                                <p><strong>要素：</strong></p>
                                <ul>
                                    <li>重申论文的主要论点</li>
                                    <li>总结主要支持性论据</li>
                                    <li>讨论论点的广泛意义或影响</li>
                                    <li>可能提出行动呼吁或对未来的展望</li>
                                    <li>以有力的结束语结尾</li>
                                </ul>
                                <p><strong>例句：</strong></p>
                                <p class="example-sentence">In conclusion, climate change poses an unprecedented threat to global food security through reduced crop yields, increased water scarcity, and more frequent extreme weather events. The evidence presented clearly demonstrates that this is not a future concern but a present reality affecting millions worldwide. International cooperation, sustainable agricultural practices, and immediate policy actions are not merely options but necessities if we are to ensure food security for current and future generations.</p>
                                <p class="example-sentence-cn">总之，气候变化通过减少作物产量、加剧水资源短缺和更频繁的极端天气事件，对全球粮食安全构成前所未有的威胁。所呈现的证据清楚地表明，这不是未来的担忧，而是当前影响全球数百万人的现实。如果我们要确保当代和后代的粮食安全，国际合作、可持续农业实践和即时政策行动不仅仅是选择，而是必要的。</p>
                            </div>
                        </div>
                        
                        <div class="feedback-section grammar">
                            <div class="feedback-title"><i class="fas fa-check-circle"></i> 写作技巧与注意事项</div>
                            <ul>
                                <li>保持客观、正式的语气</li>
                                <li>避免使用第一人称（我认为、在我看来）</li>
                                <li>使用学术词汇和专业术语</li>
                                <li>确保论点清晰并有充分证据支持</li>
                                <li>注意段落和句子之间的过渡和连接</li>
                                <li>适当引用来源并使用正确的引用格式</li>
                                <li>确保论文结构逻辑清晰</li>
                                <li>修改和校对以消除语法和拼写错误</li>
                            </ul>
                        </div>
                    `;
                    break;
                case 'email-writing':
                    html = `
                        <h3><i class="fas fa-envelope"></i> 邮件写作</h3>
                        
                        <div class="feedback-section structure">
                            <div class="feedback-title"><i class="fas fa-envelope-open-text"></i> 正式邮件格式</div>
                            <div class="feedback-item">
                                <h4>邮件主题 (Subject Line)</h4>
                                <p>简洁明了，准确反映邮件内容</p>
                                <p><strong>例：</strong> Application for Marketing Manager Position (Ref: JOB2023-56)</p>
                                <p><strong>例：</strong> Request for Meeting Regarding Q3 Budget Review</p>
                            </div>
                            
                            <div class="feedback-item">
                                <h4>称呼 (Salutation)</h4>
                                <p>如果知道收件人姓名，使用正式称呼</p>
                                <p><strong>例：</strong> Dear Mr. Smith,</p>
                                <p><strong>例：</strong> Dear Ms. Johnson,</p>
                                <p><strong>例：</strong> Dear Dr. Chen,</p>
                                <p>如果不知道姓名或发给多人：</p>
                                <p><strong>例：</strong> Dear Sir/Madam,</p>
                                <p><strong>例：</strong> Dear Hiring Committee,</p>
                                <p><strong>例：</strong> To Whom It May Concern,</p>
                            </div>
                            
                            <div class="feedback-item">
                                <h4>开场白 (Introduction)</h4>
                                <p>清晰陈述写信目的</p>
                                <p><strong>例：</strong> I am writing to apply for the position of Marketing Manager as advertised on your company website.</p>
                                <p><strong>例：</strong> I am writing to inquire about the possibility of scheduling a meeting to discuss the Q3 budget review.</p>
                            </div>
                            
                            <div class="feedback-item">
                                <h4>正文 (Body)</h4>
                                <p>简洁明了地表达主要内容</p>
                                <p>按逻辑顺序组织内容</p>
                                <p>使用段落分隔不同主题</p>
                                <p>使用礼貌、专业的语言</p>
                            </div>
                            
                            <div class="feedback-item">
                                <h4>结束语 (Closing)</h4>
                                <p>总结目的，可能包含下一步行动</p>
                                <p><strong>例：</strong> I would appreciate an opportunity to discuss my application further in an interview. I am available at your convenience.</p>
                                <p><strong>例：</strong> I look forward to your response and would be grateful if we could arrange this meeting before the end of the month.</p>
                            </div>
                            
                            <div class="feedback-item">
                                <h4>结尾致意 (Complimentary Close)</h4>
                                <p><strong>例：</strong> Yours sincerely, (如果知道收件人姓名)</p>
                                <p><strong>例：</strong> Yours faithfully, (如果使用了Dear Sir/Madam)</p>
                                <p><strong>例：</strong> Respectfully yours,</p>
                                <p><strong>例：</strong> Kind regards,</p>
                            </div>
                            
                            <div class="feedback-item">
                                <h4>签名 (Signature)</h4>
                                <p>姓名</p>
                                <p>职位（如适用）</p>
                                <p>联系方式（电话、邮箱等）</p>
                            </div>
                        </div>
                        
                        <div class="feedback-section vocabulary">
                            <div class="feedback-title"><i class="fas fa-envelope"></i> 非正式邮件格式</div>
                            <div class="feedback-item">
                                <h4>称呼 (Salutation)</h4>
                                <p><strong>例：</strong> Hi John,</p>
                                <p><strong>例：</strong> Hello Sarah,</p>
                                <p><strong>例：</strong> Dear Alex,</p>
                            </div>
                            
                            <div class="feedback-item">
                                <h4>开场白 (Introduction)</h4>
                                <p><strong>例：</strong> How are you? Hope you're doing well!</p>
                                <p><strong>例：</strong> Thanks for your email yesterday.</p>
                                <p><strong>例：</strong> It was great to hear from you!</p>
                            </div>
                            
                            <div class="feedback-item">
                                <h4>正文 (Body)</h4>
                                <p>可以使用更随意、对话式的语言</p>
                                <p>可以包含个人内容和幽默</p>
                                <p>仍然保持清晰和组织性</p>
                            </div>
                            
                            <div class="feedback-item">
                                <h4>结束语 (Closing)</h4>
                                <p><strong>例：</strong> Let's catch up soon!</p>
                                <p><strong>例：</strong> Looking forward to seeing you next week.</p>
                                <p><strong>例：</strong> Let me know what you think.</p>
                            </div>
                            
                            <div class="feedback-item">
                                <h4>结尾致意 (Complimentary Close)</h4>
                                <p><strong>例：</strong> Best wishes,</p>
                                <p><strong>例：</strong> Cheers,</p>
                                <p><strong>例：</strong> All the best,</p>
                                <p><strong>例：</strong> Take care,</p>
                            </div>
                        </div>
                        
                        <div class="feedback-section style">
                            <div class="feedback-title"><i class="fas fa-lightbulb"></i> 邮件写作技巧</div>
                            <div class="feedback-item">
                                <h4>保持简洁明了，避免过长段落</h4>
                                <p>清晰表达目的和预期回应</p>
                                <p>使用适当的语气和程度副词</p>
                                <p>避免使用过多缩写和表情符号（尤其是正式邮件）</p>
                                <p>在发送前检查拼写和语法</p>
                                <p>确保附件已正确附上（如有）</p>
                                <p>回复邮件时引用相关内容</p>
                                <p>使用适当的礼貌用语</p>
                            </div>
                            
                            <div class="feedback-item">
                                <h4>常用邮件表达</h4>
                                <p><strong>例：</strong> I would be grateful if you could provide me with further information about...</p>
                                <p><strong>例：</strong> Would it be possible to arrange a meeting next week?</p>
                                <p><strong>例：</strong> I was wondering if you could help me with...</p>
                            </div>
                        </div>
                    `;
                    break;
                case 'argumentative':
                    html = `
                        <h3><i class="fas fa-gavel"></i> 议论文写作</h3>
                        
                        <div class="feedback-section structure">
                            <div class="feedback-title"><i class="fas fa-sitemap"></i> 议论文结构</div>
                            <div class="feedback-item">
                                <h4>引言 (Introduction)</h4>
                                <p><strong>目的：</strong>引入话题，提供背景，明确立场。</p>
                                <p><strong>要素：</strong></p>
                                <ul>
                                    <li>引人注目的开头（吸引读者注意力）</li>
                                    <li>必要的背景信息</li>
                                    <li>明确的论点陈述 (thesis statement)</li>
                                    <li>简要预告文章将要讨论的主要论据</li>
                                </ul>
                            </div>
                            
                            <div class="feedback-item">
                                <h4>论证部分 (Body)</h4>
                                <p><strong>目的：</strong>提出支持论点的论据，分析证据，反驳对立观点。</p>
                                <p><strong>结构：</strong>每段一个主要论点，遵循以下模式：</p>
                                <ul>
                                    <li>主题句（表明段落的主要观点）</li>
                                    <li>支持性证据（事实、数据、专家观点、研究等）</li>
                                    <li>分析（解释证据如何支持你的论点）</li>
                                    <li>可能的反驳和回应</li>
                                    <li>过渡到下一个论点</li>
                                </ul>
                                <p><strong>论据组织顺序：</strong></p>
                                <ul>
                                    <li>由弱到强（以最强论据结束）</li>
                                    <li>由强到弱（以最强论据开始）</li>
                                    <li>优缺点对比</li>
                                    <li>时间顺序或逻辑顺序</li>
                                </ul>
                            </div>
                            
                            <div class="feedback-item">
                                <h4>反驳 (Counterarguments)</h4>
                                <p><strong>目的：</strong>展示你了解并考虑了对立观点，但仍有理由支持自己的立场。</p>
                                <p><strong>方法：</strong></p>
                                <ul>
                                    <li>公正地陈述对立观点</li>
                                    <li>解释为什么这些观点不够充分或有缺陷</li>
                                    <li>提供证据支持你的反驳</li>
                                </ul>
                                <p><strong>例句：</strong></p>
                                <p class="example-sentence">While some argue that standardized testing provides an objective measure of student achievement, this view fails to consider how these tests disadvantage students from underprivileged backgrounds who lack access to test preparation resources.</p>
                                <p class="example-sentence-cn">虽然有人认为标准化测试提供了衡量学生成绩的客观标准，但这种观点忽视了这些测试如何使缺乏考试准备资源的弱势背景学生处于不利地位。</p>
                            </div>
                            
                            <div class="feedback-item">
                                <h4>结论 (Conclusion)</h4>
                                <p><strong>目的：</strong>总结论点和主要论据，留下深刻印象。</p>
                                <p><strong>要素：</strong></p>
                                <ul>
                                    <li>重申论点（用不同于引言的表达）</li>
                                    <li>总结主要论据</li>
                                    <li>讨论更广泛的意义或影响</li>
                                    <li>可能提出行动呼吁</li>
                                    <li>以有力的结束语结尾</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="feedback-section style">
                            <div class="feedback-title"><i class="fas fa-pen-fancy"></i> 议论文写作技巧</div>
                            <div class="feedback-item">
                                <h4>论证策略</h4>
                                <ul>
                                    <li><strong>逻辑推理：</strong>使用演绎法（从一般到特殊）或归纳法（从特殊到一般）</li>
                                    <li><strong>类比：</strong>通过比较类似情况来支持论点</li>
                                    <li><strong>因果关系：</strong>展示某事如何导致某事</li>
                                    <li><strong>统计数据：</strong>使用数字和研究结果支持论点</li>
                                    <li><strong>专家观点：</strong>引用权威人士的见解</li>
                                    <li><strong>案例研究：</strong>使用具体例子说明论点</li>
                                </ul>
                            </div>
                            
                            <div class="feedback-item">
                                <h4>说服性语言技巧</h4>
                                <ul>
                                    <li><strong>修辞疑问：</strong>提出问题引发读者思考</li>
                                    <li><strong>有力的动词：</strong>使用具有强烈含义的动词</li>
                                    <li><strong>三段式：</strong>使用三个并列元素创造节奏感</li>
                                    <li><strong>对比：</strong>并列对立观点以突显差异</li>
                                    <li><strong>让步：</strong>承认对立观点的部分合理性，然后展示自己论点的优势</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="feedback-section vocabulary">
                            <div class="feedback-title"><i class="fas fa-clipboard-list"></i> 实用表达与过渡词</div>
                            <div class="feedback-item">
                                <h4>表达观点</h4>
                                <p>In my opinion, / From my perspective, / I would argue that, / It seems clear that,</p>
                            </div>
                            
                            <div class="feedback-item">
                                <h4>添加论点</h4>
                                <p>Furthermore, / In addition, / Moreover, / Additionally, / What's more,</p>
                            </div>
                            
                            <div class="feedback-item">
                                <h4>对比观点</h4>
                                <p>However, / Nevertheless, / On the other hand, / In contrast, / Despite this,</p>
                            </div>
                            
                            <div class="feedback-item">
                                <h4>表示因果</h4>
                                <p>Therefore, / As a result, / Consequently, / Hence, / Thus,</p>
                            </div>
                            
                            <div class="feedback-item">
                                <h4>提供例子</h4>
                                <p>For example, / For instance, / To illustrate, / In particular, / Specifically,</p>
                            </div>
                            
                            <div class="feedback-item">
                                <h4>总结</h4>
                                <p>In conclusion, / To sum up, / Overall, / In summary, / In brief,</p>
                            </div>
                        </div>
                    `;
                    break;
                case 'cohesion':
                    html = `
                        <h3><i class="fas fa-link"></i> 衔接与连贯</h3>
                        
                        <div class="feedback-section structure">
                            <div class="feedback-title"><i class="fas fa-stream"></i> 文章衔接技巧</div>
                            <div class="feedback-item">
                                <h4>词汇衔接 (Lexical Cohesion)</h4>
                                <p><strong>重复关键词：</strong>适当重复关键词以维持主题连贯性</p>
                                <p><strong>同义词替换：</strong>使用同义词避免重复但保持主题一致</p>
                                <p><strong>例句：</strong></p>
                                <p class="example-sentence">Climate change poses significant risks to coastal communities. These environmental shifts will force many residents to relocate in the coming decades.</p>
                                <p class="example-sentence-cn">气候变化对沿海社区构成重大风险。这些环境变化将迫使许多居民在未来几十年内搬迁。</p>
                            </div>
                            
                            <div class="feedback-item">
                                <h4>代词指代 (Pronoun Reference)</h4>
                                <p>使用代词（如it, they, this, these, those等）指代前文提到的名词</p>
                                <p><strong>例句：</strong></p>
                                <p class="example-sentence">The researchers conducted a comprehensive study on memory enhancement. They discovered that regular exercise significantly improved cognitive function.</p>
                                <p class="example-sentence-cn">研究人员对记忆增强进行了全面研究。他们发现规律运动显著改善了认知功能。</p>
                            </div>
                            
                            <div class="feedback-item">
                                <h4>过渡词与短语 (Transitions)</h4>
                                <p>使用过渡词连接句子和段落，表明它们之间的逻辑关系</p>
                                <p><strong>添加信息：</strong> additionally, furthermore, moreover, in addition</p>
                                <p><strong>对比：</strong> however, nevertheless, on the other hand, in contrast</p>
                                <p><strong>因果关系：</strong> therefore, consequently, as a result, thus</p>
                                <p><strong>时间顺序：</strong> first, next, then, finally, subsequently</p>
                                <p><strong>例子：</strong> for example, for instance, to illustrate</p>
                                <p><strong>总结：</strong> in conclusion, to sum up, in summary</p>
                            </div>
                            
                            <div class="feedback-item">
                                <h4>段落之间的衔接</h4>
                                <p><strong>主题句衔接：</strong>使每个段落的主题句与前一段落相关</p>
                                <p><strong>段落间过渡：</strong>使用过渡句连接段落</p>
                                <p><strong>例句：</strong></p>
                                <p class="example-sentence">[End of paragraph 1] ...These economic factors have significantly influenced urban development patterns.</p>
                                <p class="example-sentence">[Start of paragraph 2] Beyond economics, social considerations also play a crucial role in shaping our cities.</p>
                                <p class="example-sentence-cn">[第一段结尾]...这些经济因素显著影响了城市发展模式。</p>
                                <p class="example-sentence-cn">[第二段开头]除了经济因素外，社会因素在塑造我们的城市方面也发挥着至关重要的作用。</p>
                            </div>
                        </div>
                        
                        <div class="feedback-section style">
                            <div class="feedback-title"><i class="fas fa-puzzle-piece"></i> 增强文章连贯性的方法</div>
                            <div class="feedback-item">
                                <h4>主题连贯性 (Thematic Coherence)</h4>
                                <ul>
                                    <li>明确的主题句开始每个段落</li>
                                    <li>每个段落只发展一个主要观点</li>
                                    <li>相关观点按逻辑顺序组织</li>
                                    <li>保持整篇文章对中心主题的关注</li>
                                </ul>
                            </div>
                            
                            <div class="feedback-item">
                                <h4>逻辑结构 (Logical Organization)</h4>
                                <ul>
                                    <li><strong>时间顺序：</strong>按事件发生的时间顺序组织内容</li>
                                    <li><strong>空间顺序：</strong>按空间或位置组织描述</li>
                                    <li><strong>重要性顺序：</strong>从最不重要到最重要（或反之）</li>
                                    <li><strong>问题-解决方案：</strong>先介绍问题，然后提出解决方案</li>
                                    <li><strong>因果顺序：</strong>展示原因和结果</li>
                                    <li><strong>比较-对比：</strong>展示相似点和不同点</li>
                                </ul>
                            </div>
                            
                            <div class="feedback-item">
                                <h4>句子长度与结构变化</h4>
                                <p>交替使用长句和短句，创造节奏变化</p>
                                <p>使用不同的句型保持读者兴趣</p>
                                <p><strong>例句：</strong></p>
                                <p class="example-sentence">The storm intensified rapidly. Wind speeds reached over 100 miles per hour, causing widespread damage to coastal infrastructure and forcing thousands of residents to evacuate their homes as emergency services struggled to respond to the crisis.</p>
                                <p class="example-sentence-cn">风暴迅速增强。风速达到每小时100多英里，对沿海基础设施造成广泛破坏，迫使数千名居民撤离家园，同时应急服务机构努力应对危机。</p>
                            </div>
                        </div>
                        
                        <div class="feedback-section grammar">
                            <div class="feedback-title"><i class="fas fa-exclamation-triangle"></i> 常见连贯性问题及解决方法</div>
                            <div class="feedback-item">
                                <h4>主题跳跃</h4>
                                <p><strong>问题：</strong>段落内容与主题无关或突然转换话题</p>
                                <p><strong>解决方法：</strong>确保每个段落都围绕一个中心思想展开，使用过渡词语表明主题变化</p>
                            </div>
                            
                            <div class="feedback-item">
                                <h4>代词指代不明确</h4>
                                <p><strong>问题：</strong>代词指代的名词不清楚</p>
                                <p><strong>解决方法：</strong>确保代词有明确的指代对象，必要时重复名词而不使用代词</p>
                            </div>
                            
                            <div class="feedback-item">
                                <h4>过渡词缺失</h4>
                                <p><strong>问题：</strong>句子和段落之间没有明确的连接</p>
                                <p><strong>解决方法：</strong>添加适当的过渡词语表明逻辑关系</p>
                            </div>
                            
                            <div class="feedback-item">
                                <h4>逻辑关系混乱</h4>
                                <p><strong>问题：</strong>句子或段落之间的逻辑关系不清晰</p>
                                <p><strong>解决方法：</strong>重新组织内容，确保思想按照逻辑顺序展开</p>
                            </div>
                        </div>
                    `;
                    break;
                // 更多写作类型的内容...
                default:
                    html = `<p class="text-center">请选择一个写作类型查看详细指南。</p>`;
            }
            
            container.innerHTML = html;
            container.style.display = 'block';
        }

        // Utility functions
        function getCategoryName(category) {
            const names = {
                academic: '学术',
                creative: '创意',
                business: '商务',
                personal: '个人'
            };
            return names[category] || category;
        }

        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        function autoSave() {
            const text = document.getElementById('writing-textarea').value;
            localStorage.setItem('writing-draft', text);
            console.log('Draft auto-saved');
        }

        // Load draft on page load
        window.addEventListener('load', function() {
            const draft = localStorage.getItem('writing-draft');
            if (draft) {
                document.getElementById('writing-textarea').value = draft;
                updateStats();
            }
        });
    </script>
</body>
</html>