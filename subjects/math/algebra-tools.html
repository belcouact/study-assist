<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>代数工具 - 数学学习助手</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .algebra-workspace {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .tool-tabs {
            background: #f8f9fa;
            padding: 0;
            border-bottom: 2px solid #e9ecef;
            display: flex;
            overflow-x: auto;
        }

        .tab-btn {
            padding: 15px 25px;
            border: none;
            background: transparent;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            color: #495057;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            white-space: nowrap;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .tab-btn:hover {
            background: #e9ecef;
            color: #007bff;
        }

        .tab-btn.active {
            color: #007bff;
            border-bottom-color: #007bff;
            background: white;
        }

        .tool-content {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
        }

        .tool-section {
            display: none;
        }

        .tool-section.active {
            display: block;
        }

        .input-group {
            margin-bottom: 25px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #495057;
        }

        .input-field {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .input-field:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: #007bff;
            color: white;
        }

        .btn-primary:hover {
            background: #0056b3;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 123, 255, 0.3);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #545b62;
        }

        .result-area {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            min-height: 100px;
        }

        .result-area h4 {
            color: #007bff;
            margin-bottom: 15px;
        }

        .step-by-step {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            border-left: 4px solid #28a745;
        }

        .step {
            margin-bottom: 10px;
            padding: 8px 0;
            border-bottom: 1px solid #e9ecef;
        }

        .step:last-child {
            border-bottom: none;
        }

        .step-number {
            display: inline-block;
            background: #007bff;
            color: white;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            text-align: center;
            line-height: 25px;
            font-size: 12px;
            font-weight: bold;
            margin-right: 10px;
        }

        .examples-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .example-card {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            border-left: 4px solid #17a2b8;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .example-card:hover {
            background: #e9ecef;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .example-card h5 {
            color: #17a2b8;
            margin-bottom: 8px;
        }

        .example-card .equation {
            font-family: 'Courier New', monospace;
            background: white;
            padding: 8px;
            border-radius: 4px;
            margin: 8px 0;
        }

        .back-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(255,255,255,0.9);
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .back-btn:hover {
            background: white;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
        }

        .error-message {
            background: #f8d7da;
            color: #721c24;
            padding: 10px 15px;
            border-radius: 8px;
            margin-top: 10px;
            border: 1px solid #f5c6cb;
        }

        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 10px 15px;
            border-radius: 8px;
            margin-top: 10px;
            border: 1px solid #c3e6cb;
        }

        .formula-display {
            font-family: 'Times New Roman', serif;
            font-size: 18px;
            text-align: center;
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border: 2px solid #e9ecef;
        }

        .graph-container {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            border: 2px solid #e9ecef;
            min-height: 300px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .header h1 {
                font-size: 2rem;
            }

            .tool-tabs {
                flex-direction: column;
            }

            .tab-btn {
                text-align: center;
                border-bottom: 1px solid #e9ecef;
                border-right: none;
            }

            .tab-btn.active {
                border-bottom: 1px solid #007bff;
                border-right: none;
            }

            .tool-content {
                padding: 20px;
            }

            .examples-grid {
                grid-template-columns: 1fr;
            }
        }

        .variable-input {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-bottom: 10px;
        }

        .variable-input input {
            flex: 1;
            padding: 8px 12px;
            border: 2px solid #dee2e6;
            border-radius: 6px;
        }

        .variable-input button {
            padding: 8px 12px;
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
        }

        .add-variable-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            margin-top: 10px;
        }

        /* New styles for enhanced content */
        .learning-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
            border-radius: 15px;
            margin-bottom: 2rem;
        }

        .learning-section h3 {
            margin-bottom: 1rem;
            font-size: 1.5rem;
        }

        .concept-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .concept-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 1.5rem;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }

        .concept-card:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-5px);
        }

        .concept-card h4 {
            margin-bottom: 0.5rem;
            color: #fff;
        }

        .concept-card p {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .interactive-demo {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 1.5rem;
            margin: 1rem 0;
            border: 2px solid #e9ecef;
        }

        .demo-controls {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .demo-slider {
            flex: 1;
            min-width: 150px;
        }

        .demo-slider label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .demo-slider input[type="range"] {
            width: 100%;
            margin-bottom: 0.5rem;
        }

        .demo-value {
            text-align: center;
            font-weight: bold;
            color: #007bff;
        }

        .visual-equation {
            background: white;
            border: 2px solid #007bff;
            border-radius: 10px;
            padding: 1.5rem;
            text-align: center;
            font-size: 1.5rem;
            font-family: 'Times New Roman', serif;
            margin: 1rem 0;
        }

        .tips-section {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 10px;
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .tips-section h4 {
            color: #856404;
            margin-bottom: 1rem;
        }

        .tip-item {
            display: flex;
            align-items: flex-start;
            margin-bottom: 0.8rem;
            gap: 0.5rem;
        }

        .tip-icon {
            background: #ffc107;
            color: #856404;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            flex-shrink: 0;
            margin-top: 2px;
        }

        .practice-problems {
            background: #e7f3ff;
            border: 2px solid #b3d9ff;
            border-radius: 10px;
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .practice-problems h4 {
            color: #0056b3;
            margin-bottom: 1rem;
        }

        .problem-item {
            background: white;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            border-left: 4px solid #007bff;
        }

        .problem-question {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .problem-answer {
            display: none;
            background: #f8f9fa;
            padding: 0.8rem;
            border-radius: 6px;
            margin-top: 0.5rem;
            border-left: 3px solid #28a745;
        }

        .show-answer-btn {
            background: #17a2b8;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .show-answer-btn:hover {
            background: #138496;
        }

        .real-world-examples {
            background: #f0f8f0;
            border: 2px solid #c3e6cb;
            border-radius: 10px;
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .real-world-examples h4 {
            color: #155724;
            margin-bottom: 1rem;
        }

        .example-scenario {
            background: white;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            border-left: 4px solid #28a745;
        }

        .scenario-title {
            font-weight: 600;
            color: #155724;
            margin-bottom: 0.5rem;
        }

        .scenario-description {
            font-size: 0.95rem;
            line-height: 1.5;
        }

        @media (max-width: 768px) {
            .concept-cards {
                grid-template-columns: 1fr;
            }

            .demo-controls {
                flex-direction: column;
            }

            .demo-slider {
                min-width: auto;
            }

            .visual-equation {
                font-size: 1.2rem;
            }

            .learning-section {
                padding: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <button class="back-btn" onclick="window.location.href='main.html'">← 返回数学主页</button>
    
    <div class="container">
        <div class="header">
            <h1>🧮 代数工具</h1>
            <p>强大的代数计算和求解工具 - 让数学变得简单</p>
        </div>

        <div class="algebra-workspace">
            <div class="tool-tabs">
                <button class="tab-btn active" data-tab="equation-solver">
                    <span>📐</span> 方程求解
                </button>
                <button class="tab-btn" data-tab="factorization">
                    <span>🔢</span> 因式分解
                </button>
                <button class="tab-btn" data-tab="polynomial">
                    <span>📊</span> 多项式运算
                </button>
                <button class="tab-btn" data-tab="system-equations">
                    <span>⚖️</span> 方程组
                </button>
                <button class="tab-btn" data-tab="simplification">
                    <span>✨</span> 表达式化简
                </button>
                <button class="tab-btn" data-tab="calculator">
                    <span>🧮</span> 科学计算器
                </button>
            </div>

            <div class="tool-content">
                <!-- 方程求解 -->
                <div class="tool-section active" id="equation-solver">
                    <h3>方程求解器</h3>
                    <p>输入一元或多元方程，自动求解并显示详细步骤</p>
                    
                    <!-- Learning Section -->
                    <div class="learning-section">
                        <h3>🎓 方程基础知识</h3>
                        <p>方程是数学中表示两个表达式相等的等式。掌握方程求解是代数学习的重要基础。</p>
                        <div class="concept-cards">
                            <div class="concept-card">
                                <h4>一次方程</h4>
                                <p>形如 ax + b = 0 的方程，其中 a ≠ 0。解法：移项、合并同类项、系数化为1。</p>
                            </div>
                            <div class="concept-card">
                                <h4>二次方程</h4>
                                <p>形如 ax² + bx + c = 0 的方程。可用因式分解、配方法或求根公式求解。</p>
                            </div>
                            <div class="concept-card">
                                <h4>根式方程</h4>
                                <p>含有根号的方程。通常通过平方消除根号，注意检验增根。</p>
                            </div>
                            <div class="concept-card">
                                <h4>分式方程</h4>
                                <p>含有分式的方程。通过通分或去分母转化为整式方程求解。</p>
                            </div>
                        </div>
                    </div>

                    <!-- Interactive Demo -->
                    <div class="interactive-demo">
                        <h4>🎮 交互式二次方程演示</h4>
                        <p>调整参数观察二次方程 ax² + bx + c = 0 的解的变化</p>
                        <div class="demo-controls">
                            <div class="demo-slider">
                                <label>系数 a:</label>
                                <input type="range" id="demo-a" min="-5" max="5" value="1" step="0.1" oninput="updateDemo()">
                                <div class="demo-value" id="value-a">1</div>
                            </div>
                            <div class="demo-slider">
                                <label>系数 b:</label>
                                <input type="range" id="demo-b" min="-10" max="10" value="0" step="0.1" oninput="updateDemo()">
                                <div class="demo-value" id="value-b">0</div>
                            </div>
                            <div class="demo-slider">
                                <label>系数 c:</label>
                                <input type="range" id="demo-c" min="-10" max="10" value="0" step="0.1" oninput="updateDemo()">
                                <div class="demo-value" id="value-c">0</div>
                            </div>
                        </div>
                        <div class="visual-equation" id="demo-equation">x² = 0</div>
                        <div class="visual-equation" id="demo-solution">解: x = 0</div>
                    </div>

                    <!-- Tips Section -->
                    <div class="tips-section">
                        <h4>💡 解题技巧</h4>
                        <div class="tip-item">
                            <div class="tip-icon">1</div>
                            <div>先观察方程的类型，选择合适的解法</div>
                        </div>
                        <div class="tip-item">
                            <div class="tip-icon">2</div>
                            <div>移项时注意变号，合并同类项要仔细</div>
                        </div>
                        <div class="tip-item">
                            <div class="tip-icon">3</div>
                            <div>二次方程优先考虑因式分解，再考虑求根公式</div>
                        </div>
                        <div class="tip-item">
                            <div class="tip-icon">4</div>
                            <div>根式方程和分式方程求解后要检验</div>
                        </div>
                        <div class="tip-item">
                            <div class="tip-icon">5</div>
                            <div>画图有助于理解方程的几何意义</div>
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label for="equation-input">输入方程 (例如: x^2 + 5x + 6 = 0)</label>
                        <input type="text" id="equation-input" class="input-field" placeholder="x^2 + 5x + 6 = 0">
                    </div>
                    
                    <button class="btn btn-primary" onclick="solveEquation()">
                        <span>🔍</span> 求解方程
                    </button>
                    <button class="btn btn-secondary" onclick="clearEquationResult()">
                        <span>🗑️</span> 清空
                    </button>
                    
                    <div class="result-area" id="equation-result">
                        <h4>解答结果</h4>
                        <p>请输入方程并点击求解按钮</p>
                    </div>

                    <!-- Practice Problems -->
                    <div class="practice-problems">
                        <h4>🏋️ 练习题</h4>
                        <div class="problem-item">
                            <div class="problem-question">1. 解方程：3x - 7 = 2x + 5</div>
                            <button class="show-answer-btn" onclick="toggleAnswer(this)">显示答案</button>
                            <div class="problem-answer">
                                <strong>解：</strong><br>
                                3x - 7 = 2x + 5<br>
                                3x - 2x = 5 + 7<br>
                                x = 12
                            </div>
                        </div>
                        <div class="problem-item">
                            <div class="problem-question">2. 解方程：x² - 5x + 6 = 0</div>
                            <button class="show-answer-btn" onclick="toggleAnswer(this)">显示答案</button>
                            <div class="problem-answer">
                                <strong>解：</strong><br>
                                x² - 5x + 6 = 0<br>
                                (x - 2)(x - 3) = 0<br>
                                x = 2 或 x = 3
                            </div>
                        </div>
                        <div class="problem-item">
                            <div class="problem-question">3. 解方程：√(x + 3) = 5</div>
                            <button class="show-answer-btn" onclick="toggleAnswer(this)">显示答案</button>
                            <div class="problem-answer">
                                <strong>解：</strong><br>
                                √(x + 3) = 5<br>
                                x + 3 = 25<br>
                                x = 22<br>
                                <em>检验：√(22 + 3) = √25 = 5 ✓</em>
                            </div>
                        </div>
                    </div>

                    <!-- Real World Examples -->
                    <div class="real-world-examples">
                        <h4>🌍 生活中的方程</h4>
                        <div class="example-scenario">
                            <div class="scenario-title">📱 手机套餐选择</div>
                            <div class="scenario-description">
                                小明要选择手机套餐。套餐A：月租30元，每分钟0.1元；套餐B：月租50元，每分钟0.05元。
                                多少分钟时两套餐费用相等？<br>
                                <strong>方程：</strong>30 + 0.1x = 50 + 0.05x<br>
                                <strong>解：</strong>x = 400分钟
                            </div>
                        </div>
                        <div class="example-scenario">
                            <div class="scenario-title">🚗 行程问题</div>
                            <div class="scenario-description">
                                一辆汽车从A地到B地，去时速度60km/h，回来时速度40km/h，全程用时5小时。
                                求A、B两地距离。<br>
                                <strong>方程：</strong>x/60 + x/40 = 5<br>
                                <strong>解：</strong>x = 120km
                            </div>
                        </div>
                        <div class="example-scenario">
                            <div class="scenario-title">💰 投资收益</div>
                            <div class="scenario-description">
                                某投资项目年收益率为8%，投资多少钱3年后能获得2400元收益？<br>
                                <strong>方程：</strong>x × 0.08 × 3 = 2400<br>
                                <strong>解：</strong>x = 10000元
                            </div>
                        </div>
                    </div>

                    <div class="examples-grid">
                        <div class="example-card" onclick="loadExample('x^2 + 5x + 6 = 0')">
                            <h5>二次方程</h5>
                            <div class="equation">x² + 5x + 6 = 0</div>
                            <p>标准二次方程求解</p>
                        </div>
                        <div class="example-card" onclick="loadExample('2x + 3 = 7')">
                            <h5>一次方程</h5>
                            <div class="equation">2x + 3 = 7</div>
                            <p>简单线性方程</p>
                        </div>
                        <div class="example-card" onclick="loadExample('x^3 - 6x^2 + 11x - 6 = 0')">
                            <h5>三次方程</h5>
                            <div class="equation">x³ - 6x² + 11x - 6 = 0</div>
                            <p>高次方程求解</p>
                        </div>
                        <div class="example-card" onclick="loadExample('sqrt(x + 1) = 3')">
                            <h5>根式方程</h5>
                            <div class="equation">√(x + 1) = 3</div>
                            <p>包含根号的方程</p>
                        </div>
                    </div>
                </div>

                <!-- 因式分解 -->
                <div class="tool-section" id="factorization">
                    <h3>因式分解工具</h3>
                    <p>将多项式分解为因子的乘积形式</p>
                    
                    <!-- Learning Section -->
                    <div class="learning-section">
                        <h3>🎓 因式分解基础知识</h3>
                        <p>因式分解是将多项式写成几个因式乘积的形式，是代数运算的重要技能。</p>
                        <div class="concept-cards">
                            <div class="concept-card">
                                <h4>提取公因子</h4>
                                <p>找出各项的最大公因子并提取出来。如：6x² + 9x = 3x(2x + 3)</p>
                            </div>
                            <div class="concept-card">
                                <h4>平方差公式</h4>
                                <p>a² - b² = (a + b)(a - b)。如：x² - 9 = (x + 3)(x - 3)</p>
                            </div>
                            <div class="concept-card">
                                <h4>完全平方式</h4>
                                <p>a² ± 2ab + b² = (a ± b)²。如：x² + 6x + 9 = (x + 3)²</p>
                            </div>
                            <div class="concept-card">
                                <h4>十字相乘法</h4>
                                <p>用于分解二次三项式 ax² + bx + c 的方法，通过十字交叉相乘找到因式。</p>
                            </div>
                        </div>
                    </div>

                    <!-- Interactive Demo -->
                    <div class="interactive-demo">
                        <h4>🎮 交互式因式分解演示</h4>
                        <p>观察二次三项式 x² + bx + c 的因式分解过程</p>
                        <div class="demo-controls">
                            <div class="demo-slider">
                                <label>系数 b:</label>
                                <input type="range" id="factor-b" min="-10" max="10" value="5" step="1" oninput="updateFactorDemo()">
                                <div class="demo-value" id="factor-value-b">5</div>
                            </div>
                            <div class="demo-slider">
                                <label>常数项 c:</label>
                                <input type="range" id="factor-c" min="-20" max="20" value="6" step="1" oninput="updateFactorDemo()">
                                <div class="demo-value" id="factor-value-c">6</div>
                            </div>
                        </div>
                        <div class="visual-equation" id="factor-equation">x² + 5x + 6</div>
                        <div class="visual-equation" id="factor-result">(x + 2)(x + 3)</div>
                    </div>

                    <!-- Tips Section -->
                    <div class="tips-section">
                        <h4>💡 分解技巧</h4>
                        <div class="tip-item">
                            <div class="tip-icon">1</div>
                            <div>先观察是否有公因子可以提取</div>
                        </div>
                        <div class="tip-item">
                            <div class="tip-icon">2</div>
                            <div>识别特殊公式：平方差、完全平方式</div>
                        </div>
                        <div class="tip-item">
                            <div class="tip-icon">3</div>
                            <div>二次三项式用十字相乘法或求根公式</div>
                        </div>
                        <div class="tip-item">
                            <div class="tip-icon">4</div>
                            <div>分解后要检验：展开结果应等于原式</div>
                        </div>
                        <div class="tip-item">
                            <div class="tip-icon">5</div>
                            <div>复杂表达式可能需要多次分解</div>
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label for="factor-input">输入多项式 (例如: x^2 + 5x + 6)</label>
                        <input type="text" id="factor-input" class="input-field" placeholder="x^2 + 5x + 6">
                    </div>
                    
                    <button class="btn btn-primary" onclick="factorExpression()">
                        <span>🔧</span> 因式分解
                    </button>
                    <button class="btn btn-secondary" onclick="clearFactorResult()">
                        <span>🗑️</span> 清空
                    </button>
                    
                    <div class="result-area" id="factor-result">
                        <h4>分解结果</h4>
                        <p>请输入多项式并点击分解按钮</p>
                    </div>

                    <!-- Practice Problems -->
                    <div class="practice-problems">
                        <h4>🏋️ 练习题</h4>
                        <div class="problem-item">
                            <div class="problem-question">1. 因式分解：x² - 16</div>
                            <button class="show-answer-btn" onclick="toggleAnswer(this)">显示答案</button>
                            <div class="problem-answer">
                                <strong>解：</strong><br>
                                x² - 16 = x² - 4²<br>
                                这是平方差公式：a² - b² = (a + b)(a - b)<br>
                                所以 x² - 16 = (x + 4)(x - 4)
                            </div>
                        </div>
                        <div class="problem-item">
                            <div class="problem-question">2. 因式分解：x² + 8x + 16</div>
                            <button class="show-answer-btn" onclick="toggleAnswer(this)">显示答案</button>
                            <div class="problem-answer">
                                <strong>解：</strong><br>
                                x² + 8x + 16 = x² + 2·4·x + 4²<br>
                                这是完全平方式：a² + 2ab + b² = (a + b)²<br>
                                所以 x² + 8x + 16 = (x + 4)²
                            </div>
                        </div>
                        <div class="problem-item">
                            <div class="problem-question">3. 因式分解：6x² + 9x</div>
                            <button class="show-answer-btn" onclick="toggleAnswer(this)">显示答案</button>
                            <div class="problem-answer">
                                <strong>解：</strong><br>
                                6x² + 9x<br>
                                提取公因子3x：6x² + 9x = 3x(2x + 3)
                            </div>
                        </div>
                    </div>

                    <!-- Real World Examples -->
                    <div class="real-world-examples">
                        <h4>🌍 生活中的因式分解</h4>
                        <div class="example-scenario">
                            <div class="scenario-title">📐 几何图形面积</div>
                            <div class="scenario-description">
                                一个矩形的面积为 x² + 5x + 6，求可能的长和宽。<br>
                                <strong>分解：</strong>x² + 5x + 6 = (x + 2)(x + 3)<br>
                                <strong>答案：</strong>长为 (x + 3)，宽为 (x + 2)
                            </div>
                        </div>
                        <div class="example-scenario">
                            <div class="scenario-title">💰 利润计算</div>
                            <div class="scenario-description">
                                某商品的利润函数为 P = -x² + 10x - 21，求盈亏平衡点。<br>
                                <strong>分解：</strong>-x² + 10x - 21 = -(x² - 10x + 21) = -(x - 3)(x - 7)<br>
                                <strong>答案：</strong>当 x = 3 或 x = 7 时，利润为0
                            </div>
                        </div>
                        <div class="example-scenario">
                            <div class="scenario-title">🚀 物理运动</div>
                            <div class="scenario-description">
                                抛物运动的高度函数 h = -16t² + 64t，求物体落地时间。<br>
                                <strong>分解：</strong>-16t² + 64t = -16t(t - 4)<br>
                                <strong>答案：</strong>当 t = 0（起始）或 t = 4秒时，高度为0
                            </div>
                        </div>
                    </div>

                    <div class="examples-grid">
                        <div class="example-card" onclick="loadFactorExample('x^2 + 5x + 6')">
                            <h5>二次三项式</h5>
                            <div class="equation">x² + 5x + 6</div>
                            <p>= (x + 2)(x + 3)</p>
                        </div>
                        <div class="example-card" onclick="loadFactorExample('x^2 - 9')">
                            <h5>平方差</h5>
                            <div class="equation">x² - 9</div>
                            <p>= (x + 3)(x - 3)</p>
                        </div>
                        <div class="example-card" onclick="loadFactorExample('x^3 + 8')">
                            <h5>立方和</h5>
                            <div class="equation">x³ + 8</div>
                            <p>= (x + 2)(x² - 2x + 4)</p>
                        </div>
                        <div class="example-card" onclick="loadFactorExample('2x^2 + 8x + 6')">
                            <h5>提取公因子</h5>
                            <div class="equation">2x² + 8x + 6</div>
                            <p>= 2(x + 1)(x + 3)</p>
                        </div>
                    </div>
                </div>

                <!-- 多项式运算 -->
                <div class="tool-section" id="polynomial">
                    <h3>多项式运算</h3>
                    <p>多项式的加法、减法、乘法和除法运算</p>
                    
                    <!-- Learning Section -->
                    <div class="learning-section">
                        <h3>🎓 多项式运算基础</h3>
                        <p>多项式是由变量、系数和指数组成的代数表达式，掌握其运算规则是代数学习的核心。</p>
                        <div class="concept-cards">
                            <div class="concept-card">
                                <h4>多项式加减法</h4>
                                <p>合并同类项：相同变量的相同次幂的项可以合并。如：3x² + 2x² = 5x²</p>
                            </div>
                            <div class="concept-card">
                                <h4>多项式乘法</h4>
                                <p>分配律：每一项都要与另一个多项式的每一项相乘。如：(x+1)(x+2) = x² + 3x + 2</p>
                            </div>
                            <div class="concept-card">
                                <h4>多项式除法</h4>
                                <p>长除法或综合除法：类似于数字的长除法，逐步求商和余式。</p>
                            </div>
                            <div class="concept-card">
                                <h4>特殊乘法公式</h4>
                                <p>(a±b)² = a² ± 2ab + b²，(a+b)(a-b) = a² - b²</p>
                            </div>
                        </div>
                    </div>

                    <!-- Interactive Demo -->
                    <div class="interactive-demo">
                        <h4>🎮 多项式乘法演示</h4>
                        <p>观察 (x + a)(x + b) 的展开过程</p>
                        <div class="demo-controls">
                            <div class="demo-slider">
                                <label>第一个常数 a:</label>
                                <input type="range" id="poly-a" min="-5" max="5" value="2" step="1" oninput="updatePolyDemo()">
                                <div class="demo-value" id="poly-value-a">2</div>
                            </div>
                            <div class="demo-slider">
                                <label>第二个常数 b:</label>
                                <input type="range" id="poly-b" min="-5" max="5" value="3" step="1" oninput="updatePolyDemo()">
                                <div class="demo-value" id="poly-value-b">3</div>
                            </div>
                        </div>
                        <div class="visual-equation" id="poly-original">(x + 2)(x + 3)</div>
                        <div class="visual-equation" id="poly-expanded">x² + 5x + 6</div>
                        <div style="font-size: 0.9rem; text-align: center; margin-top: 1rem;" id="poly-steps">
                            展开步骤：x·x + x·3 + 2·x + 2·3 = x² + 3x + 2x + 6 = x² + 5x + 6
                        </div>
                    </div>

                    <!-- Tips Section -->
                    <div class="tips-section">
                        <h4>💡 运算技巧</h4>
                        <div class="tip-item">
                            <div class="tip-icon">1</div>
                            <div>加减法：只有同类项才能合并</div>
                        </div>
                        <div class="tip-item">
                            <div class="tip-icon">2</div>
                            <div>乘法：使用分配律，每项都要相乘</div>
                        </div>
                        <div class="tip-item">
                            <div class="tip-icon">3</div>
                            <div>记住特殊乘法公式，提高计算速度</div>
                        </div>
                        <div class="tip-item">
                            <div class="tip-icon">4</div>
                            <div>除法：先尝试因式分解，再约分</div>
                        </div>
                        <div class="tip-item">
                            <div class="tip-icon">5</div>
                            <div>计算后要化简到最简形式</div>
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label for="poly1-input">第一个多项式</label>
                        <input type="text" id="poly1-input" class="input-field" placeholder="x^2 + 3x + 2">
                    </div>
                    
                    <div class="input-group">
                        <label for="operation-select">运算类型</label>
                        <select id="operation-select" class="input-field">
                            <option value="add">加法 (+)</option>
                            <option value="subtract">减法 (-)</option>
                            <option value="multiply">乘法 (×)</option>
                            <option value="divide">除法 (÷)</option>
                        </select>
                    </div>
                    
                    <div class="input-group">
                        <label for="poly2-input">第二个多项式</label>
                        <input type="text" id="poly2-input" class="input-field" placeholder="x + 1">
                    </div>
                    
                    <button class="btn btn-primary" onclick="calculatePolynomial()">
                        <span>⚡</span> 计算
                    </button>
                    <button class="btn btn-secondary" onclick="clearPolynomialResult()">
                        <span>🗑️</span> 清空
                    </button>
                    
                    <div class="result-area" id="polynomial-result">
                        <h4>运算结果</h4>
                        <p>请输入两个多项式并选择运算类型</p>
                    </div>

                    <!-- Practice Problems -->
                    <div class="practice-problems">
                        <h4>🏋️ 练习题</h4>
                        <div class="problem-item">
                            <div class="problem-question">1. 计算：(3x² + 2x - 1) + (x² - 3x + 4)</div>
                            <button class="show-answer-btn" onclick="toggleAnswer(this)">显示答案</button>
                            <div class="problem-answer">
                                <strong>解：</strong><br>
                                (3x² + 2x - 1) + (x² - 3x + 4)<br>
                                = 3x² + x² + 2x - 3x - 1 + 4<br>
                                = 4x² - x + 3
                            </div>
                        </div>
                        <div class="problem-item">
                            <div class="problem-question">2. 计算：(x + 3)(2x - 1)</div>
                            <button class="show-answer-btn" onclick="toggleAnswer(this)">显示答案</button>
                            <div class="problem-answer">
                                <strong>解：</strong><br>
                                (x + 3)(2x - 1)<br>
                                = x·2x + x·(-1) + 3·2x + 3·(-1)<br>
                                = 2x² - x + 6x - 3<br>
                                = 2x² + 5x - 3
                            </div>
                        </div>
                        <div class="problem-item">
                            <div class="problem-question">3. 计算：(x + 2)²</div>
                            <button class="show-answer-btn" onclick="toggleAnswer(this)">显示答案</button>
                            <div class="problem-answer">
                                <strong>解：</strong><br>
                                (x + 2)² = (x + 2)(x + 2)<br>
                                使用完全平方公式：(a + b)² = a² + 2ab + b²<br>
                                = x² + 2·x·2 + 2² = x² + 4x + 4
                            </div>
                        </div>
                    </div>

                    <!-- Real World Examples -->
                    <div class="real-world-examples">
                        <h4>🌍 生活中的多项式运算</h4>
                        <div class="example-scenario">
                            <div class="scenario-title">🏠 房屋装修</div>
                            <div class="scenario-description">
                                房间长为(x+3)米，宽为(x+2)米，求房间面积。<br>
                                <strong>计算：</strong>面积 = (x+3)(x+2) = x² + 5x + 6 平方米<br>
                                <strong>应用：</strong>当x=5时，面积 = 25 + 25 + 6 = 56平方米
                            </div>
                        </div>
                        <div class="example-scenario">
                            <div class="scenario-title">💼 商业利润</div>
                            <div class="scenario-description">
                                两个产品的利润函数分别为 P₁ = 2x² + 3x 和 P₂ = x² - x + 5，求总利润。<br>
                                <strong>计算：</strong>总利润 = P₁ + P₂ = (2x² + 3x) + (x² - x + 5) = 3x² + 2x + 5<br>
                                <strong>意义：</strong>x表示销售量，总利润随销售量变化
                            </div>
                        </div>
                        <div class="example-scenario">
                            <div class="scenario-title">🌱 农业种植</div>
                            <div class="scenario-description">
                                矩形农田长为(2x+1)米，宽为(x-1)米，求面积和周长。<br>
                                <strong>面积：</strong>(2x+1)(x-1) = 2x² - 2x + x - 1 = 2x² - x - 1<br>
                                <strong>周长：</strong>2[(2x+1) + (x-1)] = 2(3x) = 6x 米
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 方程组求解 -->
                <div class="tool-section" id="system-equations">
                    <h3>方程组求解</h3>
                    <p>求解线性方程组和非线性方程组</p>
                    
                    <!-- Learning Section -->
                    <div class="learning-section">
                        <h3>🎓 方程组基础知识</h3>
                        <p>方程组是由多个方程组成的集合，求解方程组就是找到同时满足所有方程的解。</p>
                        <div class="concept-cards">
                            <div class="concept-card">
                                <h4>代入法</h4>
                                <p>从一个方程中解出一个变量，代入另一个方程。适用于系数简单的方程组。</p>
                            </div>
                            <div class="concept-card">
                                <h4>消元法</h4>
                                <p>通过加减消除一个变量，化为一元方程求解。是最常用的方法。</p>
                            </div>
                            <div class="concept-card">
                                <h4>克拉默法则</h4>
                                <p>利用行列式求解线性方程组。当系数行列式不为0时有唯一解。</p>
                            </div>
                            <div class="concept-card">
                                <h4>图像法</h4>
                                <p>将方程组转化为直线方程，交点即为解。直观但精度有限。</p>
                            </div>
                        </div>
                    </div>

                    <!-- Interactive Demo -->
                    <div class="interactive-demo">
                        <h4>🎮 二元一次方程组演示</h4>
                        <p>观察方程组的解随系数变化</p>
                        <div class="demo-controls">
                            <div class="demo-slider">
                                <label>第一个方程：ax + by = c</label>
                                <div style="display: flex; gap: 10px; margin-top: 5px;">
                                    <div style="flex: 1;">
                                        <label style="font-size: 0.8rem;">a:</label>
                                        <input type="range" id="sys-a1" min="1" max="5" value="2" step="1" oninput="updateSystemDemo()">
                                        <div class="demo-value" id="sys-value-a1">2</div>
                                    </div>
                                    <div style="flex: 1;">
                                        <label style="font-size: 0.8rem;">b:</label>
                                        <input type="range" id="sys-b1" min="1" max="5" value="3" step="1" oninput="updateSystemDemo()">
                                        <div class="demo-value" id="sys-value-b1">3</div>
                                    </div>
                                    <div style="flex: 1;">
                                        <label style="font-size: 0.8rem;">c:</label>
                                        <input type="range" id="sys-c1" min="1" max="10" value="7" step="1" oninput="updateSystemDemo()">
                                        <div class="demo-value" id="sys-value-c1">7</div>
                                    </div>
                                </div>
                            </div>
                            <div class="demo-slider">
                                <label>第二个方程：dx + ey = f</label>
                                <div style="display: flex; gap: 10px; margin-top: 5px;">
                                    <div style="flex: 1;">
                                        <label style="font-size: 0.8rem;">d:</label>
                                        <input type="range" id="sys-a2" min="1" max="5" value="1" step="1" oninput="updateSystemDemo()">
                                        <div class="demo-value" id="sys-value-a2">1</div>
                                    </div>
                                    <div style="flex: 1;">
                                        <label style="font-size: 0.8rem;">e:</label>
                                        <input type="range" id="sys-b2" min="-5" max="5" value="-1" step="1" oninput="updateSystemDemo()">
                                        <div class="demo-value" id="sys-value-b2">-1</div>
                                    </div>
                                    <div style="flex: 1;">
                                        <label style="font-size: 0.8rem;">f:</label>
                                        <input type="range" id="sys-c2" min="1" max="10" value="1" step="1" oninput="updateSystemDemo()">
                                        <div class="demo-value" id="sys-value-c2">1</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="visual-equation" id="sys-equation1">2x + 3y = 7</div>
                        <div class="visual-equation" id="sys-equation2">x - y = 1</div>
                        <div class="visual-equation" id="sys-solution">解: x = 2, y = 1</div>
                    </div>

                    <!-- Tips Section -->
                    <div class="tips-section">
                        <h4>💡 求解技巧</h4>
                        <div class="tip-item">
                            <div class="tip-icon">1</div>
                            <div>选择合适的方法：系数简单用代入法，复杂用消元法</div>
                        </div>
                        <div class="tip-item">
                            <div class="tip-icon">2</div>
                            <div>消元时选择系数较小的变量进行消除</div>
                        </div>
                        <div class="tip-item">
                            <div class="tip-icon">3</div>
                            <div>求解后要验证：将解代入原方程组检查</div>
                        </div>
                        <div class="tip-item">
                            <div class="tip-icon">4</div>
                            <div>注意特殊情况：无解、无穷多解的判断</div>
                        </div>
                        <div class="tip-item">
                            <div class="tip-icon">5</div>
                            <div>画图辅助理解：两直线的交点就是解</div>
                        </div>
                    </div>
                    
                    <div id="equations-container">
                        <div class="input-group">
                            <label>方程 1</label>
                            <input type="text" class="input-field equation-input" placeholder="2x + 3y = 7">
                        </div>
                        <div class="input-group">
                            <label>方程 2</label>
                            <input type="text" class="input-field equation-input" placeholder="x - y = 1">
                        </div>
                    </div>
                    
                    <button class="add-variable-btn" onclick="addEquation()">+ 添加方程</button>
                    
                    <div style="margin-top: 20px;">
                        <button class="btn btn-primary" onclick="solveSystem()">
                            <span>🎯</span> 求解方程组
                        </button>
                        <button class="btn btn-secondary" onclick="clearSystemResult()">
                            <span>🗑️</span> 清空
                        </button>
                    </div>
                    
                    <div class="result-area" id="system-result">
                        <h4>方程组解</h4>
                        <p>请输入方程组并点击求解按钮</p>
                    </div>

                    <!-- Practice Problems -->
                    <div class="practice-problems">
                        <h4>🏋️ 练习题</h4>
                        <div class="problem-item">
                            <div class="problem-question">1. 求解方程组：x + y = 5, x - y = 1</div>
                            <button class="show-answer-btn" onclick="toggleAnswer(this)">显示答案</button>
                            <div class="problem-answer">
                                <strong>解（加减消元法）：</strong><br>
                                x + y = 5 ①<br>
                                x - y = 1 ②<br>
                                ①+②：2x = 6，所以 x = 3<br>
                                将 x = 3 代入①：3 + y = 5，所以 y = 2<br>
                                <strong>答案：x = 3, y = 2</strong>
                            </div>
                        </div>
                        <div class="problem-item">
                            <div class="problem-question">2. 求解方程组：2x + 3y = 8, x + 2y = 5</div>
                            <button class="show-answer-btn" onclick="toggleAnswer(this)">显示答案</button>
                            <div class="problem-answer">
                                <strong>解（代入法）：</strong><br>
                                从第二个方程得：x = 5 - 2y<br>
                                代入第一个方程：2(5 - 2y) + 3y = 8<br>
                                10 - 4y + 3y = 8<br>
                                -y = -2，所以 y = 2<br>
                                x = 5 - 2(2) = 1<br>
                                <strong>答案：x = 1, y = 2</strong>
                            </div>
                        </div>
                        <div class="problem-item">
                            <div class="problem-question">3. 求解方程组：3x + 2y = 12, 6x + 4y = 24</div>
                            <button class="show-answer-btn" onclick="toggleAnswer(this)">显示答案</button>
                            <div class="problem-answer">
                                <strong>解：</strong><br>
                                观察发现第二个方程是第一个方程的2倍<br>
                                6x + 4y = 2(3x + 2y) = 2×12 = 24 ✓<br>
                                这说明两个方程实际上是同一个方程<br>
                                <strong>答案：有无穷多解，解为 y = 6 - 1.5x</strong>
                            </div>
                        </div>
                    </div>

                    <!-- Real World Examples -->
                    <div class="real-world-examples">
                        <h4>🌍 生活中的方程组</h4>
                        <div class="example-scenario">
                            <div class="scenario-title">🛒 购物问题</div>
                            <div class="scenario-description">
                                小明买了2支笔和3本书花了23元，小红买了1支笔和2本书花了15元。求笔和书的单价。<br>
                                <strong>设：</strong>笔x元，书y元<br>
                                <strong>方程组：</strong>2x + 3y = 23, x + 2y = 15<br>
                                <strong>解：</strong>x = 1元（笔），y = 7元（书）
                            </div>
                        </div>
                        <div class="example-scenario">
                            <div class="scenario-title">🚗 行程问题</div>
                            <div class="scenario-description">
                                甲乙两地相距300km，汽车和火车同时从甲地出发到乙地。汽车速度80km/h，火车速度120km/h。求多长时间火车比汽车多行驶100km？<br>
                                <strong>设：</strong>时间t小时，火车行驶距离s₁，汽车行驶距离s₂<br>
                                <strong>方程组：</strong>s₁ = 120t, s₂ = 80t, s₁ - s₂ = 100<br>
                                <strong>解：</strong>t = 2.5小时
                            </div>
                        </div>
                        <div class="example-scenario">
                            <div class="scenario-title">💰 投资分配</div>
                            <div class="scenario-description">
                                某人有10万元，分别投资于年利率5%和8%的两种理财产品，一年后总收益6500元。求两种投资的金额。<br>
                                <strong>设：</strong>5%产品投资x万元，8%产品投资y万元<br>
                                <strong>方程组：</strong>x + y = 10, 0.05x + 0.08y = 0.65<br>
                                <strong>解：</strong>x = 5万元，y = 5万元
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 表达式化简 -->
                <div class="tool-section" id="simplification">
                    <h3>表达式化简</h3>
                    <p>化简复杂的代数表达式</p>
                    
                    <!-- Learning Section -->
                    <div class="learning-section">
                        <h3>🎓 表达式化简基础</h3>
                        <p>化简表达式就是将复杂的代数表达式转化为最简形式，使计算更加便捷。</p>
                        <div class="concept-cards">
                            <div class="concept-card">
                                <h4>合并同类项</h4>
                                <p>相同变量的相同次幂可以合并。如：3x² + 5x² = 8x²</p>
                            </div>
                            <div class="concept-card">
                                <h4>分配律</h4>
                                <p>a(b + c) = ab + ac。用于展开括号或提取公因子。</p>
                            </div>
                            <div class="concept-card">
                                <h4>乘法公式</h4>
                                <p>(a±b)² = a² ± 2ab + b²，(a+b)(a-b) = a² - b²</p>
                            </div>
                            <div class="concept-card">
                                <h4>分式化简</h4>
                                <p>约去分子分母的公因子，使分式达到最简形式。</p>
                            </div>
                        </div>
                    </div>

                    <!-- Interactive Demo -->
                    <div class="interactive-demo">
                        <h4>🎮 完全平方式展开演示</h4>
                        <p>观察 (x + a)² 的展开过程</p>
                        <div class="demo-controls">
                            <div class="demo-slider">
                                <label>常数 a:</label>
                                <input type="range" id="simp-a" min="-5" max="5" value="3" step="1" oninput="updateSimpDemo()">
                                <div class="demo-value" id="simp-value-a">3</div>
                            </div>
                        </div>
                        <div class="visual-equation" id="simp-original">(x + 3)²</div>
                        <div class="visual-equation" id="simp-expanded">x² + 6x + 9</div>
                        <div style="font-size: 0.9rem; text-align: center; margin-top: 1rem;" id="simp-steps">
                            展开步骤：(x + 3)² = (x + 3)(x + 3) = x² + 3x + 3x + 9 = x² + 6x + 9
                        </div>
                    </div>

                    <!-- Tips Section -->
                    <div class="tips-section">
                        <h4>💡 化简技巧</h4>
                        <div class="tip-item">
                            <div class="tip-icon">1</div>
                            <div>先去括号，再合并同类项</div>
                        </div>
                        <div class="tip-item">
                            <div class="tip-icon">2</div>
                            <div>识别并应用乘法公式</div>
                        </div>
                        <div class="tip-item">
                            <div class="tip-icon">3</div>
                            <div>分式要约去公因子到最简</div>
                        </div>
                        <div class="tip-item">
                            <div class="tip-icon">4</div>
                            <div>根式要化简到最简根式</div>
                        </div>
                        <div class="tip-item">
                            <div class="tip-icon">5</div>
                            <div>检查结果是否为最简形式</div>
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label for="simplify-input">输入表达式</label>
                        <input type="text" id="simplify-input" class="input-field" placeholder="(x + 1)^2 + 2(x + 1) + 1">
                    </div>
                    
                    <button class="btn btn-primary" onclick="simplifyExpression()">
                        <span>✨</span> 化简
                    </button>
                    <button class="btn btn-secondary" onclick="clearSimplificationResult()">
                        <span>🗑️</span> 清空
                    </button>
                    
                    <div class="result-area" id="simplification-result">
                        <h4>化简结果</h4>
                        <p>请输入表达式并点击化简按钮</p>
                    </div>

                    <!-- Practice Problems -->
                    <div class="practice-problems">
                        <h4>🏋️ 练习题</h4>
                        <div class="problem-item">
                            <div class="problem-question">1. 化简：3x + 2x - x + 5</div>
                            <button class="show-answer-btn" onclick="toggleAnswer(this)">显示答案</button>
                            <div class="problem-answer">
                                <strong>解：</strong><br>
                                3x + 2x - x + 5<br>
                                = (3 + 2 - 1)x + 5<br>
                                = 4x + 5
                            </div>
                        </div>
                        <div class="problem-item">
                            <div class="problem-question">2. 化简：(x + 2)² - (x - 1)²</div>
                            <button class="show-answer-btn" onclick="toggleAnswer(this)">显示答案</button>
                            <div class="problem-answer">
                                <strong>解：</strong><br>
                                (x + 2)² - (x - 1)²<br>
                                = (x² + 4x + 4) - (x² - 2x + 1)<br>
                                = x² + 4x + 4 - x² + 2x - 1<br>
                                = 6x + 3 = 3(2x + 1)
                            </div>
                        </div>
                        <div class="problem-item">
                            <div class="problem-question">3. 化简：2(x + 3) - 3(x - 1)</div>
                            <button class="show-answer-btn" onclick="toggleAnswer(this)">显示答案</button>
                            <div class="problem-answer">
                                <strong>解：</strong><br>
                                2(x + 3) - 3(x - 1)<br>
                                = 2x + 6 - 3x + 3<br>
                                = 2x - 3x + 6 + 3<br>
                                = -x + 9
                            </div>
                        </div>
                    </div>

                    <!-- Real World Examples -->
                    <div class="real-world-examples">
                        <h4>🌍 生活中的表达式化简</h4>
                        <div class="example-scenario">
                            <div class="scenario-title">💰 费用计算</div>
                            <div class="scenario-description">
                                某公司月费用包括：固定费用3000元，员工工资50x元，水电费20x元，其他费用10x元。求总费用的简化表达式。<br>
                                <strong>原式：</strong>3000 + 50x + 20x + 10x<br>
                                <strong>化简：</strong>3000 + (50 + 20 + 10)x = 3000 + 80x 元
                            </div>
                        </div>
                        <div class="example-scenario">
                            <div class="scenario-title">📐 几何面积</div>
                            <div class="scenario-description">
                                一个复合图形由边长为x的正方形和长为(x+2)、宽为3的矩形组成，求总面积。<br>
                                <strong>原式：</strong>x² + 3(x + 2)<br>
                                <strong>化简：</strong>x² + 3x + 6 平方单位
                            </div>
                        </div>
                        <div class="example-scenario">
                            <div class="scenario-title">🚗 行程优化</div>
                            <div class="scenario-description">
                                汽车行驶时间为t小时，前半程速度60km/h，后半程速度80km/h，总路程为2s公里。求平均速度表达式。<br>
                                <strong>原式：</strong>2s ÷ (s/60 + s/80)<br>
                                <strong>化简：</strong>2s ÷ (4s + 3s)/240 = 480s/7s = 480/7 ≈ 68.6 km/h
                            </div>
                        </div>
                    </div>

                    <div class="examples-grid">
                        <div class="example-card" onclick="loadSimplifyExample('(x + 1)^2')">
                            <h5>完全平方</h5>
                            <div class="equation">(x + 1)²</div>
                            <p>= x² + 2x + 1</p>
                        </div>
                        <div class="example-card" onclick="loadSimplifyExample('(x + 2)(x - 2)')">
                            <h5>平方差</h5>
                            <div class="equation">(x + 2)(x - 2)</div>
                            <p>= x² - 4</p>
                        </div>
                        <div class="example-card" onclick="loadSimplifyExample('2x + 3x - x')">
                            <h5>合并同类项</h5>
                            <div class="equation">2x + 3x - x</div>
                            <p>= 4x</p>
                        </div>
                        <div class="example-card" onclick="loadSimplifyExample('(2x + 1)(x - 3)')">
                            <h5>多项式乘法</h5>
                            <div class="equation">(2x + 1)(x - 3)</div>
                            <p>= 2x² - 5x - 3</p>
                        </div>
                    </div>
                </div>

                <!-- 科学计算器 -->
                <div class="tool-section" id="calculator">
                    <h3>科学计算器</h3>
                    <p>支持基本运算、三角函数、对数等科学计算</p>
                    
                    <!-- Learning Section -->
                    <div class="learning-section">
                        <h3>🎓 科学计算基础</h3>
                        <p>科学计算器是数学、物理、工程等领域的重要工具，掌握其使用方法能大大提高计算效率。</p>
                        <div class="concept-cards">
                            <div class="concept-card">
                                <h4>三角函数</h4>
                                <p>sin、cos、tan及其反函数。注意角度制和弧度制的转换。</p>
                            </div>
                            <div class="concept-card">
                                <h4>对数函数</h4>
                                <p>常用对数log₁₀和自然对数ln。log(ab) = log(a) + log(b)</p>
                            </div>
                            <div class="concept-card">
                                <h4>指数运算</h4>
                                <p>幂运算和开方。a^m × a^n = a^(m+n)，√a = a^(1/2)</p>
                            </div>
                            <div class="concept-card">
                                <h4>常数</h4>
                                <p>π ≈ 3.14159，e ≈ 2.71828。这些是数学中的重要常数。</p>
                            </div>
                        </div>
                    </div>

                    <!-- Interactive Demo -->
                    <div class="interactive-demo">
                        <h4>🎮 三角函数演示</h4>
                        <p>观察三角函数值随角度变化</p>
                        <div class="demo-controls">
                            <div class="demo-slider">
                                <label>角度 (度):</label>
                                <input type="range" id="calc-angle" min="0" max="360" value="30" step="15" oninput="updateCalcDemo()">
                                <div class="demo-value" id="calc-value-angle">30°</div>
                            </div>
                        </div>
                        <div class="visual-equation" id="calc-sin">sin(30°) = 0.5</div>
                        <div class="visual-equation" id="calc-cos">cos(30°) = 0.866</div>
                        <div class="visual-equation" id="calc-tan">tan(30°) = 0.577</div>
                    </div>

                    <!-- Tips Section -->
                    <div class="tips-section">
                        <h4>💡 使用技巧</h4>
                        <div class="tip-item">
                            <div class="tip-icon">1</div>
                            <div>注意角度制和弧度制：180° = π弧度</div>
                        </div>
                        <div class="tip-item">
                            <div class="tip-icon">2</div>
                            <div>括号要配对：计算复杂表达式时确保括号正确</div>
                        </div>
                        <div class="tip-item">
                            <div class="tip-icon">3</div>
                            <div>运算顺序：先乘除后加减，括号优先</div>
                        </div>
                        <div class="tip-item">
                            <div class="tip-icon">4</div>
                            <div>精度控制：根据需要选择合适的小数位数</div>
                        </div>
                        <div class="tip-item">
                            <div class="tip-icon">5</div>
                            <div>验证结果：用不同方法验证重要计算结果</div>
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label for="calc-input">输入表达式</label>
                        <input type="text" id="calc-input" class="input-field" placeholder="sin(30) + cos(60) * log(10)">
                    </div>
                    
                    <div class="calculator-buttons" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin: 20px 0;">
                        <button class="btn btn-secondary" onclick="insertCalc('sin(')">sin</button>
                        <button class="btn btn-secondary" onclick="insertCalc('cos(')">cos</button>
                        <button class="btn btn-secondary" onclick="insertCalc('tan(')">tan</button>
                        <button class="btn btn-secondary" onclick="insertCalc('log(')">log</button>
                        <button class="btn btn-secondary" onclick="insertCalc('sqrt(')">√</button>
                        <button class="btn btn-secondary" onclick="insertCalc('^')">^</button>
                        <button class="btn btn-secondary" onclick="insertCalc('pi')">π</button>
                        <button class="btn btn-secondary" onclick="insertCalc('e')">e</button>
                    </div>
                    
                    <button class="btn btn-primary" onclick="calculateExpression()">
                        <span>🧮</span> 计算
                    </button>
                    <button class="btn btn-secondary" onclick="clearCalculatorResult()">
                        <span>🗑️</span> 清空
                    </button>
                    
                    <div class="result-area" id="calculator-result">
                        <h4>计算结果</h4>
                        <p>请输入数学表达式并点击计算按钮</p>
                    </div>

                    <!-- Practice Problems -->
                    <div class="practice-problems">
                        <h4>🏋️ 练习题</h4>
                        <div class="problem-item">
                            <div class="problem-question">1. 计算：sin(45°) + cos(45°)</div>
                            <button class="show-answer-btn" onclick="toggleAnswer(this)">显示答案</button>
                            <div class="problem-answer">
                                <strong>解：</strong><br>
                                sin(45°) = √2/2 ≈ 0.707<br>
                                cos(45°) = √2/2 ≈ 0.707<br>
                                sin(45°) + cos(45°) = √2 ≈ 1.414
                            </div>
                        </div>
                        <div class="problem-item">
                            <div class="problem-question">2. 计算：log₁₀(100) + ln(e²)</div>
                            <button class="show-answer-btn" onclick="toggleAnswer(this)">显示答案</button>
                            <div class="problem-answer">
                                <strong>解：</strong><br>
                                log₁₀(100) = log₁₀(10²) = 2<br>
                                ln(e²) = 2ln(e) = 2×1 = 2<br>
                                结果：2 + 2 = 4
                            </div>
                        </div>
                        <div class="problem-item">
                            <div class="problem-question">3. 计算：√(3² + 4²)</div>
                            <button class="show-answer-btn" onclick="toggleAnswer(this)">显示答案</button>
                            <div class="problem-answer">
                                <strong>解：</strong><br>
                                √(3² + 4²) = √(9 + 16) = √25 = 5<br>
                                <em>这是勾股定理的应用</em>
                            </div>
                        </div>
                    </div>

                    <!-- Real World Examples -->
                    <div class="real-world-examples">
                        <h4>🌍 生活中的科学计算</h4>
                        <div class="example-scenario">
                            <div class="scenario-title">🏗️ 建筑工程</div>
                            <div class="scenario-description">
                                计算屋顶倾斜角度：屋顶高度3米，底边长度8米，求倾斜角。<br>
                                <strong>计算：</strong>tan(θ) = 对边/邻边 = 3/8 = 0.375<br>
                                <strong>角度：</strong>θ = arctan(0.375) ≈ 20.6°
                            </div>
                        </div>
                        <div class="example-scenario">
                            <div class="scenario-title">📊 数据分析</div>
                            <div class="scenario-description">
                                某产品销量按指数增长，初始100件，增长率20%，求5年后销量。<br>
                                <strong>公式：</strong>N = N₀ × (1 + r)^t<br>
                                <strong>计算：</strong>N = 100 × 1.2^5 ≈ 249件
                            </div>
                        </div>
                        <div class="example-scenario">
                            <div class="scenario-title">🔊 声学计算</div>
                            <div class="scenario-description">
                                声音强度为原来的1000倍，求分贝增加值。<br>
                                <strong>公式：</strong>ΔdB = 10 × log₁₀(I₂/I₁)<br>
                                <strong>计算：</strong>ΔdB = 10 × log₁₀(1000) = 10 × 3 = 30分贝
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tab switching functionality
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                // Remove active class from all tabs and sections
                document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                document.querySelectorAll('.tool-section').forEach(s => s.classList.remove('active'));
                
                // Add active class to clicked tab
                btn.classList.add('active');
                
                // Show corresponding section
                const tabId = btn.dataset.tab;
                document.getElementById(tabId).classList.add('active');
            });
        });

        // Equation solver
        function solveEquation() {
            const equation = document.getElementById('equation-input').value.trim();
            const resultDiv = document.getElementById('equation-result');
            
            if (!equation) {
                showError(resultDiv, '请输入方程');
                return;
            }
            
            try {
                const solution = solveEquationLogic(equation);
                displayEquationResult(resultDiv, equation, solution);
            } catch (error) {
                showError(resultDiv, '方程格式错误或无法求解: ' + error.message);
            }
        }

        function solveEquationLogic(equation) {
            // Simple equation solver for demonstration
            // In a real implementation, you'd use a proper math library
            
            // Handle simple linear equations like "2x + 3 = 7"
            if (equation.includes('=')) {
                const [left, right] = equation.split('=').map(s => s.trim());
                
                // Simple linear equation: ax + b = c
                const linearMatch = left.match(/^(-?\d*\.?\d*)x\s*([+-]\s*\d+\.?\d*)?$/);
                if (linearMatch && !isNaN(parseFloat(right))) {
                    const a = parseFloat(linearMatch[1]) || 1;
                    const b = parseFloat((linearMatch[2] || '0').replace(/\s/g, '')) || 0;
                    const c = parseFloat(right);
                    
                    const x = (c - b) / a;
                    return {
                        type: 'linear',
                        solutions: [x],
                        steps: [
                            `原方程: ${equation}`,
                            `移项: ${a}x = ${c} - ${b}`,
                            `化简: ${a}x = ${c - b}`,
                            `解得: x = ${x}`
                        ]
                    };
                }
                
                // Simple quadratic equation: x^2 + bx + c = 0
                const quadMatch = left.match(/^x\^2\s*([+-]\s*\d+\.?\d*)x\s*([+-]\s*\d+\.?\d*)?$/);
                if (quadMatch && parseFloat(right) === 0) {
                    const b = parseFloat((quadMatch[1] || '0').replace(/\s/g, '')) || 0;
                    const c = parseFloat((quadMatch[2] || '0').replace(/\s/g, '')) || 0;
                    
                    const discriminant = b * b - 4 * c;
                    if (discriminant >= 0) {
                        const x1 = (-b + Math.sqrt(discriminant)) / 2;
                        const x2 = (-b - Math.sqrt(discriminant)) / 2;
                        
                        return {
                            type: 'quadratic',
                            solutions: discriminant === 0 ? [x1] : [x1, x2],
                            steps: [
                                `原方程: ${equation}`,
                                `标准形式: x² + ${b}x + ${c} = 0`,
                                `判别式: Δ = b² - 4ac = ${b}² - 4(1)(${c}) = ${discriminant}`,
                                discriminant === 0 ? 
                                    `Δ = 0，有一个重根: x = ${x1}` :
                                    `Δ > 0，有两个不同实根: x₁ = ${x1}, x₂ = ${x2}`
                            ]
                        };
                    }
                }
            }
            
            throw new Error('暂不支持此类型方程，请尝试简单的一次或二次方程');
        }

        function displayEquationResult(resultDiv, equation, solution) {
            let html = `<h4>解答结果</h4>`;
            html += `<div class="formula-display">原方程: ${equation}</div>`;
            
            if (solution.solutions.length === 1) {
                html += `<div class="success-message">解: x = ${solution.solutions[0]}</div>`;
            } else {
                html += `<div class="success-message">解: x₁ = ${solution.solutions[0]}, x₂ = ${solution.solutions[1]}</div>`;
            }
            
            if (solution.steps) {
                html += `<div class="step-by-step">`;
                html += `<h5>求解步骤:</h5>`;
                solution.steps.forEach((step, index) => {
                    html += `<div class="step">`;
                    html += `<span class="step-number">${index + 1}</span>`;
                    html += `${step}`;
                    html += `</div>`;
                });
                html += `</div>`;
            }
            
            resultDiv.innerHTML = html;
        }

        // Factor expression
        function factorExpression() {
            const expression = document.getElementById('factor-input').value.trim();
            const resultDiv = document.getElementById('factor-result');
            
            if (!expression) {
                showError(resultDiv, '请输入多项式');
                return;
            }
            
            try {
                const factored = factorExpressionLogic(expression);
                displayFactorResult(resultDiv, expression, factored);
            } catch (error) {
                showError(resultDiv, '表达式格式错误或无法分解: ' + error.message);
            }
        }

        function factorExpressionLogic(expression) {
            // Simple factorization for demonstration
            
            // x^2 + bx + c form
            const quadMatch = expression.match(/^x\^2\s*([+-]\s*\d+\.?\d*)x\s*([+-]\s*\d+\.?\d*)$/);
            if (quadMatch) {
                const b = parseFloat((quadMatch[1] || '0').replace(/\s/g, '')) || 0;
                const c = parseFloat((quadMatch[2] || '0').replace(/\s/g, '')) || 0;
                
                // Find factors of c that add up to b
                for (let i = 1; i <= Math.abs(c); i++) {
                    if (c % i === 0) {
                        const factor1 = i;
                        const factor2 = c / i;
                        
                        if (factor1 + factor2 === b) {
                            return {
                                original: expression,
                                factored: `(x + ${factor1})(x + ${factor2})`,
                                steps: [
                                    `原式: ${expression}`,
                                    `寻找两个数，它们的乘积是 ${c}，和是 ${b}`,
                                    `这两个数是 ${factor1} 和 ${factor2}`,
                                    `因此: ${expression} = (x + ${factor1})(x + ${factor2})`
                                ]
                            };
                        }
                        
                        if (factor1 - factor2 === b) {
                            return {
                                original: expression,
                                factored: `(x + ${factor1})(x - ${factor2})`,
                                steps: [
                                    `原式: ${expression}`,
                                    `寻找两个数，它们的乘积是 ${c}，差是 ${b}`,
                                    `这两个数是 ${factor1} 和 ${factor2}`,
                                    `因此: ${expression} = (x + ${factor1})(x - ${factor2})`
                                ]
                            };
                        }
                    }
                }
            }
            
            // Difference of squares: x^2 - a^2
            const diffSquareMatch = expression.match(/^x\^2\s*-\s*(\d+)$/);
            if (diffSquareMatch) {
                const a = Math.sqrt(parseFloat(diffSquareMatch[1]));
                if (Number.isInteger(a)) {
                    return {
                        original: expression,
                        factored: `(x + ${a})(x - ${a})`,
                        steps: [
                            `原式: ${expression}`,
                            `这是平方差公式: a² - b² = (a + b)(a - b)`,
                            `其中 a = x, b = ${a}`,
                            `因此: ${expression} = (x + ${a})(x - ${a})`
                        ]
                    };
                }
            }
            
            throw new Error('暂不支持此类型表达式的分解');
        }

        function displayFactorResult(resultDiv, expression, result) {
            let html = `<h4>分解结果</h4>`;
            html += `<div class="formula-display">原式: ${result.original}</div>`;
            html += `<div class="success-message">分解结果: ${result.factored}</div>`;
            
            if (result.steps) {
                html += `<div class="step-by-step">`;
                html += `<h5>分解步骤:</h5>`;
                result.steps.forEach((step, index) => {
                    html += `<div class="step">`;
                    html += `<span class="step-number">${index + 1}</span>`;
                    html += `${step}`;
                    html += `</div>`;
                });
                html += `</div>`;
            }
            
            resultDiv.innerHTML = html;
        }

        // Polynomial operations
        function calculatePolynomial() {
            const poly1 = document.getElementById('poly1-input').value.trim();
            const poly2 = document.getElementById('poly2-input').value.trim();
            const operation = document.getElementById('operation-select').value;
            const resultDiv = document.getElementById('polynomial-result');
            
            if (!poly1 || !poly2) {
                showError(resultDiv, '请输入两个多项式');
                return;
            }
            
            try {
                const result = performPolynomialOperation(poly1, poly2, operation);
                displayPolynomialResult(resultDiv, poly1, poly2, operation, result);
            } catch (error) {
                showError(resultDiv, '多项式格式错误: ' + error.message);
            }
        }

        function performPolynomialOperation(poly1, poly2, operation) {
            // Simplified polynomial operations for demonstration
            const operationNames = {
                'add': '加法',
                'subtract': '减法',
                'multiply': '乘法',
                'divide': '除法'
            };
            
            return {
                operation: operationNames[operation],
                result: `(${poly1}) ${operation === 'add' ? '+' : operation === 'subtract' ? '-' : operation === 'multiply' ? '×' : '÷'} (${poly2})`,
                note: '完整的多项式运算需要更复杂的算法实现'
            };
        }

        function displayPolynomialResult(resultDiv, poly1, poly2, operation, result) {
            let html = `<h4>运算结果</h4>`;
            html += `<div class="formula-display">${result.result}</div>`;
            html += `<div class="success-message">运算类型: ${result.operation}</div>`;
            html += `<p>${result.note}</p>`;
            
            resultDiv.innerHTML = html;
        }

        // System of equations
        function addEquation() {
            const container = document.getElementById('equations-container');
            const equationCount = container.children.length + 1;
            
            const div = document.createElement('div');
            div.className = 'input-group';
            div.innerHTML = `
                <label>方程 ${equationCount}</label>
                <input type="text" class="input-field equation-input" placeholder="输入方程">
            `;
            
            container.appendChild(div);
        }

        function solveSystem() {
            const equations = Array.from(document.querySelectorAll('.equation-input')).map(input => input.value.trim());
            const resultDiv = document.getElementById('system-result');
            
            const validEquations = equations.filter(eq => eq !== '');
            
            if (validEquations.length < 2) {
                showError(resultDiv, '请至少输入两个方程');
                return;
            }
            
            try {
                const solution = solveSystemLogic(validEquations);
                displaySystemResult(resultDiv, validEquations, solution);
            } catch (error) {
                showError(resultDiv, '方程组格式错误或无解: ' + error.message);
            }
        }

        function solveSystemLogic(equations) {
            // Simplified system solver for 2x2 linear systems
            if (equations.length === 2) {
                // Try to parse simple linear equations like "2x + 3y = 7"
                const eq1Match = equations[0].match(/^(-?\d*\.?\d*)x\s*([+-]\s*\d*\.?\d*)y\s*=\s*(-?\d+\.?\d*)$/);
                const eq2Match = equations[1].match(/^(-?\d*\.?\d*)x\s*([+-]\s*\d*\.?\d*)y\s*=\s*(-?\d+\.?\d*)$/);
                
                if (eq1Match && eq2Match) {
                    const a1 = parseFloat(eq1Match[1]) || 1;
                    const b1 = parseFloat((eq1Match[2] || '0').replace(/\s/g, '')) || 0;
                    const c1 = parseFloat(eq1Match[3]);
                    
                    const a2 = parseFloat(eq2Match[1]) || 1;
                    const b2 = parseFloat((eq2Match[2] || '0').replace(/\s/g, '')) || 0;
                    const c2 = parseFloat(eq2Match[3]);
                    
                    const det = a1 * b2 - a2 * b1;
                    
                    if (Math.abs(det) < 1e-10) {
                        throw new Error('方程组无唯一解（行列式为0）');
                    }
                    
                    const x = (c1 * b2 - c2 * b1) / det;
                    const y = (a1 * c2 - a2 * c1) / det;
                    
                    return {
                        solutions: { x: x, y: y },
                        method: '克拉默法则',
                        steps: [
                            `方程组:`,
                            `${equations[0]}`,
                            `${equations[1]}`,
                            `系数矩阵行列式: D = ${a1} × ${b2} - ${a2} × ${b1} = ${det}`,
                            `x = (${c1} × ${b2} - ${c2} × ${b1}) / ${det} = ${x}`,
                            `y = (${a1} × ${c2} - ${a2} × ${c1}) / ${det} = ${y}`
                        ]
                    };
                }
            }
            
            throw new Error('暂不支持此类型方程组，请尝试简单的二元一次方程组');
        }

        function displaySystemResult(resultDiv, equations, solution) {
            let html = `<h4>方程组解</h4>`;
            
            if (solution.solutions) {
                html += `<div class="success-message">`;
                Object.entries(solution.solutions).forEach(([variable, value]) => {
                    html += `${variable} = ${value}<br>`;
                });
                html += `</div>`;
            }
            
            if (solution.steps) {
                html += `<div class="step-by-step">`;
                html += `<h5>求解步骤 (${solution.method}):</h5>`;
                solution.steps.forEach((step, index) => {
                    html += `<div class="step">`;
                    html += `<span class="step-number">${index + 1}</span>`;
                    html += `${step}`;
                    html += `</div>`;
                });
                html += `</div>`;
            }
            
            resultDiv.innerHTML = html;
        }

        // Expression simplification
        function simplifyExpression() {
            const expression = document.getElementById('simplify-input').value.trim();
            const resultDiv = document.getElementById('simplification-result');
            
            if (!expression) {
                showError(resultDiv, '请输入表达式');
                return;
            }
            
            try {
                const simplified = simplifyExpressionLogic(expression);
                displaySimplifyResult(resultDiv, expression, simplified);
            } catch (error) {
                showError(resultDiv, '表达式格式错误: ' + error.message);
            }
        }

        function simplifyExpressionLogic(expression) {
            // Simple expression simplification examples
            const simplifications = {
                '(x + 1)^2': 'x² + 2x + 1',
                '(x - 1)^2': 'x² - 2x + 1',
                '(x + 2)(x - 2)': 'x² - 4',
                '2x + 3x - x': '4x',
                'x + x + x': '3x'
            };
            
            if (simplifications[expression]) {
                return {
                    original: expression,
                    simplified: simplifications[expression],
                    steps: [`原式: ${expression}`, `化简后: ${simplifications[expression]}`]
                };
            }
            
            return {
                original: expression,
                simplified: expression,
                steps: [`原式: ${expression}`, `该表达式已是最简形式`]
            };
        }

        function displaySimplifyResult(resultDiv, expression, result) {
            let html = `<h4>化简结果</h4>`;
            html += `<div class="formula-display">原式: ${result.original}</div>`;
            html += `<div class="success-message">化简结果: ${result.simplified}</div>`;
            
            if (result.steps) {
                html += `<div class="step-by-step">`;
                html += `<h5>化简步骤:</h5>`;
                result.steps.forEach((step, index) => {
                    html += `<div class="step">`;
                    html += `<span class="step-number">${index + 1}</span>`;
                    html += `${step}`;
                    html += `</div>`;
                });
                html += `</div>`;
            }
            
            resultDiv.innerHTML = html;
        }

        // Scientific calculator
        function insertCalc(value) {
            const input = document.getElementById('calc-input');
            input.value += value;
        }

        function calculateExpression() {
            const expression = document.getElementById('calc-input').value.trim();
            const resultDiv = document.getElementById('calculator-result');
            
            if (!expression) {
                showError(resultDiv, '请输入表达式');
                return;
            }
            
            try {
                const result = evaluateExpression(expression);
                displayCalculatorResult(resultDiv, expression, result);
            } catch (error) {
                showError(resultDiv, '表达式错误: ' + error.message);
            }
        }

        function evaluateExpression(expression) {
            // Simple expression evaluator for demonstration
            // Replace common math functions
            let expr = expression
                .replace(/sin\(/g, 'Math.sin(')
                .replace(/cos\(/g, 'Math.cos(')
                .replace(/tan\(/g, 'Math.tan(')
                .replace(/log\(/g, 'Math.log10(')
                .replace(/sqrt\(/g, 'Math.sqrt(')
                .replace(/pi/g, 'Math.PI')
                .replace(/e/g, 'Math.E')
                .replace(/\^/g, '**');
            
            try {
                const result = eval(expr);
                return {
                    original: expression,
                    result: result,
                    formatted: typeof result === 'number' ? result.toFixed(6).replace(/\.?0+$/, '') : result
                };
            } catch (e) {
                throw new Error('无法计算表达式');
            }
        }

        function displayCalculatorResult(resultDiv, expression, result) {
            let html = `<h4>计算结果</h4>`;
            html += `<div class="formula-display">${result.original} = ${result.formatted}</div>`;
            html += `<div class="success-message">精确值: ${result.result}</div>`;
            
            resultDiv.innerHTML = html;
        }

        // Example loading functions
        function loadExample(equation) {
            document.getElementById('equation-input').value = equation;
        }

        function loadFactorExample(expression) {
            document.getElementById('factor-input').value = expression;
        }

        function loadSimplifyExample(expression) {
            document.getElementById('simplify-input').value = expression;
        }

        // Clear functions
        function clearEquationResult() {
            document.getElementById('equation-input').value = '';
            document.getElementById('equation-result').innerHTML = '<h4>解答结果</h4><p>请输入方程并点击求解按钮</p>';
        }

        function clearFactorResult() {
            document.getElementById('factor-input').value = '';
            document.getElementById('factor-result').innerHTML = '<h4>分解结果</h4><p>请输入多项式并点击分解按钮</p>';
        }

        function clearPolynomialResult() {
            document.getElementById('poly1-input').value = '';
            document.getElementById('poly2-input').value = '';
            document.getElementById('polynomial-result').innerHTML = '<h4>运算结果</h4><p>请输入两个多项式并选择运算类型</p>';
        }

        function clearSystemResult() {
            document.querySelectorAll('.equation-input').forEach(input => input.value = '');
            document.getElementById('system-result').innerHTML = '<h4>方程组解</h4><p>请输入方程组并点击求解按钮</p>';
        }

        function clearSimplificationResult() {
            document.getElementById('simplify-input').value = '';
            document.getElementById('simplification-result').innerHTML = '<h4>化简结果</h4><p>请输入表达式并点击化简按钮</p>';
        }

        function clearCalculatorResult() {
            document.getElementById('calc-input').value = '';
            document.getElementById('calculator-result').innerHTML = '<h4>计算结果</h4><p>请输入数学表达式并点击计算按钮</p>';
        }

        // Interactive demo functions
        function updateDemo() {
            const a = parseFloat(document.getElementById('demo-a').value);
            const b = parseFloat(document.getElementById('demo-b').value);
            const c = parseFloat(document.getElementById('demo-c').value);
            
            // Update value displays
            document.getElementById('value-a').textContent = a;
            document.getElementById('value-b').textContent = b;
            document.getElementById('value-c').textContent = c;
            
            // Update equation display
            let equation = '';
            if (a !== 0) {
                equation += a === 1 ? 'x²' : a === -1 ? '-x²' : `${a}x²`;
            }
            if (b !== 0) {
                if (equation && b > 0) equation += ' + ';
                if (b === 1) equation += 'x';
                else if (b === -1) equation += '-x';
                else equation += `${b}x`;
            }
            if (c !== 0) {
                if (equation && c > 0) equation += ' + ';
                equation += `${c}`;
            }
            if (!equation) equation = '0';
            equation += ' = 0';
            
            document.getElementById('demo-equation').textContent = equation;
            
            // Calculate and display solution
            let solution = '';
            if (a === 0) {
                if (b === 0) {
                    solution = c === 0 ? '解: 任意实数' : '解: 无解';
                } else {
                    const x = -c / b;
                    solution = `解: x = ${x.toFixed(2)}`;
                }
            } else {
                const discriminant = b * b - 4 * a * c;
                if (discriminant < 0) {
                    solution = '解: 无实数解';
                } else if (discriminant === 0) {
                    const x = -b / (2 * a);
                    solution = `解: x = ${x.toFixed(2)} (重根)`;
                } else {
                    const x1 = (-b + Math.sqrt(discriminant)) / (2 * a);
                    const x2 = (-b - Math.sqrt(discriminant)) / (2 * a);
                    solution = `解: x₁ = ${x1.toFixed(2)}, x₂ = ${x2.toFixed(2)}`;
                }
            }
            
            document.getElementById('demo-solution').textContent = solution;
        }

        // Toggle answer function for practice problems
        function toggleAnswer(button) {
            const answer = button.nextElementSibling;
            if (answer.style.display === 'none' || !answer.style.display) {
                answer.style.display = 'block';
                button.textContent = '隐藏答案';
            } else {
                answer.style.display = 'none';
                button.textContent = '显示答案';
            }
        }

        // Initialize demo on page load
        document.addEventListener('DOMContentLoaded', function() {
            updateDemo();
            updateFactorDemo();
            updatePolyDemo();
            updateSystemDemo();
            updateSimpDemo();
            updateCalcDemo();
        });

        // Interactive demo functions for factorization
        function updateFactorDemo() {
            const b = parseInt(document.getElementById('factor-b').value);
            const c = parseInt(document.getElementById('factor-c').value);
            
            // Update value displays
            document.getElementById('factor-value-b').textContent = b;
            document.getElementById('factor-value-c').textContent = c;
            
            // Update equation display
            let equation = 'x²';
            if (b !== 0) {
                equation += b > 0 ? ` + ${b}x` : ` - ${Math.abs(b)}x`;
            }
            if (c !== 0) {
                equation += c > 0 ? ` + ${c}` : ` - ${Math.abs(c)}`;
            }
            
            document.getElementById('factor-equation').textContent = equation;
            
            // Try to factor
            let factored = '';
            for (let i = 1; i <= Math.abs(c); i++) {
                if (c % i === 0) {
                    const factor1 = i;
                    const factor2 = c / i;
                    
                    if (factor1 + factor2 === b) {
                        factored = `(x + ${factor1})(x + ${factor2})`;
                        break;
                    } else if (factor1 - factor2 === b) {
                        factored = `(x + ${factor1})(x - ${factor2})`;
                        break;
                    } else if (-factor1 + factor2 === b) {
                        factored = `(x - ${factor1})(x + ${factor2})`;
                        break;
                    } else if (-factor1 - factor2 === b) {
                        factored = `(x - ${factor1})(x - ${factor2})`;
                        break;
                    }
                }
            }
            
            if (!factored) {
                factored = '无法简单因式分解';
            }
            
            document.getElementById('factor-result').textContent = factored;
        }

        // Interactive demo functions for polynomial
        function updatePolyDemo() {
            const a = parseInt(document.getElementById('poly-a').value);
            const b = parseInt(document.getElementById('poly-b').value);
            
            // Update value displays
            document.getElementById('poly-value-a').textContent = a;
            document.getElementById('poly-value-b').textContent = b;
            
            // Update original expression
            document.getElementById('poly-original').textContent = `(x + ${a})(x + ${b})`;
            
            // Calculate expanded form
            const x2_coeff = 1;
            const x_coeff = a + b;
            const const_term = a * b;
            
            let expanded = 'x²';
            if (x_coeff !== 0) {
                expanded += x_coeff > 0 ? ` + ${x_coeff}x` : ` - ${Math.abs(x_coeff)}x`;
            }
            if (const_term !== 0) {
                expanded += const_term > 0 ? ` + ${const_term}` : ` - ${Math.abs(const_term)}`;
            }
            
            document.getElementById('poly-expanded').textContent = expanded;
            
            // Update steps
            document.getElementById('poly-steps').textContent = 
                `展开步骤：x·x + x·${b} + ${a}·x + ${a}·${b} = x² + ${b}x + ${a}x + ${a * b} = ${expanded}`;
        }

        // Interactive demo functions for system equations
        function updateSystemDemo() {
            const a1 = parseInt(document.getElementById('sys-a1').value);
            const b1 = parseInt(document.getElementById('sys-b1').value);
            const c1 = parseInt(document.getElementById('sys-c1').value);
            const a2 = parseInt(document.getElementById('sys-a2').value);
            const b2 = parseInt(document.getElementById('sys-b2').value);
            const c2 = parseInt(document.getElementById('sys-c2').value);
            
            // Update value displays
            document.getElementById('sys-value-a1').textContent = a1;
            document.getElementById('sys-value-b1').textContent = b1;
            document.getElementById('sys-value-c1').textContent = c1;
            document.getElementById('sys-value-a2').textContent = a2;
            document.getElementById('sys-value-b2').textContent = b2;
            document.getElementById('sys-value-c2').textContent = c2;
            
            // Update equation displays
            document.getElementById('sys-equation1').textContent = `${a1}x + ${b1}y = ${c1}`;
            document.getElementById('sys-equation2').textContent = `${a2}x + ${b2}y = ${c2}`;
            
            // Solve system using Cramer's rule
            const det = a1 * b2 - a2 * b1;
            
            if (Math.abs(det) < 0.001) {
                document.getElementById('sys-solution').textContent = '解: 无唯一解（行列式为0）';
            } else {
                const x = (c1 * b2 - c2 * b1) / det;
                const y = (a1 * c2 - a2 * c1) / det;
                document.getElementById('sys-solution').textContent = `解: x = ${x.toFixed(2)}, y = ${y.toFixed(2)}`;
            }
        }

        // Interactive demo functions for simplification
        function updateSimpDemo() {
            const a = parseInt(document.getElementById('simp-a').value);
            
            // Update value display
            document.getElementById('simp-value-a').textContent = a;
            
            // Update original expression
            document.getElementById('simp-original').textContent = `(x + ${a})²`;
            
            // Calculate expanded form
            const x2_coeff = 1;
            const x_coeff = 2 * a;
            const const_term = a * a;
            
            let expanded = 'x²';
            if (x_coeff !== 0) {
                expanded += x_coeff > 0 ? ` + ${x_coeff}x` : ` - ${Math.abs(x_coeff)}x`;
            }
            if (const_term !== 0) {
                expanded += const_term > 0 ? ` + ${const_term}` : ` - ${Math.abs(const_term)}`;
            }
            
            document.getElementById('simp-expanded').textContent = expanded;
            
            // Update steps
            document.getElementById('simp-steps').textContent = 
                `展开步骤：(x + ${a})² = (x + ${a})(x + ${a}) = x² + ${a}x + ${a}x + ${a * a} = ${expanded}`;
        }

        // Interactive demo functions for calculator
        function updateCalcDemo() {
            const angle = parseInt(document.getElementById('calc-angle').value);
            
            // Update value display
            document.getElementById('calc-value-angle').textContent = angle + '°';
            
            // Convert to radians for calculation
            const radians = angle * Math.PI / 180;
            
            // Calculate trigonometric values
            const sinValue = Math.sin(radians);
            const cosValue = Math.cos(radians);
            const tanValue = Math.tan(radians);
            
            // Update displays
            document.getElementById('calc-sin').textContent = `sin(${angle}°) = ${sinValue.toFixed(3)}`;
            document.getElementById('calc-cos').textContent = `cos(${angle}°) = ${cosValue.toFixed(3)}`;
            
            if (Math.abs(cosValue) < 0.001) {
                document.getElementById('calc-tan').textContent = `tan(${angle}°) = 未定义`;
            } else {
                document.getElementById('calc-tan').textContent = `tan(${angle}°) = ${tanValue.toFixed(3)}`;
            }
        }

        // Utility functions
        function showError(resultDiv, message) {
            resultDiv.innerHTML = `<h4>错误</h4><div class="error-message">${message}</div>`;
        }
    </script>
</body>
</html> 