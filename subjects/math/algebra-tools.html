<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‰ª£Êï∞Â∑•ÂÖ∑ - Êï∞Â≠¶Â≠¶‰π†Âä©Êâã</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .algebra-workspace {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .tool-tabs {
            background: #f8f9fa;
            padding: 0;
            border-bottom: 2px solid #e9ecef;
            display: flex;
            overflow-x: auto;
        }

        .tab-btn {
            padding: 15px 25px;
            border: none;
            background: transparent;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            color: #495057;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            white-space: nowrap;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .tab-btn:hover {
            background: #e9ecef;
            color: #007bff;
        }

        .tab-btn.active {
            color: #007bff;
            border-bottom-color: #007bff;
            background: white;
        }

        .tool-content {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
        }

        .tool-section {
            display: none;
        }

        .tool-section.active {
            display: block;
        }

        .input-group {
            margin-bottom: 25px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #495057;
        }

        .input-field {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .input-field:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: #007bff;
            color: white;
        }

        .btn-primary:hover {
            background: #0056b3;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 123, 255, 0.3);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #545b62;
        }

        .result-area {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            min-height: 100px;
        }

        .result-area h4 {
            color: #007bff;
            margin-bottom: 15px;
        }

        .step-by-step {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            border-left: 4px solid #28a745;
        }

        .step {
            margin-bottom: 10px;
            padding: 8px 0;
            border-bottom: 1px solid #e9ecef;
        }

        .step:last-child {
            border-bottom: none;
        }

        .step-number {
            display: inline-block;
            background: #007bff;
            color: white;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            text-align: center;
            line-height: 25px;
            font-size: 12px;
            font-weight: bold;
            margin-right: 10px;
        }

        .examples-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .example-card {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            border-left: 4px solid #17a2b8;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .example-card:hover {
            background: #e9ecef;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .example-card h5 {
            color: #17a2b8;
            margin-bottom: 8px;
        }

        .example-card .equation {
            font-family: 'Courier New', monospace;
            background: white;
            padding: 8px;
            border-radius: 4px;
            margin: 8px 0;
        }

        .back-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(255,255,255,0.9);
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .back-btn:hover {
            background: white;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
        }

        .error-message {
            background: #f8d7da;
            color: #721c24;
            padding: 10px 15px;
            border-radius: 8px;
            margin-top: 10px;
            border: 1px solid #f5c6cb;
        }

        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 10px 15px;
            border-radius: 8px;
            margin-top: 10px;
            border: 1px solid #c3e6cb;
        }

        .formula-display {
            font-family: 'Times New Roman', serif;
            font-size: 18px;
            text-align: center;
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border: 2px solid #e9ecef;
        }

        .graph-container {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            border: 2px solid #e9ecef;
            min-height: 300px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .header h1 {
                font-size: 2rem;
            }

            .tool-tabs {
                flex-direction: column;
            }

            .tab-btn {
                text-align: center;
                border-bottom: 1px solid #e9ecef;
                border-right: none;
            }

            .tab-btn.active {
                border-bottom: 1px solid #007bff;
                border-right: none;
            }

            .tool-content {
                padding: 20px;
            }

            .examples-grid {
                grid-template-columns: 1fr;
            }
        }

        .variable-input {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-bottom: 10px;
        }

        .variable-input input {
            flex: 1;
            padding: 8px 12px;
            border: 2px solid #dee2e6;
            border-radius: 6px;
        }

        .variable-input button {
            padding: 8px 12px;
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
        }

        .add-variable-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <button class="back-btn" onclick="window.location.href='main.html'">‚Üê ËøîÂõûÊï∞Â≠¶‰∏ªÈ°µ</button>
    
    <div class="container">
        <div class="header">
            <h1>üßÆ ‰ª£Êï∞Â∑•ÂÖ∑</h1>
            <p>Âº∫Â§ßÁöÑ‰ª£Êï∞ËÆ°ÁÆóÂíåÊ±ÇËß£Â∑•ÂÖ∑ - ËÆ©Êï∞Â≠¶ÂèòÂæóÁÆÄÂçï</p>
        </div>

        <div class="algebra-workspace">
            <div class="tool-tabs">
                <button class="tab-btn active" data-tab="equation-solver">
                    <span>üìê</span> ÊñπÁ®ãÊ±ÇËß£
                </button>
                <button class="tab-btn" data-tab="factorization">
                    <span>üî¢</span> Âõ†ÂºèÂàÜËß£
                </button>
                <button class="tab-btn" data-tab="polynomial">
                    <span>üìä</span> Â§öÈ°πÂºèËøêÁÆó
                </button>
                <button class="tab-btn" data-tab="system-equations">
                    <span>‚öñÔ∏è</span> ÊñπÁ®ãÁªÑ
                </button>
                <button class="tab-btn" data-tab="simplification">
                    <span>‚ú®</span> Ë°®ËææÂºèÂåñÁÆÄ
                </button>
                <button class="tab-btn" data-tab="calculator">
                    <span>üßÆ</span> ÁßëÂ≠¶ËÆ°ÁÆóÂô®
                </button>
            </div>

            <div class="tool-content">
                <!-- ÊñπÁ®ãÊ±ÇËß£ -->
                <div class="tool-section active" id="equation-solver">
                    <h3>ÊñπÁ®ãÊ±ÇËß£Âô®</h3>
                    <p>ËæìÂÖ•‰∏ÄÂÖÉÊàñÂ§öÂÖÉÊñπÁ®ãÔºåËá™Âä®Ê±ÇËß£Âπ∂ÊòæÁ§∫ËØ¶ÁªÜÊ≠•È™§</p>
                    
                    <div class="input-group">
                        <label for="equation-input">ËæìÂÖ•ÊñπÁ®ã (‰æãÂ¶Ç: x^2 + 5x + 6 = 0)</label>
                        <input type="text" id="equation-input" class="input-field" placeholder="x^2 + 5x + 6 = 0">
                    </div>
                    
                    <button class="btn btn-primary" onclick="solveEquation()">
                        <span>üîç</span> Ê±ÇËß£ÊñπÁ®ã
                    </button>
                    <button class="btn btn-secondary" onclick="clearEquationResult()">
                        <span>üóëÔ∏è</span> Ê∏ÖÁ©∫
                    </button>
                    
                    <div class="result-area" id="equation-result">
                        <h4>Ëß£Á≠îÁªìÊûú</h4>
                        <p>ËØ∑ËæìÂÖ•ÊñπÁ®ãÂπ∂ÁÇπÂáªÊ±ÇËß£ÊåâÈíÆ</p>
                    </div>

                    <div class="examples-grid">
                        <div class="example-card" onclick="loadExample('x^2 + 5x + 6 = 0')">
                            <h5>‰∫åÊ¨°ÊñπÁ®ã</h5>
                            <div class="equation">x¬≤ + 5x + 6 = 0</div>
                            <p>Ê†áÂáÜ‰∫åÊ¨°ÊñπÁ®ãÊ±ÇËß£</p>
                        </div>
                        <div class="example-card" onclick="loadExample('2x + 3 = 7')">
                            <h5>‰∏ÄÊ¨°ÊñπÁ®ã</h5>
                            <div class="equation">2x + 3 = 7</div>
                            <p>ÁÆÄÂçïÁ∫øÊÄßÊñπÁ®ã</p>
                        </div>
                        <div class="example-card" onclick="loadExample('x^3 - 6x^2 + 11x - 6 = 0')">
                            <h5>‰∏âÊ¨°ÊñπÁ®ã</h5>
                            <div class="equation">x¬≥ - 6x¬≤ + 11x - 6 = 0</div>
                            <p>È´òÊ¨°ÊñπÁ®ãÊ±ÇËß£</p>
                        </div>
                        <div class="example-card" onclick="loadExample('sqrt(x + 1) = 3')">
                            <h5>Ê†πÂºèÊñπÁ®ã</h5>
                            <div class="equation">‚àö(x + 1) = 3</div>
                            <p>ÂåÖÂê´Ê†πÂè∑ÁöÑÊñπÁ®ã</p>
                        </div>
                    </div>
                </div>

                <!-- Âõ†ÂºèÂàÜËß£ -->
                <div class="tool-section" id="factorization">
                    <h3>Âõ†ÂºèÂàÜËß£Â∑•ÂÖ∑</h3>
                    <p>Â∞ÜÂ§öÈ°πÂºèÂàÜËß£‰∏∫Âõ†Â≠êÁöÑ‰πòÁßØÂΩ¢Âºè</p>
                    
                    <div class="input-group">
                        <label for="factor-input">ËæìÂÖ•Â§öÈ°πÂºè (‰æãÂ¶Ç: x^2 + 5x + 6)</label>
                        <input type="text" id="factor-input" class="input-field" placeholder="x^2 + 5x + 6">
                    </div>
                    
                    <button class="btn btn-primary" onclick="factorExpression()">
                        <span>üîß</span> Âõ†ÂºèÂàÜËß£
                    </button>
                    <button class="btn btn-secondary" onclick="clearFactorResult()">
                        <span>üóëÔ∏è</span> Ê∏ÖÁ©∫
                    </button>
                    
                    <div class="result-area" id="factor-result">
                        <h4>ÂàÜËß£ÁªìÊûú</h4>
                        <p>ËØ∑ËæìÂÖ•Â§öÈ°πÂºèÂπ∂ÁÇπÂáªÂàÜËß£ÊåâÈíÆ</p>
                    </div>

                    <div class="examples-grid">
                        <div class="example-card" onclick="loadFactorExample('x^2 + 5x + 6')">
                            <h5>‰∫åÊ¨°‰∏âÈ°πÂºè</h5>
                            <div class="equation">x¬≤ + 5x + 6</div>
                            <p>= (x + 2)(x + 3)</p>
                        </div>
                        <div class="example-card" onclick="loadFactorExample('x^2 - 9')">
                            <h5>Âπ≥ÊñπÂ∑Æ</h5>
                            <div class="equation">x¬≤ - 9</div>
                            <p>= (x + 3)(x - 3)</p>
                        </div>
                        <div class="example-card" onclick="loadFactorExample('x^3 + 8')">
                            <h5>Á´ãÊñπÂíå</h5>
                            <div class="equation">x¬≥ + 8</div>
                            <p>= (x + 2)(x¬≤ - 2x + 4)</p>
                        </div>
                        <div class="example-card" onclick="loadFactorExample('2x^2 + 8x + 6')">
                            <h5>ÊèêÂèñÂÖ¨Âõ†Â≠ê</h5>
                            <div class="equation">2x¬≤ + 8x + 6</div>
                            <p>= 2(x + 1)(x + 3)</p>
                        </div>
                    </div>
                </div>

                <!-- Â§öÈ°πÂºèËøêÁÆó -->
                <div class="tool-section" id="polynomial">
                    <h3>Â§öÈ°πÂºèËøêÁÆó</h3>
                    <p>Â§öÈ°πÂºèÁöÑÂä†Ê≥ï„ÄÅÂáèÊ≥ï„ÄÅ‰πòÊ≥ïÂíåÈô§Ê≥ïËøêÁÆó</p>
                    
                    <div class="input-group">
                        <label for="poly1-input">Á¨¨‰∏Ä‰∏™Â§öÈ°πÂºè</label>
                        <input type="text" id="poly1-input" class="input-field" placeholder="x^2 + 3x + 2">
                    </div>
                    
                    <div class="input-group">
                        <label for="operation-select">ËøêÁÆóÁ±ªÂûã</label>
                        <select id="operation-select" class="input-field">
                            <option value="add">Âä†Ê≥ï (+)</option>
                            <option value="subtract">ÂáèÊ≥ï (-)</option>
                            <option value="multiply">‰πòÊ≥ï (√ó)</option>
                            <option value="divide">Èô§Ê≥ï (√∑)</option>
                        </select>
                    </div>
                    
                    <div class="input-group">
                        <label for="poly2-input">Á¨¨‰∫å‰∏™Â§öÈ°πÂºè</label>
                        <input type="text" id="poly2-input" class="input-field" placeholder="x + 1">
                    </div>
                    
                    <button class="btn btn-primary" onclick="calculatePolynomial()">
                        <span>‚ö°</span> ËÆ°ÁÆó
                    </button>
                    <button class="btn btn-secondary" onclick="clearPolynomialResult()">
                        <span>üóëÔ∏è</span> Ê∏ÖÁ©∫
                    </button>
                    
                    <div class="result-area" id="polynomial-result">
                        <h4>ËøêÁÆóÁªìÊûú</h4>
                        <p>ËØ∑ËæìÂÖ•‰∏§‰∏™Â§öÈ°πÂºèÂπ∂ÈÄâÊã©ËøêÁÆóÁ±ªÂûã</p>
                    </div>
                </div>

                <!-- ÊñπÁ®ãÁªÑÊ±ÇËß£ -->
                <div class="tool-section" id="system-equations">
                    <h3>ÊñπÁ®ãÁªÑÊ±ÇËß£</h3>
                    <p>Ê±ÇËß£Á∫øÊÄßÊñπÁ®ãÁªÑÂíåÈùûÁ∫øÊÄßÊñπÁ®ãÁªÑ</p>
                    
                    <div id="equations-container">
                        <div class="input-group">
                            <label>ÊñπÁ®ã 1</label>
                            <input type="text" class="input-field equation-input" placeholder="2x + 3y = 7">
                        </div>
                        <div class="input-group">
                            <label>ÊñπÁ®ã 2</label>
                            <input type="text" class="input-field equation-input" placeholder="x - y = 1">
                        </div>
                    </div>
                    
                    <button class="add-variable-btn" onclick="addEquation()">+ Ê∑ªÂä†ÊñπÁ®ã</button>
                    
                    <div style="margin-top: 20px;">
                        <button class="btn btn-primary" onclick="solveSystem()">
                            <span>üéØ</span> Ê±ÇËß£ÊñπÁ®ãÁªÑ
                        </button>
                        <button class="btn btn-secondary" onclick="clearSystemResult()">
                            <span>üóëÔ∏è</span> Ê∏ÖÁ©∫
                        </button>
                    </div>
                    
                    <div class="result-area" id="system-result">
                        <h4>ÊñπÁ®ãÁªÑËß£</h4>
                        <p>ËØ∑ËæìÂÖ•ÊñπÁ®ãÁªÑÂπ∂ÁÇπÂáªÊ±ÇËß£ÊåâÈíÆ</p>
                    </div>
                </div>

                <!-- Ë°®ËææÂºèÂåñÁÆÄ -->
                <div class="tool-section" id="simplification">
                    <h3>Ë°®ËææÂºèÂåñÁÆÄ</h3>
                    <p>ÂåñÁÆÄÂ§çÊùÇÁöÑ‰ª£Êï∞Ë°®ËææÂºè</p>
                    
                    <div class="input-group">
                        <label for="simplify-input">ËæìÂÖ•Ë°®ËææÂºè</label>
                        <input type="text" id="simplify-input" class="input-field" placeholder="(x + 1)^2 + 2(x + 1) + 1">
                    </div>
                    
                    <button class="btn btn-primary" onclick="simplifyExpression()">
                        <span>‚ú®</span> ÂåñÁÆÄ
                    </button>
                    <button class="btn btn-secondary" onclick="clearSimplifyResult()">
                        <span>üóëÔ∏è</span> Ê∏ÖÁ©∫
                    </button>
                    
                    <div class="result-area" id="simplify-result">
                        <h4>ÂåñÁÆÄÁªìÊûú</h4>
                        <p>ËØ∑ËæìÂÖ•Ë°®ËææÂºèÂπ∂ÁÇπÂáªÂåñÁÆÄÊåâÈíÆ</p>
                    </div>

                    <div class="examples-grid">
                        <div class="example-card" onclick="loadSimplifyExample('(x + 1)^2')">
                            <h5>ÂÆåÂÖ®Âπ≥Êñπ</h5>
                            <div class="equation">(x + 1)¬≤</div>
                            <p>= x¬≤ + 2x + 1</p>
                        </div>
                        <div class="example-card" onclick="loadSimplifyExample('(x + 2)(x - 2)')">
                            <h5>Âπ≥ÊñπÂ∑Æ</h5>
                            <div class="equation">(x + 2)(x - 2)</div>
                            <p>= x¬≤ - 4</p>
                        </div>
                        <div class="example-card" onclick="loadSimplifyExample('2x + 3x - x')">
                            <h5>ÂêàÂπ∂ÂêåÁ±ªÈ°π</h5>
                            <div class="equation">2x + 3x - x</div>
                            <p>= 4x</p>
                        </div>
                        <div class="example-card" onclick="loadSimplifyExample('(2x + 1)(x - 3)')">
                            <h5>Â§öÈ°πÂºè‰πòÊ≥ï</h5>
                            <div class="equation">(2x + 1)(x - 3)</div>
                            <p>= 2x¬≤ - 5x - 3</p>
                        </div>
                    </div>
                </div>

                <!-- ÁßëÂ≠¶ËÆ°ÁÆóÂô® -->
                <div class="tool-section" id="calculator">
                    <h3>ÁßëÂ≠¶ËÆ°ÁÆóÂô®</h3>
                    <p>ÊîØÊåÅÂü∫Êú¨ËøêÁÆó„ÄÅ‰∏âËßíÂáΩÊï∞„ÄÅÂØπÊï∞Á≠âÁßëÂ≠¶ËÆ°ÁÆó</p>
                    
                    <div class="input-group">
                        <label for="calc-input">ËæìÂÖ•Ë°®ËææÂºè</label>
                        <input type="text" id="calc-input" class="input-field" placeholder="sin(30) + cos(60) * log(10)">
                    </div>
                    
                    <div class="calculator-buttons" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin: 20px 0;">
                        <button class="btn btn-secondary" onclick="insertCalc('sin(')">sin</button>
                        <button class="btn btn-secondary" onclick="insertCalc('cos(')">cos</button>
                        <button class="btn btn-secondary" onclick="insertCalc('tan(')">tan</button>
                        <button class="btn btn-secondary" onclick="insertCalc('log(')">log</button>
                        <button class="btn btn-secondary" onclick="insertCalc('sqrt(')">‚àö</button>
                        <button class="btn btn-secondary" onclick="insertCalc('^')">^</button>
                        <button class="btn btn-secondary" onclick="insertCalc('pi')">œÄ</button>
                        <button class="btn btn-secondary" onclick="insertCalc('e')">e</button>
                    </div>
                    
                    <button class="btn btn-primary" onclick="calculateExpression()">
                        <span>üßÆ</span> ËÆ°ÁÆó
                    </button>
                    <button class="btn btn-secondary" onclick="clearCalculatorResult()">
                        <span>üóëÔ∏è</span> Ê∏ÖÁ©∫
                    </button>
                    
                    <div class="result-area" id="calculator-result">
                        <h4>ËÆ°ÁÆóÁªìÊûú</h4>
                        <p>ËØ∑ËæìÂÖ•Êï∞Â≠¶Ë°®ËææÂºèÂπ∂ÁÇπÂáªËÆ°ÁÆóÊåâÈíÆ</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tab switching functionality
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                // Remove active class from all tabs and sections
                document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                document.querySelectorAll('.tool-section').forEach(s => s.classList.remove('active'));
                
                // Add active class to clicked tab
                btn.classList.add('active');
                
                // Show corresponding section
                const tabId = btn.dataset.tab;
                document.getElementById(tabId).classList.add('active');
            });
        });

        // Equation solver
        function solveEquation() {
            const equation = document.getElementById('equation-input').value.trim();
            const resultDiv = document.getElementById('equation-result');
            
            if (!equation) {
                showError(resultDiv, 'ËØ∑ËæìÂÖ•ÊñπÁ®ã');
                return;
            }
            
            try {
                const solution = solveEquationLogic(equation);
                displayEquationResult(resultDiv, equation, solution);
            } catch (error) {
                showError(resultDiv, 'ÊñπÁ®ãÊ†ºÂºèÈîôËØØÊàñÊó†Ê≥ïÊ±ÇËß£: ' + error.message);
            }
        }

        function solveEquationLogic(equation) {
            // Simple equation solver for demonstration
            // In a real implementation, you'd use a proper math library
            
            // Handle simple linear equations like "2x + 3 = 7"
            if (equation.includes('=')) {
                const [left, right] = equation.split('=').map(s => s.trim());
                
                // Simple linear equation: ax + b = c
                const linearMatch = left.match(/^(-?\d*\.?\d*)x\s*([+-]\s*\d+\.?\d*)?$/);
                if (linearMatch && !isNaN(parseFloat(right))) {
                    const a = parseFloat(linearMatch[1]) || 1;
                    const b = parseFloat((linearMatch[2] || '0').replace(/\s/g, '')) || 0;
                    const c = parseFloat(right);
                    
                    const x = (c - b) / a;
                    return {
                        type: 'linear',
                        solutions: [x],
                        steps: [
                            `ÂéüÊñπÁ®ã: ${equation}`,
                            `ÁßªÈ°π: ${a}x = ${c} - ${b}`,
                            `ÂåñÁÆÄ: ${a}x = ${c - b}`,
                            `Ëß£Âæó: x = ${x}`
                        ]
                    };
                }
                
                // Simple quadratic equation: x^2 + bx + c = 0
                const quadMatch = left.match(/^x\^2\s*([+-]\s*\d+\.?\d*)x\s*([+-]\s*\d+\.?\d*)?$/);
                if (quadMatch && parseFloat(right) === 0) {
                    const b = parseFloat((quadMatch[1] || '0').replace(/\s/g, '')) || 0;
                    const c = parseFloat((quadMatch[2] || '0').replace(/\s/g, '')) || 0;
                    
                    const discriminant = b * b - 4 * c;
                    if (discriminant >= 0) {
                        const x1 = (-b + Math.sqrt(discriminant)) / 2;
                        const x2 = (-b - Math.sqrt(discriminant)) / 2;
                        
                        return {
                            type: 'quadratic',
                            solutions: discriminant === 0 ? [x1] : [x1, x2],
                            steps: [
                                `ÂéüÊñπÁ®ã: ${equation}`,
                                `Ê†áÂáÜÂΩ¢Âºè: x¬≤ + ${b}x + ${c} = 0`,
                                `Âà§Âà´Âºè: Œî = b¬≤ - 4ac = ${b}¬≤ - 4(1)(${c}) = ${discriminant}`,
                                discriminant === 0 ? 
                                    `Œî = 0ÔºåÊúâ‰∏Ä‰∏™ÈáçÊ†π: x = ${x1}` :
                                    `Œî > 0ÔºåÊúâ‰∏§‰∏™‰∏çÂêåÂÆûÊ†π: x‚ÇÅ = ${x1}, x‚ÇÇ = ${x2}`
                            ]
                        };
                    }
                }
            }
            
            throw new Error('ÊöÇ‰∏çÊîØÊåÅÊ≠§Á±ªÂûãÊñπÁ®ãÔºåËØ∑Â∞ùËØïÁÆÄÂçïÁöÑ‰∏ÄÊ¨°Êàñ‰∫åÊ¨°ÊñπÁ®ã');
        }

        function displayEquationResult(resultDiv, equation, solution) {
            let html = `<h4>Ëß£Á≠îÁªìÊûú</h4>`;
            html += `<div class="formula-display">ÂéüÊñπÁ®ã: ${equation}</div>`;
            
            if (solution.solutions.length === 1) {
                html += `<div class="success-message">Ëß£: x = ${solution.solutions[0]}</div>`;
            } else {
                html += `<div class="success-message">Ëß£: x‚ÇÅ = ${solution.solutions[0]}, x‚ÇÇ = ${solution.solutions[1]}</div>`;
            }
            
            if (solution.steps) {
                html += `<div class="step-by-step">`;
                html += `<h5>Ê±ÇËß£Ê≠•È™§:</h5>`;
                solution.steps.forEach((step, index) => {
                    html += `<div class="step">`;
                    html += `<span class="step-number">${index + 1}</span>`;
                    html += `${step}`;
                    html += `</div>`;
                });
                html += `</div>`;
            }
            
            resultDiv.innerHTML = html;
        }

        // Factor expression
        function factorExpression() {
            const expression = document.getElementById('factor-input').value.trim();
            const resultDiv = document.getElementById('factor-result');
            
            if (!expression) {
                showError(resultDiv, 'ËØ∑ËæìÂÖ•Â§öÈ°πÂºè');
                return;
            }
            
            try {
                const factored = factorExpressionLogic(expression);
                displayFactorResult(resultDiv, expression, factored);
            } catch (error) {
                showError(resultDiv, 'Ë°®ËææÂºèÊ†ºÂºèÈîôËØØÊàñÊó†Ê≥ïÂàÜËß£: ' + error.message);
            }
        }

        function factorExpressionLogic(expression) {
            // Simple factorization for demonstration
            
            // x^2 + bx + c form
            const quadMatch = expression.match(/^x\^2\s*([+-]\s*\d+\.?\d*)x\s*([+-]\s*\d+\.?\d*)$/);
            if (quadMatch) {
                const b = parseFloat((quadMatch[1] || '0').replace(/\s/g, '')) || 0;
                const c = parseFloat((quadMatch[2] || '0').replace(/\s/g, '')) || 0;
                
                // Find factors of c that add up to b
                for (let i = 1; i <= Math.abs(c); i++) {
                    if (c % i === 0) {
                        const factor1 = i;
                        const factor2 = c / i;
                        
                        if (factor1 + factor2 === b) {
                            return {
                                original: expression,
                                factored: `(x + ${factor1})(x + ${factor2})`,
                                steps: [
                                    `ÂéüÂºè: ${expression}`,
                                    `ÂØªÊâæ‰∏§‰∏™Êï∞ÔºåÂÆÉ‰ª¨ÁöÑ‰πòÁßØÊòØ ${c}ÔºåÂíåÊòØ ${b}`,
                                    `Ëøô‰∏§‰∏™Êï∞ÊòØ ${factor1} Âíå ${factor2}`,
                                    `Âõ†Ê≠§: ${expression} = (x + ${factor1})(x + ${factor2})`
                                ]
                            };
                        }
                        
                        if (factor1 - factor2 === b) {
                            return {
                                original: expression,
                                factored: `(x + ${factor1})(x - ${factor2})`,
                                steps: [
                                    `ÂéüÂºè: ${expression}`,
                                    `ÂØªÊâæ‰∏§‰∏™Êï∞ÔºåÂÆÉ‰ª¨ÁöÑ‰πòÁßØÊòØ ${c}ÔºåÂ∑ÆÊòØ ${b}`,
                                    `Ëøô‰∏§‰∏™Êï∞ÊòØ ${factor1} Âíå ${factor2}`,
                                    `Âõ†Ê≠§: ${expression} = (x + ${factor1})(x - ${factor2})`
                                ]
                            };
                        }
                    }
                }
            }
            
            // Difference of squares: x^2 - a^2
            const diffSquareMatch = expression.match(/^x\^2\s*-\s*(\d+)$/);
            if (diffSquareMatch) {
                const a = Math.sqrt(parseFloat(diffSquareMatch[1]));
                if (Number.isInteger(a)) {
                    return {
                        original: expression,
                        factored: `(x + ${a})(x - ${a})`,
                        steps: [
                            `ÂéüÂºè: ${expression}`,
                            `ËøôÊòØÂπ≥ÊñπÂ∑ÆÂÖ¨Âºè: a¬≤ - b¬≤ = (a + b)(a - b)`,
                            `ÂÖ∂‰∏≠ a = x, b = ${a}`,
                            `Âõ†Ê≠§: ${expression} = (x + ${a})(x - ${a})`
                        ]
                    };
                }
            }
            
            throw new Error('ÊöÇ‰∏çÊîØÊåÅÊ≠§Á±ªÂûãË°®ËææÂºèÁöÑÂàÜËß£');
        }

        function displayFactorResult(resultDiv, expression, result) {
            let html = `<h4>ÂàÜËß£ÁªìÊûú</h4>`;
            html += `<div class="formula-display">ÂéüÂºè: ${result.original}</div>`;
            html += `<div class="success-message">ÂàÜËß£ÁªìÊûú: ${result.factored}</div>`;
            
            if (result.steps) {
                html += `<div class="step-by-step">`;
                html += `<h5>ÂàÜËß£Ê≠•È™§:</h5>`;
                result.steps.forEach((step, index) => {
                    html += `<div class="step">`;
                    html += `<span class="step-number">${index + 1}</span>`;
                    html += `${step}`;
                    html += `</div>`;
                });
                html += `</div>`;
            }
            
            resultDiv.innerHTML = html;
        }

        // Polynomial operations
        function calculatePolynomial() {
            const poly1 = document.getElementById('poly1-input').value.trim();
            const poly2 = document.getElementById('poly2-input').value.trim();
            const operation = document.getElementById('operation-select').value;
            const resultDiv = document.getElementById('polynomial-result');
            
            if (!poly1 || !poly2) {
                showError(resultDiv, 'ËØ∑ËæìÂÖ•‰∏§‰∏™Â§öÈ°πÂºè');
                return;
            }
            
            try {
                const result = performPolynomialOperation(poly1, poly2, operation);
                displayPolynomialResult(resultDiv, poly1, poly2, operation, result);
            } catch (error) {
                showError(resultDiv, 'Â§öÈ°πÂºèÊ†ºÂºèÈîôËØØ: ' + error.message);
            }
        }

        function performPolynomialOperation(poly1, poly2, operation) {
            // Simplified polynomial operations for demonstration
            const operationNames = {
                'add': 'Âä†Ê≥ï',
                'subtract': 'ÂáèÊ≥ï',
                'multiply': '‰πòÊ≥ï',
                'divide': 'Èô§Ê≥ï'
            };
            
            return {
                operation: operationNames[operation],
                result: `(${poly1}) ${operation === 'add' ? '+' : operation === 'subtract' ? '-' : operation === 'multiply' ? '√ó' : '√∑'} (${poly2})`,
                note: 'ÂÆåÊï¥ÁöÑÂ§öÈ°πÂºèËøêÁÆóÈúÄË¶ÅÊõ¥Â§çÊùÇÁöÑÁÆóÊ≥ïÂÆûÁé∞'
            };
        }

        function displayPolynomialResult(resultDiv, poly1, poly2, operation, result) {
            let html = `<h4>ËøêÁÆóÁªìÊûú</h4>`;
            html += `<div class="formula-display">${result.result}</div>`;
            html += `<div class="success-message">ËøêÁÆóÁ±ªÂûã: ${result.operation}</div>`;
            html += `<p>${result.note}</p>`;
            
            resultDiv.innerHTML = html;
        }

        // System of equations
        function addEquation() {
            const container = document.getElementById('equations-container');
            const equationCount = container.children.length + 1;
            
            const div = document.createElement('div');
            div.className = 'input-group';
            div.innerHTML = `
                <label>ÊñπÁ®ã ${equationCount}</label>
                <input type="text" class="input-field equation-input" placeholder="ËæìÂÖ•ÊñπÁ®ã">
            `;
            
            container.appendChild(div);
        }

        function solveSystem() {
            const equations = Array.from(document.querySelectorAll('.equation-input')).map(input => input.value.trim());
            const resultDiv = document.getElementById('system-result');
            
            const validEquations = equations.filter(eq => eq !== '');
            
            if (validEquations.length < 2) {
                showError(resultDiv, 'ËØ∑Ëá≥Â∞ëËæìÂÖ•‰∏§‰∏™ÊñπÁ®ã');
                return;
            }
            
            try {
                const solution = solveSystemLogic(validEquations);
                displaySystemResult(resultDiv, validEquations, solution);
            } catch (error) {
                showError(resultDiv, 'ÊñπÁ®ãÁªÑÊ†ºÂºèÈîôËØØÊàñÊó†Ëß£: ' + error.message);
            }
        }

        function solveSystemLogic(equations) {
            // Simplified system solver for 2x2 linear systems
            if (equations.length === 2) {
                // Try to parse simple linear equations like "2x + 3y = 7"
                const eq1Match = equations[0].match(/^(-?\d*\.?\d*)x\s*([+-]\s*\d*\.?\d*)y\s*=\s*(-?\d+\.?\d*)$/);
                const eq2Match = equations[1].match(/^(-?\d*\.?\d*)x\s*([+-]\s*\d*\.?\d*)y\s*=\s*(-?\d+\.?\d*)$/);
                
                if (eq1Match && eq2Match) {
                    const a1 = parseFloat(eq1Match[1]) || 1;
                    const b1 = parseFloat((eq1Match[2] || '0').replace(/\s/g, '')) || 0;
                    const c1 = parseFloat(eq1Match[3]);
                    
                    const a2 = parseFloat(eq2Match[1]) || 1;
                    const b2 = parseFloat((eq2Match[2] || '0').replace(/\s/g, '')) || 0;
                    const c2 = parseFloat(eq2Match[3]);
                    
                    const det = a1 * b2 - a2 * b1;
                    
                    if (Math.abs(det) < 1e-10) {
                        throw new Error('ÊñπÁ®ãÁªÑÊó†ÂîØ‰∏ÄËß£ÔºàË°åÂàóÂºè‰∏∫0Ôºâ');
                    }
                    
                    const x = (c1 * b2 - c2 * b1) / det;
                    const y = (a1 * c2 - a2 * c1) / det;
                    
                    return {
                        solutions: { x: x, y: y },
                        method: 'ÂÖãÊãâÈªòÊ≥ïÂàô',
                        steps: [
                            `ÊñπÁ®ãÁªÑ:`,
                            `${equations[0]}`,
                            `${equations[1]}`,
                            `Á≥ªÊï∞Áü©ÈòµË°åÂàóÂºè: D = ${a1} √ó ${b2} - ${a2} √ó ${b1} = ${det}`,
                            `x = (${c1} √ó ${b2} - ${c2} √ó ${b1}) / ${det} = ${x}`,
                            `y = (${a1} √ó ${c2} - ${a2} √ó ${c1}) / ${det} = ${y}`
                        ]
                    };
                }
            }
            
            throw new Error('ÊöÇ‰∏çÊîØÊåÅÊ≠§Á±ªÂûãÊñπÁ®ãÁªÑÔºåËØ∑Â∞ùËØïÁÆÄÂçïÁöÑ‰∫åÂÖÉ‰∏ÄÊ¨°ÊñπÁ®ãÁªÑ');
        }

        function displaySystemResult(resultDiv, equations, solution) {
            let html = `<h4>ÊñπÁ®ãÁªÑËß£</h4>`;
            
            if (solution.solutions) {
                html += `<div class="success-message">`;
                Object.entries(solution.solutions).forEach(([variable, value]) => {
                    html += `${variable} = ${value}<br>`;
                });
                html += `</div>`;
            }
            
            if (solution.steps) {
                html += `<div class="step-by-step">`;
                html += `<h5>Ê±ÇËß£Ê≠•È™§ (${solution.method}):</h5>`;
                solution.steps.forEach((step, index) => {
                    html += `<div class="step">`;
                    html += `<span class="step-number">${index + 1}</span>`;
                    html += `${step}`;
                    html += `</div>`;
                });
                html += `</div>`;
            }
            
            resultDiv.innerHTML = html;
        }

        // Expression simplification
        function simplifyExpression() {
            const expression = document.getElementById('simplify-input').value.trim();
            const resultDiv = document.getElementById('simplify-result');
            
            if (!expression) {
                showError(resultDiv, 'ËØ∑ËæìÂÖ•Ë°®ËææÂºè');
                return;
            }
            
            try {
                const simplified = simplifyExpressionLogic(expression);
                displaySimplifyResult(resultDiv, expression, simplified);
            } catch (error) {
                showError(resultDiv, 'Ë°®ËææÂºèÊ†ºÂºèÈîôËØØ: ' + error.message);
            }
        }

        function simplifyExpressionLogic(expression) {
            // Simple expression simplification examples
            const simplifications = {
                '(x + 1)^2': 'x¬≤ + 2x + 1',
                '(x - 1)^2': 'x¬≤ - 2x + 1',
                '(x + 2)(x - 2)': 'x¬≤ - 4',
                '2x + 3x - x': '4x',
                'x + x + x': '3x'
            };
            
            if (simplifications[expression]) {
                return {
                    original: expression,
                    simplified: simplifications[expression],
                    steps: [`ÂéüÂºè: ${expression}`, `ÂåñÁÆÄÂêé: ${simplifications[expression]}`]
                };
            }
            
            return {
                original: expression,
                simplified: expression,
                steps: [`ÂéüÂºè: ${expression}`, `ËØ•Ë°®ËææÂºèÂ∑≤ÊòØÊúÄÁÆÄÂΩ¢Âºè`]
            };
        }

        function displaySimplifyResult(resultDiv, expression, result) {
            let html = `<h4>ÂåñÁÆÄÁªìÊûú</h4>`;
            html += `<div class="formula-display">ÂéüÂºè: ${result.original}</div>`;
            html += `<div class="success-message">ÂåñÁÆÄÁªìÊûú: ${result.simplified}</div>`;
            
            if (result.steps) {
                html += `<div class="step-by-step">`;
                html += `<h5>ÂåñÁÆÄÊ≠•È™§:</h5>`;
                result.steps.forEach((step, index) => {
                    html += `<div class="step">`;
                    html += `<span class="step-number">${index + 1}</span>`;
                    html += `${step}`;
                    html += `</div>`;
                });
                html += `</div>`;
            }
            
            resultDiv.innerHTML = html;
        }

        // Scientific calculator
        function insertCalc(value) {
            const input = document.getElementById('calc-input');
            input.value += value;
        }

        function calculateExpression() {
            const expression = document.getElementById('calc-input').value.trim();
            const resultDiv = document.getElementById('calculator-result');
            
            if (!expression) {
                showError(resultDiv, 'ËØ∑ËæìÂÖ•Ë°®ËææÂºè');
                return;
            }
            
            try {
                const result = evaluateExpression(expression);
                displayCalculatorResult(resultDiv, expression, result);
            } catch (error) {
                showError(resultDiv, 'Ë°®ËææÂºèÈîôËØØ: ' + error.message);
            }
        }

        function evaluateExpression(expression) {
            // Simple expression evaluator for demonstration
            // Replace common math functions
            let expr = expression
                .replace(/sin\(/g, 'Math.sin(')
                .replace(/cos\(/g, 'Math.cos(')
                .replace(/tan\(/g, 'Math.tan(')
                .replace(/log\(/g, 'Math.log10(')
                .replace(/sqrt\(/g, 'Math.sqrt(')
                .replace(/pi/g, 'Math.PI')
                .replace(/e/g, 'Math.E')
                .replace(/\^/g, '**');
            
            try {
                const result = eval(expr);
                return {
                    original: expression,
                    result: result,
                    formatted: typeof result === 'number' ? result.toFixed(6).replace(/\.?0+$/, '') : result
                };
            } catch (e) {
                throw new Error('Êó†Ê≥ïËÆ°ÁÆóË°®ËææÂºè');
            }
        }

        function displayCalculatorResult(resultDiv, expression, result) {
            let html = `<h4>ËÆ°ÁÆóÁªìÊûú</h4>`;
            html += `<div class="formula-display">${result.original} = ${result.formatted}</div>`;
            html += `<div class="success-message">Á≤æÁ°ÆÂÄº: ${result.result}</div>`;
            
            resultDiv.innerHTML = html;
        }

        // Example loading functions
        function loadExample(equation) {
            document.getElementById('equation-input').value = equation;
        }

        function loadFactorExample(expression) {
            document.getElementById('factor-input').value = expression;
        }

        function loadSimplifyExample(expression) {
            document.getElementById('simplify-input').value = expression;
        }

        // Clear functions
        function clearEquationResult() {
            document.getElementById('equation-input').value = '';
            document.getElementById('equation-result').innerHTML = '<h4>Ëß£Á≠îÁªìÊûú</h4><p>ËØ∑ËæìÂÖ•ÊñπÁ®ãÂπ∂ÁÇπÂáªÊ±ÇËß£ÊåâÈíÆ</p>';
        }

        function clearFactorResult() {
            document.getElementById('factor-input').value = '';
            document.getElementById('factor-result').innerHTML = '<h4>ÂàÜËß£ÁªìÊûú</h4><p>ËØ∑ËæìÂÖ•Â§öÈ°πÂºèÂπ∂ÁÇπÂáªÂàÜËß£ÊåâÈíÆ</p>';
        }

        function clearPolynomialResult() {
            document.getElementById('poly1-input').value = '';
            document.getElementById('poly2-input').value = '';
            document.getElementById('polynomial-result').innerHTML = '<h4>ËøêÁÆóÁªìÊûú</h4><p>ËØ∑ËæìÂÖ•‰∏§‰∏™Â§öÈ°πÂºèÂπ∂ÈÄâÊã©ËøêÁÆóÁ±ªÂûã</p>';
        }

        function clearSystemResult() {
            document.querySelectorAll('.equation-input').forEach(input => input.value = '');
            document.getElementById('system-result').innerHTML = '<h4>ÊñπÁ®ãÁªÑËß£</h4><p>ËØ∑ËæìÂÖ•ÊñπÁ®ãÁªÑÂπ∂ÁÇπÂáªÊ±ÇËß£ÊåâÈíÆ</p>';
        }

        function clearSimplifyResult() {
            document.getElementById('simplify-input').value = '';
            document.getElementById('simplify-result').innerHTML = '<h4>ÂåñÁÆÄÁªìÊûú</h4><p>ËØ∑ËæìÂÖ•Ë°®ËææÂºèÂπ∂ÁÇπÂáªÂåñÁÆÄÊåâÈíÆ</p>';
        }

        function clearCalculatorResult() {
            document.getElementById('calc-input').value = '';
            document.getElementById('calculator-result').innerHTML = '<h4>ËÆ°ÁÆóÁªìÊûú</h4><p>ËØ∑ËæìÂÖ•Êï∞Â≠¶Ë°®ËææÂºèÂπ∂ÁÇπÂáªËÆ°ÁÆóÊåâÈíÆ</p>';
        }

        // Utility functions
        function showError(resultDiv, message) {
            resultDiv.innerHTML = `<h4>ÈîôËØØ</h4><div class="error-message">${message}</div>`;
        }
    </script>
</body>
</html> 