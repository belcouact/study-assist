<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>进化论 - 生物学习助手</title>
    <link rel="icon" href="../../assets/icons/logo_btrfly.ico" type="image/x-icon">
    <link rel="stylesheet" href="../../css/common.css">
    <link rel="stylesheet" href="../../css/components.css">
    <link rel="stylesheet" href="../../css/utilities.css">
    <link rel="stylesheet" href="../../css/responsive.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        .evolution-page {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 2rem 0;
        }

        .evolution-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
            margin: 2rem auto;
            max-width: 1600px;
        }

        .evolution-header {
            background: linear-gradient(135deg, #4caf50, #8bc34a);
            color: white;
            padding: 2rem;
            text-align: center;
        }

        .evolution-header h1 {
            margin: 0;
            font-size: 2.5rem;
            font-weight: 700;
        }

        .evolution-header p {
            margin: 1rem 0 0 0;
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .evolution-tabs {
            background: #f8f9fa;
            padding: 0;
            border-bottom: 1px solid #e9ecef;
            display: flex;
            overflow-x: auto;
        }

        .evolution-tab {
            padding: 1rem 2rem;
            background: none;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            color: #666;
            border-bottom: 3px solid transparent;
            white-space: nowrap;
        }

        .evolution-tab.active {
            color: #4caf50;
            border-bottom-color: #4caf50;
            background: white;
        }

        .evolution-tab:hover {
            color: #4caf50;
            background: #f0f8ff;
        }

        .evolution-content {
            padding: 2rem;
            min-height: 600px;
        }

        .tab-panel {
            display: none;
        }

        .tab-panel.active {
            display: block;
        }

        .timeline-container {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 2rem;
            position: relative;
            overflow-x: auto;
        }

        .timeline {
            position: relative;
            height: 400px;
            background: linear-gradient(to right, #e8f5e8, #f0f8f0);
            border-radius: 10px;
            padding: 2rem;
        }

        .timeline-line {
            position: absolute;
            top: 50%;
            left: 50px;
            right: 50px;
            height: 4px;
            background: #4caf50;
            transform: translateY(-50%);
        }

        .timeline-event {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: white;
            border: 3px solid #4caf50;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .timeline-label {
            position: absolute;
            top: -40px;
            left: 50%;
            transform: translateX(-50%);
            background: #4caf50;
            color: white;
            padding: 0.5rem;
            border-radius: 5px;
            font-size: 0.8rem;
            white-space: nowrap;
        }

        .timeline-description {
            position: absolute;
            top: 40px;
            left: 50%;
            transform: translateX(-50%);
            background: white;
            padding: 1rem;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            max-width: 200px;
            font-size: 0.9rem;
            display: none;
        }

        .timeline-event:hover .timeline-description {
            display: block;
        }

        .selection-simulator {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 2rem;
        }

        .simulation-canvas {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            border: 1px solid #e9ecef;
            height: 400px;
            position: relative;
        }

        .simulation-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .control-group {
            background: white;
            border-radius: 10px;
            padding: 1rem;
            border: 1px solid #e9ecef;
        }

        .control-group h4 {
            margin: 0 0 1rem 0;
            color: #4caf50;
        }

        .control-slider {
            width: 100%;
            margin: 0.5rem 0;
        }

        .control-value {
            text-align: center;
            font-weight: bold;
            color: #4caf50;
        }

        .phylogenetic-tree {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 2rem;
        }

        .tree-canvas {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            border: 1px solid #e9ecef;
            height: 500px;
            position: relative;
        }

        .species-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .species-card {
            background: white;
            border-radius: 10px;
            padding: 1rem;
            border: 1px solid #e9ecef;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .species-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(76, 175, 80, 0.15);
        }

        .species-card.selected {
            border-color: #4caf50;
            background: #e8f5e8;
        }

        .species-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .species-name {
            font-size: 0.9rem;
            color: #666;
        }

        .adaptation-examples {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 2rem;
        }

        .adaptation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .adaptation-card {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            border: 1px solid #e9ecef;
            transition: all 0.3s ease;
        }

        .adaptation-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(76, 175, 80, 0.15);
        }

        .adaptation-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .adaptation-icon {
            font-size: 2rem;
            color: #4caf50;
        }

        .adaptation-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #333;
        }

        .adaptation-description {
            color: #666;
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        .adaptation-example {
            background: #f0f8ff;
            padding: 1rem;
            border-radius: 8px;
            border-left: 4px solid #4caf50;
        }

        .action-btn {
            padding: 0.75rem 1.5rem;
            background: linear-gradient(135deg, #4caf50, #8bc34a);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.3);
        }

        .action-btn.secondary {
            background: linear-gradient(135deg, #6c757d, #495057);
        }

        @media (max-width: 768px) {
            .evolution-tabs {
                flex-direction: column;
            }
            
            .evolution-tab {
                text-align: center;
            }
            
            .simulation-controls {
                grid-template-columns: 1fr;
            }
            
            .adaptation-grid {
                grid-template-columns: 1fr;
            }
        }

        /* 达尔文理论标签页样式 */
        .darwin-theory {
            padding: 1rem;
        }

        .darwin-intro {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .darwin-portrait {
            text-align: center;
        }

        .darwin-img {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid #4caf50;
            margin-bottom: 1rem;
        }

        .caption {
            font-size: 0.9rem;
            color: #666;
            font-style: italic;
        }

        .darwin-summary h3 {
            color: #4caf50;
            margin: 0 0 1rem 0;
        }

        .darwin-summary p {
            color: #333;
            line-height: 1.6;
            margin-bottom: 1.5rem;
        }

        .key-concepts {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 1.5rem;
            border-left: 4px solid #4caf50;
        }

        .key-concepts h4 {
            color: #4caf50;
            margin: 0 0 1rem 0;
        }

        .key-concepts ul {
            margin: 0;
            padding-left: 1.5rem;
        }

        .key-concepts li {
            margin-bottom: 0.5rem;
            color: #333;
        }

        .darwin-voyage {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .darwin-voyage h3 {
            color: #4caf50;
            margin: 0 0 1.5rem 0;
            text-align: center;
        }

        .voyage-map {
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .voyage-img {
            max-width: 100%;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .voyage-observations h4 {
            color: #4caf50;
            margin: 0 0 1rem 0;
            text-align: center;
        }

        .observation-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
        }

        .observation-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 1.5rem;
            border-top: 4px solid #4caf50;
        }

        .observation-card h5 {
            color: #333;
            margin: 0 0 0.5rem 0;
        }

        .observation-card p {
            color: #666;
            margin: 0;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .darwin-impact {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .darwin-impact h3 {
            color: #4caf50;
            margin: 0 0 1.5rem 0;
            text-align: center;
        }

        .impact-timeline {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            position: relative;
            padding-left: 2rem;
        }

        .impact-timeline::before {
            content: '';
            position: absolute;
            top: 0;
            bottom: 0;
            left: 8px;
            width: 4px;
            background: #4caf50;
            border-radius: 2px;
        }

        .impact-event {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            position: relative;
        }

        .impact-event::before {
            content: '';
            position: absolute;
            left: -2rem;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: white;
            border: 4px solid #4caf50;
        }

        .impact-year {
            font-weight: 600;
            color: #4caf50;
            min-width: 120px;
        }

        .impact-description {
            color: #333;
        }

        /* 进化证据标签页样式 */
        .evidence-container {
            padding: 1rem;
        }

        .evidence-categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .evidence-category {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .evidence-category:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
        }

        .evidence-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.1), rgba(139, 195, 74, 0.1));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
            color: #4caf50;
            font-size: 1.8rem;
        }

        .evidence-category h3 {
            color: #333;
            margin: 0 0 1rem 0;
            text-align: center;
        }

        .evidence-content {
            max-height: 100px;
            overflow: hidden;
            transition: max-height 0.5s ease;
        }

        .evidence-category.expanded .evidence-content {
            max-height: 1000px;
        }

        .evidence-content p {
            color: #666;
            line-height: 1.6;
            margin-bottom: 1rem;
            text-align: center;
        }

        .evidence-examples {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 1rem;
            margin-top: 1rem;
        }

        .evidence-example {
            margin-bottom: 1rem;
        }

        .evidence-example:last-child {
            margin-bottom: 0;
        }

        .evidence-example h4 {
            color: #4caf50;
            margin: 0 0 0.5rem 0;
            font-size: 1rem;
        }

        .evidence-example p {
            color: #666;
            margin: 0 0 0.5rem 0;
            font-size: 0.9rem;
            text-align: left;
        }

        .evidence-img {
            max-width: 100%;
            border-radius: 8px;
            display: block;
            margin: 0.5rem auto;
        }

        .evidence-quiz {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            text-align: center;
        }

        .evidence-quiz h3 {
            color: #4caf50;
            margin: 0 0 1.5rem 0;
        }

        .quiz-container {
            max-width: 600px;
            margin: 0 auto;
        }

        @media (max-width: 768px) {
            .darwin-intro {
                grid-template-columns: 1fr;
            }
            
            .darwin-portrait {
                margin-bottom: 1.5rem;
            }
            
            .observation-cards {
                grid-template-columns: 1fr;
            }
            
            .evidence-categories {
                grid-template-columns: 1fr;
            }
        }

        .evolution-cards-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .evolution-card {
            background-color: #fff;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .evolution-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .card-header {
            background: linear-gradient(135deg, #4caf50, #2e7d32);
            color: white;
            padding: 15px;
            text-align: center;
        }

        .card-header h3 {
            margin: 0;
            font-size: 1.3rem;
        }

        .card-content {
            padding: 15px;
        }

        .card-image {
            width: 100%;
            height: 200px;
            overflow: hidden;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .evolution-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .evolution-card:hover .evolution-img {
            transform: scale(1.05);
        }

        .card-text {
            color: #333;
        }

        .card-text p {
            margin-bottom: 12px;
            line-height: 1.5;
        }

        .card-facts {
            background-color: #f9f9f9;
            border-radius: 8px;
            padding: 12px;
            margin-top: 15px;
        }

        .card-facts h4 {
            margin-top: 0;
            color: #2e7d32;
            font-size: 1rem;
            margin-bottom: 8px;
        }

        .card-facts ul {
            margin: 0;
            padding-left: 20px;
        }

        .card-facts li {
            margin-bottom: 5px;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .evolution-cards-container {
                grid-template-columns: 1fr;
            }
            
            .card-image {
                height: 180px;
            }
        }

        .image-notice {
            background-color: #fff3cd;
            border: 1px solid #ffeeba;
            border-radius: 8px;
            padding: 10px 15px;
            margin-bottom: 20px;
            color: #856404;
        }

        /* 人类进化标签页样式 */
        .human-evolution-container {
            padding: 1rem;
        }

        .evolution-intro {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            margin-bottom: 2rem;
        }

        .intro-text {
            font-size: 1.1rem;
            color: #333;
            line-height: 1.6;
            text-align: center;
            margin: 0;
        }

        .timeline-interactive {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            margin-bottom: 2rem;
        }

        .timeline-interactive h3 {
            color: #4caf50;
            margin: 0 0 1.5rem 0;
            text-align: center;
        }

        .timeline-container {
            position: relative;
            overflow: hidden;
        }

        .timeline-scroll {
            display: flex;
            overflow-x: auto;
            scroll-behavior: smooth;
            padding: 2rem 0;
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        .timeline-scroll::-webkit-scrollbar {
            display: none;
        }

        .timeline-item {
            min-width: 300px;
            margin-right: 2rem;
            position: relative;
        }

        .timeline-marker {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #4caf50;
            position: absolute;
            top: -2rem;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1;
        }

        .timeline-marker::before {
            content: '';
            position: absolute;
            height: 4px;
            background: #4caf50;
            top: 6px;
            width: 300px;
            right: 8px;
            z-index: -1;
        }

        .timeline-item:first-child .timeline-marker::before {
            display: none;
        }

        .timeline-content {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 1.5rem;
            border-top: 4px solid #4caf50;
        }

        .timeline-content h4 {
            color: #4caf50;
            margin: 0 0 0.5rem 0;
            font-size: 1.2rem;
        }

        .timeline-content h5 {
            color: #333;
            margin: 0 0 1rem 0;
            font-size: 1rem;
        }

        .timeline-image {
            width: 100%;
            height: 180px;
            overflow: hidden;
            border-radius: 8px;
            margin-bottom: 1rem;
        }

        .timeline-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .timeline-content:hover .timeline-image img {
            transform: scale(1.05);
        }

        .timeline-content p {
            color: #666;
            font-size: 0.9rem;
            margin: 0;
            line-height: 1.5;
        }

        .timeline-navigation {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .nav-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #4caf50;
            color: white;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-btn:hover {
            background: #2e7d32;
            transform: scale(1.1);
        }

        .human-features {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            margin-bottom: 2rem;
        }

        .human-features h3 {
            color: #4caf50;
            margin: 0 0 1.5rem 0;
            text-align: center;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
        }

        .feature-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 1.5rem;
            text-align: center;
            transition: all 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .feature-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.1), rgba(139, 195, 74, 0.1));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
            color: #4caf50;
            font-size: 1.8rem;
        }

        .feature-card h4 {
            color: #333;
            margin: 0 0 0.5rem 0;
        }

        .feature-card p {
            color: #666;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .comparison {
            display: flex;
            justify-content: space-around;
            margin-top: 1rem;
            font-size: 0.8rem;
            color: #555;
        }

        .comparison span {
            padding: 0.3rem 0.6rem;
            background: rgba(76, 175, 80, 0.1);
            border-radius: 20px;
        }

        .genetic-evidence {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .genetic-evidence h3 {
            color: #4caf50;
            margin: 0 0 1.5rem 0;
            text-align: center;
        }

        .dna-comparison {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 2rem;
        }

        .dna-image {
            width: 100%;
            height: 300px;
            overflow: hidden;
            border-radius: 10px;
        }

        .dna-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .dna-info h4 {
            color: #4caf50;
            margin: 0 0 1rem 0;
        }

        .dna-stats, .gene-list {
            list-style-type: none;
            padding: 0;
            margin: 0 0 1.5rem 0;
        }

        .dna-stats li, .gene-list li {
            background: #f8f9fa;
            padding: 0.8rem 1rem;
            margin-bottom: 0.5rem;
            border-radius: 6px;
            font-size: 0.9rem;
            color: #333;
        }

        .dna-stats li strong, .gene-list li strong {
            color: #4caf50;
        }

        /* 分子证据样式 */
        .protein-comparison {
            margin: 1.5rem 0;
            overflow-x: auto;
        }

        .sequence-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
        }

        .sequence-table th, .sequence-table td {
            padding: 0.8rem;
            border: 1px solid #e0e0e0;
            text-align: left;
        }

        .sequence-table th {
            background-color: #f0f8ff;
            color: #333;
            font-weight: 600;
        }

        .sequence-table tr:nth-child(even) {
            background-color: #f8f9fa;
        }

        .sequence-table tr:hover {
            background-color: #e8f5e8;
        }

        .molecular-visualization {
            background-color: #f8f9fa;
            border-radius: 10px;
            padding: 1.5rem;
            margin-top: 1.5rem;
        }

        .viz-controls {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        #protein-selector {
            padding: 0.5rem;
            border-radius: 5px;
            border: 1px solid #ddd;
            flex-grow: 1;
        }

        #protein-model {
            width: 100%;
            height: 300px;
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .protein-img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

        .conservation-map {
            text-align: center;
        }

        .conservation-map h5 {
            margin: 0 0 1rem 0;
            color: #333;
        }

        .color-bar {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
        }

        .color-gradient {
            width: 200px;
            height: 20px;
            background: linear-gradient(to right, #e53935, #f5f5f5, #1e88e5);
            border-radius: 10px;
        }

        .color-label {
            font-size: 0.8rem;
            color: #666;
        }

        .active-timeline-item {
            transform: scale(1.05);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            z-index: 1;
        }

        .highlight {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }

        @media (max-width: 768px) {
            .dna-comparison {
                grid-template-columns: 1fr;
            }
            
            .dna-image {
                height: 200px;
                margin-bottom: 1rem;
            }
            
            .features-grid {
                grid-template-columns: 1fr;
            }
            
            .timeline-item {
                min-width: 260px;
            }
            
            .timeline-marker::before {
                width: 260px;
            }
        }
    </style>
</head>
<body>
    <header class="main-header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <a href="../../index.html">
                        <i class="fas fa-graduation-cap" style="background: linear-gradient(90deg, #4361ee, #7209b7); -webkit-background-clip: text; background-clip: text; color: transparent;"></i>
                        <span>Alex的学习助手</span>
                    </a>
                </div>
                <nav class="main-nav">
                    <ul>
                        <li><a href="../../index.html">首页</a></li>
                        <li><a href="main.html">生物</a></li>
                        <li><a href="../../index.html#subjects">科目</a></li>
                        <li><a href="../../tts.html">语音</a></li>
                        <li><a href="../../draw.html">绘图</a></li>
                    </ul>
                </nav>
                <button class="mobile-menu-toggle" aria-label="切换菜单">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
        </div>
    </header>

    <main class="evolution-page">
        <div class="container">
            <div class="evolution-container">
                <div class="evolution-header">
                    <h1><i class="fas fa-tree"></i> 进化论</h1>
                    <p>探索达尔文自然选择理论、物种多样性起源及生物适应性的科学基础</p>
                </div>

                <div class="evolution-tabs">
                    <button class="evolution-tab active" data-tab="timeline">进化时间轴</button>
                    <button class="evolution-tab" data-tab="selection">自然选择</button>
                    <button class="evolution-tab" data-tab="phylogeny">系统发育</button>
                    <button class="evolution-tab" data-tab="darwin">达尔文理论</button>
                    <button class="evolution-tab" data-tab="evidence">进化证据</button>
                    <button class="evolution-tab" data-tab="human">人类进化</button>
                </div>

                <div class="evolution-content">
                    <!-- 进化时间轴标签页 -->
                    <div class="tab-panel active" id="timeline-panel">
                        <h2>生命演化的关键时刻</h2>
                        <div class="image-notice">
                            <p>注意：演化卡片的图片资源正在准备中。您现在看到的是信息卡片的预览版本，完整图片将很快上线。</p>
                        </div>
                        <div class="evolution-cards-container">
                            <div class="evolution-card">
                                <div class="card-header">
                                    <h3>38亿年前 - 生命起源</h3>
                                </div>
                                <div class="card-content">
                                    <div class="card-image">
                                        <img src="../../../assets/images/evolution/origin_of_life.jpg" alt="生命起源" class="evolution-img" onerror="this.src='../../../assets/images/evolution/placeholder.jpg'; this.onerror='';">
                                    </div>
                                    <div class="card-text">
                                        <p>地球最早的生命形式可能是在深海热液喷口周围形成的简单的原核生物。这些微小的单细胞生物利用化学能量而非阳光生存，通过化能自养作用从无机物质中获取能量。</p>
                                        <p>这些早期生命形式没有细胞核，但已经具备了基本的代谢和自我复制能力，为地球上所有生命奠定了基础。</p>
                                        <div class="card-facts">
                                            <h4>关键事实:</h4>
                                            <ul>
                                                <li>最早的生物可能是化能自养型微生物</li>
                                                <li>生命可能起源于深海热液喷口或浅水潮汐池</li>
                                                <li>这些生物利用RNA作为早期遗传物质</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="evolution-card">
                                <div class="card-header">
                                    <h3>30亿年前 - 光合作用出现</h3>
                                </div>
                                <div class="card-content">
                                    <div class="card-image">
                                        <img src="../../../assets/images/evolution/photosynthesis.jpg" alt="光合作用" class="evolution-img" onerror="this.src='../../../assets/images/evolution/placeholder.jpg'; this.onerror='';">
                                    </div>
                                    <div class="card-text">
                                        <p>蓝藻（蓝细菌）进化出了利用水作为还原剂的光合作用能力，产生氧气作为废物。这一过程逐渐改变了地球大气层的成分，为后来的复杂生命形式创造了条件。</p>
                                        <p>这一事件被称为"大氧化事件"，是地球历史上最重要的转折点之一，为后来的有氧生物提供了生存环境。</p>
                                        <div class="card-facts">
                                            <h4>关键事实:</h4>
                                            <ul>
                                                <li>蓝藻是第一批产生氧气的光合生物</li>
                                                <li>大氧化事件改变了地球的大气成分</li>
                                                <li>氧气最初被海洋中的铁吸收，形成了条带状铁矿床</li>
                                                <li>氧气对当时的厌氧生物是有毒的，导致了第一次大规模灭绝</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="evolution-card">
                                <div class="card-header">
                                    <h3>20亿年前 - 真核细胞出现</h3>
                                </div>
                                <div class="card-content">
                                    <div class="card-image">
                                        <img src="../../../assets/images/evolution/eukaryotic_cell.jpg" alt="真核细胞" class="evolution-img" onerror="this.src='../../../assets/images/evolution/placeholder.jpg'; this.onerror='';">
                                    </div>
                                    <div class="card-text">
                                        <p>真核细胞的出现标志着生命复杂性的重大飞跃。这些细胞含有被膜包围的细胞器，包括细胞核，使得基因组能够更好地组织和保护。</p>
                                        <p>真核细胞可能起源于一个简单细胞吞噬了另一个细胞，两者共生形成了更复杂的生命形式。被吞噬的细菌最终演变为线粒体，为真核细胞提供能量。</p>
                                        <div class="card-facts">
                                            <h4>关键事实:</h4>
                                            <ul>
                                                <li>真核细胞通过内共生形成</li>
                                                <li>线粒体是被吞噬的细菌演化而来</li>
                                                <li>真核生物的出现为多细胞生命奠定了基础</li>
                                                <li>真核生物引入了有性生殖，增加了遗传多样性</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="evolution-card">
                                <div class="card-header">
                                    <h3>6亿年前 - 多细胞生物繁盛</h3>
                                </div>
                                <div class="card-content">
                                    <div class="card-image">
                                        <img src="../../../assets/images/evolution/ediacaran_biota.jpg" alt="埃迪卡拉生物群" class="evolution-img" onerror="this.src='../../../assets/images/evolution/placeholder.jpg'; this.onerror='';">
                                    </div>
                                    <div class="card-text">
                                        <p>埃迪卡拉生物群是已知最早的复杂多细胞生物群，包括各种软体生物，如水母状生物、蠕虫状生物和扇形生物。这些生物没有坚硬的外壳或骨骼，但展示了生命形式的显著多样化。</p>
                                        <p>这些生物出现在寒武纪生命大爆发之前，代表了动物进化的早期实验阶段，其中许多可能与现代动物没有直接关系。</p>
                                        <div class="card-facts">
                                            <h4>关键事实:</h4>
                                            <ul>
                                                <li>埃迪卡拉生物群是最早的大型多细胞生物</li>
                                                <li>这些生物生活在浅海环境中</li>
                                                <li>许多埃迪卡拉生物与现代动物门类没有直接关系</li>
                                                <li>这一时期的生物多样性为寒武纪爆发奠定了基础</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="evolution-card">
                                <div class="card-header">
                                    <h3>5.4亿年前 - 寒武纪生命大爆发</h3>
                                </div>
                                <div class="card-content">
                                    <div class="card-image">
                                        <img src="../../../assets/images/evolution/cambrian_explosion.jpg" alt="寒武纪生命大爆发" class="evolution-img" onerror="this.src='../../../assets/images/evolution/placeholder.jpg'; this.onerror='';">
                                    </div>
                                    <div class="card-text">
                                        <p>寒武纪生命大爆发是地球历史上生物多样性最迅速增长的时期之一。在相对较短的时间内，几乎所有现代动物门类的祖先都出现了，包括节肢动物、软体动物、脊索动物等。</p>
                                        <p>这一时期的生物进化了硬壳、外骨骼和其他防御结构，同时也出现了捕食者和被捕食者之间的生态关系，推动了进一步的进化。</p>
                                        <div class="card-facts">
                                            <h4>关键事实:</h4>
                                            <ul>
                                                <li>大多数现代动物门类在此时期出现</li>
                                                <li>三叶虫成为海洋中的主要生物之一</li>
                                                <li>第一批具有硬壳和外骨骼的动物出现</li>
                                                <li>捕食者和被捕食者之间的军备竞赛开始</li>
                                                <li>伯吉斯页岩和澄江生物群保存了这一时期的丰富化石</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="evolution-card">
                                <div class="card-header">
                                    <h3>4.2亿年前 - 植物登陆</h3>
                                </div>
                                <div class="card-content">
                                    <div class="card-image">
                                        <img src="../../../assets/images/evolution/plants_land.jpg" alt="植物登陆" class="evolution-img" onerror="this.src='../../../assets/images/evolution/placeholder.jpg'; this.onerror='';">
                                    </div>
                                    <div class="card-text">
                                        <p>植物首次从水生环境迁移到陆地，开始了陆地生态系统的形成。最早的陆地植物是简单的无维管植物，类似于现代的苔藓和藓类。</p>
                                        <p>这些早期植物逐渐进化出根、茎和叶等结构，以适应陆地环境的挑战，如防止干燥、抵抗重力和吸收营养。植物的登陆为后来的动物登陆创造了条件。</p>
                                        <div class="card-facts">
                                            <h4>关键事实:</h4>
                                            <ul>
                                                <li>最早的陆地植物类似于现代的苔藓</li>
                                                <li>植物进化出角质层以防止水分流失</li>
                                                <li>维管植物的出现使植物能够生长得更高大</li>
                                                <li>植物的根系帮助形成了第一批土壤</li>
                                                <li>陆地植物通过光合作用增加了大气中的氧气含量</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="evolution-card">
                                <div class="card-header">
                                    <h3>3.75亿年前 - 脊椎动物登陆</h3>
                                </div>
                                <div class="card-content">
                                    <div class="card-image">
                                        <img src="../../../assets/images/evolution/tiktaalik.jpg" alt="提克塔利克鱼" class="evolution-img" onerror="this.src='../../../assets/images/evolution/placeholder.jpg'; this.onerror='';">
                                    </div>
                                    <div class="card-text">
                                        <p>提克塔利克鱼（Tiktaalik）是鱼类和四足动物之间的过渡形式，代表了脊椎动物从水生到陆生环境的重要转变。这些生物具有鱼类的特征，但也有适应陆地生活的特点，如原始的肺和能够支撑身体的鳍。</p>
                                        <p>这一进化突破为两栖动物、爬行动物、鸟类和哺乳动物的后续进化铺平了道路，最终导致了陆地脊椎动物的多样化。</p>
                                        <div class="card-facts">
                                            <h4>关键事实:</h4>
                                            <ul>
                                                <li>提克塔利克鱼具有鱼和四足动物的特征</li>
                                                <li>它的鳍内有骨骼结构，可以支撑身体重量</li>
                                                <li>它可能在浅水环境中生活，偶尔上岸</li>
                                                <li>这一进化创新最终导致了所有陆生脊椎动物的出现</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="evolution-card">
                                <div class="card-header">
                                    <h3>2.5亿年前 - 二叠纪大灭绝</h3>
                                </div>
                                <div class="card-content">
                                    <div class="card-image">
                                        <img src="../../../assets/images/evolution/permian_extinction.jpg" alt="二叠纪大灭绝" class="evolution-img" onerror="this.src='../../../assets/images/evolution/placeholder.jpg'; this.onerror='';">
                                    </div>
                                    <div class="card-text">
                                        <p>二叠纪大灭绝是地球历史上最严重的灭绝事件，导致约96%的海洋物种和70%的陆地脊椎动物灭绝。这一事件被称为"生命的大劫难"。</p>
                                        <p>灭绝的原因可能包括西伯利亚大规模火山爆发、全球变暖、海洋酸化和氧气水平下降等。这一灭绝事件为恐龙时代的开始创造了条件。</p>
                                        <div class="card-facts">
                                            <h4>关键事实:</h4>
                                            <ul>
                                                <li>地球历史上最大的灭绝事件</li>
                                                <li>三叶虫完全灭绝</li>
                                                <li>海洋生态系统需要数百万年才能恢复</li>
                                                <li>为恐龙的崛起创造了生态空间</li>
                                                <li>可能由西伯利亚火山爆发引起</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="evolution-card">
                                <div class="card-header">
                                    <h3>2.3亿-6600万年前 - 恐龙时代</h3>
                                </div>
                                <div class="card-content">
                                    <div class="card-image">
                                        <img src="../../../assets/images/evolution/dinosaurs.jpg" alt="恐龙时代" class="evolution-img" onerror="this.src='../../../assets/images/evolution/placeholder.jpg'; this.onerror='';">
                                    </div>
                                    <div class="card-text">
                                        <p>恐龙在中生代统治地球约1.6亿年，发展出令人难以置信的多样性，从巨大的蜥脚类恐龙到敏捷的猛禽类。这一时期也见证了鸟类的起源，它们是恐龙的直接后代。</p>
                                        <p>恐龙的成功可能与它们的新陈代谢、繁殖策略和适应性有关。它们的统治最终在白垩纪末期的小行星撞击后结束。</p>
                                        <div class="card-facts">
                                            <h4>关键事实:</h4>
                                            <ul>
                                                <li>恐龙在三叠纪末期开始繁盛</li>
                                                <li>它们发展出多种生态位和体型</li>
                                                <li>最大的陆地动物是蜥脚类恐龙，如雷龙和腕龙</li>
                                                <li>鸟类是兽脚类恐龙的后代</li>
                                                <li>许多恐龙可能是温血动物</li>
                                                <li>除鸟类外，所有恐龙在6600万年前灭绝</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="evolution-card">
                                <div class="card-header">
                                    <h3>6600万年前 - 小行星撞击与恐龙灭绝</h3>
                                </div>
                                <div class="card-content">
                                    <div class="card-image">
                                        <img src="../../../assets/images/evolution/asteroid_impact.jpg" alt="小行星撞击" class="evolution-img" onerror="this.src='../../../assets/images/evolution/placeholder.jpg'; this.onerror='';">
                                    </div>
                                    <div class="card-text">
                                        <p>一颗直径约10-15公里的小行星撞击墨西哥尤卡坦半岛，形成了奇克苏鲁伯陨石坑，引发了全球性灾难。这一事件导致了白垩纪-古近纪灭绝事件，消灭了约75%的物种，包括所有非鸟类恐龙。</p>
                                        <p>撞击释放的能量相当于数十亿颗原子弹，引发了全球性火灾、海啸和长期的气候变化，为哺乳动物的崛起创造了条件。</p>
                                        <div class="card-facts">
                                            <h4>关键事实:</h4>
                                            <ul>
                                                <li>小行星撞击形成了直径180公里的陨石坑</li>
                                                <li>撞击后全球气温急剧下降</li>
                                                <li>灰尘和气溶胶阻挡阳光，导致光合作用减少</li>
                                                <li>所有体重超过25公斤的陆地动物灭绝</li>
                                                <li>恐龙灭绝为哺乳动物的多样化创造了机会</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="evolution-card">
                                <div class="card-header">
                                    <h3>6600万年前至今 - 哺乳动物时代</h3>
                                </div>
                                <div class="card-content">
                                    <div class="card-image">
                                        <img src="../../../assets/images/evolution/mammals.jpg" alt="哺乳动物时代" class="evolution-img" onerror="this.src='../../../assets/images/evolution/placeholder.jpg'; this.onerror='';">
                                    </div>
                                    <div class="card-text">
                                        <p>恐龙灭绝后，哺乳动物迅速多样化，填补了生态空白。从小型啮齿类到巨大的鲸类，哺乳动物适应了几乎所有的环境，包括海洋、陆地和空中。</p>
                                        <p>哺乳动物的成功与其温血体质、育幼行为和适应性强的特点有关。这一时期也见证了灵长类和人类的进化。</p>
                                        <div class="card-facts">
                                            <h4>关键事实:</h4>
                                            <ul>
                                                <li>哺乳动物在恐龙统治时期就已存在，但体型较小</li>
                                                <li>恐龙灭绝后，哺乳动物迅速辐射进化</li>
                                                <li>出现了多种特化形式，如蝙蝠（飞行）和鲸类（水生）</li>
                                                <li>灵长类在约6000万年前出现</li>
                                                <li>人类祖先约600万年前开始从其他灵长类中分化</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="evolution-card">
                                <div class="card-header">
                                    <h3>700万-200万年前 - 人科进化</h3>
                                </div>
                                <div class="card-content">
                                    <div class="card-image">
                                        <img src="../../../assets/images/evolution/human_evolution.jpg" alt="人科进化" class="evolution-img" onerror="this.src='../../../assets/images/evolution/placeholder.jpg'; this.onerror='';">
                                    </div>
                                    <div class="card-text">
                                        <p>人类与黑猩猩的共同祖先约在700万年前分化。早期人科成员如南方古猿开始直立行走，这是人类进化的关键特征。</p>
                                        <p>直立行走释放了前肢，使其能够用于工具制作和操作，同时也改变了骨盆和头骨的形状，为更大的脑容量创造了条件。</p>
                                        <div class="card-facts">
                                            <h4>关键事实:</h4>
                                            <ul>
                                                <li>人类与黑猩猩共享约98.8%的DNA</li>
                                                <li>南方古猿是最早的直立行走的人科成员之一</li>
                                                <li>直立行走是人类进化的关键适应</li>
                                                <li>早期人类在非洲大陆进化</li>
                                                <li>多个人科物种同时存在，而非线性进化</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="evolution-card">
                                <div class="card-header">
                                    <h3>200万年前至今 - 人属进化</h3>
                                </div>
                                <div class="card-content">
                                    <div class="card-image">
                                        <img src="../../../assets/images/evolution/homo_evolution.jpg" alt="人属进化" class="evolution-img" onerror="this.src='../../../assets/images/evolution/placeholder.jpg'; this.onerror='';">
                                    </div>
                                    <div class="card-text">
                                        <p>人属（Homo）约在200万年前出现，其特征是脑容量增大、工具使用能力提高和社会复杂性增加。从早期的能人（Homo habilis）到直立人（Homo erectus）再到现代人（Homo sapiens），人属经历了显著的进化。</p>
                                        <p>现代人类约在30万年前在非洲出现，随后扩散到全球各地，成为地球上最具影响力的物种。</p>
                                        <div class="card-facts">
                                            <h4>关键事实:</h4>
                                            <ul>
                                                <li>人属的主要特征是脑容量增大</li>
                                                <li>直立人是第一个走出非洲的人属成员</li>
                                                <li>尼安德特人是现代人的近亲，生活在欧亚大陆</li>
                                                <li>现代人类约在30万年前在非洲出现</li>
                                                <li>现代人类与尼安德特人和丹尼索瓦人有少量基因交流</li>
                                                <li>农业约在1.2万年前开始，彻底改变了人类社会</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 自然选择标签页 -->
                    <div class="tab-panel" id="selection-panel">
                        <h2>自然选择模拟器</h2>
                        <div class="selection-simulator">
                            <div class="simulation-canvas">
                                <canvas id="selection-canvas" width="600" height="350"></canvas>
                            </div>
                            
                            <div class="simulation-controls">
                                <div class="control-group">
                                    <h4>环境压力</h4>
                                    <label>捕食压力</label>
                                    <input type="range" class="control-slider" id="predation-pressure" min="0" max="100" value="50">
                                    <div class="control-value" id="predation-value">50%</div>
                                </div>
                                
                                <div class="control-group">
                                    <h4>突变率</h4>
                                    <label>基因突变</label>
                                    <input type="range" class="control-slider" id="mutation-rate" min="0" max="10" value="2">
                                    <div class="control-value" id="mutation-value">2%</div>
                                </div>
                                
                                <div class="control-group">
                                    <h4>种群大小</h4>
                                    <label>个体数量</label>
                                    <input type="range" class="control-slider" id="population-size" min="50" max="500" value="200">
                                    <div class="control-value" id="population-value">200</div>
                                </div>
                                
                                <div class="control-group">
                                    <h4>选择强度</h4>
                                    <label>适应性差异</label>
                                    <input type="range" class="control-slider" id="selection-strength" min="0" max="100" value="30">
                                    <div class="control-value" id="selection-value">30%</div>
                                </div>
                            </div>

                            <div style="text-align: center;">
                                <button class="action-btn" id="start-evolution">开始进化模拟</button>
                                <button class="action-btn secondary" id="reset-evolution">重置模拟</button>
                            </div>
                        </div>
                    </div>

                    <!-- 系统发育标签页 -->
                    <div class="tab-panel" id="phylogeny-panel">
                        <h2>系统发育树</h2>
                        <div class="phylogenetic-tree">
                            <div class="tree-canvas">
                                <canvas id="phylogeny-canvas" width="600" height="450"></canvas>
                            </div>
                            
                            <div class="species-selector">
                                <div class="species-card selected" data-species="human">
                                    <div class="species-icon">🧑</div>
                                    <div class="species-name">人类</div>
                                </div>
                                <div class="species-card selected" data-species="chimp">
                                    <div class="species-icon">🐵</div>
                                    <div class="species-name">黑猩猩</div>
                                </div>
                                <div class="species-card selected" data-species="dog">
                                    <div class="species-icon">🐕</div>
                                    <div class="species-name">狗</div>
                                </div>
                                <div class="species-card selected" data-species="cat">
                                    <div class="species-icon">🐱</div>
                                    <div class="species-name">猫</div>
                                </div>
                                <div class="species-card selected" data-species="mouse">
                                    <div class="species-icon">🐭</div>
                                    <div class="species-name">小鼠</div>
                                </div>
                                <div class="species-card selected" data-species="bird">
                                    <div class="species-icon">🐦</div>
                                    <div class="species-name">鸟类</div>
                                </div>
                            </div>

                            <div style="text-align: center;">
                                <button class="action-btn" id="build-tree">构建系统发育树</button>
                                <button class="action-btn secondary" id="clear-tree">清空选择</button>
                            </div>
                        </div>
                    </div>

                    <!-- 适应性进化标签页 -->
                    <div class="tab-panel" id="adaptations-panel">
                        <h2>适应性进化实例</h2>
                        <div class="adaptation-examples">
                            <div class="adaptation-grid">
                                <div class="adaptation-card">
                                    <div class="adaptation-header">
                                        <div class="adaptation-icon">🦒</div>
                                        <div class="adaptation-title">长颈鹿的长脖子</div>
                                    </div>
                                    <div class="adaptation-description">
                                        长颈鹿的长脖子是为了适应高处取食的环境压力而进化出的特征。
                                    </div>
                                    <div class="adaptation-example">
                                        <strong>适应机制:</strong> 颈椎延长，血管系统特化，能够取食高处的树叶，减少竞争。
                                    </div>
                                </div>
                                
                                <div class="adaptation-card">
                                    <div class="adaptation-header">
                                        <div class="adaptation-icon">🐧</div>
                                        <div class="adaptation-title">企鹅的游泳适应</div>
                                    </div>
                                    <div class="adaptation-description">
                                        企鹅失去飞行能力，但获得了卓越的游泳和潜水能力。
                                    </div>
                                    <div class="adaptation-example">
                                        <strong>适应机制:</strong> 翅膀变成鳍状，骨骼密度增加，羽毛防水，适应海洋生活。
                                    </div>
                                </div>
                                
                                <div class="adaptation-card">
                                    <div class="adaptation-header">
                                        <div class="adaptation-icon">🌵</div>
                                        <div class="adaptation-title">仙人掌的抗旱性</div>
                                    </div>
                                    <div class="adaptation-description">
                                        仙人掌进化出多种抗旱特征，适应干旱的沙漠环境。
                                    </div>
                                    <div class="adaptation-example">
                                        <strong>适应机制:</strong> 叶片变成刺，茎部储水，表面蜡质层减少水分蒸发。
                                    </div>
                                </div>
                                
                                <div class="adaptation-card">
                                    <div class="adaptation-header">
                                        <div class="adaptation-icon">🦇</div>
                                        <div class="adaptation-title">蝙蝠的回声定位</div>
                                    </div>
                                    <div class="adaptation-description">
                                        蝙蝠进化出回声定位系统，在黑暗中精确导航和捕食。
                                    </div>
                                    <div class="adaptation-example">
                                        <strong>适应机制:</strong> 发声器官特化，听觉系统敏感，大脑处理声波信息。
                                    </div>
                                </div>
                                
                                <div class="adaptation-card">
                                    <div class="adaptation-header">
                                        <div class="adaptation-icon">🐟</div>
                                        <div class="adaptation-title">深海鱼的发光器官</div>
                                    </div>
                                    <div class="adaptation-description">
                                        深海鱼类进化出生物发光器官，适应黑暗的深海环境。
                                    </div>
                                    <div class="adaptation-example">
                                        <strong>适应机制:</strong> 发光细菌共生，化学发光反应，用于通讯和捕食。
                                    </div>
                                </div>
                                
                                <div class="adaptation-card">
                                    <div class="adaptation-header">
                                        <div class="adaptation-icon">🦋</div>
                                        <div class="adaptation-title">蝴蝶的拟态</div>
                                    </div>
                                    <div class="adaptation-description">
                                        某些蝴蝶进化出拟态特征，模仿有毒物种以避免被捕食。
                                    </div>
                                    <div class="adaptation-example">
                                        <strong>适应机制:</strong> 翅膀颜色和图案模仿，行为模仿，贝氏拟态和缪氏拟态。
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 达尔文理论标签页 -->
                    <div class="tab-panel" id="darwin-panel">
                        <h2>达尔文的进化理论</h2>
                        <div class="darwin-theory">
                            <div class="darwin-intro">
                                <div class="darwin-portrait">
                                    <img src="../../assets/images/darwin_portrait.jpg" alt="查尔斯·达尔文" class="darwin-img">
                                    <p class="caption">查尔斯·罗伯特·达尔文 (1809-1882)</p>
                                </div>
                                <div class="darwin-summary">
                                    <h3>《物种起源》</h3>
                                    <p>达尔文于1859年出版的《物种起源》彻底改变了我们对生命演化的理解。他在小猎犬号上的五年环球航行中收集的证据为他的革命性理论奠定了基础。</p>
                                    <div class="key-concepts">
                                        <h4>达尔文进化论的关键概念：</h4>
                                        <ul>
                                            <li><strong>变异存在</strong>：生物体内存在自然变异</li>
                                            <li><strong>遗传性</strong>：特征可以遗传给后代</li>
                                            <li><strong>过度繁殖</strong>：生物产生的后代多于能够存活的数量</li>
                                            <li><strong>资源有限</strong>：环境中的资源有限，导致生存竞争</li>
                                            <li><strong>适者生存</strong>：最适应环境的个体更可能存活并繁殖</li>
                                            <li><strong>自然选择</strong>：环境选择有利特征，导致物种逐渐变化</li>
                                            <li><strong>物种形成</strong>：随着时间推移，种群可能分化成不同物种</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <div class="darwin-voyage">
                                <h3>小猎犬号航行</h3>
                                <div class="voyage-map">
                                    <img src="../../assets/images/beagle_voyage.jpg" alt="小猎犬号航行路线" class="voyage-img">
                                </div>
                                <div class="voyage-observations">
                                    <h4>关键观察：</h4>
                                    <div class="observation-cards">
                                        <div class="observation-card">
                                            <h5>加拉帕戈斯雀</h5>
                                            <p>达尔文在加拉帕戈斯群岛观察到13种雀鸟，它们的喙部形状适应各自的食物来源，这成为适应性辐射的经典例子。</p>
                                        </div>
                                        <div class="observation-card">
                                            <h5>化石记录</h5>
                                            <p>达尔文在南美发现的化石与现存物种既有相似之处又有差异，表明物种随时间变化。</p>
                                        </div>
                                        <div class="observation-card">
                                            <h5>地理分布</h5>
                                            <p>达尔文注意到相似但不同的物种往往出现在地理上隔离的区域，暗示共同祖先。</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="darwin-impact">
                                <h3>达尔文理论的影响</h3>
                                <div class="impact-timeline">
                                    <div class="impact-event">
                                        <div class="impact-year">1859</div>
                                        <div class="impact-description">《物种起源》出版</div>
                                    </div>
                                    <div class="impact-event">
                                        <div class="impact-year">1900年代初</div>
                                        <div class="impact-description">孟德尔遗传学的重新发现，为自然选择提供遗传机制</div>
                                    </div>
                                    <div class="impact-event">
                                        <div class="impact-year">1930-1940年代</div>
                                        <div class="impact-description">现代综合理论结合达尔文进化论与孟德尔遗传学</div>
                                    </div>
                                    <div class="impact-event">
                                        <div class="impact-year">1950年代</div>
                                        <div class="impact-description">DNA结构发现，揭示分子水平的进化机制</div>
                                    </div>
                                    <div class="impact-event">
                                        <div class="impact-year">当代</div>
                                        <div class="impact-description">基因组学和生物信息学为进化理论提供新见解</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 进化证据标签页 -->
                    <div class="tab-panel" id="evidence-panel">
                        <h2>进化的多重证据</h2>
                        <div class="evidence-container">
                            <div class="evidence-categories">
                                <div class="evidence-category" id="fossil-evidence">
                                    <div class="evidence-icon">
                                        <i class="fas fa-bone"></i>
                                    </div>
                                    <h3>化石证据</h3>
                                    <div class="evidence-content">
                                        <p>化石记录提供了物种随时间变化的直接证据，展示了过渡形式和灭绝物种。</p>
                                        <div class="evidence-examples">
                                            <div class="evidence-example">
                                                <h4>鲸类进化</h4>
                                                <p>化石显示鲸类从陆生哺乳动物进化而来，保留了退化的后肢骨骼。</p>
                                                <img src="../../assets/images/whale_evolution.jpg" alt="鲸类进化" class="evidence-img">
                                            </div>
                                            <div class="evidence-example">
                                                <h4>始祖鸟</h4>
                                                <p>始祖鸟是爬行动物和鸟类之间的过渡形式，同时具有爬行动物和鸟类的特征。</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="evidence-category" id="comparative-anatomy">
                                    <div class="evidence-icon">
                                        <i class="fas fa-hand-sparkles"></i>
                                    </div>
                                    <h3>比较解剖学</h3>
                                    <div class="evidence-content">
                                        <p>不同物种之间的结构相似性表明它们有共同的祖先。</p>
                                        <div class="evidence-examples">
                                            <div class="evidence-example">
                                                <h4>同源结构</h4>
                                                <p>人类手臂、鲸鳍、蝙蝠翼和猫腿都有相同的基本骨骼结构，表明它们从共同祖先进化而来。</p>
                                                <img src="../../assets/images/homologous_structures.jpg" alt="同源结构" class="evidence-img">
                                            </div>
                                            <div class="evidence-example">
                                                <h4>痕迹器官</h4>
                                                <p>如人类的盲肠和尾骨等结构在其他动物中有功能，但在人类中已退化。</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="evidence-category" id="molecular-evidence">
                                    <div class="evidence-icon">
                                        <i class="fas fa-dna"></i>
                                    </div>
                                    <h3>分子证据</h3>
                                    <div class="evidence-content">
                                        <p>DNA和蛋白质序列比较为进化关系提供了最直接的证据。</p>
                                        <div class="evidence-examples">
                                            <div class="evidence-example">
                                                <h4>DNA序列相似性</h4>
                                                <p>人类和黑猩猩的DNA序列相似度约为98.8%，表明它们有共同的祖先。</p>
                                            </div>
                                            <div class="evidence-example">
                                                <h4>分子钟</h4>
                                                <p>基于DNA突变率的计算可以估计物种分化的时间。</p>
                                                <img src="../../assets/images/molecular_clock.jpg" alt="分子钟" class="evidence-img">
                                            </div>
                                            <div class="evidence-example">
                                                <h4>蛋白质序列比较</h4>
                                                <p>不同物种的相同蛋白质（如细胞色素C或血红蛋白）具有高度相似性，差异程度与物种间的进化距离相关。</p>
                                                <div class="protein-comparison">
                                                    <table class="sequence-table">
                                                        <thead>
                                                            <tr>
                                                                <th>物种</th>
                                                                <th>细胞色素C序列片段</th>
                                                                <th>与人类的不同氨基酸数</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr>
                                                                <td>人类</td>
                                                                <td>GDVEKGKKIFVQKCA...</td>
                                                                <td>0</td>
                                                            </tr>
                                                            <tr>
                                                                <td>黑猩猩</td>
                                                                <td>GDVEKGKKIFVQKCA...</td>
                                                                <td>0</td>
                                                            </tr>
                                                            <tr>
                                                                <td>恒河猴</td>
                                                                <td>GDVEKGKKIFVQKCA...</td>
                                                                <td>1</td>
                                                            </tr>
                                                            <tr>
                                                                <td>狗</td>
                                                                <td>GDVEKGKKIFVQKCA...</td>
                                                                <td>10</td>
                                                            </tr>
                                                            <tr>
                                                                <td>马</td>
                                                                <td>GDVEKGKKIFIMKCS...</td>
                                                                <td>12</td>
                                                            </tr>
                                                            <tr>
                                                                <td>金枪鱼</td>
                                                                <td>GDVAKGKKTFVQKCS...</td>
                                                                <td>21</td>
                                                            </tr>
                                                            <tr>
                                                                <td>果蝇</td>
                                                                <td>GDIAKGKKTFVQKCS...</td>
                                                                <td>29</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                            <div class="evidence-example">
                                                <h4>分子进化可视化</h4>
                                                <p>下面的互动模型展示了几种关键蛋白质在不同物种间的保守性和变异。</p>
                                                <div class="molecular-visualization">
                                                    <div class="viz-controls">
                                                        <select id="protein-selector">
                                                            <option value="cytc">细胞色素C</option>
                                                            <option value="hb">血红蛋白</option>
                                                            <option value="foxp2">FOXP2蛋白(语言相关)</option>
                                                        </select>
                                                        <button id="show-model" class="action-btn">查看3D模型</button>
                                                    </div>
                                                    <div id="protein-model">
                                                        <img src="../../assets/images/evolution/protein_model.jpg" alt="蛋白质结构模型" class="protein-img" onerror="this.src='../../assets/images/placeholder.jpg';">
                                                    </div>
                                                    <div class="conservation-map">
                                                        <h5>保守区域(红色)与变异区域(蓝色)</h5>
                                                        <div class="color-bar">
                                                            <span class="color-label">高度保守</span>
                                                            <div class="color-gradient"></div>
                                                            <span class="color-label">高度变异</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="evidence-category" id="biogeographical-evidence">
                                    <div class="evidence-icon">
                                        <i class="fas fa-globe-americas"></i>
                                    </div>
                                    <h3>生物地理学证据</h3>
                                    <div class="evidence-content">
                                        <p>物种的地理分布模式支持进化论和大陆漂移理论。</p>
                                        <div class="evidence-examples">
                                            <div class="evidence-example">
                                                <h4>岛屿生物地理学</h4>
                                                <p>隔离的岛屿上的物种往往与最近大陆的物种相似，但具有特殊适应性。</p>
                                            </div>
                                            <div class="evidence-example">
                                                <h4>大陆漂移</h4>
                                                <p>不同大陆上的化石分布支持大陆曾经相连的理论。</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="evidence-quiz">
                                <h3>进化证据测验</h3>
                                <div class="quiz-container" id="evidence-quiz-container">
                                    <button class="action-btn" id="start-evidence-quiz">开始测验</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 人类进化标签页 -->
                    <div class="tab-panel" id="human-panel">
                        <h2>人类的演化历程</h2>
                        <div class="human-evolution-container">
                            <div class="evolution-intro">
                                <p class="intro-text">人类进化是生物进化中一个特别引人注目的例子，从与黑猩猩的共同祖先分化，到现代智人的出现，这一过程展示了自然选择如何塑造我们的解剖结构、行为和认知能力。</p>
                            </div>

                            <div class="timeline-interactive">
                                <h3>人类进化时间线</h3>
                                <div class="timeline-container">
                                    <div class="timeline-scroll">
                                        <div class="timeline-item" data-year="700">
                                            <div class="timeline-marker"></div>
                                            <div class="timeline-content">
                                                <h4>700万年前</h4>
                                                <h5>人科与黑猩猩分化</h5>
                                                <div class="timeline-image">
                                                    <img src="../../assets/images/evolution/human_chimp_split.jpg" alt="人科与黑猩猩分化" onerror="this.src='../../assets/images/placeholder.jpg';">
                                                </div>
                                                <p>人类与黑猩猩的最后共同祖先可能生活在非洲的森林环境中，形态上可能与现代黑猩猩相似。基因分析表明人类与黑猩猩分化发生在约500-700万年前。</p>
                                            </div>
                                        </div>

                                        <div class="timeline-item" data-year="440">
                                            <div class="timeline-marker"></div>
                                            <div class="timeline-content">
                                                <h4>440万年前</h4>
                                                <h5>阿尔迪猿人</h5>
                                                <div class="timeline-image">
                                                    <img src="../../assets/images/evolution/ardipithecus.jpg" alt="阿尔迪猿人" onerror="this.src='../../assets/images/placeholder.jpg';">
                                                </div>
                                                <p>阿尔迪猿人是早期人科成员之一，生活在森林环境中。它们已经能够直立行走，但仍保留着适应在树上生活的特征。代表物种包括阿尔迪猿人拉米达斯（Ardipithecus ramidus）。</p>
                                            </div>
                                        </div>

                                        <div class="timeline-item" data-year="400">
                                            <div class="timeline-marker"></div>
                                            <div class="timeline-content">
                                                <h4>400-200万年前</h4>
                                                <h5>南方古猿属</h5>
                                                <div class="timeline-image">
                                                    <img src="../../assets/images/evolution/australopithecus.jpg" alt="南方古猿" onerror="this.src='../../assets/images/placeholder.jpg';">
                                                </div>
                                                <p>南方古猿是一组早期人科成员，完全适应了直立行走，但脑容量仍然相对较小（约400-550立方厘米）。代表物种包括南方古猿阿法种（Lucy化石）和非洲南方古猿。</p>
                                            </div>
                                        </div>

                                        <div class="timeline-item" data-year="250">
                                            <div class="timeline-marker"></div>
                                            <div class="timeline-content">
                                                <h4>250万年前</h4>
                                                <h5>最早的石器工具</h5>
                                                <div class="timeline-image">
                                                    <img src="../../assets/images/evolution/oldowan_tools.jpg" alt="奥杜威石器" onerror="this.src='../../assets/images/placeholder.jpg';">
                                                </div>
                                                <p>最早的石器工具——奥杜威工业出现在这一时期，这些简单但有效的工具标志着人类技术发展的开始。这一时期可能与人属（Homo）的出现同步。</p>
                                            </div>
                                        </div>

                                        <div class="timeline-item" data-year="200">
                                            <div class="timeline-marker"></div>
                                            <div class="timeline-content">
                                                <h4>200万年前</h4>
                                                <h5>人属的出现</h5>
                                                <div class="timeline-image">
                                                    <img src="../../assets/images/evolution/homo_habilis.jpg" alt="能人" onerror="this.src='../../assets/images/placeholder.jpg';">
                                                </div>
                                                <p>早期人属成员如能人（Homo habilis）出现，脑容量增大（约600-700立方厘米），更为复杂的工具制作能力，以及更灵活的手掌。能人可能是第一个系统性使用石器的人科成员。</p>
                                            </div>
                                        </div>

                                        <div class="timeline-item" data-year="180">
                                            <div class="timeline-marker"></div>
                                            <div class="timeline-content">
                                                <h4>180-140万年前</h4>
                                                <h5>直立人</h5>
                                                <div class="timeline-image">
                                                    <img src="../../assets/images/evolution/homo_erectus.jpg" alt="直立人" onerror="this.src='../../assets/images/placeholder.jpg';">
                                                </div>
                                                <p>直立人（Homo erectus）是第一个走出非洲的人属成员，身体比例接近现代人，脑容量显著增大（约900-1100立方厘米）。直立人发明了更先进的石器工具（阿舍利工业），并可能是第一个使用火的人科成员。</p>
                                            </div>
                                        </div>

                                        <div class="timeline-item" data-year="100">
                                            <div class="timeline-marker"></div>
                                            <div class="timeline-content">
                                                <h4>100-40万年前</h4>
                                                <h5>早期智人</h5>
                                                <div class="timeline-image">
                                                    <img src="../../assets/images/evolution/archaic_homo_sapiens.jpg" alt="早期智人" onerror="this.src='../../assets/images/placeholder.jpg';">
                                                </div>
                                                <p>这一时期出现了一系列过渡性人类物种，如海德堡人（Homo heidelbergensis），它们具有比直立人更大的脑容量和更复杂的社会行为。这些早期智人可能是尼安德特人和现代人类的祖先。</p>
                                            </div>
                                        </div>

                                        <div class="timeline-item" data-year="40">
                                            <div class="timeline-marker"></div>
                                            <div class="timeline-content">
                                                <h4>40-12万年前</h4>
                                                <h5>尼安德特人</h5>
                                                <div class="timeline-image">
                                                    <img src="../../assets/images/evolution/neanderthal.jpg" alt="尼安德特人" onerror="this.src='../../assets/images/placeholder.jpg';">
                                                </div>
                                                <p>尼安德特人（Homo neanderthalensis）生活在欧洲和西亚，是智人的近亲。它们适应寒冷气候，体格强壮，脑容量甚至大于现代人类。尼安德特人具有复杂的社会结构、埋葬死者的行为和先进的工具制作技术。</p>
                                            </div>
                                        </div>

                                        <div class="timeline-item" data-year="30">
                                            <div class="timeline-marker"></div>
                                            <div class="timeline-content">
                                                <h4>30万年前</h4>
                                                <h5>现代人类的出现</h5>
                                                <div class="timeline-image">
                                                    <img src="../../assets/images/evolution/homo_sapiens.jpg" alt="智人" onerror="this.src='../../assets/images/placeholder.jpg';">
                                                </div>
                                                <p>现代智人（Homo sapiens）在非洲出现。早期的现代人类化石如摩洛哥杰贝伊尔乌德（Jebel Irhoud）和埃塞俄比亚奥莫（Omo）遗址的遗骸展示了现代人类的早期特征。</p>
                                            </div>
                                        </div>

                                        <div class="timeline-item" data-year="6">
                                            <div class="timeline-marker"></div>
                                            <div class="timeline-content">
                                                <h4>6万年前</h4>
                                                <h5>走出非洲</h5>
                                                <div class="timeline-image">
                                                    <img src="../../assets/images/evolution/out_of_africa.jpg" alt="走出非洲" onerror="this.src='../../assets/images/placeholder.jpg';">
                                                </div>
                                                <p>现代人类开始从非洲扩散到欧亚大陆和其他地区。这次迁移使得人类最终遍布全球。在扩散过程中，现代人类与尼安德特人和其他古老人类群体有少量基因交流。</p>
                                            </div>
                                        </div>

                                        <div class="timeline-item" data-year="4">
                                            <div class="timeline-marker"></div>
                                            <div class="timeline-content">
                                                <h4>4万年前</h4>
                                                <h5>认知革命</h5>
                                                <div class="timeline-image">
                                                    <img src="../../assets/images/evolution/cognitive_revolution.jpg" alt="认知革命" onerror="this.src='../../assets/images/placeholder.jpg';">
                                                </div>
                                                <p>约4-5万年前，人类文化出现了爆炸式发展，包括洞穴艺术、精细的石器和骨器工具、音乐器具、个人装饰品等。这一时期被称为"认知革命"或"文化大爆炸"，标志着现代人类认知能力的全面展现。</p>
                                            </div>
                                        </div>

                                        <div class="timeline-item" data-year="1.2">
                                            <div class="timeline-marker"></div>
                                            <div class="timeline-content">
                                                <h4>1.2万年前</h4>
                                                <h5>农业革命</h5>
                                                <div class="timeline-image">
                                                    <img src="../../assets/images/evolution/agricultural_revolution.jpg" alt="农业革命" onerror="this.src='../../assets/images/placeholder.jpg';">
                                                </div>
                                                <p>人类开始从狩猎采集生活方式转向农业和畜牧业，导致定居生活、人口增长、社会复杂化和早期文明的出现。这一转变始于中东肥沃新月地带，随后在世界各地独立发生。</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="timeline-navigation">
                                        <button class="nav-btn prev-btn"><i class="fas fa-chevron-left"></i></button>
                                        <button class="nav-btn next-btn"><i class="fas fa-chevron-right"></i></button>
                                    </div>
                                </div>
                            </div>

                            <div class="human-features">
                                <h3>人类的独特特征</h3>
                                <div class="features-grid">
                                    <div class="feature-card">
                                        <div class="feature-icon">
                                            <i class="fas fa-brain"></i>
                                        </div>
                                        <h4>大脑容量</h4>
                                        <p>现代人类的平均脑容量约为1350立方厘米，远大于体型相似的其他灵长类动物。大脑新皮层特别发达，支持高级认知功能和复杂语言。</p>
                                        <div class="comparison">
                                            <span>黑猩猩: 400cc</span>
                                            <span>直立人: 900cc</span>
                                            <span>智人: 1350cc</span>
                                        </div>
                                    </div>

                                    <div class="feature-card">
                                        <div class="feature-icon">
                                            <i class="fas fa-walking"></i>
                                        </div>
                                        <h4>双足直立行走</h4>
                                        <p>人类的骨盆、腿部和足部结构特化为高效的双足行走，释放双手用于操作工具。S形脊柱、前置枕骨孔和平衡头部的独特特征支持直立姿势。</p>
                                    </div>

                                    <div class="feature-card">
                                        <div class="feature-icon">
                                            <i class="fas fa-hand-paper"></i>
                                        </div>
                                        <h4>精细操作能力</h4>
                                        <p>人类的手部具有精细的抓握和操作能力，拇指可以与其他手指对位（对握），使我们能够制造和使用复杂工具。</p>
                                    </div>

                                    <div class="feature-card">
                                        <div class="feature-icon">
                                            <i class="fas fa-comments"></i>
                                        </div>
                                        <h4>复杂语言</h4>
                                        <p>人类进化出了用于复杂语言的解剖和神经结构，包括特化的声带位置、喉部结构和大脑语言处理区域（如布洛卡区和韦尼克区）。</p>
                                    </div>
                                </div>
                            </div>

                            <div class="genetic-evidence">
                                <h3>基因组证据</h3>
                                <div class="dna-comparison">
                                    <div class="dna-image">
                                        <img src="../../assets/images/evolution/human_dna.jpg" alt="人类DNA" onerror="this.src='../../assets/images/placeholder.jpg';">
                                    </div>
                                    <div class="dna-info">
                                        <h4>与其他物种的基因比较</h4>
                                        <ul class="dna-stats">
                                            <li><strong>黑猩猩:</strong> 与人类DNA有约98.8%的相似度</li>
                                            <li><strong>大猩猩:</strong> 与人类DNA有约98.4%的相似度</li>
                                            <li><strong>猩猩:</strong> 与人类DNA有约97.6%的相似度</li>
                                            <li><strong>尼安德特人:</strong> 现代非非洲人群携带约1-4%的尼安德特人DNA</li>
                                            <li><strong>丹尼索瓦人:</strong> 现代美拉尼西亚人携带约3-5%的丹尼索瓦人DNA</li>
                                        </ul>
                                        <h4>关键基因变化</h4>
                                        <ul class="gene-list">
                                            <li><strong>FOXP2:</strong> 与语言和语音相关的基因，人类版本有独特变化</li>
                                            <li><strong>ASPM与MCPH1:</strong> 与大脑发育相关的基因，在人类进化中经历了正向选择</li>
                                            <li><strong>MYH16:</strong> 在人类中失活，可能与颞骨肌肉减少和颅骨扩大相关</li>
                                            <li><strong>AMY1:</strong> 编码淀粉酶，随着农业发展，人类中的拷贝数增加</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="main-footer">
        <div class="container">
            <div class="footer-content">
                <p class="copyright-text">study-llm.me域名为Alex所有。保留所有权利。</p>
            </div>
        </div>
    </footer>

    <script src="../../js/common.js"></script>
    <script src="../../js/navigation.js"></script>
    <script>
        // 进化论功能
        class Evolution {
            constructor() {
                this.selectionCanvas = document.getElementById('selection-canvas');
                this.selectionCtx = this.selectionCanvas.getContext('2d');
                this.phylogenyCanvas = document.getElementById('phylogeny-canvas');
                this.phylogenyCtx = this.phylogenyCanvas.getContext('2d');
                
                this.isSimulating = false;
                this.generation = 0;
                this.population = [];
                this.selectedSpecies = ['human', 'chimp', 'dog', 'cat', 'mouse', 'bird'];
                
                this.initializeEventListeners();
                this.initializePopulation();
                this.drawPhylogeneticTree();
            }

            initializeEventListeners() {
                // 标签页切换
                document.querySelectorAll('.evolution-tab').forEach(tab => {
                    tab.addEventListener('click', (e) => {
                        this.switchTab(e.target.dataset.tab);
                    });
                });

                // 滑块控制
                ['predation-pressure', 'mutation-rate', 'population-size', 'selection-strength'].forEach(id => {
                    document.getElementById(id).addEventListener('input', (e) => {
                        this.updateSliderValue(id, e.target.value);
                    });
                });

                // 进化模拟控制
                document.getElementById('start-evolution').addEventListener('click', () => {
                    this.startEvolutionSimulation();
                });

                document.getElementById('reset-evolution').addEventListener('click', () => {
                    this.resetEvolution();
                });

                // 物种选择
                document.querySelectorAll('.species-card').forEach(card => {
                    card.addEventListener('click', (e) => {
                        this.toggleSpecies(e.target.closest('.species-card'));
                    });
                });

                // 系统发育树控制
                document.getElementById('build-tree').addEventListener('click', () => {
                    this.buildPhylogeneticTree();
                });

                document.getElementById('clear-tree').addEventListener('click', () => {
                    this.clearSpeciesSelection();
                });
            }

            switchTab(tabName) {
                // 更新标签页状态
                document.querySelectorAll('.evolution-tab').forEach(tab => {
                    tab.classList.remove('active');
                });
                document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');

                // 显示对应面板
                document.querySelectorAll('.tab-panel').forEach(panel => {
                    panel.classList.remove('active');
                });
                document.getElementById(`${tabName}-panel`).classList.add('active');
            }

            updateSliderValue(sliderId, value) {
                const valueId = sliderId.replace('-', '-') + '-value';
                const suffix = sliderId.includes('size') ? '' : '%';
                document.getElementById(valueId).textContent = value + suffix;
            }

            initializePopulation() {
                this.population = [];
                const size = parseInt(document.getElementById('population-size').value);
                
                for (let i = 0; i < size; i++) {
                    this.population.push({
                        x: Math.random() * 500,
                        y: Math.random() * 300,
                        color: this.randomColor(),
                        size: 3 + Math.random() * 4,
                        fitness: Math.random(),
                        speed: 1 + Math.random() * 2
                    });
                }
                
                this.generation = 0;
                this.drawPopulation();
            }

            randomColor() {
                const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57', '#ff9ff3'];
                return colors[Math.floor(Math.random() * colors.length)];
            }

            drawPopulation() {
                this.selectionCtx.clearRect(0, 0, this.selectionCanvas.width, this.selectionCanvas.height);
                
                // 绘制背景
                this.selectionCtx.fillStyle = '#f0f8f0';
                this.selectionCtx.fillRect(0, 0, this.selectionCanvas.width, this.selectionCanvas.height);
                
                // 绘制个体
                this.population.forEach(individual => {
                    this.selectionCtx.fillStyle = individual.color;
                    this.selectionCtx.beginPath();
                    this.selectionCtx.arc(individual.x, individual.y, individual.size, 0, 2 * Math.PI);
                    this.selectionCtx.fill();
                });
                
                // 显示统计信息
                this.selectionCtx.fillStyle = '#333';
                this.selectionCtx.font = '16px Arial';
                this.selectionCtx.fillText(`第 ${this.generation} 代`, 10, 25);
                this.selectionCtx.fillText(`种群大小: ${this.population.length}`, 10, 45);
                
                const avgFitness = this.population.reduce((sum, ind) => sum + ind.fitness, 0) / this.population.length;
                this.selectionCtx.fillText(`平均适应度: ${avgFitness.toFixed(2)}`, 10, 65);
            }

            startEvolutionSimulation() {
                if (this.isSimulating) return;
                
                this.isSimulating = true;
                
                const evolve = () => {
                    if (!this.isSimulating) return;
                    
                    this.runSelection();
                    this.reproduce();
                    this.mutate();
                    this.generation++;
                    this.drawPopulation();
                    
                    setTimeout(evolve, 500);
                };
                
                evolve();
            }

            runSelection() {
                const predationPressure = parseInt(document.getElementById('predation-pressure').value) / 100;
                const selectionStrength = parseInt(document.getElementById('selection-strength').value) / 100;
                
                // 计算适应度
                this.population.forEach(individual => {
                    // 基于颜色、大小等特征计算适应度
                    let fitness = individual.fitness;
                    
                    // 环境压力影响
                    if (predationPressure > 0.5) {
                        // 高捕食压力下，较小的个体更容易生存
                        fitness *= (1 - (individual.size - 3) / 4 * selectionStrength);
                    } else {
                        // 低捕食压力下，较大的个体竞争优势更大
                        fitness *= (1 + (individual.size - 3) / 4 * selectionStrength);
                    }
                    
                    individual.fitness = Math.max(0.1, fitness);
                });
                
                // 选择生存者
                this.population.sort((a, b) => b.fitness - a.fitness);
                const survivors = Math.floor(this.population.length * 0.7);
                this.population = this.population.slice(0, survivors);
            }

            reproduce() {
                const targetSize = parseInt(document.getElementById('population-size').value);
                const offspring = [];
                
                while (this.population.length + offspring.length < targetSize) {
                    // 选择父母（适应度越高，被选中概率越大）
                    const parent1 = this.selectParent();
                    const parent2 = this.selectParent();
                    
                    // 产生后代
                    const child = {
                        x: Math.random() * 500,
                        y: Math.random() * 300,
                        color: Math.random() < 0.5 ? parent1.color : parent2.color,
                        size: (parent1.size + parent2.size) / 2 + (Math.random() - 0.5) * 0.5,
                        fitness: (parent1.fitness + parent2.fitness) / 2,
                        speed: (parent1.speed + parent2.speed) / 2
                    };
                    
                    offspring.push(child);
                }
                
                this.population = this.population.concat(offspring);
            }

            selectParent() {
                const totalFitness = this.population.reduce((sum, ind) => sum + ind.fitness, 0);
                let random = Math.random() * totalFitness;
                
                for (let individual of this.population) {
                    random -= individual.fitness;
                    if (random <= 0) {
                        return individual;
                    }
                }
                
                return this.population[this.population.length - 1];
            }

            mutate() {
                const mutationRate = parseInt(document.getElementById('mutation-rate').value) / 100;
                
                this.population.forEach(individual => {
                    if (Math.random() < mutationRate) {
                        // 随机突变
                        if (Math.random() < 0.3) {
                            individual.color = this.randomColor();
                        }
                        if (Math.random() < 0.3) {
                            individual.size += (Math.random() - 0.5) * 1;
                            individual.size = Math.max(1, Math.min(8, individual.size));
                        }
                        if (Math.random() < 0.3) {
                            individual.fitness += (Math.random() - 0.5) * 0.2;
                            individual.fitness = Math.max(0.1, Math.min(1, individual.fitness));
                        }
                    }
                });
            }

            resetEvolution() {
                this.isSimulating = false;
                this.initializePopulation();
            }

            toggleSpecies(card) {
                const species = card.dataset.species;
                
                if (card.classList.contains('selected')) {
                    card.classList.remove('selected');
                    this.selectedSpecies = this.selectedSpecies.filter(s => s !== species);
                } else {
                    card.classList.add('selected');
                    this.selectedSpecies.push(species);
                }
            }

            buildPhylogeneticTree() {
                this.drawPhylogeneticTree();
            }

            drawPhylogeneticTree() {
                this.phylogenyCtx.clearRect(0, 0, this.phylogenyCanvas.width, this.phylogenyCanvas.height);
                
                if (this.selectedSpecies.length === 0) return;
                
                // 物种数据
                const speciesData = {
                    'human': { name: '人类', icon: '🧑', divergence: 7 },
                    'chimp': { name: '黑猩猩', icon: '🐵', divergence: 7 },
                    'dog': { name: '狗', icon: '🐕', divergence: 95 },
                    'cat': { name: '猫', icon: '🐱', divergence: 95 },
                    'mouse': { name: '小鼠', icon: '🐭', divergence: 95 },
                    'bird': { name: '鸟类', icon: '🐦', divergence: 310 }
                };
                
                // 绘制树结构
                const treeHeight = 400;
                const treeWidth = 500;
                const startX = 50;
                const startY = treeHeight - 50;
                
                // 主干
                this.phylogenyCtx.strokeStyle = '#4caf50';
                this.phylogenyCtx.lineWidth = 3;
                this.phylogenyCtx.beginPath();
                this.phylogenyCtx.moveTo(startX, startY);
                this.phylogenyCtx.lineTo(startX, 50);
                this.phylogenyCtx.stroke();
                
                // 绘制分支
                const selectedData = this.selectedSpecies.map(s => ({ species: s, ...speciesData[s] }));
                selectedData.sort((a, b) => a.divergence - b.divergence);
                
                let currentY = startY;
                const branchSpacing = (treeHeight - 100) / selectedData.length;
                
                selectedData.forEach((data, index) => {
                    const branchY = startY - (index + 1) * branchSpacing;
                    const branchX = startX + data.divergence * 1.5;
                    
                    // 水平分支
                    this.phylogenyCtx.beginPath();
                    this.phylogenyCtx.moveTo(startX, branchY);
                    this.phylogenyCtx.lineTo(branchX, branchY);
                    this.phylogenyCtx.stroke();
                    
                    // 物种标签
                    this.phylogenyCtx.fillStyle = '#333';
                    this.phylogenyCtx.font = '16px Arial';
                    this.phylogenyCtx.fillText(data.icon + ' ' + data.name, branchX + 10, branchY + 5);
                    
                    // 时间标签
                    this.phylogenyCtx.fillStyle = '#666';
                    this.phylogenyCtx.font = '12px Arial';
                    this.phylogenyCtx.fillText(data.divergence + '百万年前', branchX + 10, branchY + 20);
                });
                
                // 标题
                this.phylogenyCtx.fillStyle = '#333';
                this.phylogenyCtx.font = '18px Arial';
                this.phylogenyCtx.fillText('系统发育树', 250, 30);
                
                // 时间轴
                this.phylogenyCtx.fillStyle = '#666';
                this.phylogenyCtx.font = '12px Arial';
                this.phylogenyCtx.fillText('时间 (百万年前)', 10, treeHeight - 10);
            }

            clearSpeciesSelection() {
                this.selectedSpecies = [];
                document.querySelectorAll('.species-card').forEach(card => {
                    card.classList.remove('selected');
                });
                this.phylogenyCtx.clearRect(0, 0, this.phylogenyCanvas.width, this.phylogenyCanvas.height);
            }

            addSpeciesToTree() {
                // 添加物种到系统发育树...
            }

            clearTree() {
                // 清空系统发育树...
            }

            // 达尔文理论和进化证据相关方法
            setupDarwinTab() {
                // 检查图片是否存在，如果不存在则显示替代内容
                const darwinImg = document.querySelector('.darwin-img');
                const voyageImg = document.querySelector('.voyage-img');
                
                darwinImg.onerror = function() {
                    this.src = '../../assets/images/placeholder.jpg';
                    document.querySelector('.caption').textContent = "查尔斯·达尔文肖像";
                };
                
                voyageImg.onerror = function() {
                    this.src = '../../assets/images/placeholder.jpg';
                    const mapContainer = this.parentElement;
                    if (mapContainer) {
                        mapContainer.innerHTML += '<p class="map-caption">小猎犬号环球航行路线 (1831-1836)</p>';
                    }
                };
            }
            
            setupEvidenceTab() {
                // 初始化证据卡片交互
                const evidenceCategories = document.querySelectorAll('.evidence-category');
                evidenceCategories.forEach(category => {
                    category.addEventListener('click', () => {
                        this.expandEvidenceCategory(category);
                    });
                });
                
                // 检查图片是否存在，如果不存在则显示替代内容
                const evidenceImages = document.querySelectorAll('.evidence-img');
                evidenceImages.forEach(img => {
                    img.onerror = function() {
                        this.src = '../../assets/images/placeholder.jpg';
                    };
                });
                
                // 初始化进化证据测验
                document.getElementById('start-evidence-quiz').addEventListener('click', () => {
                    this.startEvidenceQuiz();
                });
                
                // 初始化分子可视化工具
                this.setupMolecularVisualization();
            }
            
            setupMolecularVisualization() {
                // 获取分子可视化相关元素
                const proteinSelector = document.getElementById('protein-selector');
                const showModelBtn = document.getElementById('show-model');
                const proteinModel = document.getElementById('protein-model');
                
                if (!proteinSelector || !showModelBtn || !proteinModel) return;
                
                // 蛋白质模型数据
                const proteinData = {
                    'cytc': {
                        name: '细胞色素C',
                        img: '../../assets/images/evolution/cytc_protein.jpg',
                        description: '细胞色素C是电子传递链中的关键蛋白质，在不同物种间高度保守。'
                    },
                    'hb': {
                        name: '血红蛋白',
                        img: '../../assets/images/evolution/hemoglobin.jpg',
                        description: '血红蛋白负责运输氧气，其结构在不同脊椎动物中相似但有明显变异。'
                    },
                    'foxp2': {
                        name: 'FOXP2转录因子',
                        img: '../../assets/images/evolution/foxp2.jpg',
                        description: 'FOXP2是与语言能力相关的转录因子，人类版本与黑猩猩相比有几个关键氨基酸变化。'
                    }
                };
                
                // 更新蛋白质模型显示
                const updateProteinDisplay = (proteinKey) => {
                    const protein = proteinData[proteinKey];
                    const img = proteinModel.querySelector('img');
                    
                    if (img) {
                        img.src = protein.img;
                        img.alt = protein.name;
                        img.onerror = function() {
                            this.src = '../../assets/images/placeholder.jpg';
                        };
                    }
                    
                    // 更新保守区域描述
                    const conservationMap = document.querySelector('.conservation-map h5');
                    if (conservationMap) {
                        conservationMap.innerHTML = `${protein.name}的保守区域(红色)与变异区域(蓝色)`;
                    }
                };
                
                // 选择不同蛋白质时更新显示
                proteinSelector.addEventListener('change', (e) => {
                    updateProteinDisplay(e.target.value);
                });
                
                // 点击查看3D模型按钮
                showModelBtn.addEventListener('click', () => {
                    const selectedProtein = proteinSelector.value;
                    
                    // 在这里可以添加一个弹窗或切换到3D视图模式
                    alert(`正在加载${proteinData[selectedProtein].name}的3D模型...\n这是一个示例提示，在完整实现中将显示交互式3D模型。`);
                });
                
                // 初始化默认显示
                updateProteinDisplay('cytc');
            }
            
            setupHumanEvolutionTab() {
                // 初始化人类进化时间线交互
                const prevBtn = document.querySelector('.prev-btn');
                const nextBtn = document.querySelector('.next-btn');
                const timelineScroll = document.querySelector('.timeline-scroll');
                
                if (!prevBtn || !nextBtn || !timelineScroll) return;
                
                // 设置滚动函数
                const scrollAmount = 350; // 每次滚动的像素值
                
                nextBtn.addEventListener('click', () => {
                    timelineScroll.scrollBy({ left: scrollAmount, behavior: 'smooth' });
                });
                
                prevBtn.addEventListener('click', () => {
                    timelineScroll.scrollBy({ left: -scrollAmount, behavior: 'smooth' });
                });
                
                // 初始化时间线项目点击事件
                const timelineItems = document.querySelectorAll('.timeline-item');
                timelineItems.forEach(item => {
                    item.addEventListener('click', () => {
                        // 高亮显示选中的时间线项目
                        timelineItems.forEach(i => i.classList.remove('active'));
                        item.classList.add('active');
                        
                        // 在这里可以添加其他交互，如显示更多详细信息
                    });
                });
                
                // 检查图片是否存在，如果不存在则显示替代内容
                const evolutionImages = document.querySelectorAll('.timeline-image img, .dna-image img');
                evolutionImages.forEach(img => {
                    img.onerror = function() {
                        this.src = '../../assets/images/placeholder.jpg';
                    };
                });
                
                // 为基因和特征卡片添加悬停效果
                const featureCards = document.querySelectorAll('.feature-card');
                featureCards.forEach(card => {
                    card.addEventListener('mouseenter', () => {
                        card.classList.add('highlight');
                    });
                    
                    card.addEventListener('mouseleave', () => {
                        card.classList.remove('highlight');
                    });
                });
            }
            
            expandEvidenceCategory(category) {
                // 展开/收起证据卡片
                const isExpanded = category.classList.contains('expanded');
                
                // 先重置所有卡片
                document.querySelectorAll('.evidence-category').forEach(c => {
                    c.classList.remove('expanded');
                });
                
                // 切换当前卡片状态
                if (!isExpanded) {
                    category.classList.add('expanded');
                }
            }
            
            startEvidenceQuiz() {
                // 创建进化证据测验问题
                const quizQuestions = [
                    {
                        question: "化石记录提供了什么类型的进化证据？",
                        options: [
                            "物种随时间变化的直接证据",
                            "不同物种之间的DNA相似性",
                            "生物的地理分布模式",
                            "生物体结构的相似性"
                        ],
                        correct: 0
                    },
                    {
                        question: "人类手臂、鲸鳍和蝙蝠翼的骨骼结构相似性被称为什么？",
                        options: [
                            "趋同进化",
                            "同源结构",
                            "相似器官",
                            "痕迹器官"
                        ],
                        correct: 1
                    },
                    {
                        question: "人类与黑猩猩的DNA序列相似度约为多少？",
                        options: [
                            "70%",
                            "85%",
                            "98.8%",
                            "50%"
                        ],
                        correct: 2
                    },
                    {
                        question: "达尔文在哪个群岛观察到的雀鸟为他的进化理论提供了重要证据？",
                        options: [
                            "夏威夷群岛",
                            "加拉帕戈斯群岛",
                            "马尔代夫群岛",
                            "大溪地群岛"
                        ],
                        correct: 1
                    },
                    {
                        question: "以下哪一项不是达尔文自然选择理论的关键概念？",
                        options: [
                            "个体间存在变异",
                            "适应环境的特征由拉马克获得性遗传",
                            "资源有限导致生存竞争",
                            "有利特征的个体更可能存活并繁殖"
                        ],
                        correct: 1
                    }
                ];
                
                let currentQuestion = 0;
                let score = 0;
                
                const showQuestion = () => {
                    if (currentQuestion >= quizQuestions.length) {
                        // 显示测验结果
                        const resultPercentage = Math.round((score / quizQuestions.length) * 100);
                        const quizContainer = document.getElementById('evidence-quiz-container');
                        
                        quizContainer.innerHTML = `
                            <h3>测验完成!</h3>
                            <p>您的得分: ${score}/${quizQuestions.length} (${resultPercentage}%)</p>
                            <button class="action-btn" onclick="window.evolution.startEvidenceQuiz()">重新测验</button>
                        `;
                        return;
                    }
                    
                    const question = quizQuestions[currentQuestion];
                    const quizContainer = document.getElementById('evidence-quiz-container');
                    
                    quizContainer.innerHTML = `
                        <div class="quiz-question">
                            <h4>问题 ${currentQuestion + 1}/${quizQuestions.length}</h4>
                            <p>${question.question}</p>
                            <div class="quiz-options">
                                ${question.options.map((option, index) => `
                                    <div class="quiz-option" onclick="window.evolution.answerEvidenceQuestion(${index})">
                                        ${option}
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    `;
                };
                
                // 开始测验
                showQuestion();
                
                // 将函数暴露给全局，以便选项点击处理
                window.evolution = window.evolution || {};
                window.evolution.answerEvidenceQuestion = (selectedIndex) => {
                    const question = quizQuestions[currentQuestion];
                    const options = document.querySelectorAll('.quiz-option');
                    
                    // 显示正确答案
                    options.forEach((option, index) => {
                        if (index === question.correct) {
                            option.classList.add('correct');
                        } else if (index === selectedIndex && index !== question.correct) {
                            option.classList.add('incorrect');
                        }
                    });
                    
                    // 更新得分
                    if (selectedIndex === question.correct) {
                        score++;
                    }
                    
                    // 延迟进入下一题
                    setTimeout(() => {
                        currentQuestion++;
                        showQuestion();
                    }, 1500);
                };
                
                window.evolution.startEvidenceQuiz = this.startEvidenceQuiz.bind(this);
            }
        }

        // 页面加载后初始化
        document.addEventListener('DOMContentLoaded', () => {
            const evolution = new Evolution();
            window.evolution = evolution;
            
            // 初始化达尔文理论和进化证据标签页
            evolution.setupDarwinTab();
            evolution.setupEvidenceTab();
            evolution.setupHumanEvolutionTab();
        });
    </script>
</body>
</html> 