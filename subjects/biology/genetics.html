<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>遗传学 - 生物学习助手</title>
    <link rel="icon" href="../../assets/icons/logo_btrfly.ico" type="image/x-icon">
    <link rel="stylesheet" href="../../css/common.css">
    <link rel="stylesheet" href="../../css/components.css">
    <link rel="stylesheet" href="../../css/utilities.css">
    <link rel="stylesheet" href="../../css/responsive.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        .genetics-page {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 2rem 0;
        }

        .genetics-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
            margin: 2rem auto;
            max-width: 1600px;
        }

        .genetics-header {
            background: linear-gradient(135deg, #4caf50, #8bc34a);
            color: white;
            padding: 2.5rem 2rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .genetics-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('https://images.unsplash.com/photo-1614935151651-0bea6508db6b?w=1200');
            background-size: cover;
            background-position: center;
            opacity: 0.2;
            z-index: 0;
        }

        .genetics-header-content {
            position: relative;
            z-index: 1;
        }

        .genetics-header h1 {
            margin: 0;
            font-size: 2.8rem;
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .genetics-header p {
            margin: 1rem auto 0;
            font-size: 1.2rem;
            opacity: 0.95;
            max-width: 800px;
            line-height: 1.6;
        }

        .genetics-tabs {
            background: #f8f9fa;
            padding: 0;
            border-bottom: 1px solid #e9ecef;
            display: flex;
            overflow-x: auto;
            scroll-behavior: smooth;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .genetics-tab {
            padding: 1.2rem 2.5rem;
            background: none;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            color: #555;
            border-bottom: 3px solid transparent;
            white-space: nowrap;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.05rem;
        }

        .genetics-tab i {
            font-size: 1.2rem;
        }

        .genetics-tab.active {
            color: #4caf50;
            border-bottom-color: #4caf50;
            background: white;
        }

        .genetics-tab:hover {
            color: #4caf50;
            background: #f0f8ff;
        }

        .genetics-content {
            padding: 2.5rem;
            min-height: 600px;
        }

        .tab-panel {
            display: none;
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .tab-panel.active {
            display: block;
        }

        .section-title {
            font-size: 1.8rem;
            color: #333;
            margin-bottom: 1.5rem;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .section-title i {
            color: #4caf50;
        }

        .concept-card {
            background: #fff;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            padding: 1.5rem;
            margin-bottom: 2rem;
            border-left: 5px solid #4caf50;
        }

        .concept-card h3 {
            color: #2e7d32;
            margin-top: 0;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .concept-card p {
            color: #555;
            line-height: 1.7;
        }

        .interactive-module {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2.5rem;
            border: 1px solid #e9ecef;
        }

        .interactive-module h3 {
            color: #4caf50;
            margin-top: 0;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.3rem;
        }

        .definition-box {
            background: #e8f5e9;
            border-radius: 10px;
            padding: 1.2rem;
            margin: 1.5rem 0;
            border-left: 4px solid #4caf50;
        }

        .definition-box h4 {
            margin-top: 0;
            color: #2e7d32;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .action-btn {
            padding: 0.8rem 1.5rem;
            background: linear-gradient(135deg, #4caf50, #8bc34a);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-top: 1rem;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.3);
        }

        .action-btn.secondary {
            background: linear-gradient(135deg, #6c757d, #495057);
        }

        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }

        .three-column {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
        }

        .info-card {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
            height: 100%;
        }

        .info-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.08);
        }

        .info-card h4 {
            color: #4caf50;
            margin-top: 0;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .info-card p {
            color: #555;
            line-height: 1.6;
        }

        .info-card img {
            width: 100%;
            border-radius: 8px;
            margin-bottom: 1rem;
        }

        .fact-box {
            background: #fff8e1;
            border-radius: 10px;
            padding: 1.2rem;
            margin: 1rem 0;
            border-left: 4px solid #ffc107;
        }

        .fact-box h4 {
            margin-top: 0;
            color: #ff8f00;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .dna-explorer {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 2rem;
            height: 600px;
        }

        .dna-display {
            background: #f8f9fa;
            border-radius: 15px;
            position: relative;
            overflow: hidden;
            border: 2px solid #e9ecef;
        }

        .dna-canvas {
            width: 100%;
            height: 100%;
            display: block;
            background: linear-gradient(135deg, #e8f5e8 0%, #f0f8f0 100%);
        }

        .dna-info {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            height: fit-content;
            border: 1px solid #e9ecef;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }

        .dna-info h3 {
            margin: 0 0 1rem 0;
            color: #4caf50;
        }

        .base-sequence {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
            overflow-x: auto;
        }

        .base-a { color: #ff6b6b; }
        .base-t { color: #4ecdc4; }
        .base-g { color: #45b7d1; }
        .base-c { color: #f9ca24; }

        .inheritance-simulator {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 2rem;
        }

        .parent-setup {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .parent-card {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            border: 1px solid #e9ecef;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }

        .parent-card h4 {
            margin: 0 0 1rem 0;
            color: #4caf50;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .genotype-input {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .allele-input {
            padding: 0.5rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            width: 50px;
            text-align: center;
            font-weight: bold;
            font-size: 1.1rem;
        }

        .punnett-square {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            border: 1px solid #e9ecef;
            margin-bottom: 2rem;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }

        .punnett-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1px;
            background: #ddd;
            border: 1px solid #ddd;
            max-width: 300px;
            margin: 1.5rem auto;
        }

        .punnett-cell {
            background: white;
            padding: 1rem;
            text-align: center;
            font-weight: bold;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .punnett-header {
            background: #e8f5e8;
            color: #2e7d32;
        }

        .punnett-result {
            font-size: 0.9rem;
        }

        .trait-controls {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .trait-btn {
            padding: 0.75rem 1.5rem;
            background: linear-gradient(135deg, #4caf50, #8bc34a);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .trait-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.3);
        }

        .trait-btn.secondary {
            background: linear-gradient(135deg, #6c757d, #495057);
        }

        .results-summary {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            border: 1px solid #e9ecef;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }

        .results-summary h4 {
            margin: 0 0 1rem 0;
            color: #4caf50;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .ratio-display {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .ratio-item {
            text-align: center;
            padding: 1rem;
            background: #e8f5e8;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .ratio-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.1);
        }

        .ratio-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #2e7d32;
        }

        .ratio-label {
            font-size: 0.9rem;
            color: #666;
            margin-top: 0.5rem;
        }

        .gene-expression {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 2rem;
        }

        .expression-steps {
            display: grid;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .expression-step {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            border-left: 4px solid #4caf50;
            transition: all 0.3s ease;
            position: relative;
        }

        .expression-step:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.15);
        }

        .expression-step h4 {
            margin: 0 0 0.5rem 0;
            color: #4caf50;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .expression-step p {
            margin: 0;
            color: #666;
            line-height: 1.5;
        }
        
        .step-number {
            position: absolute;
            top: -10px;
            left: -10px;
            width: 30px;
            height: 30px;
            background: #4caf50;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .sequence-analyzer {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            border: 1px solid #e9ecef;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }

        .sequence-input {
            width: 100%;
            padding: 1rem;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            margin-bottom: 1rem;
            min-height: 100px;
            resize: vertical;
        }

        .analysis-results {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 8px;
            margin-top: 1rem;
        }

        .interactive-animation {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            position: relative;
            height: 400px;
            margin-bottom: 2rem;
            border: 1px solid #e9ecef;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }

        .animation-controls {
            padding: 1rem;
            background: #f8f9fa;
            display: flex;
            gap: 1rem;
            border-top: 1px solid #e9ecef;
        }

        .tooltip-text {
            visibility: hidden;
            width: 200px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .tooltip-container:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        .highlight-box {
            background-color: #ffecb3;
            border-left: 4px solid #ffc107;
            padding: 1.2rem;
            margin: 1.5rem 0;
            border-radius: 8px;
        }

        .resource-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: #4caf50;
            text-decoration: none;
            padding: 0.5rem 0.8rem;
            background: #e8f5e9;
            border-radius: 5px;
            transition: all 0.3s ease;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .resource-link:hover {
            background: #c8e6c9;
            transform: translateY(-2px);
        }

        .progress-container {
            width: 100%;
            background-color: #f1f1f1;
            border-radius: 5px;
            margin: 1rem 0;
        }

        .progress-bar {
            height: 10px;
            border-radius: 5px;
            background-color: #4caf50;
            width: 0;
            transition: width 0.5s;
        }

        .quiz-container {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            margin-top: 2rem;
            border: 1px solid #e9ecef;
        }

        .quiz-question {
            margin-bottom: 1.5rem;
        }

        .quiz-options {
            display: grid;
            gap: 0.8rem;
        }

        .quiz-option {
            padding: 0.8rem 1rem;
            border: 1px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .quiz-option:hover {
            background-color: #f5f5f5;
        }

        .quiz-option.selected {
            background-color: #e8f5e9;
            border-color: #4caf50;
        }

        .quiz-option.correct {
            background-color: #c8e6c9;
            border-color: #4caf50;
        }

        .quiz-option.incorrect {
            background-color: #ffcdd2;
            border-color: #f44336;
        }

        .quiz-feedback {
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 8px;
            display: none;
        }

        .quiz-feedback.correct {
            background-color: #e8f5e9;
            color: #2e7d32;
            display: block;
        }

        .quiz-feedback.incorrect {
            background-color: #ffebee;
            color: #c62828;
            display: block;
        }

        @media (max-width: 768px) {
            .genetics-content {
                padding: 1.5rem;
            }
            
            .dna-explorer {
                grid-template-columns: 1fr;
            }
            
            .parent-setup {
                grid-template-columns: 1fr;
            }
            
            .two-column,
            .three-column {
                grid-template-columns: 1fr;
            }
            
            .genetics-tabs {
                flex-direction: row;
                overflow-x: auto;
            }
            
            .genetics-tab {
                padding: 1rem 1.5rem;
                text-align: center;
                font-size: 0.9rem;
            }
            
            .genetics-header h1 {
                font-size: 2rem;
            }
            
            .genetics-header p {
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <header class="main-header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <a href="../../index.html">
                        <i class="fas fa-graduation-cap" style="background: linear-gradient(90deg, #4361ee, #7209b7); -webkit-background-clip: text; background-clip: text; color: transparent;"></i>
                        <span>Alex的学习助手</span>
                    </a>
                </div>
                <nav class="main-nav">
                    <ul>
                        <li><a href="../../index.html">首页</a></li>
                        <li><a href="main.html">生物</a></li>
                        <li><a href="../../index.html#subjects">科目</a></li>
                        <li><a href="../../tts.html">语音</a></li>
                        <li><a href="../../draw.html">绘图</a></li>
                    </ul>
                </nav>
                <button class="mobile-menu-toggle" aria-label="切换菜单">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
        </div>
    </header>

    <main class="genetics-page">
        <div class="container">
            <div class="genetics-container">
                <div class="genetics-header">
                    <div class="genetics-header-content">
                        <h1><i class="fas fa-dna"></i> 遗传学</h1>
                        <p>探索DNA的神秘结构、基因表达的复杂过程、孟德尔遗传规律和现代分子遗传学，理解生命信息如何传递、表达和进化</p>
                    </div>
                </div>

                <div class="genetics-tabs">
                    <button class="genetics-tab active" data-tab="intro"><i class="fas fa-book"></i> 遗传学基础</button>
                    <button class="genetics-tab" data-tab="dna"><i class="fas fa-dna"></i> DNA结构</button>
                    <button class="genetics-tab" data-tab="inheritance"><i class="fas fa-project-diagram"></i> 遗传规律</button>
                    <button class="genetics-tab" data-tab="expression"><i class="fas fa-code"></i> 基因表达</button>
                    <button class="genetics-tab" data-tab="mutations"><i class="fas fa-exclamation-triangle"></i> 基因突变</button>
                    <button class="genetics-tab" data-tab="analysis"><i class="fas fa-microscope"></i> 基因组学</button>
                </div>

                <div class="genetics-content">
                    <!-- 遗传学基础标签页 -->
                    <div class="tab-panel active" id="intro-panel">
                        <h2 class="section-title"><i class="fas fa-book"></i> 遗传学基础知识</h2>
                        
                        <div class="concept-card">
                            <h3><i class="fas fa-info-circle"></i> 什么是遗传学？</h3>
                            <p>遗传学是研究生物遗传和变异的科学，探索生物体如何将特征从一代传递到下一代，以及这些特征如何在个体间变异。现代遗传学涵盖从经典遗传学到分子遗传学和基因组学等多个分支。</p>
                        </div>
                        
                        <div class="interactive-module">
                            <h3><i class="fas fa-history"></i> 遗传学的发展历程</h3>
                            
                            <div class="three-column">
                                <div class="info-card">
                                    <img src="https://images.unsplash.com/photo-1553941884-f8947df6e0ba?w=500&h=300&fit=crop" alt="格雷戈尔·孟德尔">
                                    <h4><i class="fas fa-user"></i> 经典遗传学</h4>
                                    <p>1866年，格雷戈尔·孟德尔通过豌豆杂交实验发现了基本遗传规律，提出显性、隐性和分离规律等概念，奠定了现代遗传学基础。</p>
                                </div>
                                
                                <div class="info-card">
                                    <img src="https://images.pexels.com/photos/3825539/pexels-photo-3825539.jpeg?w=500&h=300&fit=crop" alt="DNA双螺旋结构">
                                    <h4><i class="fas fa-dna"></i> 分子遗传学</h4>
                                    <p>1953年，沃森和克里克发现了DNA双螺旋结构，揭示了遗传信息的分子基础，开启了分子生物学时代，使人们理解了基因如何存储和传递信息。</p>
                                </div>
                                
                                <div class="info-card">
                                    <img src="https://images.pexels.com/photos/4483327/pexels-photo-4483327.jpeg?w=500&h=300&fit=crop" alt="基因组测序">
                                    <h4><i class="fas fa-dna"></i> 基因组学</h4>
                                    <p>2003年，人类基因组计划完成，标志着基因组学时代的开始。现代技术使我们能够快速测序和分析整个生物体的基因组，推动个性化医疗和生物信息学发展。</p>
                                </div>
                            </div>
                            
                            <div class="definition-box">
                                <h4><i class="fas fa-lightbulb"></i> 核心概念</h4>
                                <ul>
                                    <li><strong>基因(Gene)</strong> - DNA中编码蛋白质或RNA的功能片段</li>
                                    <li><strong>染色体(Chromosome)</strong> - 携带基因的细胞结构</li>
                                    <li><strong>等位基因(Allele)</strong> - 同一基因的不同形式</li>
                                    <li><strong>基因型(Genotype)</strong> - 个体的遗传构成</li>
                                    <li><strong>表现型(Phenotype)</strong> - 基因型与环境相互作用表现出的特征</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="two-column">
                            <div class="concept-card">
                                <h3><i class="fas fa-dna"></i> 遗传物质</h3>
                                <p>DNA(脱氧核糖核酸)是大多数生物的主要遗传物质，由四种核苷酸(A、T、G、C)组成。DNA的双螺旋结构使其能够复制自身，将遗传信息准确传递给后代。染色体是DNA与蛋白质的复合体，人类有23对染色体。</p>
                                
                                <div class="fact-box">
                                    <h4><i class="fas fa-star"></i> 有趣事实</h4>
                                    <p>人类基因组约有30亿个碱基对，编码约20,000-25,000个基因，但这些基因仅占人类DNA的约1-2%。其余部分曾被误称为"垃圾DNA"，现在知道许多非编码区域具有调控功能。</p>
                                </div>
                            </div>
                            
                            <div class="concept-card">
                                <h3><i class="fas fa-sitemap"></i> 遗传模式</h3>
                                <p>孟德尔遗传模式包括单基因遗传(显性、隐性)、多基因遗传和复杂遗传等。不同的遗传模式决定了特征如何从父母传递给后代，如人类的眼睛颜色、血型等都遵循特定的遗传模式。</p>
                                
                                <div class="fact-box">
                                    <h4><i class="fas fa-star"></i> 有趣事实</h4>
                                    <p>虽然人类的眼睛颜色通常被认为是由单个基因控制的简单性状，但实际上它是由多个基因共同决定的复杂性状。这就是为什么两个褐色眼睛的父母有时会生出蓝眼睛的孩子。</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="interactive-module">
                            <h3><i class="fas fa-flask"></i> 遗传学在现代科学中的应用</h3>
                            
                            <div class="three-column">
                                <div class="info-card">
                                    <h4><i class="fas fa-heartbeat"></i> 医学应用</h4>
                                    <p>基因诊断、基因治疗、个性化医疗、遗传咨询</p>
                                    <p>例：BRCA1/2基因检测可评估乳腺癌风险</p>
                                </div>
                                
                                <div class="info-card">
                                    <h4><i class="fas fa-seedling"></i> 农业应用</h4>
                                    <p>基因改良作物、增强作物抗性、提高产量和营养价值</p>
                                    <p>例：抗虫Bt玉米减少了杀虫剂的使用</p>
                                </div>
                                
                                <div class="info-card">
                                    <h4><i class="fas fa-gavel"></i> 法医应用</h4>
                                    <p>DNA指纹、亲子鉴定、物种鉴定</p>
                                    <p>例：通过DNA分析解决历史悬案</p>
                                </div>
                            </div>
                            
                            <div class="highlight-box">
                                <h4><i class="fas fa-lightbulb"></i> CRISPR-Cas9：革命性的基因编辑技术</h4>
                                <p>CRISPR-Cas9是一种精确的"基因剪刀"技术，能够特异性地修改DNA。这项技术源自细菌的免疫系统，现已成为生物医学研究中的重要工具，有望治疗遗传疾病、开发更好的作物和清除疾病载体。</p>
                            </div>
                        </div>
                        
                        <div class="quiz-container" id="intro-quiz">
                            <h3><i class="fas fa-question-circle"></i> 测试你的知识</h3>
                            <div class="quiz-question">
                                <p><strong>1. 谁被称为"遗传学之父"？</strong></p>
                                <div class="quiz-options">
                                    <div class="quiz-option" data-correct="true">格雷戈尔·孟德尔</div>
                                    <div class="quiz-option">查尔斯·达尔文</div>
                                    <div class="quiz-option">沃森和克里克</div>
                                    <div class="quiz-option">弗里德里希·迈舍尔</div>
                                </div>
                                <div class="quiz-feedback"></div>
                            </div>
                            
                            <div class="quiz-question">
                                <p><strong>2. 下列哪一项不是孟德尔发现的遗传规律？</strong></p>
                                <div class="quiz-options">
                                    <div class="quiz-option">分离定律</div>
                                    <div class="quiz-option">自由组合定律</div>
                                    <div class="quiz-option" data-correct="true">互补定律</div>
                                    <div class="quiz-option">显性遗传</div>
                                </div>
                                <div class="quiz-feedback"></div>
                            </div>
                            
                            <div class="quiz-question">
                                <p><strong>3. 人类共有多少对染色体？</strong></p>
                                <div class="quiz-options">
                                    <div class="quiz-option">21对</div>
                                    <div class="quiz-option" data-correct="true">23对</div>
                                    <div class="quiz-option">24对</div>
                                    <div class="quiz-option">46对</div>
                                </div>
                                <div class="quiz-feedback"></div>
                            </div>
                            
                            <button class="action-btn" id="check-intro-quiz"><i class="fas fa-check"></i> 检查答案</button>
                        </div>
                        
                        <div class="definition-box">
                            <h4><i class="fas fa-book"></i> 进一步学习资源</h4>
                            <p>探索更多遗传学资源:</p>
                            <div>
                                <a href="https://www.genome.gov/genetics-glossary" class="resource-link" target="_blank"><i class="fas fa-external-link-alt"></i> 国家人类基因组研究所词汇表</a>
                                <a href="https://learn.genetics.utah.edu/" class="resource-link" target="_blank"><i class="fas fa-external-link-alt"></i> 犹他大学遗传学学习资源</a>
                                <a href="https://www.nature.com/scitable/topics/genetics-5/" class="resource-link" target="_blank"><i class="fas fa-external-link-alt"></i> Nature Scitable遗传学资源</a>
                            </div>
                        </div>
                    </div>

                    <!-- DNA结构标签页 -->
                    <div class="tab-panel" id="dna-panel">
                        <h2 class="section-title"><i class="fas fa-dna"></i> DNA结构与功能</h2>
                        
                        <div class="concept-card">
                            <h3><i class="fas fa-puzzle-piece"></i> DNA的化学组成</h3>
                            <p>DNA(脱氧核糖核酸)是由两条核苷酸链组成的双螺旋结构。每个核苷酸包含三个组分：磷酸基团、五碳糖(脱氧核糖)和含氮碱基(A、T、G、C)。碱基通过氢键相互配对(A与T、G与C)，使两条链紧密结合成双螺旋。</p>
                        </div>
                        
                        <div class="dna-explorer">
                            <div class="dna-display">
                                <canvas class="dna-canvas" id="dna-canvas" width="800" height="600"></canvas>
                            </div>
                            
                            <div class="dna-info">
                                <h3><i class="fas fa-search"></i> DNA结构探索</h3>
                                
                                <div class="base-sequence" id="sequence-display">
                                    <div>5' - <span class="base-a">A</span><span class="base-t">T</span><span class="base-g">G</span><span class="base-c">C</span><span class="base-a">A</span><span class="base-t">T</span><span class="base-g">G</span><span class="base-c">C</span> - 3'</div>
                                    <div>3' - <span class="base-t">T</span><span class="base-a">A</span><span class="base-c">C</span><span class="base-g">G</span><span class="base-t">T</span><span class="base-a">A</span><span class="base-c">C</span><span class="base-g">G</span> - 5'</div>
                                </div>

                                <div class="trait-controls">
                                    <button class="trait-btn" id="rotate-dna"><i class="fas fa-sync-alt"></i> 旋转DNA</button>
                                    <button class="trait-btn secondary" id="generate-sequence"><i class="fas fa-random"></i> 生成序列</button>
                                </div>

                                <div class="definition-box">
                                    <h4><i class="fas fa-info-circle"></i> DNA双螺旋结构特点</h4>
                                    <ul>
                                        <li><strong>反向平行</strong> - 两条链方向相反(5'→3'和3'→5')</li>
                                        <li><strong>碱基配对</strong> - A与T形成两个氢键，G与C形成三个氢键</li>
                                        <li><strong>主沟和次沟</strong> - 螺旋上存在不同大小的沟，是蛋白质结合的重要位点</li>
                                        <li><strong>右手螺旋</strong> - 自然状态下DNA通常形成右手螺旋(B型DNA)</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        
                        <div class="two-column">
                            <div class="interactive-module">
                                <h3><i class="fas fa-copy"></i> DNA复制</h3>
                                
                                <div class="expression-steps">
                                    <div class="expression-step">
                                        <div class="step-number">1</div>
                                        <h4>解旋</h4>
                                        <p>解旋酶打开DNA双螺旋，断开两条链之间的氢键，形成复制叉。</p>
                                    </div>
                                    <div class="expression-step">
                                        <div class="step-number">2</div>
                                        <h4>引物合成</h4>
                                        <p>引物酶合成RNA引物，为DNA聚合酶提供3'端OH基团。</p>
                                    </div>
                                    <div class="expression-step">
                                        <div class="step-number">3</div>
                                        <h4>延伸</h4>
                                        <p>DNA聚合酶按照模板链序列添加互补核苷酸，形成新链。</p>
                                    </div>
                                    <div class="expression-step">
                                        <div class="step-number">4</div>
                                        <h4>校对与修复</h4>
                                        <p>DNA聚合酶具有校对功能，检查并修复错误配对的核苷酸。</p>
                                    </div>
                                </div>
                                
                                <div class="highlight-box">
                                    <h4><i class="fas fa-lightbulb"></i> 领先链与滞后链</h4>
                                    <p>由于DNA聚合酶只能沿5'→3'方向合成DNA，一条模板链可以连续合成(领先链)，而另一条必须以短片段形式合成(滞后链)，后者需要RNA引物和连接酶将这些片段连接起来。</p>
                                </div>
                                
                                <button class="action-btn" id="show-dna-replication"><i class="fas fa-play"></i> 观看DNA复制动画</button>
                            </div>
                            
                            <div class="interactive-module">
                                <h3><i class="fas fa-project-diagram"></i> DNA功能</h3>
                                
                                <div class="info-card">
                                    <h4><i class="fas fa-archive"></i> 信息存储</h4>
                                    <p>DNA存储生物体发育和功能所需的遗传信息。人类DNA中的30亿个碱基对编码了约20,000-25,000个基因。</p>
                                </div>
                                
                                <div class="info-card">
                                    <h4><i class="fas fa-copy"></i> 遗传传递</h4>
                                    <p>DNA通过精确复制将遗传信息从一代传递给下一代，确保生物特征的延续。</p>
                                </div>
                                
                                <div class="info-card">
                                    <h4><i class="fas fa-cogs"></i> 蛋白质合成</h4>
                                    <p>DNA中的基因编码蛋白质，通过转录和翻译过程将遗传信息转化为功能性分子。</p>
                                </div>
                                
                                <div class="fact-box">
                                    <h4><i class="fas fa-star"></i> 有趣事实</h4>
                                    <p>如果将人体一个细胞中的所有DNA拉直并首尾相连，长度将达到约2米！而人体约有37.2万亿个细胞，理论上所有DNA连起来可以从地球到太阳往返多次。</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="interactive-module">
                            <h3><i class="fas fa-vial"></i> DNA研究技术</h3>
                            
                            <div class="three-column">
                                <div class="info-card">
                                    <img src="https://images.pexels.com/photos/954585/pexels-photo-954585.jpeg?w=500&h=300&fit=crop" alt="PCR技术">
                                    <h4>PCR技术</h4>
                                    <p>聚合酶链式反应(PCR)是一种体外扩增特定DNA片段的技术，通过温度循环和DNA聚合酶作用，能在短时间内产生大量目标DNA。</p>
                                    <p>应用：基因克隆、诊断、法医鉴定</p>
                                </div>
                                
                                <div class="info-card">
                                    <img src="https://images.pexels.com/photos/8441810/pexels-photo-8441810.jpeg?w=500&h=300&fit=crop" alt="DNA测序">
                                    <h4>DNA测序</h4>
                                    <p>测定DNA分子中核苷酸排列顺序的技术。现代高通量测序技术能快速测定整个基因组，为研究基因功能和进化提供依据。</p>
                                    <p>应用：基因组测序、变异检测</p>
                                </div>
                                
                                <div class="info-card">
                                    <img src="https://images.unsplash.com/photo-1576086213369-97a306d36557?w=500&h=300&fit=crop" alt="基因编辑">
                                    <h4>基因编辑</h4>
                                    <p>CRISPR-Cas9等工具能精确修改DNA序列，为研究基因功能和开发基因治疗提供强大手段。</p>
                                    <p>应用：功能基因组学、疾病模型</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="quiz-container" id="dna-quiz">
                            <h3><i class="fas fa-question-circle"></i> 测试你的知识</h3>
                            <div class="quiz-question">
                                <p><strong>1. DNA中的碱基配对规则是：</strong></p>
                                <div class="quiz-options">
                                    <div class="quiz-option">A与G，T与C</div>
                                    <div class="quiz-option" data-correct="true">A与T，G与C</div>
                                    <div class="quiz-option">A与C，G与T</div>
                                    <div class="quiz-option">所有碱基都可以相互配对</div>
                                </div>
                                <div class="quiz-feedback"></div>
                            </div>
                            
                            <div class="quiz-question">
                                <p><strong>2. DNA复制是：</strong></p>
                                <div class="quiz-options">
                                    <div class="quiz-option">保守复制，两条子链都是新合成的</div>
                                    <div class="quiz-option" data-correct="true">半保守复制，每条子链包含一条原链和一条新链</div>
                                    <div class="quiz-option">分散复制，新旧DNA片段随机分布</div>
                                    <div class="quiz-option">RNA模板复制，以RNA为模板合成DNA</div>
                                </div>
                                <div class="quiz-feedback"></div>
                            </div>
                            
                            <div class="quiz-question">
                                <p><strong>3. DNA聚合酶的功能是：</strong></p>
                                <div class="quiz-options">
                                    <div class="quiz-option">打开DNA双螺旋</div>
                                    <div class="quiz-option">切除错误碱基</div>
                                    <div class="quiz-option" data-correct="true">按照模板链合成新的DNA链</div>
                                    <div class="quiz-option">将RNA转录为DNA</div>
                                </div>
                                <div class="quiz-feedback"></div>
                            </div>
                            
                            <button class="action-btn" id="check-dna-quiz"><i class="fas fa-check"></i> 检查答案</button>
                        </div>
                        
                        <div class="interactive-animation" id="dna-animation-container">
                            <h3><i class="fas fa-film"></i> DNA结构与功能互动</h3>
                            <div class="animation-controls">
                                <button class="trait-btn" id="show-base-pairing"><i class="fas fa-link"></i> 碱基配对</button>
                                <button class="trait-btn" id="show-dna-forms"><i class="fas fa-dna"></i> DNA不同形式</button>
                                <button class="trait-btn" id="show-dna-damage"><i class="fas fa-radiation"></i> DNA损伤与修复</button>
                            </div>
                        </div>
                    </div>

                    <!-- 遗传规律标签页 -->
                    <div class="tab-panel" id="inheritance-panel">
                        <h2 class="section-title"><i class="fas fa-project-diagram"></i> 遗传规律与模式</h2>
                        
                        <div class="concept-card">
                            <h3><i class="fas fa-seedling"></i> 孟德尔遗传规律</h3>
                            <p>格雷戈尔·孟德尔通过对豌豆植物的杂交实验，发现了两个基本遗传规律：分离定律和自由组合定律。这些规律解释了单个基因和多个基因如何独立传递，成为现代遗传学的基础。</p>
                        </div>
                        
                        <div class="two-column">
                            <div class="info-card">
                                <h4><i class="fas fa-random"></i> 分离定律 (第一定律)</h4>
                                <p>每个性状由一对等位基因控制，在形成配子时，这对等位基因分离进入不同的配子，每个配子只含有一个等位基因。</p>
                                <div class="highlight-box">
                                    <p><strong>例如：</strong>豌豆高茎(T)对矮茎(t)，两个纯合亲本杂交(TT × tt)，F1代全为杂合高茎(Tt)，F2代表现型比为3:1(高:矮)。</p>
                                </div>
                            </div>
                            
                            <div class="info-card">
                                <h4><i class="fas fa-project-diagram"></i> 自由组合定律 (第二定律)</h4>
                                <p>控制不同性状的基因对在形成配子时彼此独立分配，互不影响。这使得多个性状可以产生新的组合。</p>
                                <div class="highlight-box">
                                    <p><strong>例如：</strong>考虑豌豆的两对性状：种子形状(圆R/皱r)和颜色(黄Y/绿y)，杂交RRYY × rryy，F2代出现9:3:3:1的表现型比例。</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="interactive-module">
                            <h3><i class="fas fa-calculator"></i> 遗传规律模拟</h3>
                            <p>通过模拟亲本杂交，观察后代的基因型和表现型比例，理解孟德尔遗传规律的应用。</p>
                            
                            <div class="parent-setup">
                                <div class="parent-card">
                                    <h4><i class="fas fa-venus"></i> 亲本1 (♀)</h4>
                                    <div class="genotype-input">
                                        <input type="text" class="allele-input" id="p1-allele1" value="A" maxlength="1">
                                        <input type="text" class="allele-input" id="p1-allele2" value="a" maxlength="1">
                                    </div>
                                    <p>基因型: <span id="p1-genotype">Aa</span></p>
                                    <p>表现型: <span id="p1-phenotype">显性</span></p>
                                    <div class="trait-controls">
                                        <button class="trait-btn secondary" id="p1-homozygous"><i class="fas fa-equals"></i> 纯合体</button>
                                        <button class="trait-btn secondary" id="p1-heterozygous"><i class="fas fa-not-equal"></i> 杂合体</button>
                                    </div>
                                </div>
                                <div class="parent-card">
                                    <h4><i class="fas fa-mars"></i> 亲本2 (♂)</h4>
                                    <div class="genotype-input">
                                        <input type="text" class="allele-input" id="p2-allele1" value="A" maxlength="1">
                                        <input type="text" class="allele-input" id="p2-allele2" value="a" maxlength="1">
                                    </div>
                                    <p>基因型: <span id="p2-genotype">Aa</span></p>
                                    <p>表现型: <span id="p2-phenotype">显性</span></p>
                                    <div class="trait-controls">
                                        <button class="trait-btn secondary" id="p2-homozygous"><i class="fas fa-equals"></i> 纯合体</button>
                                        <button class="trait-btn secondary" id="p2-heterozygous"><i class="fas fa-not-equal"></i> 杂合体</button>
                                    </div>
                                </div>
                            </div>

                            <div class="trait-controls">
                                <button class="trait-btn" id="calculate-cross"><i class="fas fa-random"></i> 计算杂交</button>
                                <button class="trait-btn secondary" id="reset-cross"><i class="fas fa-undo"></i> 重置</button>
                                <button class="trait-btn secondary" id="switch-traits"><i class="fas fa-exchange-alt"></i> 切换性状</button>
                            </div>

                            <div class="two-column">
                                <div class="punnett-square">
                                    <h4><i class="fas fa-th"></i> 棋盘法分析</h4>
                                    <div class="punnett-grid" id="punnett-grid">
                                        <div class="punnett-cell punnett-header"></div>
                                        <div class="punnett-cell punnett-header">A</div>
                                        <div class="punnett-cell punnett-header">a</div>
                                        <div class="punnett-cell punnett-header">A</div>
                                        <div class="punnett-cell punnett-result">AA</div>
                                        <div class="punnett-cell punnett-result">Aa</div>
                                        <div class="punnett-cell punnett-header">a</div>
                                        <div class="punnett-cell punnett-result">Aa</div>
                                        <div class="punnett-cell punnett-result">aa</div>
                                    </div>
                                </div>

                                <div class="results-summary">
                                    <h4><i class="fas fa-chart-pie"></i> 后代分析结果</h4>
                                    <div class="ratio-display" id="ratio-display">
                                        <div class="ratio-item">
                                            <div class="ratio-value">1:2:1</div>
                                            <div class="ratio-label">基因型比例</div>
                                        </div>
                                        <div class="ratio-item">
                                            <div class="ratio-value">3:1</div>
                                            <div class="ratio-label">表现型比例</div>
                                        </div>
                                    </div>
                                    <div class="highlight-box">
                                        <p id="inheritance-pattern">当前展示的是<strong>不完全显性遗传</strong>模式</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="interactive-module">
                            <h3><i class="fas fa-sitemap"></i> 多种遗传模式</h3>
                            
                            <div class="three-column">
                                <div class="info-card">
                                    <h4>显性/隐性</h4>
                                    <p>一个等位基因可以完全掩盖另一个等位基因的表达。例如，人类的连耳垂(显性)对分离耳垂(隐性)。</p>
                                </div>
                                
                                <div class="info-card">
                                    <h4>不完全显性</h4>
                                    <p>杂合子表现出介于两个纯合子之间的中间表型。例如，四点钟花的红花(RR)和白花(rr)杂交产生粉红花(Rr)。</p>
                                </div>
                                
                                <div class="info-card">
                                    <h4>共显性</h4>
                                    <p>两个等位基因在杂合体中都能表达。例如，人类ABO血型中的A型和B型等位基因在AB型血中都表达。</p>
                                </div>
                                
                                <div class="info-card">
                                    <h4>多基因遗传</h4>
                                    <p>由多个基因共同控制的性状。例如，人类的身高、肤色等，呈现连续分布的变异。</p>
                                </div>
                                
                                <div class="info-card">
                                    <h4>伴性遗传</h4>
                                    <p>位于性染色体上的基因遗传。例如，红绿色盲和血友病主要影响男性，因为这些基因位于X染色体上。</p>
                                </div>
                                
                                <div class="info-card">
                                    <h4>基因连锁</h4>
                                    <p>位于同一染色体上的基因倾向于一起遗传。这种连锁可通过交叉互换而部分打破。</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="concept-card">
                            <h3><i class="fas fa-dna"></i> 遗传与变异</h3>
                            <p>遗传变异是物种进化的基础，它来源于多种机制，包括基因突变、重组和随机交配等。这些变异使生物能够适应不同环境，促进种群的进化。</p>
                            
                            <div class="two-column">
                                <div class="info-card">
                                    <h4>变异来源</h4>
                                    <ul>
                                        <li><strong>突变</strong>：DNA序列的永久性改变</li>
                                        <li><strong>重组</strong>：减数分裂中的交叉互换</li>
                                        <li><strong>随机交配</strong>：不同基因型个体的随机结合</li>
                                        <li><strong>基因流动</strong>：种群间的基因交流</li>
                                    </ul>
                                </div>
                                
                                <div class="info-card">
                                    <h4>变异的重要性</h4>
                                    <ul>
                                        <li><strong>适应性进化</strong>：有利变异增加生存繁殖能力</li>
                                        <li><strong>抵抗疾病</strong>：增加种群对病原体的抵抗力</li>
                                        <li><strong>个体识别</strong>：使个体间彼此区分</li>
                                        <li><strong>物种多样性</strong>：促进新物种形成</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        
                        <div class="quiz-container" id="inheritance-quiz">
                            <h3><i class="fas fa-question-circle"></i> 测试你的知识</h3>
                            <div class="quiz-question">
                                <p><strong>1. 一对纯合显性(TT)与纯合隐性(tt)个体杂交，F1代的基因型是：</strong></p>
                                <div class="quiz-options">
                                    <div class="quiz-option">TT</div>
                                    <div class="quiz-option" data-correct="true">Tt</div>
                                    <div class="quiz-option">tt</div>
                                    <div class="quiz-option">TT或tt随机</div>
                                </div>
                                <div class="quiz-feedback"></div>
                            </div>
                            
                            <div class="quiz-question">
                                <p><strong>2. 若两个基因位于同一染色体上且紧密连锁，它们将：</strong></p>
                                <div class="quiz-options">
                                    <div class="quiz-option">总是自由组合</div>
                                    <div class="quiz-option">总是表现3:1的分离比</div>
                                    <div class="quiz-option" data-correct="true">倾向于一起遗传</div>
                                    <div class="quiz-option">总是表现共显性</div>
                                </div>
                                <div class="quiz-feedback"></div>
                            </div>
                            
                            <div class="quiz-question">
                                <p><strong>3. 人类的ABO血型是哪种遗传模式的例子？</strong></p>
                                <div class="quiz-options">
                                    <div class="quiz-option">简单显性/隐性</div>
                                    <div class="quiz-option">不完全显性</div>
                                    <div class="quiz-option" data-correct="true">多等位基因和共显性</div>
                                    <div class="quiz-option">性连锁遗传</div>
                                </div>
                                <div class="quiz-feedback"></div>
                            </div>
                            
                            <div class="quiz-question">
                                <p><strong>4. 为什么红绿色盲在男性中比女性更常见？</strong></p>
                                <div class="quiz-options">
                                    <div class="quiz-option">男性更易突变</div>
                                    <div class="quiz-option" data-correct="true">色盲基因位于X染色体上，男性只有一条X染色体</div>
                                    <div class="quiz-option">女性对色盲有抵抗力</div>
                                    <div class="quiz-option">色盲基因与Y染色体连锁</div>
                                </div>
                                <div class="quiz-feedback"></div>
                            </div>
                            
                            <button class="action-btn" id="check-inheritance-quiz"><i class="fas fa-check"></i> 检查答案</button>
                        </div>
                        
                        <div class="definition-box">
                            <h4><i class="fas fa-book"></i> 进一步学习资源</h4>
                            <p>探索更多关于遗传规律的资源:</p>
                            <div>
                                <a href="https://www.yourgenome.org/facts/what-is-inheritance/" class="resource-link" target="_blank"><i class="fas fa-external-link-alt"></i> 什么是遗传</a>
                                <a href="https://learn.genetics.utah.edu/content/basics/" class="resource-link" target="_blank"><i class="fas fa-external-link-alt"></i> 遗传学基础</a>
                                <a href="https://www.nature.com/scitable/topicpage/mendelian-genetics-patterns-of-inheritance-and-single-966/" class="resource-link" target="_blank"><i class="fas fa-external-link-alt"></i> 孟德尔遗传模式</a>
                            </div>
                        </div>
                    </div>

                    <!-- 基因表达标签页 -->
                    <div class="tab-panel" id="expression-panel">
                        <h2 class="section-title"><i class="fas fa-code"></i> 基因表达过程</h2>
                        
                        <div class="concept-card">
                            <h3><i class="fas fa-info-circle"></i> 什么是基因表达？</h3>
                            <p>基因表达是DNA中的遗传信息被转化为功能性产物(通常是蛋白质)的过程。这个过程包括两个主要阶段：转录(DNA→RNA)和翻译(RNA→蛋白质)。基因表达的调控决定了何时、何地以及多少蛋白质被合成，是细胞分化和发育的基础。</p>
                        </div>
                        
                        <div class="interactive-module">
                            <h3><i class="fas fa-cogs"></i> 中心法则：DNA → RNA → 蛋白质</h3>
                            
                            <div class="interactive-animation">
                                <img src="https://images.pexels.com/photos/3861457/pexels-photo-3861457.jpeg?w=1200&h=400&fit=crop" alt="基因表达过程" style="width:100%; height:auto;">
                                <div class="animation-controls">
                                    <button class="trait-btn" id="show-transcription"><i class="fas fa-dna"></i> 转录过程</button>
                                    <button class="trait-btn" id="show-translation"><i class="fas fa-language"></i> 翻译过程</button>
                                    <button class="trait-btn" id="show-protein-folding"><i class="fas fa-cube"></i> 蛋白质折叠</button>
                                </div>
                            </div>
                            
                            <div class="gene-expression">
                                <div class="expression-steps">
                                    <div class="expression-step">
                                        <div class="step-number">1</div>
                                        <h4><i class="fas fa-pencil-alt"></i> 转录 (Transcription)</h4>
                                        <p>DNA双链解开，RNA聚合酶以DNA为模板合成mRNA。过程包括起始、延伸和终止三个阶段。RNA聚合酶沿着DNA模板链(3'→5')移动，按照碱基配对原则(A-U, G-C)合成mRNA(5'→3')。</p>
                                    </div>
                                    <div class="expression-step">
                                        <div class="step-number">2</div>
                                        <h4><i class="fas fa-cut"></i> RNA加工 (RNA Processing)</h4>
                                        <p>在真核细胞中，初级转录产物(前mRNA)需要进行多种修饰：5'加帽(保护mRNA并帮助核糖体结合)、3'加尾(加入多聚A尾，增加稳定性)和剪接(切除内含子，连接外显子)。这些修饰使前mRNA成熟并能从细胞核转运到细胞质。</p>
                                    </div>
                                    <div class="expression-step">
                                        <div class="step-number">3</div>
                                        <h4><i class="fas fa-language"></i> 翻译 (Translation)</h4>
                                        <p>成熟mRNA与核糖体结合，tRNA携带氨基酸按照遗传密码子顺序合成多肽链。翻译过程包括起始(通常从AUG开始)、延伸(核糖体沿mRNA移动，tRNA将氨基酸添加到多肽链)和终止(遇到终止密码子UAA、UAG或UGA)。</p>
                                    </div>
                                    <div class="expression-step">
                                        <div class="step-number">4</div>
                                        <h4><i class="fas fa-cube"></i> 蛋白质折叠 (Protein Folding)</h4>
                                        <p>新合成的多肽链需要折叠成特定的三维结构才能发挥功能。折叠过程受氨基酸序列和细胞环境影响，可能需要分子伴侣蛋白的协助。折叠后的蛋白质可能还需要进一步修饰(如糖基化、磷酸化)才能完全激活。</p>
                                    </div>
                                </div>
                                
                                <div class="definition-box">
                                    <h4><i class="fas fa-lightbulb"></i> 遗传密码子表</h4>
                                    <p>遗传密码子是由三个核苷酸组成的单位，指定一个特定的氨基酸或终止信号。共有64个密码子编码20种氨基酸和3个终止信号，因此遗传密码是简并的(多个密码子可编码同一氨基酸)。</p>
                                    <button class="action-btn" id="show-codon-table"><i class="fas fa-table"></i> 查看密码子表</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="two-column">
                            <div class="interactive-module">
                                <h3><i class="fas fa-sliders-h"></i> 基因表达调控</h3>
                                
                                <div class="info-card">
                                    <h4><i class="fas fa-dna"></i> 转录水平调控</h4>
                                    <p><strong>转录因子结合</strong>：特异性蛋白质与DNA调控序列结合，促进或抑制转录起始</p>
                                    <p><strong>启动子和增强子</strong>：DNA序列影响RNA聚合酶结合和活性</p>
                                    <p><strong>染色质修饰</strong>：组蛋白修饰和DNA甲基化改变染色质结构，影响基因可及性</p>
                                </div>
                                
                                <div class="info-card">
                                    <h4><i class="fas fa-file-alt"></i> 转录后调控</h4>
                                    <p><strong>RNA剪接</strong>：通过选择性剪接产生不同的mRNA变体</p>
                                    <p><strong>RNA稳定性</strong>：影响mRNA在细胞中的寿命</p>
                                    <p><strong>microRNA</strong>：小型非编码RNA与mRNA结合，抑制翻译或促进mRNA降解</p>
                                </div>
                                
                                <div class="info-card">
                                    <h4><i class="fas fa-cogs"></i> 翻译和翻译后调控</h4>
                                    <p><strong>翻译起始因子</strong>：控制翻译的开始</p>
                                    <p><strong>蛋白质修饰</strong>：如磷酸化、糖基化、泛素化等改变蛋白质功能</p>
                                    <p><strong>蛋白质靶向</strong>：控制蛋白质定位到细胞的特定区域</p>
                                </div>
                            </div>
                            
                            <div class="interactive-module">
                                <h3><i class="fas fa-vial"></i> 实验：密码子分析</h3>
                                
                                <div class="sequence-analyzer">
                                    <h4><i class="fas fa-keyboard"></i> 输入DNA序列，查看对应的mRNA和蛋白质序列：</h4>
                                    <textarea class="sequence-input" id="dna-sequence" placeholder="输入DNA序列 (例如: ATGGCATAA)">ATGGCATAA</textarea>
                                    <div class="trait-controls">
                                        <button class="trait-btn" id="analyze-sequence"><i class="fas fa-search"></i> 分析序列</button>
                                        <button class="trait-btn secondary" id="random-sequence"><i class="fas fa-random"></i> 随机序列</button>
                                        <button class="trait-btn secondary" id="reset-expression"><i class="fas fa-undo"></i> 重置</button>
                                    </div>
                                    <div class="analysis-results" id="analysis-results">
                                        <p><strong>DNA:</strong> <span id="dna-result">ATGGCATAA</span></p>
                                        <p><strong>mRNA:</strong> <span id="mrna-result">AUGGCAUAA</span></p>
                                        <p><strong>蛋白质:</strong> <span id="protein-result">Met-Ala-*</span></p>
                                        <div id="protein-details" style="display:none;">
                                            <p><strong>氨基酸功能:</strong> <span id="protein-function"></span></p>
                                            <p><strong>蛋白质特性:</strong> <span id="protein-properties"></span></p>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="fact-box">
                                    <h4><i class="fas fa-star"></i> 有趣事实</h4>
                                    <p>翻译过程是惊人的精确，错误率约为十万分之一。一个典型的人类细胞每秒钟可以翻译约140个氨基酸，一个蛋白质的合成可能需要几秒到几分钟不等，取决于其长度。</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="interactive-module">
                            <h3><i class="fas fa-exclamation-triangle"></i> 基因表达异常与疾病</h3>
                            
                            <div class="three-column">
                                <div class="info-card">
                                    <h4>癌症</h4>
                                    <p>癌基因激活或抑癌基因失活导致细胞增殖失控。例如，BCR-ABL融合基因在慢性粒细胞白血病中持续激活，促进细胞增殖。</p>
                                </div>
                                
                                <div class="info-card">
                                    <h4>神经退行性疾病</h4>
                                    <p>蛋白质错误折叠和聚集导致神经元损伤。例如，亨廷顿舞蹈症中的CAG重复扩增导致错误的蛋白质合成。</p>
                                </div>
                                
                                <div class="info-card">
                                    <h4>代谢疾病</h4>
                                    <p>酶基因表达异常影响代谢通路。例如，苯丙酮尿症中PAH基因突变导致苯丙氨酸无法正常代谢。</p>
                                </div>
                            </div>
                            
                            <div class="highlight-box">
                                <h4><i class="fas fa-lightbulb"></i> 表观遗传学</h4>
                                <p>表观遗传学研究DNA序列不变的情况下，基因表达的可遗传变化。这包括DNA甲基化、组蛋白修饰和非编码RNA调控等机制。环境因素(如饮食、压力、暴露于化学物质)可以影响表观遗传修饰，进而影响基因表达，甚至可能代际传递。这解释了为什么相同基因组的个体(如同卵双胞胎)可能表现出不同的特征。</p>
                            </div>
                        </div>
                        
                        <div class="quiz-container" id="expression-quiz">
                            <h3><i class="fas fa-question-circle"></i> 测试你的知识</h3>
                            <div class="quiz-question">
                                <p><strong>1. 转录过程中，RNA聚合酶使用DNA的哪一条链作为模板？</strong></p>
                                <div class="quiz-options">
                                    <div class="quiz-option">两条链都使用</div>
                                    <div class="quiz-option" data-correct="true">只使用一条链(模板链)</div>
                                    <div class="quiz-option">随机选择一条链</div>
                                    <div class="quiz-option">根据基因不同而不同</div>
                                </div>
                                <div class="quiz-feedback"></div>
                            </div>
                            
                            <div class="quiz-question">
                                <p><strong>2. 下列哪个过程只在真核细胞中发生？</strong></p>
                                <div class="quiz-options">
                                    <div class="quiz-option">转录</div>
                                    <div class="quiz-option">翻译</div>
                                    <div class="quiz-option" data-correct="true">RNA剪接</div>
                                    <div class="quiz-option">DNA复制</div>
                                </div>
                                <div class="quiz-feedback"></div>
                            </div>
                            
                            <div class="quiz-question">
                                <p><strong>3. mRNA上的密码子AUG通常编码哪种氨基酸？</strong></p>
                                <div class="quiz-options">
                                    <div class="quiz-option" data-correct="true">甲硫氨酸(蛋氨酸,Met)</div>
                                    <div class="quiz-option">丙氨酸(Ala)</div>
                                    <div class="quiz-option">亮氨酸(Leu)</div>
                                    <div class="quiz-option">缬氨酸(Val)</div>
                                </div>
                                <div class="quiz-feedback"></div>
                            </div>
                            
                            <div class="quiz-question">
                                <p><strong>4. 表观遗传修饰的主要特点是：</strong></p>
                                <div class="quiz-options">
                                    <div class="quiz-option">改变DNA序列</div>
                                    <div class="quiz-option" data-correct="true">不改变DNA序列但影响基因表达</div>
                                    <div class="quiz-option">只影响RNA稳定性</div>
                                    <div class="quiz-option">只在胚胎发育中起作用</div>
                                </div>
                                <div class="quiz-feedback"></div>
                            </div>
                            
                            <button class="action-btn" id="check-expression-quiz"><i class="fas fa-check"></i> 检查答案</button>
                        </div>
                        
                        <div class="definition-box">
                            <h4><i class="fas fa-book"></i> 进一步学习资源</h4>
                            <p>探索更多关于基因表达的资源:</p>
                            <div>
                                <a href="https://www.khanacademy.org/science/biology/gene-expression-central-dogma" class="resource-link" target="_blank"><i class="fas fa-external-link-alt"></i> Khan Academy: 基因表达</a>
                                <a href="https://www.nature.com/scitable/topicpage/translation-dna-to-mrna-to-protein-393/" class="resource-link" target="_blank"><i class="fas fa-external-link-alt"></i> Nature: DNA到蛋白质的翻译</a>
                                <a href="https://www.yourgenome.org/facts/what-is-epigenetics/" class="resource-link" target="_blank"><i class="fas fa-external-link-alt"></i> 什么是表观遗传学</a>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 基因突变标签页 -->
                    <div class="tab-panel" id="mutations-panel">
                        <h2 class="section-title"><i class="fas fa-exclamation-triangle"></i> 基因突变与疾病</h2>
                        
                        <div class="concept-card">
                            <h3><i class="fas fa-dna"></i> 什么是基因突变？</h3>
                            <p>基因突变是DNA序列的永久性改变，可能影响单个核苷酸或更大的DNA片段。突变可以是自然发生的(自发突变)，也可以由环境因素如辐射、化学物质等诱发(诱导突变)。突变既是遗传疾病的原因，也是物种进化的驱动力。</p>
                        </div>
                        
                        <div class="interactive-module">
                            <h3><i class="fas fa-microscope"></i> 突变类型</h3>
                            
                            <div class="three-column">
                                <div class="info-card">
                                    <img src="https://images.pexels.com/photos/8325710/pexels-photo-8325710.jpeg?w=500&h=300&fit=crop" alt="点突变">
                                    <h4>点突变</h4>
                                    <p>单个核苷酸的改变，包括替换、插入和缺失。</p>
                                    <ul>
                                        <li><strong>替换</strong>：一个核苷酸被另一个替代</li>
                                        <li><strong>插入</strong>：DNA序列中添加核苷酸</li>
                                        <li><strong>缺失</strong>：DNA序列中删除核苷酸</li>
                                    </ul>
                                </div>
                                
                                <div class="info-card">
                                    <img src="https://images.unsplash.com/photo-1581093458791-9f5cf3a348e9?w=500&h=300&fit=crop" alt="染色体突变">
                                    <h4>染色体突变</h4>
                                    <p>影响染色体结构的大规模改变。</p>
                                    <ul>
                                        <li><strong>缺失</strong>：染色体的一部分丢失</li>
                                        <li><strong>重复</strong>：染色体的一部分重复</li>
                                        <li><strong>倒位</strong>：染色体片段方向颠倒</li>
                                        <li><strong>易位</strong>：染色体片段在不同染色体间交换</li>
                                    </ul>
                                </div>
                                
                                <div class="info-card">
                                    <img src="https://images.pexels.com/photos/3825539/pexels-photo-3825539.jpeg?w=500&h=300&fit=crop" alt="基因组突变">
                                    <h4>基因组突变</h4>
                                    <p>整个染色体组的变化。</p>
                                    <ul>
                                        <li><strong>多倍体</strong>：多于两套染色体</li>
                                        <li><strong>非整倍体</strong>：染色体数目异常(如：21三体)</li>
                                        <li><strong>嵌合体</strong>：体内含有不同基因型的细胞</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <div class="interactive-animation" id="mutation-animation">
                                <h4><i class="fas fa-film"></i> 突变效应模拟</h4>
                                <div class="animation-controls">
                                    <button class="trait-btn" id="show-substitution"><i class="fas fa-exchange-alt"></i> 模拟替换突变</button>
                                    <button class="trait-btn" id="show-insertion"><i class="fas fa-plus"></i> 模拟插入突变</button>
                                    <button class="trait-btn" id="show-deletion"><i class="fas fa-minus"></i> 模拟缺失突变</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="interactive-module">
                            <h3><i class="fas fa-code-branch"></i> 突变的结果</h3>
                            
                            <div class="two-column">
                                <div class="info-card">
                                    <h4><i class="fas fa-dna"></i> 对蛋白质的影响</h4>
                                    <ul>
                                        <li><strong>同义突变</strong>：不改变氨基酸(密码子简并性)</li>
                                        <li><strong>错义突变</strong>：导致不同氨基酸</li>
                                        <li><strong>无义突变</strong>：产生终止密码子，导致蛋白质截断</li>
                                        <li><strong>移码突变</strong>：改变阅读框架，通常严重影响蛋白质功能</li>
                                    </ul>
                                </div>
                                
                                <div class="info-card">
                                    <h4><i class="fas fa-heartbeat"></i> 对健康的影响</h4>
                                    <ul>
                                        <li><strong>有害突变</strong>：降低个体适应度，可能导致疾病</li>
                                        <li><strong>中性突变</strong>：不影响蛋白质功能或生物适应度</li>
                                        <li><strong>有益突变</strong>：增强功能或适应性，在进化中被保留</li>
                                        <li><strong>条件性突变</strong>：在特定环境下有益或有害</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <div class="highlight-box">
                                <h4><i class="fas fa-lightbulb"></i> 突变与进化</h4>
                                <p>突变是新基因变异的主要来源，为自然选择提供原材料。大多数突变是中性或有害的，但偶尔的有益突变可能在种群中传播，随着时间推移，导致新特征的出现和物种的进化。例如，乳糖耐受性是人类进化中的一个相对较新的适应性特征，使许多成年人能够消化牛奶。</p>
                            </div>
                        </div>
                        
                        <div class="concept-card">
                            <h3><i class="fas fa-disease"></i> 遗传疾病</h3>
                            <p>遗传疾病是由基因变异或染色体异常引起的疾病。根据遗传方式，可分为单基因疾病、多基因疾病和染色体疾病。许多遗传疾病无法治愈，但早期诊断和干预可以管理症状并提高生活质量。</p>
                            
                            <div class="three-column">
                                <div class="info-card">
                                    <h4>单基因疾病</h4>
                                    <p>由单个基因的变异引起，遵循孟德尔遗传规律。</p>
                                    <ul>
                                        <li><strong>镰状细胞贫血症</strong>：血红蛋白基因突变导致红细胞异常</li>
                                        <li><strong>囊性纤维化</strong>：CFTR基因突变影响氯离子通道</li>
                                        <li><strong>亨廷顿舞蹈症</strong>：HTT基因的CAG重复扩增</li>
                                    </ul>
                                </div>
                                
                                <div class="info-card">
                                    <h4>多基因疾病</h4>
                                    <p>由多个基因和环境因素共同作用引起。</p>
                                    <ul>
                                        <li><strong>糖尿病</strong>：多个基因与生活方式因素共同影响</li>
                                        <li><strong>心脏病</strong>：涉及脂质代谢、血压调节等多个基因</li>
                                        <li><strong>精神分裂症</strong>：多个神经发育相关基因</li>
                                    </ul>
                                </div>
                                
                                <div class="info-card">
                                    <h4>染色体疾病</h4>
                                    <p>由染色体数目或结构异常引起。</p>
                                    <ul>
                                        <li><strong>唐氏综合征</strong>：21号染色体三体</li>
                                        <li><strong>特纳综合征</strong>：女性缺失一条X染色体(45,X)</li>
                                        <li><strong>克莱恩费尔特综合征</strong>：男性多出X染色体(47,XXY)</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        
                        <div class="interactive-module">
                            <h3><i class="fas fa-search-plus"></i> 突变研究与诊断</h3>
                            
                            <div class="sequence-analyzer">
                                <h4><i class="fas fa-keyboard"></i> 序列比较分析</h4>
                                <p>输入两个DNA序列进行比较，检测潜在突变：</p>
                                
                                <label>参考序列:</label>
                                <textarea class="sequence-input" id="sequence1" placeholder="输入参考DNA序列">ATGGCATAAGGC</textarea>
                                
                                <label>测试序列:</label>
                                <textarea class="sequence-input" id="sequence2" placeholder="输入测试DNA序列">ATGGCCTAAGGC</textarea>
                                
                                <div class="trait-controls">
                                    <button class="trait-btn" id="compare-sequences"><i class="fas fa-exchange-alt"></i> 比较序列</button>
                                    <button class="trait-btn" id="find-mutations"><i class="fas fa-search"></i> 查找突变</button>
                                    <button class="trait-btn secondary" id="clear-analysis"><i class="fas fa-trash"></i> 清空</button>
                                </div>
                                
                                <div class="analysis-results" id="comparison-results">
                                    <h4>分析结果</h4>
                                    <p>点击上方按钮开始序列分析</p>
                                </div>
                            </div>
                            
                            <div class="two-column">
                                <div class="info-card">
                                    <h4><i class="fas fa-microscope"></i> 突变检测技术</h4>
                                    <ul>
                                        <li><strong>PCR与DNA测序</strong>：精确确定DNA序列变化</li>
                                        <li><strong>FISH技术</strong>：荧光原位杂交检测染色体重排</li>
                                        <li><strong>基因芯片</strong>：同时分析多个基因变异</li>
                                        <li><strong>全基因组测序</strong>：全面检测所有基因变异</li>
                                    </ul>
                                </div>
                                
                                <div class="info-card">
                                    <h4><i class="fas fa-flask"></i> 基因治疗前景</h4>
                                    <ul>
                                        <li><strong>基因替换</strong>：引入正常基因副本</li>
                                        <li><strong>基因编辑</strong>：使用CRISPR等技术修复突变</li>
                                        <li><strong>基因沉默</strong>：抑制有害基因的表达</li>
                                        <li><strong>细胞治疗</strong>：使用经基因修饰的细胞治疗疾病</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <div class="highlight-box">
                                <h4><i class="fas fa-lightbulb"></i> 精准医疗</h4>
                                <p>精准医疗是根据个体基因组信息制定个性化治疗策略的方法。例如，癌症患者的肿瘤基因组分析可以揭示特定的驱动突变，指导靶向治疗的选择。药物基因组学研究个体基因变异如何影响药物代谢，帮助优化药物选择和剂量，提高疗效并减少副作用。</p>
                            </div>
                        </div>
                        
                        <div class="quiz-container" id="mutation-quiz">
                            <h3><i class="fas fa-question-circle"></i> 测试你的知识</h3>
                            <div class="quiz-question">
                                <p><strong>1. 哪种突变类型最有可能严重破坏蛋白质功能？</strong></p>
                                <div class="quiz-options">
                                    <div class="quiz-option">同义突变</div>
                                    <div class="quiz-option">单核苷酸多态性</div>
                                    <div class="quiz-option" data-correct="true">移码突变</div>
                                    <div class="quiz-option">沉默突变</div>
                                </div>
                                <div class="quiz-feedback"></div>
                            </div>
                            
                            <div class="quiz-question">
                                <p><strong>2. 唐氏综合征是哪种类型的基因异常？</strong></p>
                                <div class="quiz-options">
                                    <div class="quiz-option">单基因缺陷</div>
                                    <div class="quiz-option" data-correct="true">染色体三体</div>
                                    <div class="quiz-option">多基因疾病</div>
                                    <div class="quiz-option">点突变</div>
                                </div>
                                <div class="quiz-feedback"></div>
                            </div>
                            
                            <div class="quiz-question">
                                <p><strong>3. 镰状细胞贫血症是由以下哪种突变引起的？</strong></p>
                                <div class="quiz-options">
                                    <div class="quiz-option" data-correct="true">血红蛋白基因中的单个核苷酸替换</div>
                                    <div class="quiz-option">染色体缺失</div>
                                    <div class="quiz-option">基因重复</div>
                                    <div class="quiz-option">染色体倒位</div>
                                </div>
                                <div class="quiz-feedback"></div>
                            </div>
                            
                            <div class="quiz-question">
                                <p><strong>4. 以下哪项是CRISPR-Cas9技术的潜在应用？</strong></p>
                                <div class="quiz-options">
                                    <div class="quiz-option">只能诊断基因疾病</div>
                                    <div class="quiz-option">只能研究基因功能</div>
                                    <div class="quiz-option">只能用于农业改良</div>
                                    <div class="quiz-option" data-correct="true">可以修复导致遗传疾病的突变</div>
                                </div>
                                <div class="quiz-feedback"></div>
                            </div>
                            
                            <button class="action-btn" id="check-mutation-quiz"><i class="fas fa-check"></i> 检查答案</button>
                        </div>
                        
                        <div class="definition-box">
                            <h4><i class="fas fa-book"></i> 进一步学习资源</h4>
                            <p>探索更多关于基因突变与疾病的资源:</p>
                            <div>
                                <a href="https://www.genome.gov/genetics-glossary/Mutation" class="resource-link" target="_blank"><i class="fas fa-external-link-alt"></i> 国家人类基因组研究所: 突变</a>
                                <a href="https://www.nature.com/scitable/topicpage/genetic-mutation-1127/" class="resource-link" target="_blank"><i class="fas fa-external-link-alt"></i> Nature: 基因突变</a>
                                <a href="https://ghr.nlm.nih.gov/primer/mutationsanddisorders/genemutation" class="resource-link" target="_blank"><i class="fas fa-external-link-alt"></i> 基因突变与疾病</a>
                            </div>
                        </div>
                    </div>

                    <!-- 基因组学标签页 -->
                    <div class="tab-panel" id="analysis-panel">
                        <h2 class="section-title"><i class="fas fa-microscope"></i> 基因组学与生物信息学</h2>
                        
                        <div class="concept-card">
                            <h3><i class="fas fa-dna"></i> 什么是基因组学？</h3>
                            <p>基因组学是研究生物体基因组（全部遗传物质）的科学，包括基因组测序、结构分析、功能注释和进化比较。随着测序技术的发展，基因组学已从单基因研究发展为全基因组水平的系统研究，成为现代生物学研究的核心领域之一。</p>
                        </div>
                        
                        <div class="interactive-module">
                            <h3><i class="fas fa-history"></i> 基因组学的发展历程</h3>
                            
                            <div class="three-column">
                                <div class="info-card">
                                    <img src="https://images.pexels.com/photos/7089401/pexels-photo-7089401.jpeg?w=500&h=300&fit=crop" alt="人类基因组计划">
                                    <h4>人类基因组计划(1990-2003)</h4>
                                    <p>国际合作项目，历时13年，耗资近30亿美元，完成了人类基因组的第一个精确图谱。这个里程碑式的项目极大推动了基因组测序技术的发展。</p>
                                </div>
                                
                                <div class="info-card">
                                    <img src="https://images.unsplash.com/photo-1583911860205-72f8ac8ddcbe?w=500&h=300&fit=crop" alt="高通量测序">
                                    <h4>下一代测序技术(2005年后)</h4>
                                    <p>高通量测序技术的出现使测序成本从数亿美元降至数千美元，测序速度提高数千倍。这使基因组研究从大型国际项目转变为单个实验室可开展的常规工作。</p>
                                </div>
                                
                                <div class="info-card">
                                    <img src="https://images.unsplash.com/photo-1580894742597-87bc8789db3d?w=500&h=300&fit=crop" alt="精准医疗">
                                    <h4>精准医疗时代(2010年后)</h4>
                                    <p>基因组学与临床医学的结合使个体化医疗成为可能。基于个人基因组信息的疾病风险评估、药物敏感性预测和靶向治疗正在改变医疗模式。</p>
                                </div>
                            </div>
                            
                            <div class="fact-box">
                                <h4><i class="fas fa-star"></i> 有趣事实</h4>
                                <p>人类基因组测序初期，成本高达数亿美元，耗时超过10年；而今天，一个人的全基因组测序成本已降至约1000美元，只需要几天时间。这一技术进步的速度甚至超过了摩尔定律(计算机芯片性能每18个月翻倍)。</p>
                            </div>
                        </div>
                        
                        <div class="two-column">
                            <div class="interactive-module">
                                <h3><i class="fas fa-laptop-code"></i> 生物信息学：数据到知识</h3>
                                
                                <div class="info-card">
                                    <h4><i class="fas fa-database"></i> 生物数据管理</h4>
                                    <p>设计和管理存储海量生物数据的数据库，包括序列数据库(如GenBank、EMBL)、蛋白质结构数据库(如PDB)和基因表达数据库等。</p>
                                </div>
                                
                                <div class="info-card">
                                    <h4><i class="fas fa-align-left"></i> 序列分析</h4>
                                    <p>开发算法和工具比较DNA、RNA和蛋白质序列，识别序列特征、预测基因和研究分子进化。序列比对工具(如BLAST)是最常用的生物信息学工具之一。</p>
                                </div>
                                
                                <div class="info-card">
                                    <h4><i class="fas fa-project-diagram"></i> 功能预测与网络分析</h4>
                                    <p>通过计算方法预测基因和蛋白质的功能，构建和分析生物网络(如代谢网络、蛋白质相互作用网络)，理解复杂生物系统。</p>
                                </div>
                            </div>
                            
                            <div class="interactive-module">
                                <h3><i class="fas fa-tools"></i> 基因组分析工具箱</h3>
                                
                                <div class="info-card">
                                    <h4><i class="fas fa-search"></i> 序列比对</h4>
                                    <ul>
                                        <li><strong>BLAST</strong>：在数据库中快速搜索相似序列</li>
                                        <li><strong>Clustal Omega</strong>：多序列比对工具</li>
                                        <li><strong>HMMER</strong>：基于隐马尔可夫模型的序列分析</li>
                                    </ul>
                                </div>
                                
                                <div class="info-card">
                                    <h4><i class="fas fa-chart-line"></i> 基因组注释</h4>
                                    <ul>
                                        <li><strong>AUGUSTUS</strong>：基因预测工具</li>
                                        <li><strong>Prokka</strong>：原核生物基因组注释</li>
                                        <li><strong>InterProScan</strong>：蛋白质功能分析</li>
                                    </ul>
                                </div>
                                
                                <div class="info-card">
                                    <h4><i class="fas fa-sitemap"></i> 进化分析</h4>
                                    <ul>
                                        <li><strong>MEGA</strong>：分子进化遗传学分析软件</li>
                                        <li><strong>PhyML</strong>：最大似然系统发育树构建</li>
                                        <li><strong>PAML</strong>：系统发育分析的最大似然法</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        
                        <div class="interactive-module">
                            <h3><i class="fas fa-dna"></i> 现代基因组学研究领域</h3>
                            
                            <div class="three-column">
                                <div class="info-card">
                                    <h4>功能基因组学</h4>
                                    <p>研究基因组中各个基因的功能及其相互作用。主要技术包括基因敲除、RNA干扰和CRISPR基因编辑等。例如，国际功能基因组学联盟致力于系统性地确定所有人类基因的功能。</p>
                                </div>
                                
                                <div class="info-card">
                                    <h4>比较基因组学</h4>
                                    <p>通过比较不同物种的基因组，研究基因结构和功能的进化。比如，通过对人类和黑猩猩基因组的比较，科学家发现两者有约98.8%的DNA相似，这些微小差异解释了人类特有的特征。</p>
                                </div>
                                
                                <div class="info-card">
                                    <h4>结构基因组学</h4>
                                    <p>研究DNA、RNA和蛋白质的三维结构及其功能关系。结构信息对理解基因产物如何工作以及设计靶向药物至关重要，如HIV蛋白酶抑制剂的设计就基于蛋白质结构。</p>
                                </div>
                                
                                <div class="info-card">
                                    <h4>药理基因组学</h4>
                                    <p>研究基因变异如何影响药物代谢和反应。例如，某些患者代谢华法林(常用抗凝血药)的基因变异会影响其剂量需求，基于基因型的剂量调整可以减少不良反应。</p>
                                </div>
                                
                                <div class="info-card">
                                    <h4>微生物组学</h4>
                                    <p>研究特定环境中所有微生物的基因组集合。人体微生物组研究表明，肠道微生物与多种健康状况相关，包括肥胖、炎症性肠病和某些精神疾病。</p>
                                </div>
                                
                                <div class="info-card">
                                    <h4>单细胞基因组学</h4>
                                    <p>分析单个细胞的基因组或转录组，揭示细胞间的异质性。这项技术在癌症研究中特别有价值，可以揭示肿瘤内部的基因多样性，解释治疗抵抗的机制。</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="interactive-module">
                            <h3><i class="fas fa-cogs"></i> 基因组学在生物技术中的应用</h3>
                            
                            <div class="two-column">
                                <div class="info-card">
                                    <h4><i class="fas fa-medkit"></i> 医学应用</h4>
                                    <ul>
                                        <li><strong>诊断</strong>：通过基因检测诊断遗传疾病</li>
                                        <li><strong>预测</strong>：评估疾病风险和药物反应</li>
                                        <li><strong>个性化治疗</strong>：根据基因型优化治疗方案</li>
                                        <li><strong>靶向治疗</strong>：设计针对特定基因变异的药物</li>
                                    </ul>
                                </div>
                                
                                <div class="info-card">
                                    <h4><i class="fas fa-seedling"></i> 农业应用</h4>
                                    <ul>
                                        <li><strong>基因工程作物</strong>：抗病虫害、增强营养价值</li>
                                        <li><strong>分子育种</strong>：通过基因标记辅助选择加速育种</li>
                                        <li><strong>农作物改良</strong>：适应气候变化，提高产量</li>
                                        <li><strong>畜牧业</strong>：优化动物生产性状，抗病性</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <div class="highlight-box">
                                <h4><i class="fas fa-lightbulb"></i> 合成生物学：从阅读到编写基因组</h4>
                                <p>合成生物学旨在设计和构建新的生物功能和系统。2010年，科学家创造了第一个具有合成基因组的细菌，开启了人工设计生命的新时代。合成生物学的应用包括设计微生物生产生物燃料、药物前体和降解污染物等。合成基因组项目正在开发最小基因组，以理解生命所必需的基本元素。</p>
                            </div>
                        </div>
                        
                        <div class="sequence-analyzer">
                            <h3><i class="fas fa-tools"></i> 基因组分析实践</h3>
                            <p>在下面尝试使用一些基本的序列分析工具：</p>
                            
                            <div class="gene-expression">
                                <div class="expression-steps">
                                    <div class="expression-step">
                                        <h4><i class="fas fa-search"></i> 序列相似性搜索</h4>
                                        <p>输入DNA序列，在数据库中查找相似序列，探索其可能功能。</p>
                                        <div class="trait-controls">
                                            <a href="https://blast.ncbi.nlm.nih.gov/Blast.cgi" target="_blank" class="action-btn"><i class="fas fa-external-link-alt"></i> 使用BLAST</a>
                                        </div>
                                    </div>
                                    
                                    <div class="expression-step">
                                        <h4><i class="fas fa-code-branch"></i> 系统发育分析</h4>
                                        <p>比较不同物种的同源基因，构建进化树，了解物种关系。</p>
                                        <div class="trait-controls">
                                            <a href="https://www.megasoftware.net/" target="_blank" class="action-btn"><i class="fas fa-external-link-alt"></i> 了解MEGA工具</a>
                                        </div>
                                    </div>
                                    
                                    <div class="expression-step">
                                        <h4><i class="fas fa-project-diagram"></i> 功能注释</h4>
                                        <p>预测基因功能，分析蛋白质结构域，探索生物通路。</p>
                                        <div class="trait-controls">
                                            <a href="https://www.ebi.ac.uk/interpro/" target="_blank" class="action-btn"><i class="fas fa-external-link-alt"></i> 使用InterPro</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="results-summary">
                                <h4><i class="fas fa-database"></i> 主要基因组数据库</h4>
                                <div class="three-column">
                                    <div class="info-card">
                                        <h4>NCBI GenBank</h4>
                                        <p>美国国家生物技术信息中心维护的公共DNA序列数据库，包含来自数百万个物种的序列。</p>
                                        <a href="https://www.ncbi.nlm.nih.gov/genbank/" target="_blank" class="resource-link"><i class="fas fa-external-link-alt"></i> 访问GenBank</a>
                                    </div>
                                    
                                    <div class="info-card">
                                        <h4>Ensembl</h4>
                                        <p>欧洲生物信息学研究所的基因组浏览器，提供基因注释、变异和比较基因组学数据。</p>
                                        <a href="https://www.ensembl.org/" target="_blank" class="resource-link"><i class="fas fa-external-link-alt"></i> 访问Ensembl</a>
                                    </div>
                                    
                                    <div class="info-card">
                                        <h4>UCSC基因组浏览器</h4>
                                        <p>加州大学圣克鲁兹分校开发的工具，用于可视化和探索基因组数据。</p>
                                        <a href="https://genome.ucsc.edu/" target="_blank" class="resource-link"><i class="fas fa-external-link-alt"></i> 访问UCSC</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="quiz-container" id="genomics-quiz">
                            <h3><i class="fas fa-question-circle"></i> 测试你的知识</h3>
                            <div class="quiz-question">
                                <p><strong>1. 人类基因组计划完成于哪一年？</strong></p>
                                <div class="quiz-options">
                                    <div class="quiz-option">1995年</div>
                                    <div class="quiz-option">2000年</div>
                                    <div class="quiz-option" data-correct="true">2003年</div>
                                    <div class="quiz-option">2010年</div>
                                </div>
                                <div class="quiz-feedback"></div>
                            </div>
                            
                            <div class="quiz-question">
                                <p><strong>2. 下列哪项不是生物信息学的主要应用领域？</strong></p>
                                <div class="quiz-options">
                                    <div class="quiz-option">基因组注释</div>
                                    <div class="quiz-option">序列比对</div>
                                    <div class="quiz-option">系统发育分析</div>
                                    <div class="quiz-option" data-correct="true">实验室样本管理</div>
                                </div>
                                <div class="quiz-feedback"></div>
                            </div>
                            
                            <div class="quiz-question">
                                <p><strong>3. BLAST工具主要用于：</strong></p>
                                <div class="quiz-options">
                                    <div class="quiz-option" data-correct="true">在数据库中搜索相似序列</div>
                                    <div class="quiz-option">预测蛋白质结构</div>
                                    <div class="quiz-option">基因组装</div>
                                    <div class="quiz-option">检测DNA甲基化</div>
                                </div>
                                <div class="quiz-feedback"></div>
                            </div>
                            
                            <div class="quiz-question">
                                <p><strong>4. 比较基因组学的主要目的是：</strong></p>
                                <div class="quiz-options">
                                    <div class="quiz-option">测序新的基因组</div>
                                    <div class="quiz-option" data-correct="true">通过比较不同物种的基因组研究进化关系</div>
                                    <div class="quiz-option">设计合成基因组</div>
                                    <div class="quiz-option">分析单细胞RNA表达</div>
                                </div>
                                <div class="quiz-feedback"></div>
                            </div>
                            
                            <button class="action-btn" id="check-genomics-quiz"><i class="fas fa-check"></i> 检查答案</button>
                        </div>
                        
                        <div class="definition-box">
                            <h4><i class="fas fa-book"></i> 进一步学习资源</h4>
                            <p>探索更多关于基因组学与生物信息学的资源:</p>
                            <div>
                                <a href="https://www.coursera.org/learn/genomics-bioinformatics" class="resource-link" target="_blank"><i class="fas fa-external-link-alt"></i> Coursera: 基因组学导论</a>
                                <a href="https://www.edx.org/course/introduction-to-bioinformatics" class="resource-link" target="_blank"><i class="fas fa-external-link-alt"></i> edX: 生物信息学入门</a>
                                <a href="https://rosalind.info/problems/locations/" class="resource-link" target="_blank"><i class="fas fa-external-link-alt"></i> Rosalind: 生物信息学编程练习</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="main-footer">
        <div class="container">
            <div class="footer-content">
                <p class="copyright-text">study-llm.me域名为Alex所有。保留所有权利。</p>
            </div>
        </div>
    </footer>

    <!-- JavaScript会在后续步骤中更新 -->
    <script src="../../js/common.js"></script>
    <script src="../../js/navigation.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 标签页切换
            const tabs = document.querySelectorAll('.genetics-tab');
            const panels = document.querySelectorAll('.tab-panel');
            
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const targetId = tab.getAttribute('data-tab');
                    
                    // 更新标签状态
                    tabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    
                    // 更新面板状态
                    panels.forEach(panel => {
                        panel.classList.remove('active');
                        if (panel.id === targetId + '-panel') {
                            panel.classList.add('active');
                        }
                    });
                });
            });
            
            // 初始化所有测验
            initializeQuizzes();
            
            // 初始化遗传交配模拟
            initializeInheritanceSimulation();
            
            // 初始化DNA序列分析
            initializeSequenceAnalysis();
            
            // 初始化突变分析
            initializeMutationAnalysis();
        });
        
        // 测验功能
        function initializeQuizzes() {
            const quizIds = ['inheritance-quiz', 'expression-quiz', 'mutation-quiz', 'genomics-quiz'];
            
            quizIds.forEach(quizId => {
                const quizContainer = document.getElementById(quizId);
                if (quizContainer) {
                    // 为每个选项添加点击事件
                    quizContainer.querySelectorAll('.quiz-option').forEach(option => {
                        option.addEventListener('click', () => {
                            // 移除同组中其他选项的选中状态
                            const questionContainer = option.closest('.quiz-question');
                            questionContainer.querySelectorAll('.quiz-option').forEach(opt => {
                                opt.classList.remove('selected');
                            });
                            
                            // 选中当前选项
                            option.classList.add('selected');
                        });
                    });
                    
                    // 绑定检查答案按钮
                    const checkBtn = document.getElementById('check-' + quizId);
                    if (checkBtn) {
                        checkBtn.addEventListener('click', () => {
                            checkQuizAnswers(quizId);
                        });
                    }
                }
            });
        }
        
        function checkQuizAnswers(quizId) {
            const quizContainer = document.getElementById(quizId);
            if (!quizContainer) return;
            
            let correctCount = 0;
            const totalQuestions = quizContainer.querySelectorAll('.quiz-question').length;
            
            quizContainer.querySelectorAll('.quiz-question').forEach(question => {
                const selectedOption = question.querySelector('.quiz-option.selected');
                const correctOption = question.querySelector('.quiz-option[data-correct="true"]');
                const feedbackEl = question.querySelector('.quiz-feedback');
                
                // 重置之前的结果
                question.querySelectorAll('.quiz-option').forEach(opt => {
                    opt.classList.remove('correct', 'incorrect');
                });
                
                feedbackEl.classList.remove('correct', 'incorrect');
                feedbackEl.style.display = 'none';
                
                if (!selectedOption) {
                    feedbackEl.textContent = '请选择一个选项';
                    feedbackEl.classList.add('incorrect');
                    feedbackEl.style.display = 'block';
                    return;
                }
                
                if (selectedOption === correctOption) {
                    selectedOption.classList.add('correct');
                    feedbackEl.textContent = '正确！';
                    feedbackEl.classList.add('correct');
                    correctCount++;
                } else {
                    selectedOption.classList.add('incorrect');
                    correctOption.classList.add('correct');
                    feedbackEl.textContent = '不正确，正确答案已标记。';
                    feedbackEl.classList.add('incorrect');
                }
                
                feedbackEl.style.display = 'block';
            });
            
            // 显示总分
            let resultEl = quizContainer.querySelector('.quiz-result');
            if (!resultEl) {
                resultEl = document.createElement('div');
                resultEl.className = 'quiz-result highlight-box';
                quizContainer.appendChild(resultEl);
            }
            
            resultEl.innerHTML = `<h4><i class="fas fa-award"></i> 测验结果</h4>
                <p>你答对了 ${correctCount} 道题目，共 ${totalQuestions} 道题目。</p>
                <p>得分: ${Math.round((correctCount / totalQuestions) * 100)}%</p>`;
        }
        
        // 初始化遗传交配模拟
        function initializeInheritanceSimulation() {
            const calculateBtn = document.getElementById('calculate-cross');
            const resetBtn = document.getElementById('reset-cross');
            const switchTraitsBtn = document.getElementById('switch-traits');
            
            if (calculateBtn) {
                calculateBtn.addEventListener('click', calculateCross);
            }
            
            if (resetBtn) {
                resetBtn.addEventListener('click', resetCross);
            }
            
            if (switchTraitsBtn) {
                switchTraitsBtn.addEventListener('click', switchTraits);
            }
            
            // 亲本基因型控制按钮
            const p1HomoBtn = document.getElementById('p1-homozygous');
            const p1HeteroBtn = document.getElementById('p1-heterozygous');
            const p2HomoBtn = document.getElementById('p2-homozygous');
            const p2HeteroBtn = document.getElementById('p2-heterozygous');
            
            if (p1HomoBtn) {
                p1HomoBtn.addEventListener('click', () => {
                    const allele = document.getElementById('p1-allele1').value || 'A';
                    document.getElementById('p1-allele1').value = allele;
                    document.getElementById('p1-allele2').value = allele;
                    updateGenotypeDisplays();
                    calculateCross();
                });
            }
            
            if (p1HeteroBtn) {
                p1HeteroBtn.addEventListener('click', () => {
                    const allele1 = document.getElementById('p1-allele1').value || 'A';
                    document.getElementById('p1-allele1').value = allele1.toUpperCase();
                    document.getElementById('p1-allele2').value = allele1.toLowerCase();
                    updateGenotypeDisplays();
                    calculateCross();
                });
            }
            
            if (p2HomoBtn) {
                p2HomoBtn.addEventListener('click', () => {
                    const allele = document.getElementById('p2-allele1').value || 'A';
                    document.getElementById('p2-allele1').value = allele;
                    document.getElementById('p2-allele2').value = allele;
                    updateGenotypeDisplays();
                    calculateCross();
                });
            }
            
            if (p2HeteroBtn) {
                p2HeteroBtn.addEventListener('click', () => {
                    const allele1 = document.getElementById('p2-allele1').value || 'A';
                    document.getElementById('p2-allele1').value = allele1.toUpperCase();
                    document.getElementById('p2-allele2').value = allele1.toLowerCase();
                    updateGenotypeDisplays();
                    calculateCross();
                });
            }
            
            // 监听基因型输入变化
            ['p1-allele1', 'p1-allele2', 'p2-allele1', 'p2-allele2'].forEach(id => {
                const inputEl = document.getElementById(id);
                if (inputEl) {
                    inputEl.addEventListener('input', updateGenotypeDisplays);
                }
            });
            
            // 初始化显示
            if (document.getElementById('p1-genotype')) {
                updateGenotypeDisplays();
                calculateCross();
            }
        }
        
        function updateGenotypeDisplays() {
            const p1a1El = document.getElementById('p1-allele1');
            const p1a2El = document.getElementById('p1-allele2');
            const p2a1El = document.getElementById('p2-allele1');
            const p2a2El = document.getElementById('p2-allele2');
            
            if (!p1a1El || !p1a2El || !p2a1El || !p2a2El) return;
            
            const p1a1 = p1a1El.value || 'A';
            const p1a2 = p1a2El.value || 'a';
            const p2a1 = p2a1El.value || 'A';
            const p2a2 = p2a2El.value || 'a';

            document.getElementById('p1-genotype').textContent = p1a1 + p1a2;
            document.getElementById('p2-genotype').textContent = p2a1 + p2a2;

            document.getElementById('p1-phenotype').textContent = getPhenotype(p1a1, p1a2);
            document.getElementById('p2-phenotype').textContent = getPhenotype(p2a1, p2a2);
        }
        
        function getPhenotype(allele1, allele2) {
            // 判断是否为不同字母（如B和b）
            if (allele1.toLowerCase() === allele2.toLowerCase()) {
                // 纯合子
                return allele1 === allele1.toUpperCase() ? '显性' : '隐性';
            } else {
                // 杂合子
                const dominant = allele1.toUpperCase();
                
                // 判断是否为共显性（如A和B）
                if (allele1.toUpperCase() !== allele2.toUpperCase() && 
                    allele1 === allele1.toUpperCase() && 
                    allele2 === allele2.toUpperCase()) {
                    return '共显性';
                }
                
                // 是否为不完全显性
                if (allele1.toUpperCase() === 'R' || allele2.toUpperCase() === 'R') {
                    if ((allele1 === 'R' && allele2 === 'r') || (allele1 === 'r' && allele2 === 'R')) {
                        return '不完全显性';
                    }
                }
                
                // 默认为显性
                if (allele1 === dominant || allele2 === dominant) {
                    return '显性';
                } else {
                    return '隐性';
                }
            }
        }
        
        function calculateCross() {
            const p1a1El = document.getElementById('p1-allele1');
            const p1a2El = document.getElementById('p1-allele2');
            const p2a1El = document.getElementById('p2-allele1');
            const p2a2El = document.getElementById('p2-allele2');
            
            if (!p1a1El || !p1a2El || !p2a1El || !p2a2El) return;
            
            const p1a1 = p1a1El.value || 'A';
            const p1a2 = p1a2El.value || 'a';
            const p2a1 = p2a1El.value || 'A';
            const p2a2 = p2a2El.value || 'a';

            // 生成棋盘法
            const gametes1 = [p1a1, p1a2];
            const gametes2 = [p2a1, p2a2];
            
            const grid = document.getElementById('punnett-grid');
            if (grid) {
                grid.innerHTML = `
                    <div class="punnett-cell punnett-header"></div>
                    <div class="punnett-cell punnett-header">${gametes2[0]}</div>
                    <div class="punnett-cell punnett-header">${gametes2[1]}</div>
                    <div class="punnett-cell punnett-header">${gametes1[0]}</div>
                    <div class="punnett-cell punnett-result">${gametes1[0]}${gametes2[0]}</div>
                    <div class="punnett-cell punnett-result">${gametes1[0]}${gametes2[1]}</div>
                    <div class="punnett-cell punnett-header">${gametes1[1]}</div>
                    <div class="punnett-cell punnett-result">${gametes1[1]}${gametes2[0]}</div>
                    <div class="punnett-cell punnett-result">${gametes1[1]}${gametes2[1]}</div>
                `;
            }

            // 计算比例
            const offspring = [
                gametes1[0] + gametes2[0],
                gametes1[0] + gametes2[1],
                gametes1[1] + gametes2[0],
                gametes1[1] + gametes2[1]
            ];

            calculateRatios(offspring);
        }
        
        function calculateRatios(offspring) {
            const ratioDisplay = document.getElementById('ratio-display');
            if (!ratioDisplay) return;
            
            const genotypeCounts = {};
            const phenotypeCounts = { '显性': 0, '隐性': 0, '不完全显性': 0, '共显性': 0 };

            offspring.forEach(genotype => {
                // 对基因型排序，以便AA和AA被算作同一类型
                const sorted = genotype.split('').sort().join('');
                genotypeCounts[sorted] = (genotypeCounts[sorted] || 0) + 1;

                // 计算表现型
                const phenotype = getPhenotype(genotype[0], genotype[1]);
                phenotypeCounts[phenotype]++;
            });

            // 创建基因型比例字符串
            let genotypeRatio = Object.values(genotypeCounts).join(':');
            
            // 创建表现型比例字符串，忽略计数为0的表现型
            let phenotypeRatioArray = [];
            for (const [phenotype, count] of Object.entries(phenotypeCounts)) {
                if (count > 0) {
                    phenotypeRatioArray.push({phenotype, count});
                }
            }
            
            // 按计数排序
            phenotypeRatioArray.sort((a, b) => b.count - a.count);
            
            // 构建表现型比例字符串
            const phenotypeRatio = phenotypeRatioArray.map(item => item.count).join(':');
            const phenotypeList = phenotypeRatioArray.map(item => `${item.phenotype} (${item.count})`).join('、');

            ratioDisplay.innerHTML = `
                <div class="ratio-item">
                    <div class="ratio-value">${genotypeRatio}</div>
                    <div class="ratio-label">基因型比例</div>
                </div>
                <div class="ratio-item">
                    <div class="ratio-value">${phenotypeRatio}</div>
                    <div class="ratio-label">表现型比例</div>
                </div>
            `;
        }
        
        function resetCross() {
            const p1a1El = document.getElementById('p1-allele1');
            const p1a2El = document.getElementById('p1-allele2');
            const p2a1El = document.getElementById('p2-allele1');
            const p2a2El = document.getElementById('p2-allele2');
            
            if (!p1a1El || !p1a2El || !p2a1El || !p2a2El) return;
            
            p1a1El.value = 'A';
            p1a2El.value = 'a';
            p2a1El.value = 'A';
            p2a2El.value = 'a';
            
            updateGenotypeDisplays();
            calculateCross();
            
            // 更新当前遗传模式显示
            const patternEl = document.getElementById('inheritance-pattern');
            if (patternEl) {
                patternEl.innerHTML = '当前展示的是<strong>显性/隐性遗传</strong>模式';
            }
        }
        
        function switchTraits() {
            // 在不同性状之间轮换
            const traits = [
                { allele1: 'A', allele2: 'a', name: '显性/隐性遗传' },
                { allele1: 'R', allele2: 'r', name: '不完全显性遗传' },
                { allele1: 'B', allele2: 'b', name: '共显性遗传' }
            ];
            
            // 获取当前性状
            const currentTrait = document.getElementById('p1-allele1').value.toUpperCase();
            let nextTraitIndex = 0;
            
            for (let i = 0; i < traits.length; i++) {
                if (traits[i].allele1 === currentTrait) {
                    nextTraitIndex = (i + 1) % traits.length;
                    break;
                }
            }
            
            const nextTrait = traits[nextTraitIndex];
            
            // 更新亲本基因型
            document.getElementById('p1-allele1').value = nextTrait.allele1;
            document.getElementById('p1-allele2').value = nextTrait.allele2;
            document.getElementById('p2-allele1').value = nextTrait.allele1;
            document.getElementById('p2-allele2').value = nextTrait.allele2;
            
            // 更新当前遗传模式显示
            const patternEl = document.getElementById('inheritance-pattern');
            if (patternEl) {
                patternEl.innerHTML = `当前展示的是<strong>${nextTrait.name}</strong>模式`;
            }
            
            updateGenotypeDisplays();
            calculateCross();
        }
        
        // 序列分析功能
        function initializeSequenceAnalysis() {
            const analyzeBtn = document.getElementById('analyze-sequence');
            const randomBtn = document.getElementById('random-sequence');
            const resetBtn = document.getElementById('reset-expression');
            
            if (analyzeBtn) {
                analyzeBtn.addEventListener('click', analyzeSequence);
            }
            
            if (randomBtn) {
                randomBtn.addEventListener('click', generateRandomSequence);
            }
            
            if (resetBtn) {
                resetBtn.addEventListener('click', () => {
                    document.getElementById('dna-sequence').value = 'ATGGCATAA';
                    analyzeSequence();
                });
            }
            
            // 初始分析
            if (document.getElementById('dna-sequence')) {
                analyzeSequence();
            }
        }
        
        function generateRandomSequence() {
            const bases = ['A', 'T', 'G', 'C'];
            let sequence = '';
            
            // 确保序列长度是3的倍数，方便翻译
            for (let i = 0; i < 15; i++) {
                sequence += bases[Math.floor(Math.random() * bases.length)];
            }
            
            // 确保序列以起始密码子开始
            sequence = 'ATG' + sequence.substring(3);
            
            document.getElementById('dna-sequence').value = sequence;
            analyzeSequence();
        }
        
        function analyzeSequence() {
            const dnaSequenceEl = document.getElementById('dna-sequence');
            if (!dnaSequenceEl) return;
            
            const dnaSeq = dnaSequenceEl.value.toUpperCase().replace(/[^ATGC]/g, '');
            
            // 转录：DNA → mRNA
            const mrnaSeq = dnaSeq.replace(/T/g, 'U');
            
            // 翻译：mRNA → 蛋白质
            let proteinSeq = '';
            for (let i = 0; i < mrnaSeq.length - 2; i += 3) {
                const codon = mrnaSeq.substr(i, 3);
                if (codon.length === 3) {
                    const aminoAcid = translateCodon(codon) || 'X';
                    proteinSeq += aminoAcid + '-';
                    
                    // 如果遇到终止密码子，停止翻译
                    if (aminoAcid === '*') break;
                }
            }
            proteinSeq = proteinSeq.slice(0, -1); // 移除最后的连字符

            document.getElementById('dna-result').textContent = dnaSeq;
            document.getElementById('mrna-result').textContent = mrnaSeq;
            document.getElementById('protein-result').textContent = proteinSeq;
        }
        
        function translateCodon(codon) {
            const geneticCode = {
                // 第一位为U的密码子
                'UUU': 'Phe', 'UUC': 'Phe', 'UUA': 'Leu', 'UUG': 'Leu',
                'UCU': 'Ser', 'UCC': 'Ser', 'UCA': 'Ser', 'UCG': 'Ser',
                'UAU': 'Tyr', 'UAC': 'Tyr', 'UAA': '*', 'UAG': '*',
                'UGU': 'Cys', 'UGC': 'Cys', 'UGA': '*', 'UGG': 'Trp',
                
                // 第一位为C的密码子
                'CUU': 'Leu', 'CUC': 'Leu', 'CUA': 'Leu', 'CUG': 'Leu',
                'CCU': 'Pro', 'CCC': 'Pro', 'CCA': 'Pro', 'CCG': 'Pro',
                'CAU': 'His', 'CAC': 'His', 'CAA': 'Gln', 'CAG': 'Gln',
                'CGU': 'Arg', 'CGC': 'Arg', 'CGA': 'Arg', 'CGG': 'Arg',
                
                // 第一位为A的密码子
                'AUU': 'Ile', 'AUC': 'Ile', 'AUA': 'Ile', 'AUG': 'Met',
                'ACU': 'Thr', 'ACC': 'Thr', 'ACA': 'Thr', 'ACG': 'Thr',
                'AAU': 'Asn', 'AAC': 'Asn', 'AAA': 'Lys', 'AAG': 'Lys',
                'AGU': 'Ser', 'AGC': 'Ser', 'AGA': 'Arg', 'AGG': 'Arg',
                
                // 第一位为G的密码子
                'GUU': 'Val', 'GUC': 'Val', 'GUA': 'Val', 'GUG': 'Val',
                'GCU': 'Ala', 'GCC': 'Ala', 'GCA': 'Ala', 'GCG': 'Ala',
                'GAU': 'Asp', 'GAC': 'Asp', 'GAA': 'Glu', 'GAG': 'Glu',
                'GGU': 'Gly', 'GGC': 'Gly', 'GGA': 'Gly', 'GGG': 'Gly'
            };
            
            return geneticCode[codon];
        }
        
        // 突变分析功能
        function initializeMutationAnalysis() {
            const compareBtn = document.getElementById('compare-sequences');
            const findMutationsBtn = document.getElementById('find-mutations');
            const clearBtn = document.getElementById('clear-analysis');
            
            // 突变模拟按钮
            const showSubstitutionBtn = document.getElementById('show-substitution');
            const showInsertionBtn = document.getElementById('show-insertion');
            const showDeletionBtn = document.getElementById('show-deletion');
            
            if (compareBtn) {
                compareBtn.addEventListener('click', compareSequences);
            }
            
            if (findMutationsBtn) {
                findMutationsBtn.addEventListener('click', findMutations);
            }
            
            if (clearBtn) {
                clearBtn.addEventListener('click', clearAnalysis);
            }
            
            if (showSubstitutionBtn) {
                showSubstitutionBtn.addEventListener('click', () => simulateMutation('substitution'));
            }
            
            if (showInsertionBtn) {
                showInsertionBtn.addEventListener('click', () => simulateMutation('insertion'));
            }
            
            if (showDeletionBtn) {
                showDeletionBtn.addEventListener('click', () => simulateMutation('deletion'));
            }
        }
        
        function compareSequences() {
            const seq1El = document.getElementById('sequence1');
            const seq2El = document.getElementById('sequence2');
            const resultsEl = document.getElementById('comparison-results');
            
            if (!seq1El || !seq2El || !resultsEl) return;
            
            const seq1 = seq1El.value.toUpperCase().replace(/[^ATGC]/g, '');
            const seq2 = seq2El.value.toUpperCase().replace(/[^ATGC]/g, '');
            
            if (seq1.length === 0 || seq2.length === 0) {
                alert('请输入有效的DNA序列');
                return;
            }

            const maxLength = Math.max(seq1.length, seq2.length);
            let matches = 0;
            let differences = [];

            for (let i = 0; i < maxLength; i++) {
                const base1 = seq1[i] || '-';
                const base2 = seq2[i] || '-';
                
                if (base1 === base2) {
                    matches++;
                } else {
                    differences.push(`位置${i + 1}: ${base1} → ${base2}`);
                }
            }

            const similarity = ((matches / maxLength) * 100).toFixed(1);
            
            resultsEl.innerHTML = `
                <h4>序列比较结果</h4>
                <p><strong>相似度:</strong> ${similarity}%</p>
                <p><strong>匹配位点:</strong> ${matches}/${maxLength}</p>
                <p><strong>差异位点:</strong> ${differences.length}</p>
                ${differences.length > 0 ? `<p><strong>差异详情:</strong><br>${differences.slice(0, 5).join('<br>')}</p>` : ''}
            `;
        }

        function findMutations() {
            const seq1El = document.getElementById('sequence1');
            const seq2El = document.getElementById('sequence2');
            const resultsEl = document.getElementById('comparison-results');
            
            if (!seq1El || !seq2El || !resultsEl) return;
            
            const seq1 = seq1El.value.toUpperCase().replace(/[^ATGC]/g, '');
            const seq2 = seq2El.value.toUpperCase().replace(/[^ATGC]/g, '');
            
            if (seq1.length === 0 || seq2.length === 0) {
                alert('请输入有效的DNA序列');
                return;
            }

            const mutations = [];
            const minLength = Math.min(seq1.length, seq2.length);

            for (let i = 0; i < minLength; i++) {
                if (seq1[i] !== seq2[i]) {
                    let mutationType = '点突变';
                    if (seq1[i] === 'A' && seq2[i] === 'G' || seq1[i] === 'G' && seq2[i] === 'A' ||
                        seq1[i] === 'C' && seq2[i] === 'T' || seq1[i] === 'T' && seq2[i] === 'C') {
                        mutationType = '转换';
                    } else {
                        mutationType = '颠换';
                    }
                    mutations.push(`位置${i + 1}: ${seq1[i]}→${seq2[i]} (${mutationType})`);
                }
            }
            
            // 检查插入或缺失
            if (seq1.length !== seq2.length) {
                if (seq1.length > seq2.length) {
                    mutations.push(`可能的缺失: 序列2比序列1短${seq1.length - seq2.length}个碱基`);
                } else {
                    mutations.push(`可能的插入: 序列2比序列1长${seq2.length - seq1.length}个碱基`);
                }
            }

            resultsEl.innerHTML = `
                <h4>突变分析结果</h4>
                <p><strong>检测到突变:</strong> ${mutations.length}个</p>
                ${mutations.length > 0 ? `<p><strong>突变详情:</strong><br>${mutations.slice(0, 10).join('<br>')}</p>` : '<p>未检测到突变</p>'}
            `;
        }

        function clearAnalysis() {
            const seq1El = document.getElementById('sequence1');
            const seq2El = document.getElementById('sequence2');
            const resultsEl = document.getElementById('comparison-results');
            
            if (!seq1El || !seq2El || !resultsEl) return;
            
            seq1El.value = '';
            seq2El.value = '';
            resultsEl.innerHTML = `
                <h4>分析结果</h4>
                <p>点击上方按钮开始序列分析</p>
            `;
        }
        
        function simulateMutation(type) {
            // 准备模拟突变的DNA序列
            const originalDna = 'ATGGCAGGTTCAACTGAGTAA';
            const originalMrna = originalDna.replace(/T/g, 'U');
            let mutatedDna = '';
            let mutatedMrna = '';
            let mutationDescription = '';
            let effectDescription = '';
            
            switch (type) {
                case 'substitution':
                    // 替换第8个位置的核苷酸
                    mutatedDna = originalDna.substring(0, 7) + 'A' + originalDna.substring(8);
                    mutatedMrna = mutatedDna.replace(/T/g, 'U');
                    mutationDescription = '替换突变：在第8个位置将T替换为A';
                    
                    // 分析对蛋白质的影响
                    const originalCodon = originalDna.substring(6, 9);
                    const mutatedCodon = mutatedDna.substring(6, 9);
                    const originalAA = translateCodon(originalCodon.replace(/T/g, 'U')) || 'X';
                    const mutatedAA = translateCodon(mutatedCodon.replace(/T/g, 'U')) || 'X';
                    
                    if (originalAA === mutatedAA) {
                        effectDescription = `同义突变：密码子从${originalCodon}变为${mutatedCodon}，氨基酸保持不变(${originalAA})。`;
                    } else if (mutatedAA === '*') {
                        effectDescription = `无义突变：密码子从${originalCodon}变为${mutatedCodon}，导致提前终止(${originalAA}→${mutatedAA})。`;
                    } else {
                        effectDescription = `错义突变：密码子从${originalCodon}变为${mutatedCodon}，氨基酸从${originalAA}变为${mutatedAA}。`;
                    }
                    break;
                
                case 'insertion':
                    // 在第9个位置后插入一个A
                    mutatedDna = originalDna.substring(0, 9) + 'A' + originalDna.substring(9);
                    mutatedMrna = mutatedDna.replace(/T/g, 'U');
                    mutationDescription = '插入突变：在第9个位置后插入A';
                    effectDescription = '移码突变：插入导致阅读框架改变，影响后续所有氨基酸，可能导致蛋白质功能完全丧失。';
                    break;
                
                case 'deletion':
                    // 删除第7个位置的核苷酸
                    mutatedDna = originalDna.substring(0, 6) + originalDna.substring(7);
                    mutatedMrna = mutatedDna.replace(/T/g, 'U');
                    mutationDescription = '缺失突变：删除第7个位置的碱基';
                    effectDescription = '移码突变：缺失导致阅读框架改变，影响后续所有氨基酸，可能导致蛋白质功能完全丧失。';
                    break;
            }
            
            // 分析原始和突变序列的蛋白质产物
            let originalProtein = '';
            for (let i = 0; i < originalDna.length - 2; i += 3) {
                const codon = originalDna.substr(i, 3);
                if (codon.length === 3) {
                    const aa = translateCodon(codon.replace(/T/g, 'U')) || 'X';
                    originalProtein += aa + '-';
                    if (aa === '*') break; // 终止密码子
                }
            }
            originalProtein = originalProtein.slice(0, -1);
            
            let mutatedProtein = '';
            for (let i = 0; i < mutatedDna.length - 2; i += 3) {
                const codon = mutatedDna.substr(i, 3);
                if (codon.length === 3) {
                    const aa = translateCodon(codon.replace(/T/g, 'U')) || 'X';
                    mutatedProtein += aa + '-';
                    if (aa === '*') break; // 终止密码子
                }
            }
            mutatedProtein = mutatedProtein.slice(0, -1);
            
            alert(`突变模拟：${mutationDescription}\n\n原始DNA：${originalDna}\n突变DNA：${mutatedDna}\n\n原始蛋白质：${originalProtein}\n突变蛋白质：${mutatedProtein}\n\n影响：${effectDescription}`);
        }
    </script>
</body>
</html> 